/*! For license information please see main.50369ac6.js.LICENSE.txt */
!function(){var e={1694:function(e,t){var n;!function(){"use strict";var g={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var l=typeof n;if("string"===l||"number"===l)e.push(n);else if(Array.isArray(n)){if(n.length){var a=o.apply(null,n);a&&e.push(a)}}else if("object"===l){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var r in n)g.call(n,r)&&n[r]&&e.push(r)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},7473:function(e){e.exports="object"==typeof self?self.FormData:window.FormData},908:function(e,t,n){var g=n(8136)(n(7009),"DataView");e.exports=g},9676:function(e,t,n){var g=n(5403),o=n(2747),l=n(6037),a=n(4154),r=n(7728);function I(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var g=e[t];this.set(g[0],g[1])}}I.prototype.clear=g,I.prototype.delete=o,I.prototype.get=l,I.prototype.has=a,I.prototype.set=r,e.exports=I},8384:function(e,t,n){var g=n(3894),o=n(8699),l=n(4957),a=n(7184),r=n(7109);function I(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var g=e[t];this.set(g[0],g[1])}}I.prototype.clear=g,I.prototype.delete=o,I.prototype.get=l,I.prototype.has=a,I.prototype.set=r,e.exports=I},5797:function(e,t,n){var g=n(8136)(n(7009),"Map");e.exports=g},8059:function(e,t,n){var g=n(4086),o=n(9255),l=n(9186),a=n(3423),r=n(3739);function I(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var g=e[t];this.set(g[0],g[1])}}I.prototype.clear=g,I.prototype.delete=o,I.prototype.get=l,I.prototype.has=a,I.prototype.set=r,e.exports=I},8319:function(e,t,n){var g=n(8136)(n(7009),"Promise");e.exports=g},3924:function(e,t,n){var g=n(8136)(n(7009),"Set");e.exports=g},692:function(e,t,n){var g=n(8059),o=n(5774),l=n(1596);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new g;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=l,e.exports=a},2854:function(e,t,n){var g=n(8384),o=n(511),l=n(835),a=n(707),r=n(8832),I=n(5077);function i(e){var t=this.__data__=new g(e);this.size=t.size}i.prototype.clear=o,i.prototype.delete=l,i.prototype.get=a,i.prototype.has=r,i.prototype.set=I,e.exports=i},7197:function(e,t,n){var g=n(7009).Symbol;e.exports=g},6219:function(e,t,n){var g=n(7009).Uint8Array;e.exports=g},7091:function(e,t,n){var g=n(8136)(n(7009),"WeakMap");e.exports=g},4903:function(e){e.exports=function(e,t){for(var n=-1,g=null==e?0:e.length,o=0,l=[];++n<g;){var a=e[n];t(a,n,e)&&(l[o++]=a)}return l}},7538:function(e,t,n){var g=n(6478),o=n(4963),l=n(3629),a=n(5174),r=n(6800),I=n(9102),i=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=l(e),C=!n&&o(e),c=!n&&!C&&a(e),u=!n&&!C&&!c&&I(e),s=n||C||c||u,d=s?g(e.length,String):[],A=d.length;for(var m in e)!t&&!i.call(e,m)||s&&("length"==m||c&&("offset"==m||"parent"==m)||u&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||r(m,A))||d.push(m);return d}},1705:function(e){e.exports=function(e,t){for(var n=-1,g=t.length,o=e.length;++n<g;)e[o+n]=t[n];return e}},7897:function(e){e.exports=function(e,t){for(var n=-1,g=null==e?0:e.length;++n<g;)if(t(e[n],n,e))return!0;return!1}},7112:function(e,t,n){var g=n(9231);e.exports=function(e,t){for(var n=e.length;n--;)if(g(e[n][0],t))return n;return-1}},1986:function(e,t,n){var g=n(1705),o=n(3629);e.exports=function(e,t,n){var l=t(e);return o(e)?l:g(l,n(e))}},9066:function(e,t,n){var g=n(7197),o=n(1587),l=n(3581),a=g?g.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):l(e)}},4906:function(e,t,n){var g=n(9066),o=n(3141);e.exports=function(e){return o(e)&&"[object Arguments]"==g(e)}},1848:function(e,t,n){var g=n(3355),o=n(3141);e.exports=function e(t,n,l,a,r){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!==t&&n!==n:g(t,n,l,a,e,r))}},3355:function(e,t,n){var g=n(2854),o=n(5305),l=n(2206),a=n(8078),r=n(8383),I=n(3629),i=n(5174),C=n(9102),c="[object Arguments]",u="[object Array]",s="[object Object]",d=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,A,m,b){var p=I(e),h=I(t),f=p?u:r(e),y=h?u:r(t),Z=(f=f==c?s:f)==s,v=(y=y==c?s:y)==s,G=f==y;if(G&&i(e)){if(!i(t))return!1;p=!0,Z=!1}if(G&&!Z)return b||(b=new g),p||C(e)?o(e,t,n,A,m,b):l(e,t,f,n,A,m,b);if(!(1&n)){var B=Z&&d.call(e,"__wrapped__"),S=v&&d.call(t,"__wrapped__");if(B||S){var V=B?e.value():e,W=S?t.value():t;return b||(b=new g),m(V,W,n,A,b)}}return!!G&&(b||(b=new g),a(e,t,n,A,m,b))}},6703:function(e,t,n){var g=n(4786),o=n(257),l=n(8092),a=n(7907),r=/^\[object .+?Constructor\]$/,I=Function.prototype,i=Object.prototype,C=I.toString,c=i.hasOwnProperty,u=RegExp("^"+C.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!l(e)||o(e))&&(g(e)?u:r).test(a(e))}},8150:function(e,t,n){var g=n(9066),o=n(4635),l=n(3141),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return l(e)&&o(e.length)&&!!a[g(e)]}},3654:function(e,t,n){var g=n(2936),o=n(8836),l=Object.prototype.hasOwnProperty;e.exports=function(e){if(!g(e))return o(e);var t=[];for(var n in Object(e))l.call(e,n)&&"constructor"!=n&&t.push(n);return t}},6478:function(e){e.exports=function(e,t){for(var n=-1,g=Array(e);++n<e;)g[n]=t(n);return g}},821:function(e,t,n){var g=n(6050),o=/^\s+/;e.exports=function(e){return e?e.slice(0,g(e)+1).replace(o,""):e}},6194:function(e){e.exports=function(e){return function(t){return e(t)}}},75:function(e){e.exports=function(e,t){return e.has(t)}},5525:function(e,t,n){var g=n(7009)["__core-js_shared__"];e.exports=g},5305:function(e,t,n){var g=n(692),o=n(7897),l=n(75);e.exports=function(e,t,n,a,r,I){var i=1&n,C=e.length,c=t.length;if(C!=c&&!(i&&c>C))return!1;var u=I.get(e),s=I.get(t);if(u&&s)return u==t&&s==e;var d=-1,A=!0,m=2&n?new g:void 0;for(I.set(e,t),I.set(t,e);++d<C;){var b=e[d],p=t[d];if(a)var h=i?a(p,b,d,t,e,I):a(b,p,d,e,t,I);if(void 0!==h){if(h)continue;A=!1;break}if(m){if(!o(t,(function(e,t){if(!l(m,t)&&(b===e||r(b,e,n,a,I)))return m.push(t)}))){A=!1;break}}else if(b!==p&&!r(b,p,n,a,I)){A=!1;break}}return I.delete(e),I.delete(t),A}},2206:function(e,t,n){var g=n(7197),o=n(6219),l=n(9231),a=n(5305),r=n(234),I=n(2230),i=g?g.prototype:void 0,C=i?i.valueOf:void 0;e.exports=function(e,t,n,g,i,c,u){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!c(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return l(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=r;case"[object Set]":var d=1&g;if(s||(s=I),e.size!=t.size&&!d)return!1;var A=u.get(e);if(A)return A==t;g|=2,u.set(e,t);var m=a(s(e),s(t),g,i,c,u);return u.delete(e),m;case"[object Symbol]":if(C)return C.call(e)==C.call(t)}return!1}},8078:function(e,t,n){var g=n(8248),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,l,a,r){var I=1&n,i=g(e),C=i.length;if(C!=g(t).length&&!I)return!1;for(var c=C;c--;){var u=i[c];if(!(I?u in t:o.call(t,u)))return!1}var s=r.get(e),d=r.get(t);if(s&&d)return s==t&&d==e;var A=!0;r.set(e,t),r.set(t,e);for(var m=I;++c<C;){var b=e[u=i[c]],p=t[u];if(l)var h=I?l(p,b,u,t,e,r):l(b,p,u,e,t,r);if(!(void 0===h?b===p||a(b,p,n,l,r):h)){A=!1;break}m||(m="constructor"==u)}if(A&&!m){var f=e.constructor,y=t.constructor;f==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof f&&f instanceof f&&"function"==typeof y&&y instanceof y||(A=!1)}return r.delete(e),r.delete(t),A}},1032:function(e,t,n){var g="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=g},8248:function(e,t,n){var g=n(1986),o=n(5918),l=n(2742);e.exports=function(e){return g(e,l,o)}},2799:function(e,t,n){var g=n(5964);e.exports=function(e,t){var n=e.__data__;return g(t)?n["string"==typeof t?"string":"hash"]:n.map}},8136:function(e,t,n){var g=n(6703),o=n(40);e.exports=function(e,t){var n=o(e,t);return g(n)?n:void 0}},1587:function(e,t,n){var g=n(7197),o=Object.prototype,l=o.hasOwnProperty,a=o.toString,r=g?g.toStringTag:void 0;e.exports=function(e){var t=l.call(e,r),n=e[r];try{e[r]=void 0;var g=!0}catch(I){}var o=a.call(e);return g&&(t?e[r]=n:delete e[r]),o}},5918:function(e,t,n){var g=n(4903),o=n(8174),l=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,r=a?function(e){return null==e?[]:(e=Object(e),g(a(e),(function(t){return l.call(e,t)})))}:o;e.exports=r},8383:function(e,t,n){var g=n(908),o=n(5797),l=n(8319),a=n(3924),r=n(7091),I=n(9066),i=n(7907),C="[object Map]",c="[object Promise]",u="[object Set]",s="[object WeakMap]",d="[object DataView]",A=i(g),m=i(o),b=i(l),p=i(a),h=i(r),f=I;(g&&f(new g(new ArrayBuffer(1)))!=d||o&&f(new o)!=C||l&&f(l.resolve())!=c||a&&f(new a)!=u||r&&f(new r)!=s)&&(f=function(e){var t=I(e),n="[object Object]"==t?e.constructor:void 0,g=n?i(n):"";if(g)switch(g){case A:return d;case m:return C;case b:return c;case p:return u;case h:return s}return t}),e.exports=f},40:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},5403:function(e,t,n){var g=n(9620);e.exports=function(){this.__data__=g?g(null):{},this.size=0}},2747:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},6037:function(e,t,n){var g=n(9620),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(g){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},4154:function(e,t,n){var g=n(9620),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return g?void 0!==t[e]:o.call(t,e)}},7728:function(e,t,n){var g=n(9620);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=g&&void 0===t?"__lodash_hash_undefined__":t,this}},6800:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var g=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==g||"symbol"!=g&&t.test(e))&&e>-1&&e%1==0&&e<n}},5964:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},257:function(e,t,n){var g=n(5525),o=function(){var e=/[^.]+$/.exec(g&&g.keys&&g.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!o&&o in e}},2936:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},3894:function(e){e.exports=function(){this.__data__=[],this.size=0}},8699:function(e,t,n){var g=n(7112),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=g(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)}},4957:function(e,t,n){var g=n(7112);e.exports=function(e){var t=this.__data__,n=g(t,e);return n<0?void 0:t[n][1]}},7184:function(e,t,n){var g=n(7112);e.exports=function(e){return g(this.__data__,e)>-1}},7109:function(e,t,n){var g=n(7112);e.exports=function(e,t){var n=this.__data__,o=g(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},4086:function(e,t,n){var g=n(9676),o=n(8384),l=n(5797);e.exports=function(){this.size=0,this.__data__={hash:new g,map:new(l||o),string:new g}}},9255:function(e,t,n){var g=n(2799);e.exports=function(e){var t=g(this,e).delete(e);return this.size-=t?1:0,t}},9186:function(e,t,n){var g=n(2799);e.exports=function(e){return g(this,e).get(e)}},3423:function(e,t,n){var g=n(2799);e.exports=function(e){return g(this,e).has(e)}},3739:function(e,t,n){var g=n(2799);e.exports=function(e,t){var n=g(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},234:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,g){n[++t]=[g,e]})),n}},9620:function(e,t,n){var g=n(8136)(Object,"create");e.exports=g},8836:function(e,t,n){var g=n(2709)(Object.keys,Object);e.exports=g},9494:function(e,t,n){e=n.nmd(e);var g=n(1032),o=t&&!t.nodeType&&t,l=o&&e&&!e.nodeType&&e,a=l&&l.exports===o&&g.process,r=function(){try{var e=l&&l.require&&l.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=r},3581:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},2709:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},7009:function(e,t,n){var g=n(1032),o="object"==typeof self&&self&&self.Object===Object&&self,l=g||o||Function("return this")();e.exports=l},5774:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},1596:function(e){e.exports=function(e){return this.__data__.has(e)}},2230:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},511:function(e,t,n){var g=n(8384);e.exports=function(){this.__data__=new g,this.size=0}},835:function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},707:function(e){e.exports=function(e){return this.__data__.get(e)}},8832:function(e){e.exports=function(e){return this.__data__.has(e)}},5077:function(e,t,n){var g=n(8384),o=n(5797),l=n(8059);e.exports=function(e,t){var n=this.__data__;if(n instanceof g){var a=n.__data__;if(!o||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new l(a)}return n.set(e,t),this.size=n.size,this}},7907:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},6050:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},8573:function(e,t,n){var g=n(8092),o=n(72),l=n(2582),a=Math.max,r=Math.min;e.exports=function(e,t,n){var I,i,C,c,u,s,d=0,A=!1,m=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=I,g=i;return I=i=void 0,d=t,c=e.apply(g,n)}function h(e){return d=e,u=setTimeout(y,t),A?p(e):c}function f(e){var n=e-s;return void 0===s||n>=t||n<0||m&&e-d>=C}function y(){var e=o();if(f(e))return Z(e);u=setTimeout(y,function(e){var n=t-(e-s);return m?r(n,C-(e-d)):n}(e))}function Z(e){return u=void 0,b&&I?p(e):(I=i=void 0,c)}function v(){var e=o(),n=f(e);if(I=arguments,i=this,s=e,n){if(void 0===u)return h(s);if(m)return clearTimeout(u),u=setTimeout(y,t),p(s)}return void 0===u&&(u=setTimeout(y,t)),c}return t=l(t)||0,g(n)&&(A=!!n.leading,C=(m="maxWait"in n)?a(l(n.maxWait)||0,t):C,b="trailing"in n?!!n.trailing:b),v.cancel=function(){void 0!==u&&clearTimeout(u),d=0,I=s=i=u=void 0},v.flush=function(){return void 0===u?c:Z(o())},v}},9231:function(e){e.exports=function(e,t){return e===t||e!==e&&t!==t}},4963:function(e,t,n){var g=n(4906),o=n(3141),l=Object.prototype,a=l.hasOwnProperty,r=l.propertyIsEnumerable,I=g(function(){return arguments}())?g:function(e){return o(e)&&a.call(e,"callee")&&!r.call(e,"callee")};e.exports=I},3629:function(e){var t=Array.isArray;e.exports=t},1473:function(e,t,n){var g=n(4786),o=n(4635);e.exports=function(e){return null!=e&&o(e.length)&&!g(e)}},5174:function(e,t,n){e=n.nmd(e);var g=n(7009),o=n(9488),l=t&&!t.nodeType&&t,a=l&&e&&!e.nodeType&&e,r=a&&a.exports===l?g.Buffer:void 0,I=(r?r.isBuffer:void 0)||o;e.exports=I},8111:function(e,t,n){var g=n(1848);e.exports=function(e,t){return g(e,t)}},4786:function(e,t,n){var g=n(9066),o=n(8092);e.exports=function(e){if(!o(e))return!1;var t=g(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},4635:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},8092:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3141:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},152:function(e,t,n){var g=n(9066),o=n(3141);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==g(e)}},9102:function(e,t,n){var g=n(8150),o=n(6194),l=n(9494),a=l&&l.isTypedArray,r=a?o(a):g;e.exports=r},2742:function(e,t,n){var g=n(7538),o=n(3654),l=n(1473);e.exports=function(e){return l(e)?g(e):o(e)}},72:function(e,t,n){var g=n(7009);e.exports=function(){return g.Date.now()}},8174:function(e){e.exports=function(){return[]}},9488:function(e){e.exports=function(){return!1}},2582:function(e,t,n){var g=n(821),o=n(8092),l=n(152),a=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,I=/^0o[0-7]+$/i,i=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(l(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=g(e);var n=r.test(e);return n||I.test(e)?i(e.slice(2),n?2:8):a.test(e)?NaN:+e}},4501:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,g=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,l=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,r=n?Symbol.for("react.profiler"):60114,I=n?Symbol.for("react.provider"):60109,i=n?Symbol.for("react.context"):60110,C=n?Symbol.for("react.async_mode"):60111,c=n?Symbol.for("react.concurrent_mode"):60111,u=n?Symbol.for("react.forward_ref"):60112,s=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.suspense_list"):60120,A=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,b=n?Symbol.for("react.block"):60121,p=n?Symbol.for("react.fundamental"):60117,h=n?Symbol.for("react.responder"):60118,f=n?Symbol.for("react.scope"):60119;function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case g:switch(e=e.type){case C:case c:case l:case r:case a:case s:return e;default:switch(e=e&&e.$$typeof){case i:case u:case m:case A:case I:return e;default:return t}}case o:return t}}}function Z(e){return y(e)===c}t.isFragment=function(e){return y(e)===l},t.isMemo=function(e){return y(e)===A}},3873:function(e,t,n){"use strict";e.exports=n(4501)},4463:function(e,t,n){"use strict";var g=n(2791),o=n(5296);function l(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,r={};function I(e,t){i(e,t),i(e+"Capture",t)}function i(e,t){for(r[e]=t,e=0;e<t.length;e++)a.add(t[e])}var C=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s={},d={};function A(e,t,n,g,o,l,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=g,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new A(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new A(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new A(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new A(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new A(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new A(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new A(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new A(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new A(e,5,!1,e.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function p(e){return e[1].toUpperCase()}function h(e,t,n,g){var o=m.hasOwnProperty(t)?m[t]:null;(null!==o?0!==o.type:g||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,g){if(null===t||"undefined"===typeof t||function(e,t,n,g){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!g&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,g))return!0;if(g)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,g)&&(n=null),g||null===o?function(e){return!!c.call(d,e)||!c.call(s,e)&&(u.test(e)?d[e]=!0:(s[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,g=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,g?e.setAttributeNS(g,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(b,p);m[t]=new A(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(b,p);m[t]=new A(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(b,p);m[t]=new A(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new A(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new A(e,1,!1,e.toLowerCase(),null,!0,!0)}));var f=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y=Symbol.for("react.element"),Z=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),V=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),J=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var Y=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var w=Symbol.iterator;function H(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=w&&e[w]||e["@@iterator"])?e:null}var N,K=Object.assign;function F(e){if(void 0===N)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var x=!1;function E(e,t){if(!e||x)return"";x=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(i){var g=i}Reflect.construct(e,[],t)}else{try{t.call()}catch(i){g=i}e.call(t.prototype)}else{try{throw Error()}catch(i){g=i}e()}}catch(i){if(i&&g&&"string"===typeof i.stack){for(var o=i.stack.split("\n"),l=g.stack.split("\n"),a=o.length-1,r=l.length-1;1<=a&&0<=r&&o[a]!==l[r];)r--;for(;1<=a&&0<=r;a--,r--)if(o[a]!==l[r]){if(1!==a||1!==r)do{if(a--,0>--r||o[a]!==l[r]){var I="\n"+o[a].replace(" at new "," at ");return e.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",e.displayName)),I}}while(1<=a&&0<=r);break}}}finally{x=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function M(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=E(e.type,!1);case 11:return e=E(e.type.render,!1);case 1:return e=E(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case v:return"Fragment";case Z:return"Portal";case B:return"Profiler";case G:return"StrictMode";case R:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case V:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case W:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case X:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case J:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function L(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function U(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function T(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),g=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){g=""+e,l.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return g},setValue:function(e){g=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function D(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),g="";return e&&(g=Q(e)?e.checked?"true":"false":e.value),(e=g)!==n&&(t.setValue(e),!0)}function j(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function P(e,t){var n=t.checked;return K({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function O(e,t){var n=null==t.defaultValue?"":t.defaultValue,g=null!=t.checked?t.checked:t.defaultChecked;n=U(null!=t.value?t.value:n),e._wrapperState={initialChecked:g,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function q(e,t){null!=(t=t.checked)&&h(e,"checked",t,!1)}function _(e,t){q(e,t);var n=U(t.value),g=t.type;if(null!=n)"number"===g?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===g||"reset"===g)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,U(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var g=t.type;if(!("submit"!==g&&"reset"!==g||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&j(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,g){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&g&&(e[n].defaultSelected=!0)}else{for(n=""+U(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(g&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function ge(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(l(91));return K({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(l(92));if(te(n)){if(1<n.length)throw Error(l(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:U(n)}}function le(e,t){var n=U(t.value),g=U(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=g&&(e.defaultValue=""+g)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function re(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ie(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?re(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ie,Ce,ce=(Ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ie=ie||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ie.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,g){MSApp.execUnsafeLocalFunction((function(){return Ce(e,t)}))}:Ce);function ue(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var se={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];function Ae(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||se.hasOwnProperty(e)&&se[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var g=0===n.indexOf("--"),o=Ae(n,t[n],g);"float"===n&&(n="cssFloat"),g?e.setProperty(n,o):e[n]=o}}Object.keys(se).forEach((function(e){de.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),se[t]=se[e]}))}));var be=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pe(e,t){if(t){if(be[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(l(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(l(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(l(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(l(62))}}function he(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fe=null;function ye(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ze=null,ve=null,Ge=null;function Be(e){if(e=fo(e)){if("function"!==typeof Ze)throw Error(l(280));var t=e.stateNode;t&&(t=Zo(t),Ze(e.stateNode,e.type,t))}}function Se(e){ve?Ge?Ge.push(e):Ge=[e]:ve=e}function Ve(){if(ve){var e=ve,t=Ge;if(Ge=ve=null,Be(e),t)for(e=0;e<t.length;e++)Be(t[e])}}function We(e,t){return e(t)}function Re(){}var ke=!1;function Xe(e,t,n){if(ke)return e(t,n);ke=!0;try{return We(e,t,n)}finally{ke=!1,(null!==ve||null!==Ge)&&(Re(),Ve())}}function Je(e,t){var n=e.stateNode;if(null===n)return null;var g=Zo(n);if(null===g)return null;n=g[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(g=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!g;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(l(231,t,typeof n));return n}var Ye=!1;if(C)try{var we={};Object.defineProperty(we,"passive",{get:function(){Ye=!0}}),window.addEventListener("test",we,we),window.removeEventListener("test",we,we)}catch(Ce){Ye=!1}function He(e,t,n,g,o,l,a,r,I){var i=Array.prototype.slice.call(arguments,3);try{t.apply(n,i)}catch(C){this.onError(C)}}var Ne=!1,Ke=null,Fe=!1,xe=null,Ee={onError:function(e){Ne=!0,Ke=e}};function Me(e,t,n,g,o,l,a,r,I){Ne=!1,Ke=null,He.apply(Ee,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Le(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ue(e){if(ze(e)!==e)throw Error(l(188))}function Qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(l(188));return t!==e?null:e}for(var n=e,g=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(g=o.return)){n=g;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return Ue(o),e;if(a===g)return Ue(o),t;a=a.sibling}throw Error(l(188))}if(n.return!==g.return)n=o,g=a;else{for(var r=!1,I=o.child;I;){if(I===n){r=!0,n=o,g=a;break}if(I===g){r=!0,g=o,n=a;break}I=I.sibling}if(!r){for(I=a.child;I;){if(I===n){r=!0,n=a,g=o;break}if(I===g){r=!0,g=a,n=o;break}I=I.sibling}if(!r)throw Error(l(189))}}if(n.alternate!==g)throw Error(l(190))}if(3!==n.tag)throw Error(l(188));return n.stateNode.current===n?e:t}(e))?Te(e):null}function Te(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Te(e);if(null!==t)return t;e=e.sibling}return null}var De=o.unstable_scheduleCallback,je=o.unstable_cancelCallback,Pe=o.unstable_shouldYield,Oe=o.unstable_requestPaint,qe=o.unstable_now,_e=o.unstable_getCurrentPriorityLevel,$e=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,gt=o.unstable_IdlePriority,ot=null,lt=null;var at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(rt(e)/It|0)|0},rt=Math.log,It=Math.LN2;var it=64,Ct=4194304;function ct(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ut(e,t){var n=e.pendingLanes;if(0===n)return 0;var g=0,o=e.suspendedLanes,l=e.pingedLanes,a=268435455&n;if(0!==a){var r=a&~o;0!==r?g=ct(r):0!==(l&=a)&&(g=ct(l))}else 0!==(a=n&~o)?g=ct(a):0!==l&&(g=ct(l));if(0===g)return 0;if(0!==t&&t!==g&&0===(t&o)&&((o=g&-g)>=(l=t&-t)||16===o&&0!==(4194240&l)))return t;if(0!==(4&g)&&(g|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=g;0<t;)o=1<<(n=31-at(t)),g|=e[n],t&=~o;return g}function st(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function dt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function At(){var e=it;return 0===(4194240&(it<<=1))&&(it=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function pt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var g=31-at(n),o=1<<g;o&t|e[g]&t&&(e[g]|=t),n&=~o}}var ht=0;function ft(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var yt,Zt,vt,Gt,Bt,St=!1,Vt=[],Wt=null,Rt=null,kt=null,Xt=new Map,Jt=new Map,Yt=[],wt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ht(e,t){switch(e){case"focusin":case"focusout":Wt=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":Xt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jt.delete(t.pointerId)}}function Nt(e,t,n,g,o,l){return null===e||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:g,nativeEvent:l,targetContainers:[o]},null!==t&&(null!==(t=fo(t))&&Zt(t)),e):(e.eventSystemFlags|=g,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Kt(e){var t=ho(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Le(n)))return e.blockedOn=t,void Bt(e.priority,(function(){vt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Pt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=fo(n))&&Zt(t),e.blockedOn=n,!1;var g=new(n=e.nativeEvent).constructor(n.type,n);fe=g,n.target.dispatchEvent(g),fe=null,t.shift()}return!0}function xt(e,t,n){Ft(e)&&n.delete(t)}function Et(){St=!1,null!==Wt&&Ft(Wt)&&(Wt=null),null!==Rt&&Ft(Rt)&&(Rt=null),null!==kt&&Ft(kt)&&(kt=null),Xt.forEach(xt),Jt.forEach(xt)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Et)))}function zt(e){function t(t){return Mt(t,e)}if(0<Vt.length){Mt(Vt[0],e);for(var n=1;n<Vt.length;n++){var g=Vt[n];g.blockedOn===e&&(g.blockedOn=null)}}for(null!==Wt&&Mt(Wt,e),null!==Rt&&Mt(Rt,e),null!==kt&&Mt(kt,e),Xt.forEach(t),Jt.forEach(t),n=0;n<Yt.length;n++)(g=Yt[n]).blockedOn===e&&(g.blockedOn=null);for(;0<Yt.length&&null===(n=Yt[0]).blockedOn;)Kt(n),null===n.blockedOn&&Yt.shift()}var Lt=f.ReactCurrentBatchConfig,Ut=!0;function Qt(e,t,n,g){var o=ht,l=Lt.transition;Lt.transition=null;try{ht=1,Dt(e,t,n,g)}finally{ht=o,Lt.transition=l}}function Tt(e,t,n,g){var o=ht,l=Lt.transition;Lt.transition=null;try{ht=4,Dt(e,t,n,g)}finally{ht=o,Lt.transition=l}}function Dt(e,t,n,g){if(Ut){var o=Pt(e,t,n,g);if(null===o)Ug(e,t,g,jt,n),Ht(e,g);else if(function(e,t,n,g,o){switch(t){case"focusin":return Wt=Nt(Wt,e,t,n,g,o),!0;case"dragenter":return Rt=Nt(Rt,e,t,n,g,o),!0;case"mouseover":return kt=Nt(kt,e,t,n,g,o),!0;case"pointerover":var l=o.pointerId;return Xt.set(l,Nt(Xt.get(l)||null,e,t,n,g,o)),!0;case"gotpointercapture":return l=o.pointerId,Jt.set(l,Nt(Jt.get(l)||null,e,t,n,g,o)),!0}return!1}(o,e,t,n,g))g.stopPropagation();else if(Ht(e,g),4&t&&-1<wt.indexOf(e)){for(;null!==o;){var l=fo(o);if(null!==l&&yt(l),null===(l=Pt(e,t,n,g))&&Ug(e,t,g,jt,n),l===o)break;o=l}null!==o&&g.stopPropagation()}else Ug(e,t,g,null,n)}}var jt=null;function Pt(e,t,n,g){if(jt=null,null!==(e=ho(e=ye(g))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Le(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jt=e,null}function Ot(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_e()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case gt:return 536870912;default:return 16}default:return 16}}var qt=null,_t=null,$t=null;function en(){if($t)return $t;var e,t,n=_t,g=n.length,o="value"in qt?qt.value:qt.textContent,l=o.length;for(e=0;e<g&&n[e]===o[e];e++);var a=g-e;for(t=1;t<=a&&n[g-t]===o[l-t];t++);return $t=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function gn(){return!1}function on(e){function t(t,n,g,o,l){for(var a in this._reactName=t,this._targetInst=g,this.type=n,this.nativeEvent=o,this.target=l,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:gn,this.isPropagationStopped=gn,this}return K(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var ln,an,rn,In={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cn=on(In),cn=K({},In,{view:0,detail:0}),un=on(cn),sn=K({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rn&&(rn&&"mousemove"===e.type?(ln=e.screenX-rn.screenX,an=e.screenY-rn.screenY):an=ln=0,rn=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:an}}),dn=on(sn),An=on(K({},sn,{dataTransfer:0})),mn=on(K({},cn,{relatedTarget:0})),bn=on(K({},In,{animationName:0,elapsedTime:0,pseudoElement:0})),pn=K({},In,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hn=on(pn),fn=on(K({},In,{data:0})),yn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=vn[e])&&!!t[e]}function Bn(){return Gn}var Sn=K({},cn,{key:function(e){if(e.key){var t=yn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Zn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Vn=on(Sn),Wn=on(K({},sn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=on(K({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bn})),kn=on(K({},In,{propertyName:0,elapsedTime:0,pseudoElement:0})),Xn=K({},sn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Jn=on(Xn),Yn=[9,13,27,32],wn=C&&"CompositionEvent"in window,Hn=null;C&&"documentMode"in document&&(Hn=document.documentMode);var Nn=C&&"TextEvent"in window&&!Hn,Kn=C&&(!wn||Hn&&8<Hn&&11>=Hn),Fn=String.fromCharCode(32),xn=!1;function En(e,t){switch(e){case"keyup":return-1!==Yn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Ln={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ln[e.type]:"textarea"===t}function Qn(e,t,n,g){Se(g),0<(t=Tg(t,"onChange")).length&&(n=new Cn("onChange","change",null,n,g),e.push({event:n,listeners:t}))}var Tn=null,Dn=null;function jn(e){Fg(e,0)}function Pn(e){if(D(yo(e)))return e}function On(e,t){if("change"===e)return t}var qn=!1;if(C){var _n;if(C){var $n="oninput"in document;if(!$n){var eg=document.createElement("div");eg.setAttribute("oninput","return;"),$n="function"===typeof eg.oninput}_n=$n}else _n=!1;qn=_n&&(!document.documentMode||9<document.documentMode)}function tg(){Tn&&(Tn.detachEvent("onpropertychange",ng),Dn=Tn=null)}function ng(e){if("value"===e.propertyName&&Pn(Dn)){var t=[];Qn(t,Dn,e,ye(e)),Xe(jn,t)}}function gg(e,t,n){"focusin"===e?(tg(),Dn=n,(Tn=t).attachEvent("onpropertychange",ng)):"focusout"===e&&tg()}function og(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Pn(Dn)}function lg(e,t){if("click"===e)return Pn(t)}function ag(e,t){if("input"===e||"change"===e)return Pn(t)}var rg="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Ig(e,t){if(rg(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),g=Object.keys(t);if(n.length!==g.length)return!1;for(g=0;g<n.length;g++){var o=n[g];if(!c.call(t,o)||!rg(e[o],t[o]))return!1}return!0}function ig(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cg(e,t){var n,g=ig(e);for(e=0;g;){if(3===g.nodeType){if(n=e+g.textContent.length,e<=t&&n>=t)return{node:g,offset:t-e};e=n}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=ig(g)}}function cg(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?cg(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ug(){for(var e=window,t=j();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(g){n=!1}if(!n)break;t=j((e=t.contentWindow).document)}return t}function sg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function dg(e){var t=ug(),n=e.focusedElem,g=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cg(n.ownerDocument.documentElement,n)){if(null!==g&&sg(n))if(t=g.start,void 0===(e=g.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,l=Math.min(g.start,o);g=void 0===g.end?l:Math.min(g.end,o),!e.extend&&l>g&&(o=g,g=l,l=o),o=Cg(n,l);var a=Cg(n,g);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),l>g?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ag=C&&"documentMode"in document&&11>=document.documentMode,mg=null,bg=null,pg=null,hg=!1;function fg(e,t,n){var g=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;hg||null==mg||mg!==j(g)||("selectionStart"in(g=mg)&&sg(g)?g={start:g.selectionStart,end:g.selectionEnd}:g={anchorNode:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset},pg&&Ig(pg,g)||(pg=g,0<(g=Tg(bg,"onSelect")).length&&(t=new Cn("onSelect","select",null,t,n),e.push({event:t,listeners:g}),t.target=mg)))}function yg(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Zg={animationend:yg("Animation","AnimationEnd"),animationiteration:yg("Animation","AnimationIteration"),animationstart:yg("Animation","AnimationStart"),transitionend:yg("Transition","TransitionEnd")},vg={},Gg={};function Bg(e){if(vg[e])return vg[e];if(!Zg[e])return e;var t,n=Zg[e];for(t in n)if(n.hasOwnProperty(t)&&t in Gg)return vg[e]=n[t];return e}C&&(Gg=document.createElement("div").style,"AnimationEvent"in window||(delete Zg.animationend.animation,delete Zg.animationiteration.animation,delete Zg.animationstart.animation),"TransitionEvent"in window||delete Zg.transitionend.transition);var Sg=Bg("animationend"),Vg=Bg("animationiteration"),Wg=Bg("animationstart"),Rg=Bg("transitionend"),kg=new Map,Xg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jg(e,t){kg.set(e,t),I(t,[e])}for(var Yg=0;Yg<Xg.length;Yg++){var wg=Xg[Yg];Jg(wg.toLowerCase(),"on"+(wg[0].toUpperCase()+wg.slice(1)))}Jg(Sg,"onAnimationEnd"),Jg(Vg,"onAnimationIteration"),Jg(Wg,"onAnimationStart"),Jg("dblclick","onDoubleClick"),Jg("focusin","onFocus"),Jg("focusout","onBlur"),Jg(Rg,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),I("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),I("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),I("onBeforeInput",["compositionend","keypress","textInput","paste"]),I("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),I("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),I("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ng=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hg));function Kg(e,t,n){var g=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,g,o,a,r,I,i){if(Me.apply(this,arguments),Ne){if(!Ne)throw Error(l(198));var C=Ke;Ne=!1,Ke=null,Fe||(Fe=!0,xe=C)}}(g,t,void 0,e),e.currentTarget=null}function Fg(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var g=e[n],o=g.event;g=g.listeners;e:{var l=void 0;if(t)for(var a=g.length-1;0<=a;a--){var r=g[a],I=r.instance,i=r.currentTarget;if(r=r.listener,I!==l&&o.isPropagationStopped())break e;Kg(o,r,i),l=I}else for(a=0;a<g.length;a++){if(I=(r=g[a]).instance,i=r.currentTarget,r=r.listener,I!==l&&o.isPropagationStopped())break e;Kg(o,r,i),l=I}}}if(Fe)throw e=xe,Fe=!1,xe=null,e}function xg(e,t){var n=t[mo];void 0===n&&(n=t[mo]=new Set);var g=e+"__bubble";n.has(g)||(Lg(t,e,2,!1),n.add(g))}function Eg(e,t,n){var g=0;t&&(g|=4),Lg(n,e,g,t)}var Mg="_reactListening"+Math.random().toString(36).slice(2);function zg(e){if(!e[Mg]){e[Mg]=!0,a.forEach((function(t){"selectionchange"!==t&&(Ng.has(t)||Eg(t,!1,e),Eg(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Mg]||(t[Mg]=!0,Eg("selectionchange",!1,t))}}function Lg(e,t,n,g){switch(Ot(t)){case 1:var o=Qt;break;case 4:o=Tt;break;default:o=Dt}n=o.bind(null,t,n,e),o=void 0,!Ye||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),g?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Ug(e,t,n,g,o){var l=g;if(0===(1&t)&&0===(2&t)&&null!==g)e:for(;;){if(null===g)return;var a=g.tag;if(3===a||4===a){var r=g.stateNode.containerInfo;if(r===o||8===r.nodeType&&r.parentNode===o)break;if(4===a)for(a=g.return;null!==a;){var I=a.tag;if((3===I||4===I)&&((I=a.stateNode.containerInfo)===o||8===I.nodeType&&I.parentNode===o))return;a=a.return}for(;null!==r;){if(null===(a=ho(r)))return;if(5===(I=a.tag)||6===I){g=l=a;continue e}r=r.parentNode}}g=g.return}Xe((function(){var g=l,o=ye(n),a=[];e:{var r=kg.get(e);if(void 0!==r){var I=Cn,i=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":I=Vn;break;case"focusin":i="focus",I=mn;break;case"focusout":i="blur",I=mn;break;case"beforeblur":case"afterblur":I=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=An;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=Rn;break;case Sg:case Vg:case Wg:I=bn;break;case Rg:I=kn;break;case"scroll":I=un;break;case"wheel":I=Jn;break;case"copy":case"cut":case"paste":I=hn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Wn}var C=0!==(4&t),c=!C&&"scroll"===e,u=C?null!==r?r+"Capture":null:r;C=[];for(var s,d=g;null!==d;){var A=(s=d).stateNode;if(5===s.tag&&null!==A&&(s=A,null!==u&&(null!=(A=Je(d,u))&&C.push(Qg(d,A,s)))),c)break;d=d.return}0<C.length&&(r=new I(r,i,null,n,o),a.push({event:r,listeners:C}))}}if(0===(7&t)){if(I="mouseout"===e||"pointerout"===e,(!(r="mouseover"===e||"pointerover"===e)||n===fe||!(i=n.relatedTarget||n.fromElement)||!ho(i)&&!i[Ao])&&(I||r)&&(r=o.window===o?o:(r=o.ownerDocument)?r.defaultView||r.parentWindow:window,I?(I=g,null!==(i=(i=n.relatedTarget||n.toElement)?ho(i):null)&&(i!==(c=ze(i))||5!==i.tag&&6!==i.tag)&&(i=null)):(I=null,i=g),I!==i)){if(C=dn,A="onMouseLeave",u="onMouseEnter",d="mouse","pointerout"!==e&&"pointerover"!==e||(C=Wn,A="onPointerLeave",u="onPointerEnter",d="pointer"),c=null==I?r:yo(I),s=null==i?r:yo(i),(r=new C(A,d+"leave",I,n,o)).target=c,r.relatedTarget=s,A=null,ho(o)===g&&((C=new C(u,d+"enter",i,n,o)).target=s,C.relatedTarget=c,A=C),c=A,I&&i)e:{for(u=i,d=0,s=C=I;s;s=Dg(s))d++;for(s=0,A=u;A;A=Dg(A))s++;for(;0<d-s;)C=Dg(C),d--;for(;0<s-d;)u=Dg(u),s--;for(;d--;){if(C===u||null!==u&&C===u.alternate)break e;C=Dg(C),u=Dg(u)}C=null}else C=null;null!==I&&jg(a,r,I,C,!1),null!==i&&null!==c&&jg(a,c,i,C,!0)}if("select"===(I=(r=g?yo(g):window).nodeName&&r.nodeName.toLowerCase())||"input"===I&&"file"===r.type)var m=On;else if(Un(r))if(qn)m=ag;else{m=og;var b=gg}else(I=r.nodeName)&&"input"===I.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(m=lg);switch(m&&(m=m(e,g))?Qn(a,m,n,o):(b&&b(e,r,g),"focusout"===e&&(b=r._wrapperState)&&b.controlled&&"number"===r.type&&ee(r,"number",r.value)),b=g?yo(g):window,e){case"focusin":(Un(b)||"true"===b.contentEditable)&&(mg=b,bg=g,pg=null);break;case"focusout":pg=bg=mg=null;break;case"mousedown":hg=!0;break;case"contextmenu":case"mouseup":case"dragend":hg=!1,fg(a,n,o);break;case"selectionchange":if(Ag)break;case"keydown":case"keyup":fg(a,n,o)}var p;if(wn)e:{switch(e){case"compositionstart":var h="onCompositionStart";break e;case"compositionend":h="onCompositionEnd";break e;case"compositionupdate":h="onCompositionUpdate";break e}h=void 0}else zn?En(e,n)&&(h="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(h="onCompositionStart");h&&(Kn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==h?"onCompositionEnd"===h&&zn&&(p=en()):(_t="value"in(qt=o)?qt.value:qt.textContent,zn=!0)),0<(b=Tg(g,h)).length&&(h=new fn(h,e,null,n,o),a.push({event:h,listeners:b}),p?h.data=p:null!==(p=Mn(n))&&(h.data=p))),(p=Nn?function(e,t){switch(e){case"compositionend":return Mn(t);case"keypress":return 32!==t.which?null:(xn=!0,Fn);case"textInput":return(e=t.data)===Fn&&xn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!wn&&En(e,t)?(e=en(),$t=_t=qt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Kn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(g=Tg(g,"onBeforeInput")).length&&(o=new fn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:g}),o.data=p))}Fg(a,t)}))}function Qg(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Tg(e,t){for(var n=t+"Capture",g=[];null!==e;){var o=e,l=o.stateNode;5===o.tag&&null!==l&&(o=l,null!=(l=Je(e,n))&&g.unshift(Qg(e,l,o)),null!=(l=Je(e,t))&&g.push(Qg(e,l,o))),e=e.return}return g}function Dg(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jg(e,t,n,g,o){for(var l=t._reactName,a=[];null!==n&&n!==g;){var r=n,I=r.alternate,i=r.stateNode;if(null!==I&&I===g)break;5===r.tag&&null!==i&&(r=i,o?null!=(I=Je(n,l))&&a.unshift(Qg(n,I,r)):o||null!=(I=Je(n,l))&&a.push(Qg(n,I,r))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Pg=/\r\n?/g,Og=/\u0000|\uFFFD/g;function qg(e){return("string"===typeof e?e:""+e).replace(Pg,"\n").replace(Og,"")}function _g(e,t,n){if(t=qg(t),qg(e)!==t&&n)throw Error(l(425))}function $g(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var go="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,lo="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof lo?function(e){return lo.resolve(null).then(e).catch(ro)}:go;function ro(e){setTimeout((function(){throw e}))}function Io(e,t){var n=t,g=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===g)return e.removeChild(o),void zt(t);g--}else"$"!==n&&"$?"!==n&&"$!"!==n||g++;n=o}while(n);zt(t)}function io(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function Co(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var co=Math.random().toString(36).slice(2),uo="__reactFiber$"+co,so="__reactProps$"+co,Ao="__reactContainer$"+co,mo="__reactEvents$"+co,bo="__reactListeners$"+co,po="__reactHandles$"+co;function ho(e){var t=e[uo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ao]||n[uo]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Co(e);null!==e;){if(n=e[uo])return n;e=Co(e)}return t}n=(e=n).parentNode}return null}function fo(e){return!(e=e[uo]||e[Ao])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(l(33))}function Zo(e){return e[so]||null}var vo=[],Go=-1;function Bo(e){return{current:e}}function So(e){0>Go||(e.current=vo[Go],vo[Go]=null,Go--)}function Vo(e,t){Go++,vo[Go]=e.current,e.current=t}var Wo={},Ro=Bo(Wo),ko=Bo(!1),Xo=Wo;function Jo(e,t){var n=e.type.contextTypes;if(!n)return Wo;var g=e.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===t)return g.__reactInternalMemoizedMaskedChildContext;var o,l={};for(o in n)l[o]=t[o];return g&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function Yo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function wo(){So(ko),So(Ro)}function Ho(e,t,n){if(Ro.current!==Wo)throw Error(l(168));Vo(Ro,t),Vo(ko,n)}function No(e,t,n){var g=e.stateNode;if(t=t.childContextTypes,"function"!==typeof g.getChildContext)return n;for(var o in g=g.getChildContext())if(!(o in t))throw Error(l(108,L(e)||"Unknown",o));return K({},n,g)}function Ko(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wo,Xo=Ro.current,Vo(Ro,e),Vo(ko,ko.current),!0}function Fo(e,t,n){var g=e.stateNode;if(!g)throw Error(l(169));n?(e=No(e,t,Xo),g.__reactInternalMemoizedMergedChildContext=e,So(ko),So(Ro),Vo(Ro,e)):So(ko),Vo(ko,n)}var xo=null,Eo=!1,Mo=!1;function zo(e){null===xo?xo=[e]:xo.push(e)}function Lo(){if(!Mo&&null!==xo){Mo=!0;var e=0,t=ht;try{var n=xo;for(ht=1;e<n.length;e++){var g=n[e];do{g=g(!0)}while(null!==g)}xo=null,Eo=!1}catch(o){throw null!==xo&&(xo=xo.slice(e+1)),De($e,Lo),o}finally{ht=t,Mo=!1}}return null}var Uo=[],Qo=0,To=null,Do=0,jo=[],Po=0,Oo=null,qo=1,_o="";function $o(e,t){Uo[Qo++]=Do,Uo[Qo++]=To,To=e,Do=t}function el(e,t,n){jo[Po++]=qo,jo[Po++]=_o,jo[Po++]=Oo,Oo=e;var g=qo;e=_o;var o=32-at(g)-1;g&=~(1<<o),n+=1;var l=32-at(t)+o;if(30<l){var a=o-o%5;l=(g&(1<<a)-1).toString(32),g>>=a,o-=a,qo=1<<32-at(t)+o|n<<o|g,_o=l+e}else qo=1<<l|n<<o|g,_o=e}function tl(e){null!==e.return&&($o(e,1),el(e,1,0))}function nl(e){for(;e===To;)To=Uo[--Qo],Uo[Qo]=null,Do=Uo[--Qo],Uo[Qo]=null;for(;e===Oo;)Oo=jo[--Po],jo[Po]=null,_o=jo[--Po],jo[Po]=null,qo=jo[--Po],jo[Po]=null}var gl=null,ol=null,ll=!1,al=null;function rl(e,t){var n=Xi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Il(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,gl=e,ol=io(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,gl=e,ol=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Oo?{id:qo,overflow:_o}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Xi(18,null,null,0)).stateNode=t,n.return=e,e.child=n,gl=e,ol=null,!0);default:return!1}}function il(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Cl(e){if(ll){var t=ol;if(t){var n=t;if(!Il(e,t)){if(il(e))throw Error(l(418));t=io(n.nextSibling);var g=gl;t&&Il(e,t)?rl(g,n):(e.flags=-4097&e.flags|2,ll=!1,gl=e)}}else{if(il(e))throw Error(l(418));e.flags=-4097&e.flags|2,ll=!1,gl=e}}}function cl(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;gl=e}function ul(e){if(e!==gl)return!1;if(!ll)return cl(e),ll=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=ol)){if(il(e))throw sl(),Error(l(418));for(;t;)rl(e,t),t=io(t.nextSibling)}if(cl(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(l(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ol=io(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ol=null}}else ol=gl?io(e.stateNode.nextSibling):null;return!0}function sl(){for(var e=ol;e;)e=io(e.nextSibling)}function dl(){ol=gl=null,ll=!1}function Al(e){null===al?al=[e]:al.push(e)}var ml=f.ReactCurrentBatchConfig;function bl(e,t){if(e&&e.defaultProps){for(var n in t=K({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var pl=Bo(null),hl=null,fl=null,yl=null;function Zl(){yl=fl=hl=null}function vl(e){var t=pl.current;So(pl),e._currentValue=t}function Gl(e,t,n){for(;null!==e;){var g=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==g&&(g.childLanes|=t)):null!==g&&(g.childLanes&t)!==t&&(g.childLanes|=t),e===n)break;e=e.return}}function Bl(e,t){hl=e,yl=fl=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(fr=!0),e.firstContext=null)}function Sl(e){var t=e._currentValue;if(yl!==e)if(e={context:e,memoizedValue:t,next:null},null===fl){if(null===hl)throw Error(l(308));fl=e,hl.dependencies={lanes:0,firstContext:e}}else fl=fl.next=e;return t}var Vl=null;function Wl(e){null===Vl?Vl=[e]:Vl.push(e)}function Rl(e,t,n,g){var o=t.interleaved;return null===o?(n.next=n,Wl(t)):(n.next=o.next,o.next=n),t.interleaved=n,kl(e,g)}function kl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Xl=!1;function Jl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hl(e,t,n){var g=e.updateQueue;if(null===g)return null;if(g=g.shared,0!==(2&WI)){var o=g.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),g.pending=t,kl(e,n)}return null===(o=g.interleaved)?(t.next=t,Wl(g)):(t.next=o.next,o.next=t),g.interleaved=t,kl(e,n)}function Nl(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var g=t.lanes;n|=g&=e.pendingLanes,t.lanes=n,pt(e,n)}}function Kl(e,t){var n=e.updateQueue,g=e.alternate;if(null!==g&&n===(g=g.updateQueue)){var o=null,l=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===l?o=l=a:l=l.next=a,n=n.next}while(null!==n);null===l?o=l=t:l=l.next=t}else o=l=t;return n={baseState:g.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:g.shared,effects:g.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fl(e,t,n,g){var o=e.updateQueue;Xl=!1;var l=o.firstBaseUpdate,a=o.lastBaseUpdate,r=o.shared.pending;if(null!==r){o.shared.pending=null;var I=r,i=I.next;I.next=null,null===a?l=i:a.next=i,a=I;var C=e.alternate;null!==C&&((r=(C=C.updateQueue).lastBaseUpdate)!==a&&(null===r?C.firstBaseUpdate=i:r.next=i,C.lastBaseUpdate=I))}if(null!==l){var c=o.baseState;for(a=0,C=i=I=null,r=l;;){var u=r.lane,s=r.eventTime;if((g&u)===u){null!==C&&(C=C.next={eventTime:s,lane:0,tag:r.tag,payload:r.payload,callback:r.callback,next:null});e:{var d=e,A=r;switch(u=t,s=n,A.tag){case 1:if("function"===typeof(d=A.payload)){c=d.call(s,c,u);break e}c=d;break e;case 3:d.flags=-65537&d.flags|128;case 0:if(null===(u="function"===typeof(d=A.payload)?d.call(s,c,u):d)||void 0===u)break e;c=K({},c,u);break e;case 2:Xl=!0}}null!==r.callback&&0!==r.lane&&(e.flags|=64,null===(u=o.effects)?o.effects=[r]:u.push(r))}else s={eventTime:s,lane:u,tag:r.tag,payload:r.payload,callback:r.callback,next:null},null===C?(i=C=s,I=c):C=C.next=s,a|=u;if(null===(r=r.next)){if(null===(r=o.shared.pending))break;r=(u=r).next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}if(null===C&&(I=c),o.baseState=I,o.firstBaseUpdate=i,o.lastBaseUpdate=C,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===l&&(o.shared.lanes=0);NI|=a,e.lanes=a,e.memoizedState=c}}function xl(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var g=e[t],o=g.callback;if(null!==o){if(g.callback=null,g=n,"function"!==typeof o)throw Error(l(191,o));o.call(g)}}}var El=(new g.Component).refs;function Ml(e,t,n,g){n=null===(n=n(g,t=e.memoizedState))||void 0===n?t:K({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zl={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var g=ei(),o=ti(e),l=wl(g,o);l.payload=t,void 0!==n&&null!==n&&(l.callback=n),null!==(t=Hl(e,l,o))&&(ni(t,e,o,g),Nl(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var g=ei(),o=ti(e),l=wl(g,o);l.tag=1,l.payload=t,void 0!==n&&null!==n&&(l.callback=n),null!==(t=Hl(e,l,o))&&(ni(t,e,o,g),Nl(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ei(),g=ti(e),o=wl(n,g);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Hl(e,o,g))&&(ni(t,e,g,n),Nl(t,e,g))}};function Ll(e,t,n,g,o,l,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(g,l,a):!t.prototype||!t.prototype.isPureReactComponent||(!Ig(n,g)||!Ig(o,l))}function Ul(e,t,n){var g=!1,o=Wo,l=t.contextType;return"object"===typeof l&&null!==l?l=Sl(l):(o=Yo(t)?Xo:Ro.current,l=(g=null!==(g=t.contextTypes)&&void 0!==g)?Jo(e,o):Wo),t=new t(n,l),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zl,e.stateNode=t,t._reactInternals=e,g&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=l),t}function Ql(e,t,n,g){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,g),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,g),t.state!==e&&zl.enqueueReplaceState(t,t.state,null)}function Tl(e,t,n,g){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=El,Jl(e);var l=t.contextType;"object"===typeof l&&null!==l?o.context=Sl(l):(l=Yo(t)?Xo:Ro.current,o.context=Jo(e,l)),o.state=e.memoizedState,"function"===typeof(l=t.getDerivedStateFromProps)&&(Ml(e,t,l,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&zl.enqueueReplaceState(o,o.state,null),Fl(e,n,o,g),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function Dl(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(l(309));var g=n.stateNode}if(!g)throw Error(l(147,e));var o=g,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;t===El&&(t=o.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(l(284));if(!n._owner)throw Error(l(290,e))}return e}function jl(e,t){throw e=Object.prototype.toString.call(t),Error(l(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Pl(e){return(0,e._init)(e._payload)}function Ol(e){function t(t,n){if(e){var g=t.deletions;null===g?(t.deletions=[n],t.flags|=16):g.push(n)}}function n(n,g){if(!e)return null;for(;null!==g;)t(n,g),g=g.sibling;return null}function g(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Yi(e,t)).index=0,e.sibling=null,e}function a(t,n,g){return t.index=g,e?null!==(g=t.alternate)?(g=g.index)<n?(t.flags|=2,n):g:(t.flags|=2,n):(t.flags|=1048576,n)}function r(t){return e&&null===t.alternate&&(t.flags|=2),t}function I(e,t,n,g){return null===t||6!==t.tag?((t=Ki(n,e.mode,g)).return=e,t):((t=o(t,n)).return=e,t)}function i(e,t,n,g){var l=n.type;return l===v?c(e,t,n.props.children,g,n.key):null!==t&&(t.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===J&&Pl(l)===t.type)?((g=o(t,n.props)).ref=Dl(e,t,n),g.return=e,g):((g=wi(n.type,n.key,n.props,null,e.mode,g)).ref=Dl(e,t,n),g.return=e,g)}function C(e,t,n,g){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fi(n,e.mode,g)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function c(e,t,n,g,l){return null===t||7!==t.tag?((t=Hi(n,e.mode,g,l)).return=e,t):((t=o(t,n)).return=e,t)}function u(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ki(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case y:return(n=wi(t.type,t.key,t.props,null,e.mode,n)).ref=Dl(e,null,t),n.return=e,n;case Z:return(t=Fi(t,e.mode,n)).return=e,t;case J:return u(e,(0,t._init)(t._payload),n)}if(te(t)||H(t))return(t=Hi(t,e.mode,n,null)).return=e,t;jl(e,t)}return null}function s(e,t,n,g){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:I(e,t,""+n,g);if("object"===typeof n&&null!==n){switch(n.$$typeof){case y:return n.key===o?i(e,t,n,g):null;case Z:return n.key===o?C(e,t,n,g):null;case J:return s(e,t,(o=n._init)(n._payload),g)}if(te(n)||H(n))return null!==o?null:c(e,t,n,g,null);jl(e,n)}return null}function d(e,t,n,g,o){if("string"===typeof g&&""!==g||"number"===typeof g)return I(t,e=e.get(n)||null,""+g,o);if("object"===typeof g&&null!==g){switch(g.$$typeof){case y:return i(t,e=e.get(null===g.key?n:g.key)||null,g,o);case Z:return C(t,e=e.get(null===g.key?n:g.key)||null,g,o);case J:return d(e,t,n,(0,g._init)(g._payload),o)}if(te(g)||H(g))return c(t,e=e.get(n)||null,g,o,null);jl(t,g)}return null}function A(o,l,r,I){for(var i=null,C=null,c=l,A=l=0,m=null;null!==c&&A<r.length;A++){c.index>A?(m=c,c=null):m=c.sibling;var b=s(o,c,r[A],I);if(null===b){null===c&&(c=m);break}e&&c&&null===b.alternate&&t(o,c),l=a(b,l,A),null===C?i=b:C.sibling=b,C=b,c=m}if(A===r.length)return n(o,c),ll&&$o(o,A),i;if(null===c){for(;A<r.length;A++)null!==(c=u(o,r[A],I))&&(l=a(c,l,A),null===C?i=c:C.sibling=c,C=c);return ll&&$o(o,A),i}for(c=g(o,c);A<r.length;A++)null!==(m=d(c,o,A,r[A],I))&&(e&&null!==m.alternate&&c.delete(null===m.key?A:m.key),l=a(m,l,A),null===C?i=m:C.sibling=m,C=m);return e&&c.forEach((function(e){return t(o,e)})),ll&&$o(o,A),i}function m(o,r,I,i){var C=H(I);if("function"!==typeof C)throw Error(l(150));if(null==(I=C.call(I)))throw Error(l(151));for(var c=C=null,A=r,m=r=0,b=null,p=I.next();null!==A&&!p.done;m++,p=I.next()){A.index>m?(b=A,A=null):b=A.sibling;var h=s(o,A,p.value,i);if(null===h){null===A&&(A=b);break}e&&A&&null===h.alternate&&t(o,A),r=a(h,r,m),null===c?C=h:c.sibling=h,c=h,A=b}if(p.done)return n(o,A),ll&&$o(o,m),C;if(null===A){for(;!p.done;m++,p=I.next())null!==(p=u(o,p.value,i))&&(r=a(p,r,m),null===c?C=p:c.sibling=p,c=p);return ll&&$o(o,m),C}for(A=g(o,A);!p.done;m++,p=I.next())null!==(p=d(A,o,m,p.value,i))&&(e&&null!==p.alternate&&A.delete(null===p.key?m:p.key),r=a(p,r,m),null===c?C=p:c.sibling=p,c=p);return e&&A.forEach((function(e){return t(o,e)})),ll&&$o(o,m),C}return function e(g,l,a,I){if("object"===typeof a&&null!==a&&a.type===v&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case y:e:{for(var i=a.key,C=l;null!==C;){if(C.key===i){if((i=a.type)===v){if(7===C.tag){n(g,C.sibling),(l=o(C,a.props.children)).return=g,g=l;break e}}else if(C.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===J&&Pl(i)===C.type){n(g,C.sibling),(l=o(C,a.props)).ref=Dl(g,C,a),l.return=g,g=l;break e}n(g,C);break}t(g,C),C=C.sibling}a.type===v?((l=Hi(a.props.children,g.mode,I,a.key)).return=g,g=l):((I=wi(a.type,a.key,a.props,null,g.mode,I)).ref=Dl(g,l,a),I.return=g,g=I)}return r(g);case Z:e:{for(C=a.key;null!==l;){if(l.key===C){if(4===l.tag&&l.stateNode.containerInfo===a.containerInfo&&l.stateNode.implementation===a.implementation){n(g,l.sibling),(l=o(l,a.children||[])).return=g,g=l;break e}n(g,l);break}t(g,l),l=l.sibling}(l=Fi(a,g.mode,I)).return=g,g=l}return r(g);case J:return e(g,l,(C=a._init)(a._payload),I)}if(te(a))return A(g,l,a,I);if(H(a))return m(g,l,a,I);jl(g,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==l&&6===l.tag?(n(g,l.sibling),(l=o(l,a)).return=g,g=l):(n(g,l),(l=Ki(a,g.mode,I)).return=g,g=l),r(g)):n(g,l)}}var ql=Ol(!0),_l=Ol(!1),$l={},ea=Bo($l),ta=Bo($l),na=Bo($l);function ga(e){if(e===$l)throw Error(l(174));return e}function oa(e,t){switch(Vo(na,t),Vo(ta,e),Vo(ea,$l),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ie(null,"");break;default:t=Ie(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}So(ea),Vo(ea,t)}function la(){So(ea),So(ta),So(na)}function aa(e){ga(na.current);var t=ga(ea.current),n=Ie(t,e.type);t!==n&&(Vo(ta,e),Vo(ea,n))}function ra(e){ta.current===e&&(So(ea),So(ta))}var Ia=Bo(0);function ia(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ca=[];function ca(){for(var e=0;e<Ca.length;e++)Ca[e]._workInProgressVersionPrimary=null;Ca.length=0}var ua=f.ReactCurrentDispatcher,sa=f.ReactCurrentBatchConfig,da=0,Aa=null,ma=null,ba=null,pa=!1,ha=!1,fa=0,ya=0;function Za(){throw Error(l(321))}function va(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!rg(e[n],t[n]))return!1;return!0}function Ga(e,t,n,g,o,a){if(da=a,Aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ua.current=null===e||null===e.memoizedState?rr:Ir,e=n(g,o),ha){a=0;do{if(ha=!1,fa=0,25<=a)throw Error(l(301));a+=1,ba=ma=null,t.updateQueue=null,ua.current=ir,e=n(g,o)}while(ha)}if(ua.current=ar,t=null!==ma&&null!==ma.next,da=0,ba=ma=Aa=null,pa=!1,t)throw Error(l(300));return e}function Ba(){var e=0!==fa;return fa=0,e}function Sa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ba?Aa.memoizedState=ba=e:ba=ba.next=e,ba}function Va(){if(null===ma){var e=Aa.alternate;e=null!==e?e.memoizedState:null}else e=ma.next;var t=null===ba?Aa.memoizedState:ba.next;if(null!==t)ba=t,ma=e;else{if(null===e)throw Error(l(310));e={memoizedState:(ma=e).memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},null===ba?Aa.memoizedState=ba=e:ba=ba.next=e}return ba}function Wa(e,t){return"function"===typeof t?t(e):t}function Ra(e){var t=Va(),n=t.queue;if(null===n)throw Error(l(311));n.lastRenderedReducer=e;var g=ma,o=g.baseQueue,a=n.pending;if(null!==a){if(null!==o){var r=o.next;o.next=a.next,a.next=r}g.baseQueue=o=a,n.pending=null}if(null!==o){a=o.next,g=g.baseState;var I=r=null,i=null,C=a;do{var c=C.lane;if((da&c)===c)null!==i&&(i=i.next={lane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),g=C.hasEagerState?C.eagerState:e(g,C.action);else{var u={lane:c,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null};null===i?(I=i=u,r=g):i=i.next=u,Aa.lanes|=c,NI|=c}C=C.next}while(null!==C&&C!==a);null===i?r=g:i.next=I,rg(g,t.memoizedState)||(fr=!0),t.memoizedState=g,t.baseState=r,t.baseQueue=i,n.lastRenderedState=g}if(null!==(e=n.interleaved)){o=e;do{a=o.lane,Aa.lanes|=a,NI|=a,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ka(e){var t=Va(),n=t.queue;if(null===n)throw Error(l(311));n.lastRenderedReducer=e;var g=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var r=o=o.next;do{a=e(a,r.action),r=r.next}while(r!==o);rg(a,t.memoizedState)||(fr=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,g]}function Xa(){}function Ja(e,t){var n=Aa,g=Va(),o=t(),a=!rg(g.memoizedState,o);if(a&&(g.memoizedState=o,fr=!0),g=g.queue,Ua(Ha.bind(null,n,g,e),[e]),g.getSnapshot!==t||a||null!==ba&&1&ba.memoizedState.tag){if(n.flags|=2048,xa(9,wa.bind(null,n,g,o,t),void 0,null),null===RI)throw Error(l(349));0!==(30&da)||Ya(n,t,o)}return o}function Ya(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Aa.updateQueue)?(t={lastEffect:null,stores:null},Aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function wa(e,t,n,g){t.value=n,t.getSnapshot=g,Na(t)&&Ka(e)}function Ha(e,t,n){return n((function(){Na(t)&&Ka(e)}))}function Na(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!rg(e,n)}catch(g){return!0}}function Ka(e){var t=kl(e,1);null!==t&&ni(t,e,1,-1)}function Fa(e){var t=Sa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:e},t.queue=e,e=e.dispatch=nr.bind(null,Aa,e),[t.memoizedState,e]}function xa(e,t,n,g){return e={tag:e,create:t,destroy:n,deps:g,next:null},null===(t=Aa.updateQueue)?(t={lastEffect:null,stores:null},Aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(g=n.next,n.next=e,e.next=g,t.lastEffect=e),e}function Ea(){return Va().memoizedState}function Ma(e,t,n,g){var o=Sa();Aa.flags|=e,o.memoizedState=xa(1|t,n,void 0,void 0===g?null:g)}function za(e,t,n,g){var o=Va();g=void 0===g?null:g;var l=void 0;if(null!==ma){var a=ma.memoizedState;if(l=a.destroy,null!==g&&va(g,a.deps))return void(o.memoizedState=xa(t,n,l,g))}Aa.flags|=e,o.memoizedState=xa(1|t,n,l,g)}function La(e,t){return Ma(8390656,8,e,t)}function Ua(e,t){return za(2048,8,e,t)}function Qa(e,t){return za(4,2,e,t)}function Ta(e,t){return za(4,4,e,t)}function Da(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ja(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,za(4,4,Da.bind(null,t,e),n)}function Pa(){}function Oa(e,t){var n=Va();t=void 0===t?null:t;var g=n.memoizedState;return null!==g&&null!==t&&va(t,g[1])?g[0]:(n.memoizedState=[e,t],e)}function qa(e,t){var n=Va();t=void 0===t?null:t;var g=n.memoizedState;return null!==g&&null!==t&&va(t,g[1])?g[0]:(e=e(),n.memoizedState=[e,t],e)}function _a(e,t,n){return 0===(21&da)?(e.baseState&&(e.baseState=!1,fr=!0),e.memoizedState=n):(rg(n,t)||(n=At(),Aa.lanes|=n,NI|=n,e.baseState=!0),t)}function $a(e,t){var n=ht;ht=0!==n&&4>n?n:4,e(!0);var g=sa.transition;sa.transition={};try{e(!1),t()}finally{ht=n,sa.transition=g}}function er(){return Va().memoizedState}function tr(e,t,n){var g=ti(e);if(n={lane:g,action:n,hasEagerState:!1,eagerState:null,next:null},gr(e))or(t,n);else if(null!==(n=Rl(e,t,n,g))){ni(n,e,g,ei()),lr(n,t,g)}}function nr(e,t,n){var g=ti(e),o={lane:g,action:n,hasEagerState:!1,eagerState:null,next:null};if(gr(e))or(t,o);else{var l=e.alternate;if(0===e.lanes&&(null===l||0===l.lanes)&&null!==(l=t.lastRenderedReducer))try{var a=t.lastRenderedState,r=l(a,n);if(o.hasEagerState=!0,o.eagerState=r,rg(r,a)){var I=t.interleaved;return null===I?(o.next=o,Wl(t)):(o.next=I.next,I.next=o),void(t.interleaved=o)}}catch(i){}null!==(n=Rl(e,t,o,g))&&(ni(n,e,g,o=ei()),lr(n,t,g))}}function gr(e){var t=e.alternate;return e===Aa||null!==t&&t===Aa}function or(e,t){ha=pa=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function lr(e,t,n){if(0!==(4194240&n)){var g=t.lanes;n|=g&=e.pendingLanes,t.lanes=n,pt(e,n)}}var ar={readContext:Sl,useCallback:Za,useContext:Za,useEffect:Za,useImperativeHandle:Za,useInsertionEffect:Za,useLayoutEffect:Za,useMemo:Za,useReducer:Za,useRef:Za,useState:Za,useDebugValue:Za,useDeferredValue:Za,useTransition:Za,useMutableSource:Za,useSyncExternalStore:Za,useId:Za,unstable_isNewReconciler:!1},rr={readContext:Sl,useCallback:function(e,t){return Sa().memoizedState=[e,void 0===t?null:t],e},useContext:Sl,useEffect:La,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4194308,4,Da.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var n=Sa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var g=Sa();return t=void 0!==n?n(t):t,g.memoizedState=g.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},g.queue=e,e=e.dispatch=tr.bind(null,Aa,e),[g.memoizedState,e]},useRef:function(e){return e={current:e},Sa().memoizedState=e},useState:Fa,useDebugValue:Pa,useDeferredValue:function(e){return Sa().memoizedState=e},useTransition:function(){var e=Fa(!1),t=e[0];return e=$a.bind(null,e[1]),Sa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var g=Aa,o=Sa();if(ll){if(void 0===n)throw Error(l(407));n=n()}else{if(n=t(),null===RI)throw Error(l(349));0!==(30&da)||Ya(g,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,La(Ha.bind(null,g,a,e),[e]),g.flags|=2048,xa(9,wa.bind(null,g,a,n,t),void 0,null),n},useId:function(){var e=Sa(),t=RI.identifierPrefix;if(ll){var n=_o;t=":"+t+"R"+(n=(qo&~(1<<32-at(qo)-1)).toString(32)+n),0<(n=fa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ya++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ir={readContext:Sl,useCallback:Oa,useContext:Sl,useEffect:Ua,useImperativeHandle:ja,useInsertionEffect:Qa,useLayoutEffect:Ta,useMemo:qa,useReducer:Ra,useRef:Ea,useState:function(){return Ra(Wa)},useDebugValue:Pa,useDeferredValue:function(e){return _a(Va(),ma.memoizedState,e)},useTransition:function(){return[Ra(Wa)[0],Va().memoizedState]},useMutableSource:Xa,useSyncExternalStore:Ja,useId:er,unstable_isNewReconciler:!1},ir={readContext:Sl,useCallback:Oa,useContext:Sl,useEffect:Ua,useImperativeHandle:ja,useInsertionEffect:Qa,useLayoutEffect:Ta,useMemo:qa,useReducer:ka,useRef:Ea,useState:function(){return ka(Wa)},useDebugValue:Pa,useDeferredValue:function(e){var t=Va();return null===ma?t.memoizedState=e:_a(t,ma.memoizedState,e)},useTransition:function(){return[ka(Wa)[0],Va().memoizedState]},useMutableSource:Xa,useSyncExternalStore:Ja,useId:er,unstable_isNewReconciler:!1};function Cr(e,t){try{var n="",g=t;do{n+=M(g),g=g.return}while(g);var o=n}catch(l){o="\nError generating stack: "+l.message+"\n"+l.stack}return{value:e,source:t,stack:o,digest:null}}function cr(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ur(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var sr="function"===typeof WeakMap?WeakMap:Map;function dr(e,t,n){(n=wl(-1,n)).tag=3,n.payload={element:null};var g=t.value;return n.callback=function(){UI||(UI=!0,QI=g),ur(0,t)},n}function Ar(e,t,n){(n=wl(-1,n)).tag=3;var g=e.type.getDerivedStateFromError;if("function"===typeof g){var o=t.value;n.payload=function(){return g(o)},n.callback=function(){ur(0,t)}}var l=e.stateNode;return null!==l&&"function"===typeof l.componentDidCatch&&(n.callback=function(){ur(0,t),"function"!==typeof g&&(null===TI?TI=new Set([this]):TI.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mr(e,t,n){var g=e.pingCache;if(null===g){g=e.pingCache=new sr;var o=new Set;g.set(t,o)}else void 0===(o=g.get(t))&&(o=new Set,g.set(t,o));o.has(n)||(o.add(n),e=Bi.bind(null,e,t,n),t.then(e,e))}function br(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function pr(e,t,n,g,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=wl(-1,1)).tag=2,Hl(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var hr=f.ReactCurrentOwner,fr=!1;function yr(e,t,n,g){t.child=null===e?_l(t,null,n,g):ql(t,e.child,n,g)}function Zr(e,t,n,g,o){n=n.render;var l=t.ref;return Bl(t,o),g=Ga(e,t,n,g,l,o),n=Ba(),null===e||fr?(ll&&n&&tl(t),t.flags|=1,yr(e,t,g,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ur(e,t,o))}function vr(e,t,n,g,o){if(null===e){var l=n.type;return"function"!==typeof l||Ji(l)||void 0!==l.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=wi(n.type,null,g,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=l,Gr(e,t,l,g,o))}if(l=e.child,0===(e.lanes&o)){var a=l.memoizedProps;if((n=null!==(n=n.compare)?n:Ig)(a,g)&&e.ref===t.ref)return Ur(e,t,o)}return t.flags|=1,(e=Yi(l,g)).ref=t.ref,e.return=t,t.child=e}function Gr(e,t,n,g,o){if(null!==e){var l=e.memoizedProps;if(Ig(l,g)&&e.ref===t.ref){if(fr=!1,t.pendingProps=g=l,0===(e.lanes&o))return t.lanes=e.lanes,Ur(e,t,o);0!==(131072&e.flags)&&(fr=!0)}}return Vr(e,t,n,g,o)}function Br(e,t,n){var g=t.pendingProps,o=g.children,l=null!==e?e.memoizedState:null;if("hidden"===g.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vo(YI,JI),JI|=n;else{if(0===(1073741824&n))return e=null!==l?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Vo(YI,JI),JI|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=null!==l?l.baseLanes:n,Vo(YI,JI),JI|=g}else null!==l?(g=l.baseLanes|n,t.memoizedState=null):g=n,Vo(YI,JI),JI|=g;return yr(e,t,o,n),t.child}function Sr(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Vr(e,t,n,g,o){var l=Yo(n)?Xo:Ro.current;return l=Jo(t,l),Bl(t,o),n=Ga(e,t,n,g,l,o),g=Ba(),null===e||fr?(ll&&g&&tl(t),t.flags|=1,yr(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ur(e,t,o))}function Wr(e,t,n,g,o){if(Yo(n)){var l=!0;Ko(t)}else l=!1;if(Bl(t,o),null===t.stateNode)Lr(e,t),Ul(t,n,g),Tl(t,n,g,o),g=!0;else if(null===e){var a=t.stateNode,r=t.memoizedProps;a.props=r;var I=a.context,i=n.contextType;"object"===typeof i&&null!==i?i=Sl(i):i=Jo(t,i=Yo(n)?Xo:Ro.current);var C=n.getDerivedStateFromProps,c="function"===typeof C||"function"===typeof a.getSnapshotBeforeUpdate;c||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(r!==g||I!==i)&&Ql(t,a,g,i),Xl=!1;var u=t.memoizedState;a.state=u,Fl(t,g,a,o),I=t.memoizedState,r!==g||u!==I||ko.current||Xl?("function"===typeof C&&(Ml(t,n,C,g),I=t.memoizedState),(r=Xl||Ll(t,n,r,g,u,I,i))?(c||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=g,t.memoizedState=I),a.props=g,a.state=I,a.context=i,g=r):("function"===typeof a.componentDidMount&&(t.flags|=4194308),g=!1)}else{a=t.stateNode,Yl(e,t),r=t.memoizedProps,i=t.type===t.elementType?r:bl(t.type,r),a.props=i,c=t.pendingProps,u=a.context,"object"===typeof(I=n.contextType)&&null!==I?I=Sl(I):I=Jo(t,I=Yo(n)?Xo:Ro.current);var s=n.getDerivedStateFromProps;(C="function"===typeof s||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(r!==c||u!==I)&&Ql(t,a,g,I),Xl=!1,u=t.memoizedState,a.state=u,Fl(t,g,a,o);var d=t.memoizedState;r!==c||u!==d||ko.current||Xl?("function"===typeof s&&(Ml(t,n,s,g),d=t.memoizedState),(i=Xl||Ll(t,n,i,g,u,d,I)||!1)?(C||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(g,d,I),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(g,d,I)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||r===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||r===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=g,t.memoizedState=d),a.props=g,a.state=d,a.context=I,g=i):("function"!==typeof a.componentDidUpdate||r===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||r===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),g=!1)}return Rr(e,t,n,g,l,o)}function Rr(e,t,n,g,o,l){Sr(e,t);var a=0!==(128&t.flags);if(!g&&!a)return o&&Fo(t,n,!1),Ur(e,t,l);g=t.stateNode,hr.current=t;var r=a&&"function"!==typeof n.getDerivedStateFromError?null:g.render();return t.flags|=1,null!==e&&a?(t.child=ql(t,e.child,null,l),t.child=ql(t,null,r,l)):yr(e,t,r,l),t.memoizedState=g.state,o&&Fo(t,n,!0),t.child}function kr(e){var t=e.stateNode;t.pendingContext?Ho(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ho(0,t.context,!1),oa(e,t.containerInfo)}function Xr(e,t,n,g,o){return dl(),Al(o),t.flags|=256,yr(e,t,n,g),t.child}var Jr,Yr,wr,Hr={dehydrated:null,treeContext:null,retryLane:0};function Nr(e){return{baseLanes:e,cachePool:null,transitions:null}}function Kr(e,t,n){var g,o=t.pendingProps,a=Ia.current,r=!1,I=0!==(128&t.flags);if((g=I)||(g=(null===e||null!==e.memoizedState)&&0!==(2&a)),g?(r=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Vo(Ia,1&a),null===e)return Cl(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(I=o.children,e=o.fallback,r?(o=t.mode,r=t.child,I={mode:"hidden",children:I},0===(1&o)&&null!==r?(r.childLanes=0,r.pendingProps=I):r=Ni(I,o,0,null),e=Hi(e,o,n,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=Nr(n),t.memoizedState=Hr,e):Fr(t,I));if(null!==(a=e.memoizedState)&&null!==(g=a.dehydrated))return function(e,t,n,g,o,a,r){if(n)return 256&t.flags?(t.flags&=-257,xr(e,t,r,g=cr(Error(l(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=g.fallback,o=t.mode,g=Ni({mode:"visible",children:g.children},o,0,null),(a=Hi(a,o,r,null)).flags|=2,g.return=t,a.return=t,g.sibling=a,t.child=g,0!==(1&t.mode)&&ql(t,e.child,null,r),t.child.memoizedState=Nr(r),t.memoizedState=Hr,a);if(0===(1&t.mode))return xr(e,t,r,null);if("$!"===o.data){if(g=o.nextSibling&&o.nextSibling.dataset)var I=g.dgst;return g=I,xr(e,t,r,g=cr(a=Error(l(419)),g,void 0))}if(I=0!==(r&e.childLanes),fr||I){if(null!==(g=RI)){switch(r&-r){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(g.suspendedLanes|r))?0:o)&&o!==a.retryLane&&(a.retryLane=o,kl(e,o),ni(g,e,o,-1))}return Ai(),xr(e,t,r,g=cr(Error(l(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Vi.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,ol=io(o.nextSibling),gl=t,ll=!0,al=null,null!==e&&(jo[Po++]=qo,jo[Po++]=_o,jo[Po++]=Oo,qo=e.id,_o=e.overflow,Oo=t),(t=Fr(t,g.children)).flags|=4096,t)}(e,t,I,o,g,a,n);if(r){r=o.fallback,I=t.mode,g=(a=e.child).sibling;var i={mode:"hidden",children:o.children};return 0===(1&I)&&t.child!==a?((o=t.child).childLanes=0,o.pendingProps=i,t.deletions=null):(o=Yi(a,i)).subtreeFlags=14680064&a.subtreeFlags,null!==g?r=Yi(g,r):(r=Hi(r,I,n,null)).flags|=2,r.return=t,o.return=t,o.sibling=r,t.child=o,o=r,r=t.child,I=null===(I=e.child.memoizedState)?Nr(n):{baseLanes:I.baseLanes|n,cachePool:null,transitions:I.transitions},r.memoizedState=I,r.childLanes=e.childLanes&~n,t.memoizedState=Hr,o}return e=(r=e.child).sibling,o=Yi(r,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Fr(e,t){return(t=Ni({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function xr(e,t,n,g){return null!==g&&Al(g),ql(t,e.child,null,n),(e=Fr(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Er(e,t,n){e.lanes|=t;var g=e.alternate;null!==g&&(g.lanes|=t),Gl(e.return,t,n)}function Mr(e,t,n,g,o){var l=e.memoizedState;null===l?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:g,tail:n,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=g,l.tail=n,l.tailMode=o)}function zr(e,t,n){var g=t.pendingProps,o=g.revealOrder,l=g.tail;if(yr(e,t,g.children,n),0!==(2&(g=Ia.current)))g=1&g|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Er(e,n,t);else if(19===e.tag)Er(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}g&=1}if(Vo(Ia,g),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ia(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Mr(t,!1,o,n,l);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ia(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Mr(t,!0,n,null,l);break;case"together":Mr(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Lr(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ur(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),NI|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(l(153));if(null!==t.child){for(n=Yi(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Yi(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qr(e,t){if(!ll)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var g=null;null!==n;)null!==n.alternate&&(g=n),n=n.sibling;null===g?t||null===e.tail?e.tail=null:e.tail.sibling=null:g.sibling=null}}function Tr(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,g=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,g|=14680064&o.subtreeFlags,g|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,g|=o.subtreeFlags,g|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=g,e.childLanes=n,t}function Dr(e,t,n){var g=t.pendingProps;switch(nl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tr(t),null;case 1:case 17:return Yo(t.type)&&wo(),Tr(t),null;case 3:return g=t.stateNode,la(),So(ko),So(Ro),ca(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),null!==e&&null!==e.child||(ul(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==al&&(ai(al),al=null))),Tr(t),null;case 5:ra(t);var o=ga(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Yr(e,t,n,g),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!g){if(null===t.stateNode)throw Error(l(166));return Tr(t),null}if(e=ga(ea.current),ul(t)){g=t.stateNode,n=t.type;var a=t.memoizedProps;switch(g[uo]=t,g[so]=a,e=0!==(1&t.mode),n){case"dialog":xg("cancel",g),xg("close",g);break;case"iframe":case"object":case"embed":xg("load",g);break;case"video":case"audio":for(o=0;o<Hg.length;o++)xg(Hg[o],g);break;case"source":xg("error",g);break;case"img":case"image":case"link":xg("error",g),xg("load",g);break;case"details":xg("toggle",g);break;case"input":O(g,a),xg("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!a.multiple},xg("invalid",g);break;case"textarea":oe(g,a),xg("invalid",g)}for(var I in pe(n,a),o=null,a)if(a.hasOwnProperty(I)){var i=a[I];"children"===I?"string"===typeof i?g.textContent!==i&&(!0!==a.suppressHydrationWarning&&_g(g.textContent,i,e),o=["children",i]):"number"===typeof i&&g.textContent!==""+i&&(!0!==a.suppressHydrationWarning&&_g(g.textContent,i,e),o=["children",""+i]):r.hasOwnProperty(I)&&null!=i&&"onScroll"===I&&xg("scroll",g)}switch(n){case"input":T(g),$(g,a,!0);break;case"textarea":T(g),ae(g);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(g.onclick=$g)}g=o,t.updateQueue=g,null!==g&&(t.flags|=4)}else{I=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=re(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=I.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof g.is?e=I.createElement(n,{is:g.is}):(e=I.createElement(n),"select"===n&&(I=e,g.multiple?I.multiple=!0:g.size&&(I.size=g.size))):e=I.createElementNS(e,n),e[uo]=t,e[so]=g,Jr(e,t),t.stateNode=e;e:{switch(I=he(n,g),n){case"dialog":xg("cancel",e),xg("close",e),o=g;break;case"iframe":case"object":case"embed":xg("load",e),o=g;break;case"video":case"audio":for(o=0;o<Hg.length;o++)xg(Hg[o],e);o=g;break;case"source":xg("error",e),o=g;break;case"img":case"image":case"link":xg("error",e),xg("load",e),o=g;break;case"details":xg("toggle",e),o=g;break;case"input":O(e,g),o=P(e,g),xg("invalid",e);break;case"option":default:o=g;break;case"select":e._wrapperState={wasMultiple:!!g.multiple},o=K({},g,{value:void 0}),xg("invalid",e);break;case"textarea":oe(e,g),o=ge(e,g),xg("invalid",e)}for(a in pe(n,o),i=o)if(i.hasOwnProperty(a)){var C=i[a];"style"===a?me(e,C):"dangerouslySetInnerHTML"===a?null!=(C=C?C.__html:void 0)&&ce(e,C):"children"===a?"string"===typeof C?("textarea"!==n||""!==C)&&ue(e,C):"number"===typeof C&&ue(e,""+C):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(r.hasOwnProperty(a)?null!=C&&"onScroll"===a&&xg("scroll",e):null!=C&&h(e,a,C,I))}switch(n){case"input":T(e),$(e,g,!1);break;case"textarea":T(e),ae(e);break;case"option":null!=g.value&&e.setAttribute("value",""+U(g.value));break;case"select":e.multiple=!!g.multiple,null!=(a=g.value)?ne(e,!!g.multiple,a,!1):null!=g.defaultValue&&ne(e,!!g.multiple,g.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=$g)}switch(n){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Tr(t),null;case 6:if(e&&null!=t.stateNode)wr(0,t,e.memoizedProps,g);else{if("string"!==typeof g&&null===t.stateNode)throw Error(l(166));if(n=ga(na.current),ga(ea.current),ul(t)){if(g=t.stateNode,n=t.memoizedProps,g[uo]=t,(a=g.nodeValue!==n)&&null!==(e=gl))switch(e.tag){case 3:_g(g.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&_g(g.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(g=(9===n.nodeType?n:n.ownerDocument).createTextNode(g))[uo]=t,t.stateNode=g}return Tr(t),null;case 13:if(So(Ia),g=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ll&&null!==ol&&0!==(1&t.mode)&&0===(128&t.flags))sl(),dl(),t.flags|=98560,a=!1;else if(a=ul(t),null!==g&&null!==g.dehydrated){if(null===e){if(!a)throw Error(l(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(l(317));a[uo]=t}else dl(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Tr(t),a=!1}else null!==al&&(ai(al),al=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((g=null!==g)!==(null!==e&&null!==e.memoizedState)&&g&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Ia.current)?0===wI&&(wI=3):Ai())),null!==t.updateQueue&&(t.flags|=4),Tr(t),null);case 4:return la(),null===e&&zg(t.stateNode.containerInfo),Tr(t),null;case 10:return vl(t.type._context),Tr(t),null;case 19:if(So(Ia),null===(a=t.memoizedState))return Tr(t),null;if(g=0!==(128&t.flags),null===(I=a.rendering))if(g)Qr(a,!1);else{if(0!==wI||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(I=ia(e))){for(t.flags|=128,Qr(a,!1),null!==(g=I.updateQueue)&&(t.updateQueue=g,t.flags|=4),t.subtreeFlags=0,g=n,n=t.child;null!==n;)e=g,(a=n).flags&=14680066,null===(I=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=I.childLanes,a.lanes=I.lanes,a.child=I.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=I.memoizedProps,a.memoizedState=I.memoizedState,a.updateQueue=I.updateQueue,a.type=I.type,e=I.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Vo(Ia,1&Ia.current|2),t.child}e=e.sibling}null!==a.tail&&qe()>zI&&(t.flags|=128,g=!0,Qr(a,!1),t.lanes=4194304)}else{if(!g)if(null!==(e=ia(I))){if(t.flags|=128,g=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qr(a,!0),null===a.tail&&"hidden"===a.tailMode&&!I.alternate&&!ll)return Tr(t),null}else 2*qe()-a.renderingStartTime>zI&&1073741824!==n&&(t.flags|=128,g=!0,Qr(a,!1),t.lanes=4194304);a.isBackwards?(I.sibling=t.child,t.child=I):(null!==(n=a.last)?n.sibling=I:t.child=I,a.last=I)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=qe(),t.sibling=null,n=Ia.current,Vo(Ia,g?1&n|2:1&n),t):(Tr(t),null);case 22:case 23:return ci(),g=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==g&&(t.flags|=8192),g&&0!==(1&t.mode)?0!==(1073741824&JI)&&(Tr(t),6&t.subtreeFlags&&(t.flags|=8192)):Tr(t),null;case 24:case 25:return null}throw Error(l(156,t.tag))}function jr(e,t){switch(nl(t),t.tag){case 1:return Yo(t.type)&&wo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return la(),So(ko),So(Ro),ca(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ra(t),null;case 13:if(So(Ia),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(l(340));dl()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return So(Ia),null;case 4:return la(),null;case 10:return vl(t.type._context),null;case 22:case 23:return ci(),null;default:return null}}Jr=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yr=function(e,t,n,g){var o=e.memoizedProps;if(o!==g){e=t.stateNode,ga(ea.current);var l,a=null;switch(n){case"input":o=P(e,o),g=P(e,g),a=[];break;case"select":o=K({},o,{value:void 0}),g=K({},g,{value:void 0}),a=[];break;case"textarea":o=ge(e,o),g=ge(e,g),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof g.onClick&&(e.onclick=$g)}for(C in pe(n,g),n=null,o)if(!g.hasOwnProperty(C)&&o.hasOwnProperty(C)&&null!=o[C])if("style"===C){var I=o[C];for(l in I)I.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else"dangerouslySetInnerHTML"!==C&&"children"!==C&&"suppressContentEditableWarning"!==C&&"suppressHydrationWarning"!==C&&"autoFocus"!==C&&(r.hasOwnProperty(C)?a||(a=[]):(a=a||[]).push(C,null));for(C in g){var i=g[C];if(I=null!=o?o[C]:void 0,g.hasOwnProperty(C)&&i!==I&&(null!=i||null!=I))if("style"===C)if(I){for(l in I)!I.hasOwnProperty(l)||i&&i.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in i)i.hasOwnProperty(l)&&I[l]!==i[l]&&(n||(n={}),n[l]=i[l])}else n||(a||(a=[]),a.push(C,n)),n=i;else"dangerouslySetInnerHTML"===C?(i=i?i.__html:void 0,I=I?I.__html:void 0,null!=i&&I!==i&&(a=a||[]).push(C,i)):"children"===C?"string"!==typeof i&&"number"!==typeof i||(a=a||[]).push(C,""+i):"suppressContentEditableWarning"!==C&&"suppressHydrationWarning"!==C&&(r.hasOwnProperty(C)?(null!=i&&"onScroll"===C&&xg("scroll",e),a||I===i||(a=[])):(a=a||[]).push(C,i))}n&&(a=a||[]).push("style",n);var C=a;(t.updateQueue=C)&&(t.flags|=4)}},wr=function(e,t,n,g){n!==g&&(t.flags|=4)};var Pr=!1,Or=!1,qr="function"===typeof WeakSet?WeakSet:Set,_r=null;function $r(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(g){Gi(e,t,g)}else n.current=null}function eI(e,t,n){try{n()}catch(g){Gi(e,t,g)}}var tI=!1;function nI(e,t,n){var g=t.updateQueue;if(null!==(g=null!==g?g.lastEffect:null)){var o=g=g.next;do{if((o.tag&e)===e){var l=o.destroy;o.destroy=void 0,void 0!==l&&eI(t,n,l)}o=o.next}while(o!==g)}}function gI(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var g=n.create;n.destroy=g()}n=n.next}while(n!==t)}}function oI(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function lI(e){var t=e.alternate;null!==t&&(e.alternate=null,lI(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[uo],delete t[so],delete t[mo],delete t[bo],delete t[po])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function aI(e){return 5===e.tag||3===e.tag||4===e.tag}function rI(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||aI(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function II(e,t,n){var g=e.tag;if(5===g||6===g)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$g));else if(4!==g&&null!==(e=e.child))for(II(e,t,n),e=e.sibling;null!==e;)II(e,t,n),e=e.sibling}function iI(e,t,n){var g=e.tag;if(5===g||6===g)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==g&&null!==(e=e.child))for(iI(e,t,n),e=e.sibling;null!==e;)iI(e,t,n),e=e.sibling}var CI=null,cI=!1;function uI(e,t,n){for(n=n.child;null!==n;)sI(e,t,n),n=n.sibling}function sI(e,t,n){if(lt&&"function"===typeof lt.onCommitFiberUnmount)try{lt.onCommitFiberUnmount(ot,n)}catch(r){}switch(n.tag){case 5:Or||$r(n,t);case 6:var g=CI,o=cI;CI=null,uI(e,t,n),cI=o,null!==(CI=g)&&(cI?(e=CI,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):CI.removeChild(n.stateNode));break;case 18:null!==CI&&(cI?(e=CI,n=n.stateNode,8===e.nodeType?Io(e.parentNode,n):1===e.nodeType&&Io(e,n),zt(e)):Io(CI,n.stateNode));break;case 4:g=CI,o=cI,CI=n.stateNode.containerInfo,cI=!0,uI(e,t,n),CI=g,cI=o;break;case 0:case 11:case 14:case 15:if(!Or&&(null!==(g=n.updateQueue)&&null!==(g=g.lastEffect))){o=g=g.next;do{var l=o,a=l.destroy;l=l.tag,void 0!==a&&(0!==(2&l)||0!==(4&l))&&eI(n,t,a),o=o.next}while(o!==g)}uI(e,t,n);break;case 1:if(!Or&&($r(n,t),"function"===typeof(g=n.stateNode).componentWillUnmount))try{g.props=n.memoizedProps,g.state=n.memoizedState,g.componentWillUnmount()}catch(r){Gi(n,t,r)}uI(e,t,n);break;case 21:uI(e,t,n);break;case 22:1&n.mode?(Or=(g=Or)||null!==n.memoizedState,uI(e,t,n),Or=g):uI(e,t,n);break;default:uI(e,t,n)}}function dI(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new qr),t.forEach((function(t){var g=Wi.bind(null,e,t);n.has(t)||(n.add(t),t.then(g,g))}))}}function AI(e,t){var n=t.deletions;if(null!==n)for(var g=0;g<n.length;g++){var o=n[g];try{var a=e,r=t,I=r;e:for(;null!==I;){switch(I.tag){case 5:CI=I.stateNode,cI=!1;break e;case 3:case 4:CI=I.stateNode.containerInfo,cI=!0;break e}I=I.return}if(null===CI)throw Error(l(160));sI(a,r,o),CI=null,cI=!1;var i=o.alternate;null!==i&&(i.return=null),o.return=null}catch(C){Gi(o,t,C)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mI(t,e),t=t.sibling}function mI(e,t){var n=e.alternate,g=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(AI(t,e),bI(e),4&g){try{nI(3,e,e.return),gI(3,e)}catch(m){Gi(e,e.return,m)}try{nI(5,e,e.return)}catch(m){Gi(e,e.return,m)}}break;case 1:AI(t,e),bI(e),512&g&&null!==n&&$r(n,n.return);break;case 5:if(AI(t,e),bI(e),512&g&&null!==n&&$r(n,n.return),32&e.flags){var o=e.stateNode;try{ue(o,"")}catch(m){Gi(e,e.return,m)}}if(4&g&&null!=(o=e.stateNode)){var a=e.memoizedProps,r=null!==n?n.memoizedProps:a,I=e.type,i=e.updateQueue;if(e.updateQueue=null,null!==i)try{"input"===I&&"radio"===a.type&&null!=a.name&&q(o,a),he(I,r);var C=he(I,a);for(r=0;r<i.length;r+=2){var c=i[r],u=i[r+1];"style"===c?me(o,u):"dangerouslySetInnerHTML"===c?ce(o,u):"children"===c?ue(o,u):h(o,c,u,C)}switch(I){case"input":_(o,a);break;case"textarea":le(o,a);break;case"select":var s=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var d=a.value;null!=d?ne(o,!!a.multiple,d,!1):s!==!!a.multiple&&(null!=a.defaultValue?ne(o,!!a.multiple,a.defaultValue,!0):ne(o,!!a.multiple,a.multiple?[]:"",!1))}o[so]=a}catch(m){Gi(e,e.return,m)}}break;case 6:if(AI(t,e),bI(e),4&g){if(null===e.stateNode)throw Error(l(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(m){Gi(e,e.return,m)}}break;case 3:if(AI(t,e),bI(e),4&g&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Gi(e,e.return,m)}break;case 4:default:AI(t,e),bI(e);break;case 13:AI(t,e),bI(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(MI=qe())),4&g&&dI(e);break;case 22:if(c=null!==n&&null!==n.memoizedState,1&e.mode?(Or=(C=Or)||c,AI(t,e),Or=C):AI(t,e),bI(e),8192&g){if(C=null!==e.memoizedState,(e.stateNode.isHidden=C)&&!c&&0!==(1&e.mode))for(_r=e,c=e.child;null!==c;){for(u=_r=c;null!==_r;){switch(d=(s=_r).child,s.tag){case 0:case 11:case 14:case 15:nI(4,s,s.return);break;case 1:$r(s,s.return);var A=s.stateNode;if("function"===typeof A.componentWillUnmount){g=s,n=s.return;try{t=g,A.props=t.memoizedProps,A.state=t.memoizedState,A.componentWillUnmount()}catch(m){Gi(g,n,m)}}break;case 5:$r(s,s.return);break;case 22:if(null!==s.memoizedState){yI(u);continue}}null!==d?(d.return=s,_r=d):yI(u)}c=c.sibling}e:for(c=null,u=e;;){if(5===u.tag){if(null===c){c=u;try{o=u.stateNode,C?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(I=u.stateNode,r=void 0!==(i=u.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,I.style.display=Ae("display",r))}catch(m){Gi(e,e.return,m)}}}else if(6===u.tag){if(null===c)try{u.stateNode.nodeValue=C?"":u.memoizedProps}catch(m){Gi(e,e.return,m)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===e)&&null!==u.child){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;null===u.sibling;){if(null===u.return||u.return===e)break e;c===u&&(c=null),u=u.return}c===u&&(c=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:AI(t,e),bI(e),4&g&&dI(e);case 21:}}function bI(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(aI(n)){var g=n;break e}n=n.return}throw Error(l(160))}switch(g.tag){case 5:var o=g.stateNode;32&g.flags&&(ue(o,""),g.flags&=-33),iI(e,rI(e),o);break;case 3:case 4:var a=g.stateNode.containerInfo;II(e,rI(e),a);break;default:throw Error(l(161))}}catch(r){Gi(e,e.return,r)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function pI(e,t,n){_r=e,hI(e,t,n)}function hI(e,t,n){for(var g=0!==(1&e.mode);null!==_r;){var o=_r,l=o.child;if(22===o.tag&&g){var a=null!==o.memoizedState||Pr;if(!a){var r=o.alternate,I=null!==r&&null!==r.memoizedState||Or;r=Pr;var i=Or;if(Pr=a,(Or=I)&&!i)for(_r=o;null!==_r;)I=(a=_r).child,22===a.tag&&null!==a.memoizedState?ZI(o):null!==I?(I.return=a,_r=I):ZI(o);for(;null!==l;)_r=l,hI(l,t,n),l=l.sibling;_r=o,Pr=r,Or=i}fI(e)}else 0!==(8772&o.subtreeFlags)&&null!==l?(l.return=o,_r=l):fI(e)}}function fI(e){for(;null!==_r;){var t=_r;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Or||gI(5,t);break;case 1:var g=t.stateNode;if(4&t.flags&&!Or)if(null===n)g.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:bl(t.type,n.memoizedProps);g.componentDidUpdate(o,n.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&xl(t,a,g);break;case 3:var r=t.updateQueue;if(null!==r){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}xl(t,r,n)}break;case 5:var I=t.stateNode;if(null===n&&4&t.flags){n=I;var i=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break;case"img":i.src&&(n.src=i.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var C=t.alternate;if(null!==C){var c=C.memoizedState;if(null!==c){var u=c.dehydrated;null!==u&&zt(u)}}}break;default:throw Error(l(163))}Or||512&t.flags&&oI(t)}catch(s){Gi(t,t.return,s)}}if(t===e){_r=null;break}if(null!==(n=t.sibling)){n.return=t.return,_r=n;break}_r=t.return}}function yI(e){for(;null!==_r;){var t=_r;if(t===e){_r=null;break}var n=t.sibling;if(null!==n){n.return=t.return,_r=n;break}_r=t.return}}function ZI(e){for(;null!==_r;){var t=_r;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{gI(4,t)}catch(I){Gi(t,n,I)}break;case 1:var g=t.stateNode;if("function"===typeof g.componentDidMount){var o=t.return;try{g.componentDidMount()}catch(I){Gi(t,o,I)}}var l=t.return;try{oI(t)}catch(I){Gi(t,l,I)}break;case 5:var a=t.return;try{oI(t)}catch(I){Gi(t,a,I)}}}catch(I){Gi(t,t.return,I)}if(t===e){_r=null;break}var r=t.sibling;if(null!==r){r.return=t.return,_r=r;break}_r=t.return}}var vI,GI=Math.ceil,BI=f.ReactCurrentDispatcher,SI=f.ReactCurrentOwner,VI=f.ReactCurrentBatchConfig,WI=0,RI=null,kI=null,XI=0,JI=0,YI=Bo(0),wI=0,HI=null,NI=0,KI=0,FI=0,xI=null,EI=null,MI=0,zI=1/0,LI=null,UI=!1,QI=null,TI=null,DI=!1,jI=null,PI=0,OI=0,qI=null,_I=-1,$I=0;function ei(){return 0!==(6&WI)?qe():-1!==_I?_I:_I=qe()}function ti(e){return 0===(1&e.mode)?1:0!==(2&WI)&&0!==XI?XI&-XI:null!==ml.transition?(0===$I&&($I=At()),$I):0!==(e=ht)?e:e=void 0===(e=window.event)?16:Ot(e.type)}function ni(e,t,n,g){if(50<OI)throw OI=0,qI=null,Error(l(185));bt(e,n,g),0!==(2&WI)&&e===RI||(e===RI&&(0===(2&WI)&&(KI|=n),4===wI&&ri(e,XI)),gi(e,g),1===n&&0===WI&&0===(1&t.mode)&&(zI=qe()+500,Eo&&Lo()))}function gi(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,g=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-at(l),r=1<<a,I=o[a];-1===I?0!==(r&n)&&0===(r&g)||(o[a]=st(r,t)):I<=t&&(e.expiredLanes|=r),l&=~r}}(e,t);var g=ut(e,e===RI?XI:0);if(0===g)null!==n&&je(n),e.callbackNode=null,e.callbackPriority=0;else if(t=g&-g,e.callbackPriority!==t){if(null!=n&&je(n),1===t)0===e.tag?function(e){Eo=!0,zo(e)}(Ii.bind(null,e)):zo(Ii.bind(null,e)),ao((function(){0===(6&WI)&&Lo()})),n=null;else{switch(ft(g)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=gt}n=Ri(n,oi.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oi(e,t){if(_I=-1,$I=0,0!==(6&WI))throw Error(l(327));var n=e.callbackNode;if(Zi()&&e.callbackNode!==n)return null;var g=ut(e,e===RI?XI:0);if(0===g)return null;if(0!==(30&g)||0!==(g&e.expiredLanes)||t)t=mi(e,g);else{t=g;var o=WI;WI|=2;var a=di();for(RI===e&&XI===t||(LI=null,zI=qe()+500,ui(e,t));;)try{pi();break}catch(I){si(e,I)}Zl(),BI.current=a,WI=o,null!==kI?t=0:(RI=null,XI=0,t=wI)}if(0!==t){if(2===t&&(0!==(o=dt(e))&&(g=o,t=li(e,o))),1===t)throw n=HI,ui(e,0),ri(e,g),gi(e,qe()),n;if(6===t)ri(e,g);else{if(o=e.current.alternate,0===(30&g)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var g=0;g<n.length;g++){var o=n[g],l=o.getSnapshot;o=o.value;try{if(!rg(l(),o))return!1}catch(r){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=mi(e,g))&&(0!==(a=dt(e))&&(g=a,t=li(e,a))),1===t))throw n=HI,ui(e,0),ri(e,g),gi(e,qe()),n;switch(e.finishedWork=o,e.finishedLanes=g,t){case 0:case 1:throw Error(l(345));case 2:case 5:yi(e,EI,LI);break;case 3:if(ri(e,g),(130023424&g)===g&&10<(t=MI+500-qe())){if(0!==ut(e,0))break;if(((o=e.suspendedLanes)&g)!==g){ei(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=go(yi.bind(null,e,EI,LI),t);break}yi(e,EI,LI);break;case 4:if(ri(e,g),(4194240&g)===g)break;for(t=e.eventTimes,o=-1;0<g;){var r=31-at(g);a=1<<r,(r=t[r])>o&&(o=r),g&=~a}if(g=o,10<(g=(120>(g=qe()-g)?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*GI(g/1960))-g)){e.timeoutHandle=go(yi.bind(null,e,EI,LI),g);break}yi(e,EI,LI);break;default:throw Error(l(329))}}}return gi(e,qe()),e.callbackNode===n?oi.bind(null,e):null}function li(e,t){var n=xI;return e.current.memoizedState.isDehydrated&&(ui(e,t).flags|=256),2!==(e=mi(e,t))&&(t=EI,EI=n,null!==t&&ai(t)),e}function ai(e){null===EI?EI=e:EI.push.apply(EI,e)}function ri(e,t){for(t&=~FI,t&=~KI,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),g=1<<n;e[n]=-1,t&=~g}}function Ii(e){if(0!==(6&WI))throw Error(l(327));Zi();var t=ut(e,0);if(0===(1&t))return gi(e,qe()),null;var n=mi(e,t);if(0!==e.tag&&2===n){var g=dt(e);0!==g&&(t=g,n=li(e,g))}if(1===n)throw n=HI,ui(e,0),ri(e,t),gi(e,qe()),n;if(6===n)throw Error(l(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yi(e,EI,LI),gi(e,qe()),null}function ii(e,t){var n=WI;WI|=1;try{return e(t)}finally{0===(WI=n)&&(zI=qe()+500,Eo&&Lo())}}function Ci(e){null!==jI&&0===jI.tag&&0===(6&WI)&&Zi();var t=WI;WI|=1;var n=VI.transition,g=ht;try{if(VI.transition=null,ht=1,e)return e()}finally{ht=g,VI.transition=n,0===(6&(WI=t))&&Lo()}}function ci(){JI=YI.current,So(YI)}function ui(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==kI)for(n=kI.return;null!==n;){var g=n;switch(nl(g),g.tag){case 1:null!==(g=g.type.childContextTypes)&&void 0!==g&&wo();break;case 3:la(),So(ko),So(Ro),ca();break;case 5:ra(g);break;case 4:la();break;case 13:case 19:So(Ia);break;case 10:vl(g.type._context);break;case 22:case 23:ci()}n=n.return}if(RI=e,kI=e=Yi(e.current,null),XI=JI=t,wI=0,HI=null,FI=KI=NI=0,EI=xI=null,null!==Vl){for(t=0;t<Vl.length;t++)if(null!==(g=(n=Vl[t]).interleaved)){n.interleaved=null;var o=g.next,l=n.pending;if(null!==l){var a=l.next;l.next=o,g.next=a}n.pending=g}Vl=null}return e}function si(e,t){for(;;){var n=kI;try{if(Zl(),ua.current=ar,pa){for(var g=Aa.memoizedState;null!==g;){var o=g.queue;null!==o&&(o.pending=null),g=g.next}pa=!1}if(da=0,ba=ma=Aa=null,ha=!1,fa=0,SI.current=null,null===n||null===n.return){wI=1,HI=t,kI=null;break}e:{var a=e,r=n.return,I=n,i=t;if(t=XI,I.flags|=32768,null!==i&&"object"===typeof i&&"function"===typeof i.then){var C=i,c=I,u=c.tag;if(0===(1&c.mode)&&(0===u||11===u||15===u)){var s=c.alternate;s?(c.updateQueue=s.updateQueue,c.memoizedState=s.memoizedState,c.lanes=s.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=br(r);if(null!==d){d.flags&=-257,pr(d,r,I,0,t),1&d.mode&&mr(a,C,t),i=C;var A=(t=d).updateQueue;if(null===A){var m=new Set;m.add(i),t.updateQueue=m}else A.add(i);break e}if(0===(1&t)){mr(a,C,t),Ai();break e}i=Error(l(426))}else if(ll&&1&I.mode){var b=br(r);if(null!==b){0===(65536&b.flags)&&(b.flags|=256),pr(b,r,I,0,t),Al(Cr(i,I));break e}}a=i=Cr(i,I),4!==wI&&(wI=2),null===xI?xI=[a]:xI.push(a),a=r;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Kl(a,dr(0,i,t));break e;case 1:I=i;var p=a.type,h=a.stateNode;if(0===(128&a.flags)&&("function"===typeof p.getDerivedStateFromError||null!==h&&"function"===typeof h.componentDidCatch&&(null===TI||!TI.has(h)))){a.flags|=65536,t&=-t,a.lanes|=t,Kl(a,Ar(a,I,t));break e}}a=a.return}while(null!==a)}fi(n)}catch(f){t=f,kI===n&&null!==n&&(kI=n=n.return);continue}break}}function di(){var e=BI.current;return BI.current=ar,null===e?ar:e}function Ai(){0!==wI&&3!==wI&&2!==wI||(wI=4),null===RI||0===(268435455&NI)&&0===(268435455&KI)||ri(RI,XI)}function mi(e,t){var n=WI;WI|=2;var g=di();for(RI===e&&XI===t||(LI=null,ui(e,t));;)try{bi();break}catch(o){si(e,o)}if(Zl(),WI=n,BI.current=g,null!==kI)throw Error(l(261));return RI=null,XI=0,wI}function bi(){for(;null!==kI;)hi(kI)}function pi(){for(;null!==kI&&!Pe();)hi(kI)}function hi(e){var t=vI(e.alternate,e,JI);e.memoizedProps=e.pendingProps,null===t?fi(e):kI=t,SI.current=null}function fi(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Dr(n,t,JI)))return void(kI=n)}else{if(null!==(n=jr(n,t)))return n.flags&=32767,void(kI=n);if(null===e)return wI=6,void(kI=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(kI=t);kI=t=e}while(null!==t);0===wI&&(wI=5)}function yi(e,t,n){var g=ht,o=VI.transition;try{VI.transition=null,ht=1,function(e,t,n,g){do{Zi()}while(null!==jI);if(0!==(6&WI))throw Error(l(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(l(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var g=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-at(n),l=1<<o;t[o]=0,g[o]=-1,e[o]=-1,n&=~l}}(e,a),e===RI&&(kI=RI=null,XI=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||DI||(DI=!0,Ri(tt,(function(){return Zi(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=VI.transition,VI.transition=null;var r=ht;ht=1;var I=WI;WI|=4,SI.current=null,function(e,t){if(eo=Ut,sg(e=ug())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var g=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(g&&0!==g.rangeCount){n=g.anchorNode;var o=g.anchorOffset,a=g.focusNode;g=g.focusOffset;try{n.nodeType,a.nodeType}catch(y){n=null;break e}var r=0,I=-1,i=-1,C=0,c=0,u=e,s=null;t:for(;;){for(var d;u!==n||0!==o&&3!==u.nodeType||(I=r+o),u!==a||0!==g&&3!==u.nodeType||(i=r+g),3===u.nodeType&&(r+=u.nodeValue.length),null!==(d=u.firstChild);)s=u,u=d;for(;;){if(u===e)break t;if(s===n&&++C===o&&(I=r),s===a&&++c===g&&(i=r),null!==(d=u.nextSibling))break;s=(u=s).parentNode}u=d}n=-1===I||-1===i?null:{start:I,end:i}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Ut=!1,_r=t;null!==_r;)if(e=(t=_r).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,_r=e;else for(;null!==_r;){t=_r;try{var A=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==A){var m=A.memoizedProps,b=A.memoizedState,p=t.stateNode,h=p.getSnapshotBeforeUpdate(t.elementType===t.type?m:bl(t.type,m),b);p.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var f=t.stateNode.containerInfo;1===f.nodeType?f.textContent="":9===f.nodeType&&f.documentElement&&f.removeChild(f.documentElement);break;default:throw Error(l(163))}}catch(y){Gi(t,t.return,y)}if(null!==(e=t.sibling)){e.return=t.return,_r=e;break}_r=t.return}A=tI,tI=!1}(e,n),mI(n,e),dg(to),Ut=!!eo,to=eo=null,e.current=n,pI(n,e,o),Oe(),WI=I,ht=r,VI.transition=a}else e.current=n;if(DI&&(DI=!1,jI=e,PI=o),0===(a=e.pendingLanes)&&(TI=null),function(e){if(lt&&"function"===typeof lt.onCommitFiberRoot)try{lt.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),gi(e,qe()),null!==t)for(g=e.onRecoverableError,n=0;n<t.length;n++)g((o=t[n]).value,{componentStack:o.stack,digest:o.digest});if(UI)throw UI=!1,e=QI,QI=null,e;0!==(1&PI)&&0!==e.tag&&Zi(),0!==(1&(a=e.pendingLanes))?e===qI?OI++:(OI=0,qI=e):OI=0,Lo()}(e,t,n,g)}finally{VI.transition=o,ht=g}return null}function Zi(){if(null!==jI){var e=ft(PI),t=VI.transition,n=ht;try{if(VI.transition=null,ht=16>e?16:e,null===jI)var g=!1;else{if(e=jI,jI=null,PI=0,0!==(6&WI))throw Error(l(331));var o=WI;for(WI|=4,_r=e.current;null!==_r;){var a=_r,r=a.child;if(0!==(16&_r.flags)){var I=a.deletions;if(null!==I){for(var i=0;i<I.length;i++){var C=I[i];for(_r=C;null!==_r;){var c=_r;switch(c.tag){case 0:case 11:case 15:nI(8,c,a)}var u=c.child;if(null!==u)u.return=c,_r=u;else for(;null!==_r;){var s=(c=_r).sibling,d=c.return;if(lI(c),c===C){_r=null;break}if(null!==s){s.return=d,_r=s;break}_r=d}}}var A=a.alternate;if(null!==A){var m=A.child;if(null!==m){A.child=null;do{var b=m.sibling;m.sibling=null,m=b}while(null!==m)}}_r=a}}if(0!==(2064&a.subtreeFlags)&&null!==r)r.return=a,_r=r;else e:for(;null!==_r;){if(0!==(2048&(a=_r).flags))switch(a.tag){case 0:case 11:case 15:nI(9,a,a.return)}var p=a.sibling;if(null!==p){p.return=a.return,_r=p;break e}_r=a.return}}var h=e.current;for(_r=h;null!==_r;){var f=(r=_r).child;if(0!==(2064&r.subtreeFlags)&&null!==f)f.return=r,_r=f;else e:for(r=h;null!==_r;){if(0!==(2048&(I=_r).flags))try{switch(I.tag){case 0:case 11:case 15:gI(9,I)}}catch(Z){Gi(I,I.return,Z)}if(I===r){_r=null;break e}var y=I.sibling;if(null!==y){y.return=I.return,_r=y;break e}_r=I.return}}if(WI=o,Lo(),lt&&"function"===typeof lt.onPostCommitFiberRoot)try{lt.onPostCommitFiberRoot(ot,e)}catch(Z){}g=!0}return g}finally{ht=n,VI.transition=t}}return!1}function vi(e,t,n){e=Hl(e,t=dr(0,t=Cr(n,t),1),1),t=ei(),null!==e&&(bt(e,1,t),gi(e,t))}function Gi(e,t,n){if(3===e.tag)vi(e,e,n);else for(;null!==t;){if(3===t.tag){vi(t,e,n);break}if(1===t.tag){var g=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof g.componentDidCatch&&(null===TI||!TI.has(g))){t=Hl(t,e=Ar(t,e=Cr(n,e),1),1),e=ei(),null!==t&&(bt(t,1,e),gi(t,e));break}}t=t.return}}function Bi(e,t,n){var g=e.pingCache;null!==g&&g.delete(t),t=ei(),e.pingedLanes|=e.suspendedLanes&n,RI===e&&(XI&n)===n&&(4===wI||3===wI&&(130023424&XI)===XI&&500>qe()-MI?ui(e,0):FI|=n),gi(e,t)}function Si(e,t){0===t&&(0===(1&e.mode)?t=1:(t=Ct,0===(130023424&(Ct<<=1))&&(Ct=4194304)));var n=ei();null!==(e=kl(e,t))&&(bt(e,t,n),gi(e,n))}function Vi(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Si(e,n)}function Wi(e,t){var n=0;switch(e.tag){case 13:var g=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:g=e.stateNode;break;default:throw Error(l(314))}null!==g&&g.delete(t),Si(e,n)}function Ri(e,t){return De(e,t)}function ki(e,t,n,g){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xi(e,t,n,g){return new ki(e,t,n,g)}function Ji(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Yi(e,t){var n=e.alternate;return null===n?((n=Xi(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function wi(e,t,n,g,o,a){var r=2;if(g=e,"function"===typeof e)Ji(e)&&(r=1);else if("string"===typeof e)r=5;else e:switch(e){case v:return Hi(n.children,o,a,t);case G:r=8,o|=8;break;case B:return(e=Xi(12,n,t,2|o)).elementType=B,e.lanes=a,e;case R:return(e=Xi(13,n,t,o)).elementType=R,e.lanes=a,e;case k:return(e=Xi(19,n,t,o)).elementType=k,e.lanes=a,e;case Y:return Ni(n,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:r=10;break e;case V:r=9;break e;case W:r=11;break e;case X:r=14;break e;case J:r=16,g=null;break e}throw Error(l(130,null==e?e:typeof e,""))}return(t=Xi(r,n,t,o)).elementType=e,t.type=g,t.lanes=a,t}function Hi(e,t,n,g){return(e=Xi(7,e,g,t)).lanes=n,e}function Ni(e,t,n,g){return(e=Xi(22,e,g,t)).elementType=Y,e.lanes=n,e.stateNode={isHidden:!1},e}function Ki(e,t,n){return(e=Xi(6,e,null,t)).lanes=n,e}function Fi(e,t,n){return(t=Xi(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function xi(e,t,n,g,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=g,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Ei(e,t,n,g,o,l,a,r,I){return e=new xi(e,t,n,r,I),1===t?(t=1,!0===l&&(t|=8)):t=0,l=Xi(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:g,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jl(l),e}function Mi(e,t,n){var g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Z,key:null==g?null:""+g,children:e,containerInfo:t,implementation:n}}function zi(e){if(!e)return Wo;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(l(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Yo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(l(171))}if(1===e.tag){var n=e.type;if(Yo(n))return No(e,n,t)}return t}function Li(e,t,n,g,o,l,a,r,I){return(e=Ei(n,g,!0,e,0,l,0,r,I)).context=zi(null),n=e.current,(l=wl(g=ei(),o=ti(n))).callback=void 0!==t&&null!==t?t:null,Hl(n,l,o),e.current.lanes=o,bt(e,o,g),gi(e,g),e}function Ui(e,t,n,g){var o=t.current,l=ei(),a=ti(o);return n=zi(n),null===t.context?t.context=n:t.pendingContext=n,(t=wl(l,a)).payload={element:e},null!==(g=void 0===g?null:g)&&(t.callback=g),null!==(e=Hl(o,t,a))&&(ni(e,o,a,l),Nl(e,o,a)),a}function Qi(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ti(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Di(e,t){Ti(e,t),(e=e.alternate)&&Ti(e,t)}vI=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ko.current)fr=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return fr=!1,function(e,t,n){switch(t.tag){case 3:kr(t),dl();break;case 5:aa(t);break;case 1:Yo(t.type)&&Ko(t);break;case 4:oa(t,t.stateNode.containerInfo);break;case 10:var g=t.type._context,o=t.memoizedProps.value;Vo(pl,g._currentValue),g._currentValue=o;break;case 13:if(null!==(g=t.memoizedState))return null!==g.dehydrated?(Vo(Ia,1&Ia.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Kr(e,t,n):(Vo(Ia,1&Ia.current),null!==(e=Ur(e,t,n))?e.sibling:null);Vo(Ia,1&Ia.current);break;case 19:if(g=0!==(n&t.childLanes),0!==(128&e.flags)){if(g)return zr(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Vo(Ia,Ia.current),g)break;return null;case 22:case 23:return t.lanes=0,Br(e,t,n)}return Ur(e,t,n)}(e,t,n);fr=0!==(131072&e.flags)}else fr=!1,ll&&0!==(1048576&t.flags)&&el(t,Do,t.index);switch(t.lanes=0,t.tag){case 2:var g=t.type;Lr(e,t),e=t.pendingProps;var o=Jo(t,Ro.current);Bl(t,n),o=Ga(null,t,g,e,o,n);var a=Ba();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Yo(g)?(a=!0,Ko(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Jl(t),o.updater=zl,t.stateNode=o,o._reactInternals=t,Tl(t,g,e,n),t=Rr(null,t,g,!0,a,n)):(t.tag=0,ll&&a&&tl(t),yr(null,t,o,n),t=t.child),t;case 16:g=t.elementType;e:{switch(Lr(e,t),e=t.pendingProps,g=(o=g._init)(g._payload),t.type=g,o=t.tag=function(e){if("function"===typeof e)return Ji(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===W)return 11;if(e===X)return 14}return 2}(g),e=bl(g,e),o){case 0:t=Vr(null,t,g,e,n);break e;case 1:t=Wr(null,t,g,e,n);break e;case 11:t=Zr(null,t,g,e,n);break e;case 14:t=vr(null,t,g,bl(g.type,e),n);break e}throw Error(l(306,g,""))}return t;case 0:return g=t.type,o=t.pendingProps,Vr(e,t,g,o=t.elementType===g?o:bl(g,o),n);case 1:return g=t.type,o=t.pendingProps,Wr(e,t,g,o=t.elementType===g?o:bl(g,o),n);case 3:e:{if(kr(t),null===e)throw Error(l(387));g=t.pendingProps,o=(a=t.memoizedState).element,Yl(e,t),Fl(t,g,null,n);var r=t.memoizedState;if(g=r.element,a.isDehydrated){if(a={element:g,isDehydrated:!1,cache:r.cache,pendingSuspenseBoundaries:r.pendingSuspenseBoundaries,transitions:r.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Xr(e,t,g,n,o=Cr(Error(l(423)),t));break e}if(g!==o){t=Xr(e,t,g,n,o=Cr(Error(l(424)),t));break e}for(ol=io(t.stateNode.containerInfo.firstChild),gl=t,ll=!0,al=null,n=_l(t,null,g,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(dl(),g===o){t=Ur(e,t,n);break e}yr(e,t,g,n)}t=t.child}return t;case 5:return aa(t),null===e&&Cl(t),g=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,r=o.children,no(g,o)?r=null:null!==a&&no(g,a)&&(t.flags|=32),Sr(e,t),yr(e,t,r,n),t.child;case 6:return null===e&&Cl(t),null;case 13:return Kr(e,t,n);case 4:return oa(t,t.stateNode.containerInfo),g=t.pendingProps,null===e?t.child=ql(t,null,g,n):yr(e,t,g,n),t.child;case 11:return g=t.type,o=t.pendingProps,Zr(e,t,g,o=t.elementType===g?o:bl(g,o),n);case 7:return yr(e,t,t.pendingProps,n),t.child;case 8:case 12:return yr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(g=t.type._context,o=t.pendingProps,a=t.memoizedProps,r=o.value,Vo(pl,g._currentValue),g._currentValue=r,null!==a)if(rg(a.value,r)){if(a.children===o.children&&!ko.current){t=Ur(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var I=a.dependencies;if(null!==I){r=a.child;for(var i=I.firstContext;null!==i;){if(i.context===g){if(1===a.tag){(i=wl(-1,n&-n)).tag=2;var C=a.updateQueue;if(null!==C){var c=(C=C.shared).pending;null===c?i.next=i:(i.next=c.next,c.next=i),C.pending=i}}a.lanes|=n,null!==(i=a.alternate)&&(i.lanes|=n),Gl(a.return,n,t),I.lanes|=n;break}i=i.next}}else if(10===a.tag)r=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(r=a.return))throw Error(l(341));r.lanes|=n,null!==(I=r.alternate)&&(I.lanes|=n),Gl(r,n,t),r=a.sibling}else r=a.child;if(null!==r)r.return=a;else for(r=a;null!==r;){if(r===t){r=null;break}if(null!==(a=r.sibling)){a.return=r.return,r=a;break}r=r.return}a=r}yr(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,g=t.pendingProps.children,Bl(t,n),g=g(o=Sl(o)),t.flags|=1,yr(e,t,g,n),t.child;case 14:return o=bl(g=t.type,t.pendingProps),vr(e,t,g,o=bl(g.type,o),n);case 15:return Gr(e,t,t.type,t.pendingProps,n);case 17:return g=t.type,o=t.pendingProps,o=t.elementType===g?o:bl(g,o),Lr(e,t),t.tag=1,Yo(g)?(e=!0,Ko(t)):e=!1,Bl(t,n),Ul(t,g,o),Tl(t,g,o,n),Rr(null,t,g,!0,e,n);case 19:return zr(e,t,n);case 22:return Br(e,t,n)}throw Error(l(156,t.tag))};var ji="function"===typeof reportError?reportError:function(e){console.error(e)};function Pi(e){this._internalRoot=e}function Oi(e){this._internalRoot=e}function qi(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function _i(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $i(){}function eC(e,t,n,g,o){var l=n._reactRootContainer;if(l){var a=l;if("function"===typeof o){var r=o;o=function(){var e=Qi(a);r.call(e)}}Ui(t,a,e,o)}else a=function(e,t,n,g,o){if(o){if("function"===typeof g){var l=g;g=function(){var e=Qi(a);l.call(e)}}var a=Li(t,g,e,0,null,!1,0,"",$i);return e._reactRootContainer=a,e[Ao]=a.current,zg(8===e.nodeType?e.parentNode:e),Ci(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof g){var r=g;g=function(){var e=Qi(I);r.call(e)}}var I=Ei(e,0,!1,null,0,!1,0,"",$i);return e._reactRootContainer=I,e[Ao]=I.current,zg(8===e.nodeType?e.parentNode:e),Ci((function(){Ui(t,I,n,g)})),I}(n,t,e,o,g);return Qi(a)}Oi.prototype.render=Pi.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(l(409));Ui(e,t,null,null)},Oi.prototype.unmount=Pi.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Ci((function(){Ui(null,e,null,null)})),t[Ao]=null}},Oi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Yt.length&&0!==t&&t<Yt[n].priority;n++);Yt.splice(n,0,e),0===n&&Kt(e)}},yt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ct(t.pendingLanes);0!==n&&(pt(t,1|n),gi(t,qe()),0===(6&WI)&&(zI=qe()+500,Lo()))}break;case 13:Ci((function(){var t=kl(e,1);if(null!==t){var n=ei();ni(t,e,1,n)}})),Di(e,1)}},Zt=function(e){if(13===e.tag){var t=kl(e,134217728);if(null!==t)ni(t,e,134217728,ei());Di(e,134217728)}},vt=function(e){if(13===e.tag){var t=ti(e),n=kl(e,t);if(null!==n)ni(n,e,t,ei());Di(e,t)}},Gt=function(){return ht},Bt=function(e,t){var n=ht;try{return ht=e,t()}finally{ht=n}},Ze=function(e,t,n){switch(t){case"input":if(_(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var g=n[t];if(g!==e&&g.form===e.form){var o=Zo(g);if(!o)throw Error(l(90));D(g),_(g,o)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},We=ii,Re=Ci;var tC={usingClientEntryPoint:!1,Events:[fo,yo,Zo,Se,Ve,ii]},nC={findFiberByHostInstance:ho,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},gC={bundleType:nC.bundleType,version:nC.version,rendererPackageName:nC.rendererPackageName,rendererConfig:nC.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:f.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:nC.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var oC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oC.isDisabled&&oC.supportsFiber)try{ot=oC.inject(gC),lt=oC}catch(Ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tC,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qi(t))throw Error(l(200));return Mi(e,t,null,n)},t.createRoot=function(e,t){if(!qi(e))throw Error(l(299));var n=!1,g="",o=ji;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(g=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Ei(e,1,!1,null,0,n,0,g,o),e[Ao]=t.current,zg(8===e.nodeType?e.parentNode:e),new Pi(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(l(188));throw e=Object.keys(e).join(","),Error(l(268,e))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e){return Ci(e)},t.hydrate=function(e,t,n){if(!_i(t))throw Error(l(200));return eC(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!qi(e))throw Error(l(405));var g=null!=n&&n.hydratedSources||null,o=!1,a="",r=ji;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(r=n.onRecoverableError)),t=Li(t,null,e,1,null!=n?n:null,o,0,a,r),e[Ao]=t.current,zg(e),g)for(e=0;e<g.length;e++)o=(o=(n=g[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Oi(t)},t.render=function(e,t,n){if(!_i(t))throw Error(l(200));return eC(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!_i(e))throw Error(l(40));return!!e._reactRootContainer&&(Ci((function(){eC(null,null,e,!1,(function(){e._reactRootContainer=null,e[Ao]=null}))})),!0)},t.unstable_batchedUpdates=ii,t.unstable_renderSubtreeIntoContainer=function(e,t,n,g){if(!_i(n))throw Error(l(200));if(null==e||void 0===e._reactInternals)throw Error(l(38));return eC(e,t,n,!1,g)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var g=n(4164);t.createRoot=g.createRoot,t.hydrateRoot=g.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},9008:function(e,t,n){e.exports=function(e){"use strict";function t(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var g=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,g.get?g:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var n=t(e);function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var g in n)Object.prototype.hasOwnProperty.call(n,g)&&(e[g]=n[g])}return e},g.apply(this,arguments)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){if(Array.isArray(e))return e}function a(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var g,o,l=[],a=!0,r=!1;try{for(n=n.call(e);!(a=(g=n.next()).done)&&(l.push(g.value),!t||l.length!==t);a=!0);}catch(I){r=!0,o=I}finally{try{a||null==n.return||n.return()}finally{if(r)throw o}}return l}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,g=new Array(t);n<t;n++)g[n]=e[n];return g}function I(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(e,t){return l(e)||a(e,t)||I(e,t)||i()}function c(e,t){if(null==e)return{};var n,g,o={},l=Object.keys(e);for(g=0;g<l.length;g++)n=l[g],t.indexOf(n)>=0||(o[n]=e[n]);return o}function u(e,t){if(null==e)return{};var n,g,o=c(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(g=0;g<l.length;g++)n=l[g],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s={exports:{}},d={exports:{}},A={},m="function"===typeof Symbol&&Symbol.for,b=m?Symbol.for("react.element"):60103,p=m?Symbol.for("react.portal"):60106,h=m?Symbol.for("react.fragment"):60107,f=m?Symbol.for("react.strict_mode"):60108,y=m?Symbol.for("react.profiler"):60114,Z=m?Symbol.for("react.provider"):60109,v=m?Symbol.for("react.context"):60110,G=m?Symbol.for("react.async_mode"):60111,B=m?Symbol.for("react.concurrent_mode"):60111,S=m?Symbol.for("react.forward_ref"):60112,V=m?Symbol.for("react.suspense"):60113,W=m?Symbol.for("react.suspense_list"):60120,R=m?Symbol.for("react.memo"):60115,k=m?Symbol.for("react.lazy"):60116,X=m?Symbol.for("react.block"):60121,J=m?Symbol.for("react.fundamental"):60117,Y=m?Symbol.for("react.responder"):60118,w=m?Symbol.for("react.scope"):60119;function H(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case b:switch(e=e.type){case G:case B:case h:case y:case f:case V:return e;default:switch(e=e&&e.$$typeof){case v:case S:case k:case R:case Z:return e;default:return t}}case p:return t}}}function N(e){return H(e)===B}A.AsyncMode=G,A.ConcurrentMode=B,A.ContextConsumer=v,A.ContextProvider=Z,A.Element=b,A.ForwardRef=S,A.Fragment=h,A.Lazy=k,A.Memo=R,A.Portal=p,A.Profiler=y,A.StrictMode=f,A.Suspense=V,A.isAsyncMode=function(e){return N(e)||H(e)===G},A.isConcurrentMode=N,A.isContextConsumer=function(e){return H(e)===v},A.isContextProvider=function(e){return H(e)===Z},A.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===b},A.isForwardRef=function(e){return H(e)===S},A.isFragment=function(e){return H(e)===h},A.isLazy=function(e){return H(e)===k},A.isMemo=function(e){return H(e)===R},A.isPortal=function(e){return H(e)===p},A.isProfiler=function(e){return H(e)===y},A.isStrictMode=function(e){return H(e)===f},A.isSuspense=function(e){return H(e)===V},A.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===h||e===B||e===y||e===f||e===V||e===W||"object"===typeof e&&null!==e&&(e.$$typeof===k||e.$$typeof===R||e.$$typeof===Z||e.$$typeof===v||e.$$typeof===S||e.$$typeof===J||e.$$typeof===Y||e.$$typeof===w||e.$$typeof===X)},A.typeOf=H,d.exports=A;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function K(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var g=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==g.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(e){o[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(l){return!1}}K()&&Object.assign;var F="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function x(e,t,n,g,o){}Function.call.bind(Object.prototype.hasOwnProperty),x.resetWarningCache=function(){},d.exports;var E=F;function M(){}function z(){}z.resetWarningCache=M;var L=function(){function e(e,t,n,g,o,l){if(l!==E){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:z,resetWarningCache:M};return n.PropTypes=n,n};s.exports=L();var U=s.exports;function Q(e,t){var n=atob(e);if(t){for(var g=new Uint8Array(n.length),o=0,l=n.length;o<l;++o)g[o]=n.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(g.buffer))}return n}function T(e,t,n){var g=void 0===t?null:t,o=Q(e,void 0!==n&&n),l=o.indexOf("\n",10)+1,a=o.substring(l)+(g?"//# sourceMappingURL="+g:""),r=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(r)}function D(e,t,n){var g;return function(o){return g=g||T(e,t,n),new Worker(g,o)}}var j=D("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",null,!1),P=["constraints","onError","onLoad","onScan","resolution","qrArea"];function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);t&&(g=g.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,g)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(){return new j},$=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().forEach((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().forEach((function(t){e.removeTrack(t),t.stop()}))):e.stop())},ee=function(e){var t=e.constraints,o=e.onError,l=e.onLoad,a=e.onScan,r=e.resolution,I=e.qrArea,i=u(e,P),c=n.useRef(null),s=n.useRef(null),d=n.useRef(document.createElement("canvas")),A=n.useRef(null),m=n.useRef(),b=C(n.useState(null),2),p=b[0],h=b[1],f=n.useRef(!1),y=n.useRef();n.useEffect((function(){y.current=_();var e=y.current;return e.onmessage=function(e){a&&a(e.data?q(q({},e.data),{},{canvas:d.current}):null),f.current=!1},function(){e.terminate()}}),[a]);var Z=JSON.stringify(I),v=n.useCallback((function(){var e=JSON.parse(Z),t=y.current,n=s.current&&s.current.readyState===s.current.HAVE_ENOUGH_DATA;if(!f.current&&n){f.current=!0;var g,o=s.current.videoWidth,l=s.current.videoHeight,a=o>l?o:l,I=Math.floor(r/a*100)/100;l=Math.floor(I*l),o=Math.floor(I*o),d.current.width=o,d.current.height=l,A.current=d.current.getContext("2d"),A.current.drawImage(s.current,0,0,o,l),g=e&&2===e.length&&e[0]>0&&e[1]>0?A.current.getImageData(Math.floor((o-e[0])/2),Math.floor((l-e[1])/2),e[0],e[1]):A.current.getImageData(0,0,o,l),t.postMessage(g)}m.current=requestAnimationFrame(v)}),[r,Z]),G=JSON.stringify(t);return n.useEffect((function(){var e=JSON.parse(G),t=!0;return navigator.mediaDevices.getUserMedia(e).then((function(e){if(t){c.current=e;try{s.current&&(s.current.srcObject=e,s.current.setAttribute("playsinline",!0))}catch(n){h(window.URL.createObjectURL(e))}l&&l(),m.current=requestAnimationFrame(v)}else $(e)})).catch((function(e){return t?o(e):null})),function(){cancelAnimationFrame(m.current),t=!1,$(c.current),p&&window.URL.revokeObjectURL(p)}}),[v,G,o,l,p]),n.createElement("video",g({autoPlay:!0,playsInline:!0,src:p,ref:s},i))};return ee.propTypes={constraints:U.object,onError:U.func.isRequired,onLoad:U.func,onScan:U.func.isRequired,resolution:U.number,qrArea:U.array},ee.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]},ee}(n(2791))},3261:function(e,t,n){"use strict";var g=n(7061).default,o=n(6690).default,l=n(9728).default,a=this&&this.__awaiter||function(e,t,n,g){return new(n||(n=Promise))((function(o,l){function a(e){try{I(g.next(e))}catch(t){l(t)}}function r(e){try{I(g.throw(e))}catch(t){l(t)}}function I(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}I((g=g.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2791),I=function(){function e(t){o(this,e),this.options=t,"undefined"!==typeof window&&(this.rzrpayInstannce=new window.Razorpay(this.options))}return l(e,[{key:"on",value:function(e,t){this.rzrpayInstannce.on(e,t)}},{key:"open",value:function(){this.rzrpayInstannce.open()}}]),e}();t.default=function(){var e=(0,r.useMemo)((function(){return"undefined"!==typeof window}),[]),t=(0,r.useCallback)((function(){return!(!e||!("Razorpay"in window))}),[]),n=(0,r.useCallback)((function(t){if(e)return new Promise((function(e,n){var g=document.createElement("script");g.src=t,g.onload=function(t){return e(t)},g.onerror=function(e){return n(e)},document.body.appendChild(g)}))}),[]);return(0,r.useEffect)((function(){t()||a(void 0,void 0,void 0,g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("https://checkout.razorpay.com/v1/checkout.js");case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))}),[]),I}},4805:function(e,t,n){var g;g=function(e){return function(){var t={"./node_modules/css-mediaquery/index.js":function(e,t){"use strict";t.match=function(e,t){return r(e).some((function(e){var n=e.inverse,g="all"===e.type||t.type===e.type;if(g&&n||!g&&!n)return!1;var o=e.expressions.every((function(e){var n=e.feature,g=e.modifier,o=e.value,l=t[n];if(!l)return!1;switch(n){case"orientation":case"scan":return l.toLowerCase()===o.toLowerCase();case"width":case"height":case"device-width":case"device-height":o=C(o),l=C(l);break;case"resolution":o=i(o),l=i(l);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":o=I(o),l=I(l);break;case"grid":case"color":case"color-index":case"monochrome":o=parseInt(o,10)||1,l=parseInt(l,10)||0}switch(g){case"min":return l>=o;case"max":return l<=o;default:return l===o}}));return o&&!n||!o&&n}))},t.parse=r;var n=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,g=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,o=/^(?:(min|max)-)?(.+)/,l=/(em|rem|px|cm|mm|in|pt|pc)?$/,a=/(dpi|dpcm|dppx)?$/;function r(e){return e.split(",").map((function(e){var t=(e=e.trim()).match(n),l=t[1],a=t[2],r=t[3]||"",I={};return I.inverse=!!l&&"not"===l.toLowerCase(),I.type=a?a.toLowerCase():"all",r=r.match(/\([^\)]+\)/g)||[],I.expressions=r.map((function(e){var t=e.match(g),n=t[1].toLowerCase().match(o);return{modifier:n[1],feature:n[2],value:t[2]}})),I}))}function I(e){var t,n=Number(e);return n||(n=(t=e.match(/^(\d+)\s*\/\s*(\d+)$/))[1]/t[2]),n}function i(e){var t=parseFloat(e);switch(String(e).match(a)[1]){case"dpcm":return t/2.54;case"dppx":return 96*t;default:return t}}function C(e){var t=parseFloat(e);switch(String(e).match(l)[1]){case"em":case"rem":return 16*t;case"cm":return 96*t/2.54;case"mm":return 96*t/2.54/10;case"in":return 96*t;case"pt":return 72*t;case"pc":return 72*t/12;default:return t}}},"./node_modules/hyphenate-style-name/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var g=/[A-Z]/g,o=/^ms-/,l={};function a(e){return"-"+e.toLowerCase()}var r=function(e){if(l.hasOwnProperty(e))return l[e];var t=e.replace(g,a);return l[e]=o.test(t)?"-"+t:t}},"./node_modules/matchmediaquery/index.js":function(e,t,n){"use strict";var g=n("./node_modules/css-mediaquery/index.js").match,o="undefined"!==typeof window?window.matchMedia:null;function l(e,t,n){var l=this;if(o&&!n){var a=o.call(window,e);this.matches=a.matches,this.media=a.media,a.addListener(r)}else this.matches=g(e,t),this.media=e;function r(e){l.matches=e.matches,l.media=e.media}this.addListener=function(e){a&&a.addListener(e)},this.removeListener=function(e){a&&a.removeListener(e)},this.dispose=function(){a&&a.removeListener(r)}}e.exports=function(e,t,n){return new l(e,t,n)}},"./node_modules/object-assign/index.js":function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;function o(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var g={};return"abcdefghijklmnopqrst".split("").forEach((function(e){g[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},g)).join("")}catch(o){return!1}}()?Object.assign:function(e,l){for(var a,r,I=o(e),i=1;i<arguments.length;i++){for(var C in a=Object(arguments[i]))n.call(a,C)&&(I[C]=a[C]);if(t){r=t(a);for(var c=0;c<r.length;c++)g.call(a,r[c])&&(I[r[c]]=a[r[c]])}}return I}},"./node_modules/prop-types/checkPropTypes.js":function(e,t,n){"use strict";var g=function(){},o=n("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),l={},a=n("./node_modules/prop-types/lib/has.js");function r(e,t,n,r,I){for(var i in e)if(a(e,i)){var C;try{if("function"!==typeof e[i]){var c=Error((r||"React class")+": "+n+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw c.name="Invariant Violation",c}C=e[i](t,i,r,n,null,o)}catch(s){C=s}if(!C||C instanceof Error||g((r||"React class")+": type specification of "+n+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof C+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),C instanceof Error&&!(C.message in l)){l[C.message]=!0;var u=I?I():"";g("Failed "+n+" type: "+C.message+(null!=u?u:""))}}}g=function(e){var t="Warning: "+e;"undefined"!==typeof console&&console.error(t);try{throw new Error(t)}catch(n){}},r.resetWarningCache=function(){l={}},e.exports=r},"./node_modules/prop-types/factoryWithTypeCheckers.js":function(e,t,n){"use strict";var g=n("./node_modules/react-is/index.js"),o=n("./node_modules/object-assign/index.js"),l=n("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),a=n("./node_modules/prop-types/lib/has.js"),r=n("./node_modules/prop-types/checkPropTypes.js"),I=function(){};function i(){return null}I=function(e){var t="Warning: "+e;"undefined"!==typeof console&&console.error(t);try{throw new Error(t)}catch(n){}},e.exports=function(e,t){var n="function"===typeof Symbol&&Symbol.iterator,C="<<anonymous>>",c={array:A("array"),bigint:A("bigint"),bool:A("boolean"),func:A("function"),number:A("number"),object:A("object"),string:A("string"),symbol:A("symbol"),any:d(i),arrayOf:function(e){return d((function(t,n,g,o,a){if("function"!==typeof e)return new s("Property `"+a+"` of component `"+g+"` has invalid PropType notation inside arrayOf.");var r=t[n];if(!Array.isArray(r))return new s("Invalid "+o+" `"+a+"` of type `"+p(r)+"` supplied to `"+g+"`, expected an array.");for(var I=0;I<r.length;I++){var i=e(r,I,g,o,a+"["+I+"]",l);if(i instanceof Error)return i}return null}))},element:d((function(t,n,g,o,l){var a=t[n];return e(a)?null:new s("Invalid "+o+" `"+l+"` of type `"+p(a)+"` supplied to `"+g+"`, expected a single ReactElement.")})),elementType:d((function(e,t,n,o,l){var a=e[t];return g.isValidElementType(a)?null:new s("Invalid "+o+" `"+l+"` of type `"+p(a)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(e){return d((function(t,n,g,o,l){if(!(t[n]instanceof e)){var a=e.name||C;return new s("Invalid "+o+" `"+l+"` of type `"+((r=t[n]).constructor&&r.constructor.name?r.constructor.name:C)+"` supplied to `"+g+"`, expected instance of `"+a+"`.")}var r;return null}))},node:d((function(e,t,n,g,o){return b(e[t])?null:new s("Invalid "+g+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return d((function(t,n,g,o,r){if("function"!==typeof e)return new s("Property `"+r+"` of component `"+g+"` has invalid PropType notation inside objectOf.");var I=t[n],i=p(I);if("object"!==i)return new s("Invalid "+o+" `"+r+"` of type `"+i+"` supplied to `"+g+"`, expected an object.");for(var C in I)if(a(I,C)){var c=e(I,C,g,o,r+"."+C,l);if(c instanceof Error)return c}return null}))},oneOf:function(e){if(!Array.isArray(e))return I(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),i;function t(t,n,g,o,l){for(var a=t[n],r=0;r<e.length;r++)if(u(a,e[r]))return null;var I=JSON.stringify(e,(function(e,t){return"symbol"===h(t)?String(t):t}));return new s("Invalid "+o+" `"+l+"` of value `"+String(a)+"` supplied to `"+g+"`, expected one of "+I+".")}return d(t)},oneOfType:function(e){if(!Array.isArray(e))return I("Invalid argument supplied to oneOfType, expected an instance of array."),i;for(var t=0;t<e.length;t++){var n=e[t];if("function"!==typeof n)return I("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+f(n)+" at index "+t+"."),i}return d((function(t,n,g,o,r){for(var I=[],i=0;i<e.length;i++){var C=(0,e[i])(t,n,g,o,r,l);if(null==C)return null;C.data&&a(C.data,"expectedType")&&I.push(C.data.expectedType)}return new s("Invalid "+o+" `"+r+"` supplied to `"+g+"`"+(I.length>0?", expected one of type ["+I.join(", ")+"]":"")+".")}))},shape:function(e){return d((function(t,n,g,o,a){var r=t[n],I=p(r);if("object"!==I)return new s("Invalid "+o+" `"+a+"` of type `"+I+"` supplied to `"+g+"`, expected `object`.");for(var i in e){var C=e[i];if("function"!==typeof C)return m(g,o,a,i,h(C));var c=C(r,i,g,o,a+"."+i,l);if(c)return c}return null}))},exact:function(e){return d((function(t,n,g,r,I){var i=t[n],C=p(i);if("object"!==C)return new s("Invalid "+r+" `"+I+"` of type `"+C+"` supplied to `"+g+"`, expected `object`.");var c=o({},t[n],e);for(var u in c){var d=e[u];if(a(e,u)&&"function"!==typeof d)return m(g,r,I,u,h(d));if(!d)return new s("Invalid "+r+" `"+I+"` key `"+u+"` supplied to `"+g+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var A=d(i,u,g,r,I+"."+u,l);if(A)return A}return null}))}};function u(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function s(e,t){this.message=e,this.data=t&&"object"===typeof t?t:{},this.stack=""}function d(e){var n={},g=0;function o(o,a,r,i,c,u,d){if(i=i||C,u=u||r,d!==l){if(t){var A=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw A.name="Invariant Violation",A}if("undefined"!==typeof console){var m=i+":"+r;!n[m]&&g<3&&(I("You are manually calling a React.PropTypes validation function for the `"+u+"` prop on `"+i+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[m]=!0,g++)}}return null==a[r]?o?null===a[r]?new s("The "+c+" `"+u+"` is marked as required in `"+i+"`, but its value is `null`."):new s("The "+c+" `"+u+"` is marked as required in `"+i+"`, but its value is `undefined`."):null:e(a,r,i,c,u)}var a=o.bind(null,!1);return a.isRequired=o.bind(null,!0),a}function A(e){return d((function(t,n,g,o,l,a){var r=t[n];return p(r)!==e?new s("Invalid "+o+" `"+l+"` of type `"+h(r)+"` supplied to `"+g+"`, expected `"+e+"`.",{expectedType:e}):null}))}function m(e,t,n,g,o){return new s((e||"React class")+": "+t+" type `"+n+"."+g+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+o+"`.")}function b(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(b);if(null===t||e(t))return!0;var g=function(e){var t=e&&(n&&e[n]||e["@@iterator"]);if("function"===typeof t)return t}(t);if(!g)return!1;var o,l=g.call(t);if(g!==t.entries){for(;!(o=l.next()).done;)if(!b(o.value))return!1}else for(;!(o=l.next()).done;){var a=o.value;if(a&&!b(a[1]))return!1}return!0;default:return!1}}function p(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"===typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function h(e){if("undefined"===typeof e||null===e)return""+e;var t=p(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function f(e){var t=h(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return s.prototype=Error.prototype,c.checkPropTypes=r,c.resetWarningCache=r.resetWarningCache,c.PropTypes=c,c}},"./node_modules/prop-types/index.js":function(e,t,n){var g=n("./node_modules/react-is/index.js");e.exports=n("./node_modules/prop-types/factoryWithTypeCheckers.js")(g.isElement,!0)},"./node_modules/prop-types/lib/ReactPropTypesSecret.js":function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"./node_modules/prop-types/lib/has.js":function(e){e.exports=Function.call.bind(Object.prototype.hasOwnProperty)},"./node_modules/react-is/cjs/react-is.development.js":function(e,t){"use strict";!function(){var e="function"===typeof Symbol&&Symbol.for,n=e?Symbol.for("react.element"):60103,g=e?Symbol.for("react.portal"):60106,o=e?Symbol.for("react.fragment"):60107,l=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,r=e?Symbol.for("react.provider"):60109,I=e?Symbol.for("react.context"):60110,i=e?Symbol.for("react.async_mode"):60111,C=e?Symbol.for("react.concurrent_mode"):60111,c=e?Symbol.for("react.forward_ref"):60112,u=e?Symbol.for("react.suspense"):60113,s=e?Symbol.for("react.suspense_list"):60120,d=e?Symbol.for("react.memo"):60115,A=e?Symbol.for("react.lazy"):60116,m=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,p=e?Symbol.for("react.responder"):60118,h=e?Symbol.for("react.scope"):60119;function f(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:var s=e.type;switch(s){case i:case C:case o:case a:case l:case u:return s;default:var m=s&&s.$$typeof;switch(m){case I:case c:case A:case d:case r:return m;default:return t}}case g:return t}}}var y=i,Z=C,v=I,G=r,B=n,S=c,V=o,W=A,R=d,k=g,X=a,J=l,Y=u,w=!1;function H(e){return f(e)===C}t.AsyncMode=y,t.ConcurrentMode=Z,t.ContextConsumer=v,t.ContextProvider=G,t.Element=B,t.ForwardRef=S,t.Fragment=V,t.Lazy=W,t.Memo=R,t.Portal=k,t.Profiler=X,t.StrictMode=J,t.Suspense=Y,t.isAsyncMode=function(e){return w||(w=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),H(e)||f(e)===i},t.isConcurrentMode=H,t.isContextConsumer=function(e){return f(e)===I},t.isContextProvider=function(e){return f(e)===r},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return f(e)===c},t.isFragment=function(e){return f(e)===o},t.isLazy=function(e){return f(e)===A},t.isMemo=function(e){return f(e)===d},t.isPortal=function(e){return f(e)===g},t.isProfiler=function(e){return f(e)===a},t.isStrictMode=function(e){return f(e)===l},t.isSuspense=function(e){return f(e)===u},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===C||e===a||e===l||e===u||e===s||"object"===typeof e&&null!==e&&(e.$$typeof===A||e.$$typeof===d||e.$$typeof===r||e.$$typeof===I||e.$$typeof===c||e.$$typeof===b||e.$$typeof===p||e.$$typeof===h||e.$$typeof===m)},t.typeOf=f}()},"./node_modules/react-is/index.js":function(e,t,n){"use strict";e.exports=n("./node_modules/react-is/cjs/react-is.development.js")},"./node_modules/shallow-equal/dist/index.esm.js":function(e,t,n){"use strict";function g(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),g=Object.keys(t),o=n.length;if(g.length!==o)return!1;for(var l=0;l<o;l++){var a=n[l];if(e[a]!==t[a]||!Object.prototype.hasOwnProperty.call(t,a))return!1}return!0}function o(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var g=0;g<n;g++)if(e[g]!==t[g])return!1;return!0}n.r(t),n.d(t,{shallowEqualArrays:function(){return o},shallowEqualObjects:function(){return g}})},"./src/Component.ts":function(e,t,n){"use strict";var g=this&&this.__rest||function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=o(n("./src/useMediaQuery.ts"));t.default=function(e){var t=e.children,n=e.device,o=e.onChange,a=g(e,["children","device","onChange"]),r=(0,l.default)(a,n,o);return"function"===typeof t?t(r):r?t:null}},"./src/Context.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var g=(0,n("react").createContext)(void 0);t.default=g},"./src/index.ts":function(e,t,n){"use strict";var g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Context=t.toQuery=t.useMediaQuery=t.default=void 0;var o=g(n("./src/useMediaQuery.ts"));t.useMediaQuery=o.default;var l=g(n("./src/Component.ts"));t.default=l.default;var a=g(n("./src/toQuery.ts"));t.toQuery=a.default;var r=g(n("./src/Context.ts"));t.Context=r.default},"./src/mediaQuery.ts":function(e,t,n){"use strict";var g=this&&this.__assign||function(){return g=Object.assign||function(e){for(var t,n=1,g=arguments.length;n<g;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},g.apply(this,arguments)},o=this&&this.__rest||function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=l(n("./node_modules/prop-types/index.js")),r=a.default.oneOfType([a.default.string,a.default.number]),I={all:a.default.bool,grid:a.default.bool,aural:a.default.bool,braille:a.default.bool,handheld:a.default.bool,print:a.default.bool,projection:a.default.bool,screen:a.default.bool,tty:a.default.bool,tv:a.default.bool,embossed:a.default.bool},i={orientation:a.default.oneOf(["portrait","landscape"]),scan:a.default.oneOf(["progressive","interlace"]),aspectRatio:a.default.string,deviceAspectRatio:a.default.string,height:r,deviceHeight:r,width:r,deviceWidth:r,color:a.default.bool,colorIndex:a.default.bool,monochrome:a.default.bool,resolution:r,type:Object.keys(I)},C=o(i,["type"]),c=g({minAspectRatio:a.default.string,maxAspectRatio:a.default.string,minDeviceAspectRatio:a.default.string,maxDeviceAspectRatio:a.default.string,minHeight:r,maxHeight:r,minDeviceHeight:r,maxDeviceHeight:r,minWidth:r,maxWidth:r,minDeviceWidth:r,maxDeviceWidth:r,minColor:a.default.number,maxColor:a.default.number,minColorIndex:a.default.number,maxColorIndex:a.default.number,minMonochrome:a.default.number,maxMonochrome:a.default.number,minResolution:r,maxResolution:r},C),u=g(g({},I),c);t.default={all:u,types:I,matchers:i,features:c}},"./src/toQuery.ts":function(e,t,n){"use strict";var g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=g(n("./node_modules/hyphenate-style-name/index.js")),l=g(n("./src/mediaQuery.ts"));t.default=function(e){var t=[];return Object.keys(l.default.all).forEach((function(n){var g=e[n];null!=g&&t.push(function(e,t){var n=(0,o.default)(e);return"number"===typeof t&&(t="".concat(t,"px")),!0===t?n:!1===t?"not ".concat(n):"(".concat(n,": ").concat(t,")")}(n,g))})),t.join(" and ")}},"./src/useMediaQuery.ts":function(e,t,n){"use strict";var g=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n("react"),l=g(n("./node_modules/matchmediaquery/index.js")),a=g(n("./node_modules/hyphenate-style-name/index.js")),r=n("./node_modules/shallow-equal/dist/index.esm.js"),I=g(n("./src/toQuery.ts")),i=g(n("./src/Context.ts")),C=function(e){if(e)return Object.keys(e).reduce((function(t,n){return t[(0,a.default)(n)]=e[n],t}),{})},c=function(){var e=(0,o.useRef)(!1);return(0,o.useEffect)((function(){e.current=!0}),[]),e.current},u=function(e){var t=function(){return function(e){return e.query||(0,I.default)(e)}(e)},n=(0,o.useState)(t),g=n[0],l=n[1];return(0,o.useEffect)((function(){var e=t();g!==e&&l(e)}),[e]),g};t.default=function(e,t,n){var g=function(e){var t=(0,o.useContext)(i.default),n=function(){return C(e)||C(t)},g=(0,o.useState)(n),l=g[0],a=g[1];return(0,o.useEffect)((function(){var e=n();(0,r.shallowEqualObjects)(l,e)||a(e)}),[e,t]),l}(t),a=u(e);if(!a)throw new Error("Invalid or missing MediaQuery!");var I=function(e,t){var n=function(){return(0,l.default)(e,t||{},!!t)},g=(0,o.useState)(n),a=g[0],r=g[1],I=c();return(0,o.useEffect)((function(){if(I){var e=n();return r(e),function(){e&&e.dispose()}}}),[e,t]),a}(a,g),s=function(e){var t=(0,o.useState)(e.matches),n=t[0],g=t[1];return(0,o.useEffect)((function(){var t=function(e){g(e.matches)};return e.addListener(t),g(e.matches),function(){e.removeListener(t)}}),[e]),n}(I),d=c();return(0,o.useEffect)((function(){d&&n&&n(s)}),[s]),(0,o.useEffect)((function(){return function(){I&&I.dispose()}}),[]),s}},react:function(t){"use strict";t.exports=e}},n={};function g(e){var o=n[e];if(void 0!==o)return o.exports;var l=n[e]={exports:{}};return t[e].call(l.exports,l,l.exports,g),l.exports}return g.d=function(e,t){for(var n in t)g.o(t,n)&&!g.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},g.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},g.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},g("./src/index.ts")}()},e.exports=g(n(2791))},6374:function(e,t,n){"use strict";var g=n(2791),o=Symbol.for("react.element"),l=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,r=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I={key:!0,ref:!0,__self:!0,__source:!0};function i(e,t,n){var g,l={},i=null,C=null;for(g in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(C=t.ref),t)a.call(t,g)&&!I.hasOwnProperty(g)&&(l[g]=t[g]);if(e&&e.defaultProps)for(g in t=e.defaultProps)void 0===l[g]&&(l[g]=t[g]);return{$$typeof:o,type:e,key:i,ref:C,props:l,_owner:r.current}}t.Fragment=l,t.jsx=i,t.jsxs=i},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),g=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),I=Symbol.for("react.context"),i=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),s=Symbol.iterator;var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,m={};function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||d}function p(){}function h(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||d}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},p.prototype=b.prototype;var f=h.prototype=new p;f.constructor=h,A(f,b.prototype),f.isPureReactComponent=!0;var y=Array.isArray,Z=Object.prototype.hasOwnProperty,v={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function B(e,t,g){var o,l={},a=null,r=null;if(null!=t)for(o in void 0!==t.ref&&(r=t.ref),void 0!==t.key&&(a=""+t.key),t)Z.call(t,o)&&!G.hasOwnProperty(o)&&(l[o]=t[o]);var I=arguments.length-2;if(1===I)l.children=g;else if(1<I){for(var i=Array(I),C=0;C<I;C++)i[C]=arguments[C+2];l.children=i}if(e&&e.defaultProps)for(o in I=e.defaultProps)void 0===l[o]&&(l[o]=I[o]);return{$$typeof:n,type:e,key:a,ref:r,props:l,_owner:v.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var V=/\/+/g;function W(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,o,l,a){var r=typeof e;"undefined"!==r&&"boolean"!==r||(e=null);var I=!1;if(null===e)I=!0;else switch(r){case"string":case"number":I=!0;break;case"object":switch(e.$$typeof){case n:case g:I=!0}}if(I)return a=a(I=e),e=""===l?"."+W(I,0):l,y(a)?(o="",null!=e&&(o=e.replace(V,"$&/")+"/"),R(a,t,o,"",(function(e){return e}))):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||I&&I.key===a.key?"":(""+a.key).replace(V,"$&/")+"/")+e)),t.push(a)),1;if(I=0,l=""===l?".":l+":",y(e))for(var i=0;i<e.length;i++){var C=l+W(r=e[i],i);I+=R(r,t,o,C,a)}else if(C=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=s&&e[s]||e["@@iterator"])?e:null}(e),"function"===typeof C)for(e=C.call(e),i=0;!(r=e.next()).done;)I+=R(r=r.value,t,o,C=l+W(r,i++),a);else if("object"===r)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return I}function k(e,t,n){if(null==e)return e;var g=[],o=0;return R(e,g,"","",(function(e){return t.call(n,e,o++)})),g}function X(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var J={current:null},Y={transition:null},w={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:Y,ReactCurrentOwner:v};t.Children={map:k,forEach:function(e,t,n){k(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return k(e,(function(){t++})),t},toArray:function(e){return k(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=b,t.Fragment=o,t.Profiler=a,t.PureComponent=h,t.StrictMode=l,t.Suspense=C,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w,t.cloneElement=function(e,t,g){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=A({},e.props),l=e.key,a=e.ref,r=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,r=v.current),void 0!==t.key&&(l=""+t.key),e.type&&e.type.defaultProps)var I=e.type.defaultProps;for(i in t)Z.call(t,i)&&!G.hasOwnProperty(i)&&(o[i]=void 0===t[i]&&void 0!==I?I[i]:t[i])}var i=arguments.length-2;if(1===i)o.children=g;else if(1<i){I=Array(i);for(var C=0;C<i;C++)I[C]=arguments[C+2];o.children=I}return{$$typeof:n,type:e.type,key:l,ref:a,props:o,_owner:r}},t.createContext=function(e){return(e={$$typeof:I,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:r,_context:e},e.Consumer=e},t.createElement=B,t.createFactory=function(e){var t=B.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:i,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:X}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=Y.transition;Y.transition={};try{e()}finally{Y.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return J.current.useCallback(e,t)},t.useContext=function(e){return J.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return J.current.useDeferredValue(e)},t.useEffect=function(e,t){return J.current.useEffect(e,t)},t.useId=function(){return J.current.useId()},t.useImperativeHandle=function(e,t,n){return J.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return J.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return J.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return J.current.useMemo(e,t)},t.useReducer=function(e,t,n){return J.current.useReducer(e,t,n)},t.useRef=function(e){return J.current.useRef(e)},t.useState=function(e){return J.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return J.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return J.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var g=n-1>>>1,o=e[g];if(!(0<l(o,t)))break e;e[g]=t,e[n]=o,n=g}}function g(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var g=0,o=e.length,a=o>>>1;g<a;){var r=2*(g+1)-1,I=e[r],i=r+1,C=e[i];if(0>l(I,n))i<o&&0>l(C,I)?(e[g]=C,e[i]=n,g=i):(e[g]=I,e[r]=n,g=r);else{if(!(i<o&&0>l(C,n)))break e;e[g]=C,e[i]=n,g=i}}}return t}function l(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var r=Date,I=r.now();t.unstable_now=function(){return r.now()-I}}var i=[],C=[],c=1,u=null,s=3,d=!1,A=!1,m=!1,b="function"===typeof setTimeout?setTimeout:null,p="function"===typeof clearTimeout?clearTimeout:null,h="undefined"!==typeof setImmediate?setImmediate:null;function f(e){for(var t=g(C);null!==t;){if(null===t.callback)o(C);else{if(!(t.startTime<=e))break;o(C),t.sortIndex=t.expirationTime,n(i,t)}t=g(C)}}function y(e){if(m=!1,f(e),!A)if(null!==g(i))A=!0,Y(Z);else{var t=g(C);null!==t&&w(y,t.startTime-e)}}function Z(e,n){A=!1,m&&(m=!1,p(S),S=-1),d=!0;var l=s;try{for(f(n),u=g(i);null!==u&&(!(u.expirationTime>n)||e&&!R());){var a=u.callback;if("function"===typeof a){u.callback=null,s=u.priorityLevel;var r=a(u.expirationTime<=n);n=t.unstable_now(),"function"===typeof r?u.callback=r:u===g(i)&&o(i),f(n)}else o(i);u=g(i)}if(null!==u)var I=!0;else{var c=g(C);null!==c&&w(y,c.startTime-n),I=!1}return I}finally{u=null,s=l,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var v,G=!1,B=null,S=-1,V=5,W=-1;function R(){return!(t.unstable_now()-W<V)}function k(){if(null!==B){var e=t.unstable_now();W=e;var n=!0;try{n=B(!0,e)}finally{n?v():(G=!1,B=null)}}else G=!1}if("function"===typeof h)v=function(){h(k)};else if("undefined"!==typeof MessageChannel){var X=new MessageChannel,J=X.port2;X.port1.onmessage=k,v=function(){J.postMessage(null)}}else v=function(){b(k,0)};function Y(e){B=e,G||(G=!0,v())}function w(e,n){S=b((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){A||d||(A=!0,Y(Z))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return s},t.unstable_getFirstCallbackNode=function(){return g(i)},t.unstable_next=function(e){switch(s){case 1:case 2:case 3:var t=3;break;default:t=s}var n=s;s=t;try{return e()}finally{s=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=s;s=e;try{return t()}finally{s=n}},t.unstable_scheduleCallback=function(e,o,l){var a=t.unstable_now();switch("object"===typeof l&&null!==l?l="number"===typeof(l=l.delay)&&0<l?a+l:a:l=a,e){case 1:var r=-1;break;case 2:r=250;break;case 5:r=1073741823;break;case 4:r=1e4;break;default:r=5e3}return e={id:c++,callback:o,priorityLevel:e,startTime:l,expirationTime:r=l+r,sortIndex:-1},l>a?(e.sortIndex=l,n(C,e),null===g(i)&&e===g(C)&&(m?(p(S),S=-1):m=!0,w(y,l-a))):(e.sortIndex=r,n(i,e),A||d||(A=!0,Y(Z))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=s;return function(){var n=s;s=t;try{return e.apply(this,arguments)}finally{s=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},9613:function(e){e.exports=function(e,t,n,g){var o=n?n.call(g,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var l=Object.keys(e),a=Object.keys(t);if(l.length!==a.length)return!1;for(var r=Object.prototype.hasOwnProperty.bind(t),I=0;I<l.length;I++){var i=l[I];if(!r(i))return!1;var C=e[i],c=t[i];if(!1===(o=n?n.call(g,C,c,i):void 0)||void 0===o&&C!==c)return!1}return!0}},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e){function t(e,t){for(var n=0;n<t.length;n++){var g=t[n];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(e,g.key,g)}}e.exports=function(e,n,g){return n&&t(e.prototype,n),g&&t(e,g),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,n){var g=n(8698).default;function o(){"use strict";e.exports=o=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,l=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},I=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",C=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(X){c=function(e,t,n){return e[t]=n}}function u(e,t,n,g){var o=t&&t.prototype instanceof A?t:A,l=Object.create(o.prototype),r=new W(g||[]);return a(l,"_invoke",{value:G(e,n,r)}),l}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(X){return{type:"throw",arg:X}}}t.wrap=u;var d={};function A(){}function m(){}function b(){}var p={};c(p,I,(function(){return this}));var h=Object.getPrototypeOf,f=h&&h(h(R([])));f&&f!==n&&l.call(f,I)&&(p=f);var y=b.prototype=A.prototype=Object.create(p);function Z(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function v(e,t){function n(o,a,r,I){var i=s(e[o],e,a);if("throw"!==i.type){var C=i.arg,c=C.value;return c&&"object"==g(c)&&l.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,r,I)}),(function(e){n("throw",e,r,I)})):t.resolve(c).then((function(e){C.value=e,r(C)}),(function(e){return n("throw",e,r,I)}))}I(i.arg)}var o;a(this,"_invoke",{value:function(e,g){function l(){return new t((function(t,o){n(e,g,t,o)}))}return o=o?o.then(l,l):l()}})}function G(e,t,n){var g="suspendedStart";return function(o,l){if("executing"===g)throw new Error("Generator is already running");if("completed"===g){if("throw"===o)throw l;return k()}for(n.method=o,n.arg=l;;){var a=n.delegate;if(a){var r=B(a,n);if(r){if(r===d)continue;return r}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===g)throw g="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);g="executing";var I=s(e,t,n);if("normal"===I.type){if(g=n.done?"completed":"suspendedYield",I.arg===d)continue;return{value:I.arg,done:n.done}}"throw"===I.type&&(g="completed",n.method="throw",n.arg=I.arg)}}}function B(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,B(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var g=s(n,e.iterator,t.arg);if("throw"===g.type)return t.method="throw",t.arg=g.arg,t.delegate=null,d;var o=g.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function V(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function W(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function R(e){if(e){var t=e[I];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,g=function t(){for(;++n<e.length;)if(l.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return g.next=g}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=b,a(y,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:m,configurable:!0}),m.displayName=c(b,C,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,C,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},Z(v.prototype),c(v.prototype,i,(function(){return this})),t.AsyncIterator=v,t.async=function(e,n,g,o,l){void 0===l&&(l=Promise);var a=new v(u(e,n,g,o),l);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},Z(y),c(y,C,"Generator"),c(y,I,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var g in t)n.push(g);return n.reverse(),function e(){for(;n.length;){var g=n.pop();if(g in t)return e.value=g,e.done=!1,e}return e.done=!0,e}},t.values=R,W.prototype={constructor:W,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(V),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,g){return a.type="throw",a.arg=e,t.next=n,g&&(t.method="next",t.arg=void 0),!!g}for(var g=this.tryEntries.length-1;g>=0;--g){var o=this.tryEntries[g],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var r=l.call(o,"catchLoc"),I=l.call(o,"finallyLoc");if(r&&I){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(r){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!I)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var g=this.tryEntries[n];if(g.tryLoc<=this.prev&&l.call(g,"finallyLoc")&&this.prev<g.finallyLoc){var o=g;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),V(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var g=n.completion;if("throw"===g.type){var o=g.arg;V(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(g){var o=t[g];if(void 0!==o)return o.exports;var l=t[g]={id:g,loaded:!1,exports:{}};return e[g].call(l.exports,l,l.exports,n),l.loaded=!0,l.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(g,o){if(1&o&&(g=this(g)),8&o)return g;if("object"===typeof g&&g){if(4&o&&g.__esModule)return g;if(16&o&&"function"===typeof g.then)return g}var l=Object.create(null);n.r(l);var a={};e=e||[null,t({}),t([]),t(t)];for(var r=2&o&&g;"object"==typeof r&&!~e.indexOf(r);r=t(r))Object.getOwnPropertyNames(r).forEach((function(e){a[e]=function(){return g[e]}}));return a.default=function(){return g},n.d(l,a),l}}(),n.d=function(e,t){for(var g in t)n.o(t,g)&&!n.o(e,g)&&Object.defineProperty(e,g,{enumerable:!0,get:t[g]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";var e,t=n(2791),g=n.t(t,2),o=n(1250);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,g=new Array(t);n<t;n++)g[n]=e[n];return g}function a(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function r(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function I(e){return function(e){if(Array.isArray(e))return l(e)}(e)||a(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var g=t[n];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(e,g.key,g)}}function c(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if(t&&("object"===m(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function h(e){var t=A();return function(){var n,g=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(g,arguments,o)}else n=g.apply(this,arguments);return p(this,n)}}function f(e){if(Array.isArray(e))return e}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Z(e,t){return f(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var g,o,l=[],a=!0,r=!1;try{for(n=n.call(e);!(a=(g=n.next()).done)&&(l.push(g.value),!t||l.length!==t);a=!0);}catch(I){r=!0,o=I}finally{try{a||null==n.return||n.return()}finally{if(r)throw o}}return l}}(e,t)||r(e,t)||y()}function v(e,t,n){return v=A()?Reflect.construct.bind():function(e,t,n){var g=[null];g.push.apply(g,t);var o=new(Function.bind.apply(e,g));return n&&u(o,n.prototype),o},v.apply(null,arguments)}function G(e){var t="function"===typeof Map?new Map:void 0;return G=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,g)}function g(){return v(e,arguments,d(this).constructor)}return g.prototype=Object.create(e.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),u(g,e)},G(e)}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var g in n)Object.prototype.hasOwnProperty.call(n,g)&&(e[g]=n[g])}return e},B.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));var S,V="popstate";function W(e){return{usr:e.state,key:e.key}}function R(e,t,n,g){return void 0===n&&(n=null),B({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?X(t):t,{state:n,key:t&&t.key||g||Math.random().toString(36).substr(2,8)})}function k(e){var t=e.pathname,n=void 0===t?"/":t,g=e.search,o=void 0===g?"":g,l=e.hash,a=void 0===l?"":l;return o&&"?"!==o&&(n+="?"===o.charAt(0)?o:"?"+o),a&&"#"!==a&&(n+="#"===a.charAt(0)?a:"#"+a),n}function X(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var g=e.indexOf("?");g>=0&&(t.search=e.substr(g),e=e.substr(0,g)),e&&(t.pathname=e)}return t}function J(e){var t="undefined"!==typeof window&&"undefined"!==typeof window.location&&"null"!==window.location.origin?window.location.origin:"unknown://unknown",n="string"===typeof e?e:k(e);return new URL(n,t)}function Y(t,n,g,o){void 0===o&&(o={});var l=o,a=l.window,r=void 0===a?document.defaultView:a,I=l.v5Compat,i=void 0!==I&&I,C=r.history,c=e.Pop,u=null;function s(){c=e.Pop,u&&u({action:c,location:d.location})}var d={get action(){return c},get location(){return t(r,C)},listen:function(e){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(V,s),u=e,function(){r.removeEventListener(V,s),u=null}},createHref:function(e){return n(r,e)},encodeLocation:function(e){var t=J(k(e));return B({},e,{pathname:t.pathname,search:t.search,hash:t.hash})},push:function(t,n){c=e.Push;var o=R(d.location,t,n);g&&g(o,t);var l=W(o),a=d.createHref(o);try{C.pushState(l,"",a)}catch(I){r.location.assign(a)}i&&u&&u({action:c,location:d.location})},replace:function(t,n){c=e.Replace;var o=R(d.location,t,n);g&&g(o,t);var l=W(o),a=d.createHref(o);C.replaceState(l,"",a),i&&u&&u({action:c,location:d.location})},go:function(e){return C.go(e)}};return d}function w(e,t,n){void 0===n&&(n="/");var g=z(("string"===typeof t?X(t):t).pathname||"/",n);if(null==g)return null;var o=H(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(o);for(var l=null,a=0;null==l&&a<o.length;++a)l=x(o[a],M(g));return l}function H(e,t,n,g){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===g&&(g=""),e.forEach((function(e,o){var l={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};l.relativePath.startsWith("/")&&(L(l.relativePath.startsWith(g),'Absolute route path "'+l.relativePath+'" nested under path "'+g+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),l.relativePath=l.relativePath.slice(g.length));var a=j([g,l.relativePath]),r=n.concat(l);e.children&&e.children.length>0&&(L(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),H(e.children,t,r,a)),(null!=e.path||e.index)&&t.push({path:a,score:F(a,e.index),routesMeta:r})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(S||(S={}));var N=/^:\w+$/,K=function(e){return"*"===e};function F(e,t){var n=e.split("/"),g=n.length;return n.some(K)&&(g+=-2),t&&(g+=2),n.filter((function(e){return!K(e)})).reduce((function(e,t){return e+(N.test(t)?3:""===t?1:10)}),g)}function x(e,t){for(var n=e.routesMeta,g={},o="/",l=[],a=0;a<n.length;++a){var r=n[a],I=a===n.length-1,i="/"===o?t:t.slice(o.length)||"/",C=E({path:r.relativePath,caseSensitive:r.caseSensitive,end:I},i);if(!C)return null;Object.assign(g,C.params);var c=r.route;l.push({params:g,pathname:j([o,C.pathname]),pathnameBase:P(j([o,C.pathnameBase])),route:c}),"/"!==C.pathnameBase&&(o=j([o,C.pathnameBase]))}return l}function E(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);U("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var g=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return g.push(t),"([^\\/]+)"}));e.endsWith("*")?(g.push("*"),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");return[new RegExp(o,t?void 0:"i"),g]}(e.path,e.caseSensitive,e.end),g=Z(n,2),o=g[0],l=g[1],a=t.match(o);if(!a)return null;var r=a[0],I=r.replace(/(.)\/+$/,"$1"),i=a.slice(1),C=l.reduce((function(e,t,n){if("*"===t){var g=i[n]||"";I=r.slice(0,r.length-g.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return U(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(i[n]||"",t),e}),{});return{params:C,pathname:r,pathnameBase:I,pattern:e}}function M(e){try{return decodeURI(e)}catch(t){return U(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function z(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,g=e.charAt(n);return g&&"/"!==g?null:e.slice(n)||"/"}function L(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function U(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Q(e,t,n,g){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(g)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function T(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function D(e,t,n,g){var o;void 0===g&&(g=!1),"string"===typeof e?o=X(e):(L(!(o=B({},e)).pathname||!o.pathname.includes("?"),Q("?","pathname","search",o)),L(!o.pathname||!o.pathname.includes("#"),Q("#","pathname","hash",o)),L(!o.search||!o.search.includes("#"),Q("#","search","hash",o)));var l,a=""===e||""===o.pathname,r=a?"/":o.pathname;if(g||null==r)l=n;else{var I=t.length-1;if(r.startsWith("..")){for(var i=r.split("/");".."===i[0];)i.shift(),I-=1;o.pathname=i.join("/")}l=I>=0?t[I]:"/"}var C=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?X(e):e,g=n.pathname,o=n.search,l=void 0===o?"":o,a=n.hash,r=void 0===a?"":a,I=g?g.startsWith("/")?g:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(g,t):t;return{pathname:I,search:O(l),hash:q(r)}}(o,l),c=r&&"/"!==r&&r.endsWith("/"),u=(a||"."===r)&&n.endsWith("/");return C.pathname.endsWith("/")||!c&&!u||(C.pathname+="/"),C}var j=function(e){return e.join("/").replace(/\/\/+/g,"/")},P=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},O=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},q=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},_=function(e){s(n,e);var t=h(n);function n(){return i(this,n),t.apply(this,arguments)}return c(n)}(G(Error));var $=c((function e(t,n,g){i(this,e),this.status=t,this.statusText=n||"",this.data=g}));function ee(e){return e instanceof $}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var te=new Set(["POST","PUT","PATCH","DELETE"]);new Set(["GET","HEAD"].concat(I(te)));function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var g in n)Object.prototype.hasOwnProperty.call(n,g)&&(e[g]=n[g])}return e},ne.apply(this,arguments)}var ge="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},oe=t.useState,le=t.useEffect,ae=t.useLayoutEffect,re=t.useDebugValue;function Ie(e){var t=e.getSnapshot,n=e.value;try{var g=t();return!ge(n,g)}catch(o){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,g.useSyncExternalStore;var ie=t.createContext(null);var Ce=t.createContext(null);var ce=t.createContext(null);var ue=t.createContext(null);var se=t.createContext(null);var de=t.createContext(null);var Ae=t.createContext({outlet:null,matches:[]});var me=t.createContext(null);function be(){return null!=t.useContext(de)}function pe(){return be()||L(!1),t.useContext(de).location}function he(){be()||L(!1);var e=t.useContext(se),n=e.basename,g=e.navigator,o=t.useContext(Ae).matches,l=pe().pathname,a=JSON.stringify(T(o).map((function(e){return e.pathnameBase}))),r=t.useRef(!1);t.useEffect((function(){r.current=!0}));var I=t.useCallback((function(e,t){if(void 0===t&&(t={}),r.current)if("number"!==typeof e){var o=D(e,JSON.parse(a),l,"path"===t.relative);"/"!==n&&(o.pathname="/"===o.pathname?n:j([n,o.pathname])),(t.replace?g.replace:g.push)(o,t.state,t)}else g.go(e)}),[n,g,a,l]);return I}var fe=t.createContext(null);function ye(e,n){var g=(void 0===n?{}:n).relative,o=t.useContext(Ae).matches,l=pe().pathname,a=JSON.stringify(T(o).map((function(e){return e.pathnameBase})));return t.useMemo((function(){return D(e,JSON.parse(a),l,"path"===g)}),[e,a,l,g])}function Ze(){var e=function(){var e,n=t.useContext(me),g=We(Ge.UseRouteError),o=t.useContext(Ae),l=o.matches[o.matches.length-1];if(n)return n;return o||L(!1),!l.route.id&&L(!1),null==(e=g.errors)?void 0:e[l.route.id]}(),n=ee(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),g=e instanceof Error?e.stack:null,o="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:o},a={padding:"2px 4px",backgroundColor:o};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unhandled Thrown Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),g?t.createElement("pre",{style:l},g):null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",t.createElement("code",{style:a},"errorElement")," props on\xa0",t.createElement("code",{style:a},"<Route>")))}var ve,Ge,Be=function(e){s(g,e);var n=h(g);function g(e){var t;return i(this,g),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return c(g,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(me.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),g}(t.Component);function Se(e){var n=e.routeContext,g=e.match,o=e.children,l=t.useContext(ie);return l&&g.route.errorElement&&(l._deepestRenderedBoundaryId=g.route.id),t.createElement(Ae.Provider,{value:n},o)}function Ve(e,n,g){if(void 0===n&&(n=[]),null==e){if(null==g||!g.errors)return null;e=g.matches}var o=e,l=null==g?void 0:g.errors;if(null!=l){var a=o.findIndex((function(e){return e.route.id&&(null==l?void 0:l[e.route.id])}));a>=0||L(!1),o=o.slice(0,Math.min(o.length,a+1))}return o.reduceRight((function(e,a,r){var I=a.route.id?null==l?void 0:l[a.route.id]:null,i=g?a.route.errorElement||t.createElement(Ze,null):null,C=function(){return t.createElement(Se,{match:a,routeContext:{outlet:e,matches:n.concat(o.slice(0,r+1))}},I?i:void 0!==a.route.element?a.route.element:e)};return g&&(a.route.errorElement||0===r)?t.createElement(Be,{location:g.location,component:i,error:I,children:C()}):C()}),null)}function We(e){var n=t.useContext(ce);return n||L(!1),n}!function(e){e.UseRevalidator="useRevalidator"}(ve||(ve={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(Ge||(Ge={}));var Re;function ke(e){return function(e){var n=t.useContext(Ae).outlet;return n?t.createElement(fe.Provider,{value:e},n):n}(e.context)}function Xe(e){L(!1)}function Je(n){var g=n.basename,o=void 0===g?"/":g,l=n.children,a=void 0===l?null:l,r=n.location,I=n.navigationType,i=void 0===I?e.Pop:I,C=n.navigator,c=n.static,u=void 0!==c&&c;be()&&L(!1);var s=o.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:s,navigator:C,static:u}}),[s,C,u]);"string"===typeof r&&(r=X(r));var A=r,m=A.pathname,b=void 0===m?"/":m,p=A.search,h=void 0===p?"":p,f=A.hash,y=void 0===f?"":f,Z=A.state,v=void 0===Z?null:Z,G=A.key,B=void 0===G?"default":G,S=t.useMemo((function(){var e=z(b,s);return null==e?null:{pathname:e,search:h,hash:y,state:v,key:B}}),[s,b,h,y,v,B]);return null==S?null:t.createElement(se.Provider,{value:d},t.createElement(de.Provider,{children:a,value:{location:S,navigationType:i}}))}function Ye(n){var g=n.children,o=n.location,l=t.useContext(Ce);return function(n,g){be()||L(!1);var o,l=t.useContext(ce),a=t.useContext(Ae).matches,r=a[a.length-1],I=r?r.params:{},i=(r&&r.pathname,r?r.pathnameBase:"/"),C=(r&&r.route,pe());if(g){var c,u="string"===typeof g?X(g):g;"/"===i||(null==(c=u.pathname)?void 0:c.startsWith(i))||L(!1),o=u}else o=C;var s=o.pathname||"/",d=w(n,{pathname:"/"===i?s:s.slice(i.length)||"/"}),A=Ve(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},I,e.params),pathname:j([i,e.pathname]),pathnameBase:"/"===e.pathnameBase?i:j([i,e.pathnameBase])})})),a,l||void 0);return g&&A?t.createElement(de.Provider,{value:{location:ne({pathname:"/",search:"",hash:"",state:null,key:"default"},o),navigationType:e.Pop}},A):A}(l&&!g?l.router.routes:He(g),o)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Re||(Re={}));var we=new Promise((function(){}));t.Component;function He(e,n){void 0===n&&(n=[]);var g=[];return t.Children.forEach(e,(function(e,o){if(t.isValidElement(e))if(e.type!==t.Fragment){e.type!==Xe&&L(!1),e.props.index&&e.props.children&&L(!1);var l=[].concat(I(n),[o]),a={id:e.props.id||l.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(a.children=He(e.props.children,l)),g.push(a)}else g.push.apply(g,He(e.props.children,n))})),g}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ke(){return Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var g in n)Object.prototype.hasOwnProperty.call(n,g)&&(e[g]=n[g])}return e},Ke.apply(this,arguments)}var Fe=n(1694),xe=n.n(Fe),Ee=t.createContext({getPrefixCls:function(e,t){return t||(e?"ant-".concat(e):"ant")}}),Me=Ee.Consumer;var ze=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},Le=t.createContext({siderHook:{addSider:function(){return null},removeSider:function(){return null}}});function Ue(e){var n=e.suffixCls,g=e.tagName;e.displayName;return function(e){return t.forwardRef((function(o,l){var a=t.useContext(Ee).getPrefixCls,r=o.prefixCls,I=a(n,r);return t.createElement(e,Ke({ref:l,prefixCls:I,tagName:g},o))}))}}var Qe=t.forwardRef((function(e,n){var g=e.prefixCls,o=e.className,l=e.children,a=e.tagName,r=ze(e,["prefixCls","className","children","tagName"]),I=xe()(g,o);return t.createElement(a,Ke(Ke({className:I},r),{ref:n}),l)})),Te=t.forwardRef((function(e,n){var g,o=t.useContext(Ee).direction,l=Z(t.useState([]),2),a=l[0],r=l[1],i=e.prefixCls,C=e.className,c=e.children,u=e.hasSider,s=e.tagName,d=ze(e,["prefixCls","className","children","hasSider","tagName"]),A=xe()(i,(Ne(g={},"".concat(i,"-has-sider"),"boolean"===typeof u?u:a.length>0),Ne(g,"".concat(i,"-rtl"),"rtl"===o),g),C),m=t.useMemo((function(){return{siderHook:{addSider:function(e){r((function(t){return[].concat(I(t),[e])}))},removeSider:function(e){r((function(t){return t.filter((function(t){return t!==e}))}))}}}}),[]);return t.createElement(Le.Provider,{value:m},t.createElement(s,Ke({ref:n,className:A},d),c))})),De=Ue({suffixCls:"layout",tagName:"section",displayName:"Layout"})(Te),je=Ue({suffixCls:"layout-header",tagName:"header",displayName:"Header"})(Qe),Pe=Ue({suffixCls:"layout-footer",tagName:"footer",displayName:"Footer"})(Qe),Oe=Ue({suffixCls:"layout-content",tagName:"main",displayName:"Content"})(Qe),qe=De;function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);t&&(g=g.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,g)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){Ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var et={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"};function tt(e,t){if(null==e)return{};var n,g,o=function(e,t){if(null==e)return{};var n,g,o={},l=Object.keys(e);for(g=0;g<l.length;g++)n=l[g],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(g=0;g<l.length;g++)n=l[g],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var nt=(0,t.createContext)({});function gt(e,t){(function(e){return"string"===typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"===typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function ot(e){return Math.min(1,Math.max(0,e))}function lt(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function at(e){return e<=1?"".concat(100*Number(e),"%"):e}function rt(e){return 1===e.length?"0"+e:String(e)}function It(e,t,n){e=gt(e,255),t=gt(t,255),n=gt(n,255);var g=Math.max(e,t,n),o=Math.min(e,t,n),l=0,a=0,r=(g+o)/2;if(g===o)a=0,l=0;else{var I=g-o;switch(a=r>.5?I/(2-g-o):I/(g+o),g){case e:l=(t-n)/I+(t<n?6:0);break;case t:l=(n-e)/I+2;break;case n:l=(e-t)/I+4}l/=6}return{h:l,s:a,l:r}}function it(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Ct(e,t,n){e=gt(e,255),t=gt(t,255),n=gt(n,255);var g=Math.max(e,t,n),o=Math.min(e,t,n),l=0,a=g,r=g-o,I=0===g?0:r/g;if(g===o)l=0;else{switch(g){case e:l=(t-n)/r+(t<n?6:0);break;case t:l=(n-e)/r+2;break;case n:l=(e-t)/r+4}l/=6}return{h:l,s:I,v:a}}function ct(e,t,n,g){var o=[rt(Math.round(e).toString(16)),rt(Math.round(t).toString(16)),rt(Math.round(n).toString(16))];return g&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function ut(e){return Math.round(255*parseFloat(e)).toString(16)}function st(e){return dt(e)/255}function dt(e){return parseInt(e,16)}var At={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function mt(e){var t={r:0,g:0,b:0},n=1,g=null,o=null,l=null,a=!1,r=!1;return"string"===typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(At[e])e=At[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=ft.rgb.exec(e);if(n)return{r:n[1],g:n[2],b:n[3]};if(n=ft.rgba.exec(e))return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=ft.hsl.exec(e))return{h:n[1],s:n[2],l:n[3]};if(n=ft.hsla.exec(e))return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=ft.hsv.exec(e))return{h:n[1],s:n[2],v:n[3]};if(n=ft.hsva.exec(e))return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=ft.hex8.exec(e))return{r:dt(n[1]),g:dt(n[2]),b:dt(n[3]),a:st(n[4]),format:t?"name":"hex8"};if(n=ft.hex6.exec(e))return{r:dt(n[1]),g:dt(n[2]),b:dt(n[3]),format:t?"name":"hex"};if(n=ft.hex4.exec(e))return{r:dt(n[1]+n[1]),g:dt(n[2]+n[2]),b:dt(n[3]+n[3]),a:st(n[4]+n[4]),format:t?"name":"hex8"};if(n=ft.hex3.exec(e))return{r:dt(n[1]+n[1]),g:dt(n[2]+n[2]),b:dt(n[3]+n[3]),format:t?"name":"hex"};return!1}(e)),"object"===typeof e&&(yt(e.r)&&yt(e.g)&&yt(e.b)?(t=function(e,t,n){return{r:255*gt(e,255),g:255*gt(t,255),b:255*gt(n,255)}}(e.r,e.g,e.b),a=!0,r="%"===String(e.r).substr(-1)?"prgb":"rgb"):yt(e.h)&&yt(e.s)&&yt(e.v)?(g=at(e.s),o=at(e.v),t=function(e,t,n){e=6*gt(e,360),t=gt(t,100),n=gt(n,100);var g=Math.floor(e),o=e-g,l=n*(1-t),a=n*(1-o*t),r=n*(1-(1-o)*t),I=g%6;return{r:255*[n,a,l,l,r,n][I],g:255*[r,n,n,a,l,l][I],b:255*[l,l,r,n,n,a][I]}}(e.h,g,o),a=!0,r="hsv"):yt(e.h)&&yt(e.s)&&yt(e.l)&&(g=at(e.s),l=at(e.l),t=function(e,t,n){var g,o,l;if(e=gt(e,360),t=gt(t,100),n=gt(n,100),0===t)o=n,l=n,g=n;else{var a=n<.5?n*(1+t):n+t-n*t,r=2*n-a;g=it(r,a,e+1/3),o=it(r,a,e),l=it(r,a,e-1/3)}return{r:255*g,g:255*o,b:255*l}}(e.h,g,l),a=!0,r="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=lt(n),{ok:a,format:e.format||r,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var bt="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),pt="[\\s|\\(]+(".concat(bt,")[,|\\s]+(").concat(bt,")[,|\\s]+(").concat(bt,")\\s*\\)?"),ht="[\\s|\\(]+(".concat(bt,")[,|\\s]+(").concat(bt,")[,|\\s]+(").concat(bt,")[,|\\s]+(").concat(bt,")\\s*\\)?"),ft={CSS_UNIT:new RegExp(bt),rgb:new RegExp("rgb"+pt),rgba:new RegExp("rgba"+ht),hsl:new RegExp("hsl"+pt),hsla:new RegExp("hsla"+ht),hsv:new RegExp("hsv"+pt),hsva:new RegExp("hsva"+ht),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function yt(e){return Boolean(ft.CSS_UNIT.exec(String(e)))}var Zt=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function vt(e){var t=Ct(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function Gt(e){var t=e.r,n=e.g,g=e.b;return"#".concat(ct(t,n,g,!1))}function Bt(e,t,n){var g=n/100;return{r:(t.r-e.r)*g+e.r,g:(t.g-e.g)*g+e.g,b:(t.b-e.b)*g+e.b}}function St(e,t,n){var g;return(g=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-2*t:Math.round(e.h)+2*t:n?Math.round(e.h)+2*t:Math.round(e.h)-2*t)<0?g+=360:g>=360&&(g-=360),g}function Vt(e,t,n){return 0===e.h&&0===e.s?e.s:((g=n?e.s-.16*t:4===t?e.s+.16:e.s+.05*t)>1&&(g=1),n&&5===t&&g>.1&&(g=.1),g<.06&&(g=.06),Number(g.toFixed(2)));var g}function Wt(e,t,n){var g;return(g=n?e.v+.05*t:e.v-.15*t)>1&&(g=1),Number(g.toFixed(2))}function Rt(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],g=mt(e),o=5;o>0;o-=1){var l=vt(g),a=Gt(mt({h:St(l,o,!0),s:Vt(l,o,!0),v:Wt(l,o,!0)}));n.push(a)}n.push(Gt(g));for(var r=1;r<=4;r+=1){var I=vt(g),i=Gt(mt({h:St(I,r),s:Vt(I,r),v:Wt(I,r)}));n.push(i)}return"dark"===t.theme?Zt.map((function(e){var g=e.index,o=e.opacity;return Gt(Bt(mt(t.backgroundColor||"#141414"),mt(n[g]),100*o))})):n}var kt={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Xt={},Jt={};Object.keys(kt).forEach((function(e){Xt[e]=Rt(kt[e]),Xt[e].primary=Xt[e][5],Jt[e]=Rt(kt[e],{theme:"dark",backgroundColor:"#141414"}),Jt[e].primary=Jt[e][5]}));Xt.red,Xt.volcano,Xt.gold,Xt.orange,Xt.yellow,Xt.lime,Xt.green,Xt.cyan,Xt.blue,Xt.geekblue,Xt.purple,Xt.magenta,Xt.grey;var Yt={};function wt(e,t){0}function Ht(e,t,n){t||Yt[n]||(e(!1,n),Yt[n]=!0)}var Nt=function(e,t){Ht(wt,e,t)};function Kt(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}function Ft(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}var xt="data-rc-order",Et="rc-util-key",Mt=new Map;function zt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):Et}function Lt(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function Ut(e){return"queue"===e?"prependQueue":e?"prepend":"append"}function Qt(e){return Array.from((Mt.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function Tt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Kt())return null;var n=t.csp,g=t.prepend,o=document.createElement("style");o.setAttribute(xt,Ut(g)),(null===n||void 0===n?void 0:n.nonce)&&(o.nonce=null===n||void 0===n?void 0:n.nonce),o.innerHTML=e;var l=Lt(t),a=l.firstChild;if(g){if("queue"===g){var r=Qt(l).filter((function(e){return["prepend","prependQueue"].includes(e.getAttribute(xt))}));if(r.length)return l.insertBefore(o,r[r.length-1].nextSibling),o}l.insertBefore(o,a)}else l.appendChild(o);return o}function Dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Lt(t);return Qt(n).find((function(n){return n.getAttribute(zt(t))===e}))}function jt(e,t){var n=Mt.get(e);if(!n||!Ft(document,n)){var g=Tt("",t),o=g.parentNode;Mt.set(e,o),o.removeChild(g)}}function Pt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},g=Lt(n);jt(g,n);var o=Dt(t,n);if(o){var l,a,r;if((null===(l=n.csp)||void 0===l?void 0:l.nonce)&&o.nonce!==(null===(a=n.csp)||void 0===a?void 0:a.nonce))o.nonce=null===(r=n.csp)||void 0===r?void 0:r.nonce;return o.innerHTML!==e&&(o.innerHTML=e),o}var I=Tt(e,n);return I.setAttribute(zt(n),t),I}function Ot(e){return"object"===m(e)&&"string"===typeof e.name&&"string"===typeof e.theme&&("object"===m(e.icon)||"function"===typeof e.icon)}function qt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var g=e[n];if("class"===n)t.className=g,delete t.class;else t[n]=g;return t}),{})}function _t(e,n,g){return g?t.createElement(e.tag,$e($e({key:n},qt(e.attrs)),g),(e.children||[]).map((function(t,g){return _t(t,"".concat(n,"-").concat(e.tag,"-").concat(g))}))):t.createElement(e.tag,$e({key:n},qt(e.attrs)),(e.children||[]).map((function(t,g){return _t(t,"".concat(n,"-").concat(e.tag,"-").concat(g))})))}function $t(e){return Rt(e)[0]}function en(e){return e?Array.isArray(e)?e:[e]:[]}var tn="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",nn=["icon","className","onClick","style","primaryColor","secondaryColor"],gn={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var on=function(e){var n=e.icon,g=e.className,o=e.onClick,l=e.style,a=e.primaryColor,r=e.secondaryColor,I=tt(e,nn),i=gn;if(a&&(i={primaryColor:a,secondaryColor:r||$t(a)}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn,n=(0,t.useContext)(nt).csp;(0,t.useEffect)((function(){Pt(e,"@ant-design-icons",{prepend:!0,csp:n})}),[])}(),function(e,t){Nt(e,"[@ant-design/icons] ".concat(t))}(Ot(n),"icon should be icon definiton, but got ".concat(n)),!Ot(n))return null;var C=n;return C&&"function"===typeof C.icon&&(C=$e($e({},C),{},{icon:C.icon(i.primaryColor,i.secondaryColor)})),_t(C.icon,"svg-".concat(C.name),$e({className:g,onClick:o,style:l,"data-icon":C.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},I))};on.displayName="IconReact",on.getTwoToneColors=function(){return $e({},gn)},on.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;gn.primaryColor=t,gn.secondaryColor=n||$t(t),gn.calculated=!!n};var ln=on;function an(e){var t=Z(en(e),2),n=t[0],g=t[1];return ln.setTwoToneColors({primaryColor:n,secondaryColor:g})}var rn=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];an("#1890ff");var In=t.forwardRef((function(e,n){var g,o=e.className,l=e.icon,a=e.spin,r=e.rotate,I=e.tabIndex,i=e.onClick,C=e.twoToneColor,c=tt(e,rn),u=t.useContext(nt).prefixCls,s=void 0===u?"anticon":u,d=xe()(s,(Ne(g={},"".concat(s,"-").concat(l.name),!!l.name),Ne(g,"".concat(s,"-spin"),!!a||"loading"===l.name),g),o),A=I;void 0===A&&i&&(A=-1);var m=r?{msTransform:"rotate(".concat(r,"deg)"),transform:"rotate(".concat(r,"deg)")}:void 0,b=Z(en(C),2),p=b[0],h=b[1];return t.createElement("span",$e($e({role:"img","aria-label":l.name},c),{},{ref:n,tabIndex:A,onClick:i,className:d}),t.createElement(ln,{icon:l,primaryColor:p,secondaryColor:h,style:m}))}));In.displayName="AntdIcon",In.getTwoToneColor=function(){var e=ln.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},In.setTwoToneColor=an;var Cn=In,cn=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:et}))};cn.displayName="BarsOutlined";var un=t.forwardRef(cn),sn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},dn=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:sn}))};dn.displayName="LeftOutlined";var An=t.forwardRef(dn),mn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},bn=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:mn}))};bn.displayName="RightOutlined";var pn=t.forwardRef(bn);function hn(e,t){var n=$e({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}var fn=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},yn=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},Zn={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},vn=t.createContext({}),Gn=function(){var e=0;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e+=1,"".concat(t).concat(e)}}(),Bn=t.forwardRef((function(e,n){var g=e.prefixCls,o=e.className,l=e.trigger,a=e.children,r=e.defaultCollapsed,I=void 0!==r&&r,i=e.theme,C=void 0===i?"dark":i,c=e.style,u=void 0===c?{}:c,s=e.collapsible,d=void 0!==s&&s,A=e.reverseArrow,m=void 0!==A&&A,b=e.width,p=void 0===b?200:b,h=e.collapsedWidth,f=void 0===h?80:h,y=e.zeroWidthTriggerStyle,v=e.breakpoint,G=e.onCollapse,B=e.onBreakpoint,S=yn(e,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]),V=(0,t.useContext)(Le).siderHook,W=Z((0,t.useState)("collapsed"in S?S.collapsed:I),2),R=W[0],k=W[1],X=Z((0,t.useState)(!1),2),J=X[0],Y=X[1];(0,t.useEffect)((function(){"collapsed"in S&&k(S.collapsed)}),[S.collapsed]);var w=function(e,t){"collapsed"in S||k(e),null===G||void 0===G||G(e,t)},H=(0,t.useRef)();H.current=function(e){Y(e.matches),null===B||void 0===B||B(e.matches),R!==e.matches&&w(e.matches,"responsive")},(0,t.useEffect)((function(){function e(e){return H.current(e)}var t;if("undefined"!==typeof window){var n=window.matchMedia;if(n&&v&&v in Zn){t=n("(max-width: ".concat(Zn[v],")"));try{t.addEventListener("change",e)}catch(g){t.addListener(e)}e(t)}}return function(){try{null===t||void 0===t||t.removeEventListener("change",e)}catch(g){null===t||void 0===t||t.removeListener(e)}}}),[v]),(0,t.useEffect)((function(){var e=Gn("ant-sider-");return V.addSider(e),function(){return V.removeSider(e)}}),[]);var N=function(){w(!R,"clickTrigger")},K=(0,t.useContext)(Ee).getPrefixCls,F=t.useMemo((function(){return{siderCollapsed:R}}),[R]);return t.createElement(vn.Provider,{value:F},function(){var e,r=K("layout-sider",g),I=hn(S,["collapsed"]),i=R?f:p,c=fn(i)?"".concat(i,"px"):String(i),s=0===parseFloat(String(f||0))?t.createElement("span",{onClick:N,className:xe()("".concat(r,"-zero-width-trigger"),"".concat(r,"-zero-width-trigger-").concat(m?"right":"left")),style:y},l||t.createElement(un,null)):null,A={expanded:m?t.createElement(pn,null):t.createElement(An,null),collapsed:m?t.createElement(An,null):t.createElement(pn,null)}[R?"collapsed":"expanded"],b=null!==l?s||t.createElement("div",{className:"".concat(r,"-trigger"),onClick:N,style:{width:c}},l||A):null,h=Ke(Ke({},u),{flex:"0 0 ".concat(c),maxWidth:c,minWidth:c,width:c}),Z=xe()(r,"".concat(r,"-").concat(C),(Ne(e={},"".concat(r,"-collapsed"),!!R),Ne(e,"".concat(r,"-has-trigger"),d&&null!==l&&!s),Ne(e,"".concat(r,"-below"),!!J),Ne(e,"".concat(r,"-zero-width"),0===parseFloat(c)),e),o);return t.createElement("aside",Ke({className:Z},I,{style:h,ref:n}),t.createElement("div",{className:"".concat(r,"-children")},a),d||J&&s?b:null)}())}));var Sn=Bn,Vn=qe;Vn.Header=je,Vn.Footer=Pe,Vn.Content=Oe,Vn.Sider=Sn;var Wn=Vn,Rn=(0,t.createContext)({transformPagePoint:function(e){return e},isStatic:!1,reducedMotion:"never"}),kn=(0,t.createContext)({});var Xn=(0,t.createContext)(null),Jn="undefined"!==typeof document,Yn=Jn?t.useLayoutEffect:t.useEffect,wn=(0,t.createContext)({strict:!1});function Hn(e,n,g,o){var l=(0,t.useContext)(kn).visualElement,a=(0,t.useContext)(wn),r=(0,t.useContext)(Xn),I=(0,t.useContext)(Rn).reducedMotion,i=(0,t.useRef)();o=o||a.renderer,!i.current&&o&&(i.current=o(e,{visualState:n,parent:l,props:g,presenceId:r?r.id:void 0,blockInitialAnimation:!!r&&!1===r.initial,reducedMotionConfig:I}));var C=i.current;return Yn((function(){C&&C.render()})),(0,t.useEffect)((function(){C&&C.animationState&&C.animationState.animateChanges()})),Yn((function(){return function(){return C&&C.notify("Unmount")}}),[]),C}function Nn(e){return"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Kn(e){return"string"===typeof e||Array.isArray(e)}function Fn(e){return"object"===typeof e&&"function"===typeof e.start}var xn=["initial","animate","exit","whileHover","whileDrag","whileTap","whileFocus","whileInView"];function En(e){return Fn(e.animate)||xn.some((function(t){return Kn(e[t])}))}function Mn(e){return Boolean(En(e)||e.variants)}function zn(e){var n=function(e,t){if(En(e)){var n=e.initial,g=e.animate;return{initial:!1===n||Kn(n)?n:void 0,animate:Kn(g)?g:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(kn)),g=n.initial,o=n.animate;return(0,t.useMemo)((function(){return{initial:g,animate:o}}),[Ln(g),Ln(o)])}function Ln(e){return Array.isArray(e)?e.join(" "):e}var Un=function(e){return{isEnabled:function(t){return e.some((function(e){return!!t[e]}))}}},Qn={measureLayout:Un(["layout","layoutId","drag"]),animation:Un(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:Un(["exit"]),drag:Un(["drag","dragControls"]),focus:Un(["whileFocus"]),hover:Un(["whileHover","onHoverStart","onHoverEnd"]),tap:Un(["whileTap","onTap","onTapStart","onTapCancel"]),pan:Un(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:Un(["whileInView","onViewportEnter","onViewportLeave"])};function Tn(e){var n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}var Dn={hasAnimatedSinceResize:!0,hasEverUpdated:!1},jn=1;var Pn=(0,t.createContext)({}),On=function(e){s(n,e);var t=h(n);function n(){return i(this,n),t.apply(this,arguments)}return c(n,[{key:"getSnapshotBeforeUpdate",value:function(){var e=this.props,t=e.visualElement,n=e.props;return t&&t.setProps(n),null}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return this.props.children}}]),n}(t.Component),qn=(0,t.createContext)({}),_n=Symbol.for("motionComponentSymbol");function $n(e){var n=e.preloadedFeatures,g=e.createVisualElement,o=e.projectionNodeConstructor,l=e.useRender,a=e.useVisualState,r=e.Component;n&&function(e){for(var t in e)"projectionNodeConstructor"===t?Qn.projectionNodeConstructor=e[t]:Qn[t].Component=e[t]}(n);var I=(0,t.forwardRef)((function(e,I){var i=$e($e($e({},(0,t.useContext)(Rn)),e),{},{layoutId:eg(e)}),C=i.isStatic,c=null,u=zn(e),s=C?void 0:Tn((function(){if(Dn.hasEverUpdated)return jn++})),d=a(e,C);if(!C&&Jn){u.visualElement=Hn(r,d,i,g);var A=(0,t.useContext)(wn).strict,m=(0,t.useContext)(qn);u.visualElement&&(c=u.visualElement.loadFeatures(i,A,n,s,o||Qn.projectionNodeConstructor,m))}return t.createElement(On,{visualElement:u.visualElement,props:i},c,t.createElement(kn.Provider,{value:u},l(r,e,s,function(e,n,g){return(0,t.useCallback)((function(t){t&&e.mount&&e.mount(t),n&&(t?n.mount(t):n.unmount()),g&&("function"===typeof g?g(t):Nn(g)&&(g.current=t))}),[n])}(d,u.visualElement,I),d,C,u.visualElement)))}));return I[_n]=r,I}function eg(e){var n=e.layoutId,g=(0,t.useContext)(Pn).id;return g&&void 0!==n?g+"-"+n:n}function tg(e){function t(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $n(e(t,n))}if("undefined"===typeof Proxy)return t;var n=new Map;return new Proxy(t,{get:function(e,g){return n.has(g)||n.set(g,t(g)),n.get(g)}})}var ng=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function gg(e){return"string"===typeof e&&!e.includes("-")&&!!(ng.indexOf(e)>-1||/[A-Z]/.test(e))}var og={};var lg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ag=new Set(lg);function rg(e,t){var n=t.layout,g=t.layoutId;return ag.has(e)||e.startsWith("origin")||(n||void 0!==g)&&(!!og[e]||"opacity"===e)}var Ig=function(e){return!!(null===e||void 0===e?void 0:e.getVelocity)};function ig(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var g=0,o=function(){};return{s:o,n:function(){return g>=e.length?{done:!0}:{done:!1,value:e[g++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,I=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){I=!0,l=e},f:function(){try{a||null==n.return||n.return()}finally{if(I)throw l}}}}var Cg={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cg=function(e,t){return lg.indexOf(e)-lg.indexOf(t)};function ug(e){return e.startsWith("--")}var sg=function(e,t){return t&&"number"===typeof e?t.transform(e):e},dg=function(e,t){return function(n){return Math.max(Math.min(n,t),e)}},Ag=function(e){return e%1?Number(e.toFixed(5)):e},mg=/(-)?([\d]*\.?[\d])+/g,bg=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,pg=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function hg(e){return"string"===typeof e}var fg=function(e){return{test:function(t){return hg(t)&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return"".concat(t).concat(e)}}},yg=fg("deg"),Zg=fg("%"),vg=fg("px"),Gg=fg("vh"),Bg=fg("vw"),Sg=Object.assign(Object.assign({},Zg),{parse:function(e){return Zg.parse(e)/100},transform:function(e){return Zg.transform(100*e)}}),Vg={test:function(e){return"number"===typeof e},parse:parseFloat,transform:function(e){return e}},Wg=Object.assign(Object.assign({},Vg),{transform:dg(0,1)}),Rg=Object.assign(Object.assign({},Vg),{default:1}),kg=$e($e({},Vg),{},{transform:Math.round}),Xg={borderWidth:vg,borderTopWidth:vg,borderRightWidth:vg,borderBottomWidth:vg,borderLeftWidth:vg,borderRadius:vg,radius:vg,borderTopLeftRadius:vg,borderTopRightRadius:vg,borderBottomRightRadius:vg,borderBottomLeftRadius:vg,width:vg,maxWidth:vg,height:vg,maxHeight:vg,size:vg,top:vg,right:vg,bottom:vg,left:vg,padding:vg,paddingTop:vg,paddingRight:vg,paddingBottom:vg,paddingLeft:vg,margin:vg,marginTop:vg,marginRight:vg,marginBottom:vg,marginLeft:vg,rotate:yg,rotateX:yg,rotateY:yg,rotateZ:yg,scale:Rg,scaleX:Rg,scaleY:Rg,scaleZ:Rg,skew:yg,skewX:yg,skewY:yg,distance:vg,translateX:vg,translateY:vg,translateZ:vg,x:vg,y:vg,z:vg,perspective:vg,transformPerspective:vg,opacity:Wg,originX:Sg,originY:Sg,originZ:vg,zIndex:kg,fillOpacity:Wg,strokeOpacity:Wg,numOctaves:kg};function Jg(e,t,n,g){var o=e.style,l=e.vars,a=e.transform,r=e.transformKeys,I=e.transformOrigin;r.length=0;var i=!1,C=!1,c=!0;for(var u in t){var s=t[u];if(ug(u))l[u]=s;else{var d=Xg[u],A=sg(s,d);if(ag.has(u)){if(i=!0,a[u]=A,r.push(u),!c)continue;s!==(d.default||0)&&(c=!1)}else u.startsWith("origin")?(C=!0,I[u]=A):o[u]=A}}if(t.transform||(i||g?o.transform=function(e,t,n,g){var o=e.transform,l=e.transformKeys,a=t.enableHardwareAcceleration,r=void 0===a||a,I=t.allowTransformNone,i=void 0===I||I,C="";l.sort(cg);var c,u=ig(l);try{for(u.s();!(c=u.n()).done;){var s=c.value;C+="".concat(Cg[s]||s,"(").concat(o[s],") ")}}catch(d){u.e(d)}finally{u.f()}return r&&!o.z&&(C+="translateZ(0)"),C=C.trim(),g?C=g(o,n?"":C):i&&n&&(C="none"),C}(e,n,c,g):o.transform&&(o.transform="none")),C){var m=I.originX,b=void 0===m?"50%":m,p=I.originY,h=void 0===p?"50%":p,f=I.originZ,y=void 0===f?0:f;o.transformOrigin="".concat(b," ").concat(h," ").concat(y)}}var Yg=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function wg(e,t,n){for(var g in t)Ig(t[g])||rg(g,n)||(e[g]=t[g])}function Hg(e,n,g){var o={};return wg(o,e.style||{},e),Object.assign(o,function(e,n,g){var o=e.transformTemplate;return(0,t.useMemo)((function(){var e={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};return Jg(e,n,{enableHardwareAcceleration:!g},o),Object.assign({},e.vars,e.style)}),[n])}(e,n,g)),e.transformValues?e.transformValues(o):o}function Ng(e,t,n){var g={},o=Hg(e,t,n);return e.drag&&!1!==e.dragListener&&(g.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),g.style=o,g}var Kg=new Set(["initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","onHoverStart","onHoverEnd","layoutScroll"].concat(["whileInView","onViewportEnter","onViewportLeave","viewport"],["whileTap","onTap","onTapStart","onTapCancel"],["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"],["onPan","onPanStart","onPanSessionStart","onPanEnd"]));function Fg(e){return Kg.has(e)}var xg,Eg=function(e){return!Fg(e)};try{(xg=require("@emotion/is-prop-valid").default)&&(Eg=function(e){return e.startsWith("on")?!Fg(e):xg(e)})}catch(wY){}function Mg(e,t,n){var g={};for(var o in e)(Eg(o)||!0===n&&Fg(o)||!t&&!Fg(o)||e.draggable&&o.startsWith("onDrag"))&&(g[o]=e[o]);return g}function zg(e,t,n){return"string"===typeof e?e:vg.transform(t+n*e)}var Lg={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ug={offset:"strokeDashoffset",array:"strokeDasharray"};var Qg=["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"];function Tg(e,t,n,g){var o=t.attrX,l=t.attrY,a=t.originX,r=t.originY,I=t.pathLength,i=t.pathSpacing,C=void 0===i?1:i,c=t.pathOffset,u=void 0===c?0:c;Jg(e,tt(t,Qg),n,g),e.attrs=e.style,e.style={};var s=e.attrs,d=e.style,A=e.dimensions;s.transform&&(A&&(d.transform=s.transform),delete s.transform),A&&(void 0!==a||void 0!==r||d.transform)&&(d.transformOrigin=function(e,t,n){var g=zg(t,e.x,e.width),o=zg(n,e.y,e.height);return"".concat(g," ").concat(o)}(A,void 0!==a?a:.5,void 0!==r?r:.5)),void 0!==o&&(s.x=o),void 0!==l&&(s.y=l),void 0!==I&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;var l=o?Lg:Ug;e[l.offset]=vg.transform(-g);var a=vg.transform(t),r=vg.transform(n);e[l.array]="".concat(a," ").concat(r)}(s,I,C,u,!1)}var Dg=function(){return $e($e({},{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}),{},{attrs:{}})};function jg(e,n){var g=(0,t.useMemo)((function(){var t=Dg();return Tg(t,n,{enableHardwareAcceleration:!1},e.transformTemplate),$e($e({},t.attrs),{},{style:$e({},t.style)})}),[n]);if(e.style){var o={};wg(o,e.style,e),g.style=$e($e({},o),g.style)}return g}function Pg(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=function(n,g,o,l,a,r){var I=a.latestValues,i=(gg(n)?jg:Ng)(g,I,r),C=$e($e($e({},Mg(g,"string"===typeof n,e)),i),{},{ref:l});return o&&(C["data-projection-id"]=o),(0,t.createElement)(n,C)};return n}var Og=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()};function qg(e,t,n,g){var o=t.style,l=t.vars;for(var a in Object.assign(e.style,o,g&&g.getProjectionStyles(n)),l)e.style.setProperty(a,l[a])}var _g=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength"]);function $g(e,t,n,g){for(var o in qg(e,t,void 0,g),t.attrs)e.setAttribute(_g.has(o)?o:Og(o),t.attrs[o])}function eo(e){var t=e.style,n={};for(var g in t)(Ig(t[g])||rg(g,e))&&(n[g]=t[g]);return n}function to(e){var t=eo(e);for(var n in e){if(Ig(e[n]))t["x"===n||"y"===n?"attr"+n.toUpperCase():n]=e[n]}return t}function no(e,t,n){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,g,o)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,g,o)),t}var go=function(e){return Array.isArray(e)},oo=function(e){return go(e)?e[e.length-1]||0:e};function lo(e){var t,n=Ig(e)?e.get():e;return t=n,Boolean(t&&"object"===typeof t&&t.mix&&t.toValue)?n.toValue():n}var ao=["transitionEnd","transition"];var ro=function(e){return function(n,g){var o=(0,t.useContext)(kn),l=(0,t.useContext)(Xn),a=function(){return function(e,t,n,g){var o=e.scrapeMotionValuesFromProps,l=e.createRenderState,a=e.onMount,r={latestValues:Io(t,n,g,o),renderState:l()};return a&&(r.mount=function(e){return a(t,e,r)}),r}(e,n,o,l)};return g?a():Tn(a)}};function Io(e,t,n,g){var o={},l=g(e);for(var a in l)o[a]=lo(l[a]);var r=e.initial,I=e.animate,i=En(e),C=Mn(e);t&&C&&!i&&!1!==e.inherit&&(void 0===r&&(r=t.initial),void 0===I&&(I=t.animate));var c=!!n&&!1===n.initial,u=(c=c||!1===r)?I:r;u&&"boolean"!==typeof u&&!Fn(u)&&(Array.isArray(u)?u:[u]).forEach((function(t){var n=no(e,t);if(n){var g=n.transitionEnd,l=(n.transition,tt(n,ao));for(var a in l){var r=l[a];if(Array.isArray(r))r=r[c?r.length-1:0];null!==r&&(o[a]=r)}for(var I in g)o[I]=g[I]}}));return o}var io,Co={useVisualState:ro({scrapeMotionValuesFromProps:to,createRenderState:Dg,onMount:function(e,t,n){var g=n.renderState,o=n.latestValues;try{g.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(l){g.dimensions={x:0,y:0,width:0,height:0}}Tg(g,o,{enableHardwareAcceleration:!1},e.transformTemplate),$g(t,g)}})},co={useVisualState:ro({scrapeMotionValuesFromProps:eo,createRenderState:Yg})};function uo(e,t,n){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,g),function(){return e.removeEventListener(t,n)}}function so(e,n,g,o){(0,t.useEffect)((function(){var t=e.current;if(g&&t)return uo(t,n,g,o)}),[e,n,g,o])}function Ao(e){return"undefined"!==typeof PointerEvent&&e instanceof PointerEvent?!("mouse"!==e.pointerType):e instanceof MouseEvent}function mo(e){return!!e.touches}function bo(e){return function(t){var n=t instanceof MouseEvent;(!n||n&&0===t.button)&&e(t)}}!function(e){e.Animate="animate",e.Hover="whileHover",e.Tap="whileTap",e.Drag="whileDrag",e.Focus="whileFocus",e.InView="whileInView",e.Exit="exit"}(io||(io={}));var po={pageX:0,pageY:0};function ho(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page",n=e.touches[0]||e.changedTouches[0],g=n||po;return{x:g[t+"X"],y:g[t+"Y"]}}function fo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{x:e[t+"X"],y:e[t+"Y"]}}function yo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:mo(e)?ho(e,t):fo(e,t)}}var Zo=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(t){return e(t,yo(t))};return t?bo(n):n},vo={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},Go={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function Bo(e){return Jn&&null===window.onpointerdown?e:Jn&&null===window.ontouchstart?Go[e]:Jn&&null===window.onmousedown?vo[e]:e}function So(e,t,n,g){return uo(e,Bo(t),Zo(n,"pointerdown"===t),g)}function Vo(e,t,n,g){return so(e,Bo(t),n&&Zo(n,"pointerdown"===t),g)}function Wo(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var Ro=Wo("dragHorizontal"),ko=Wo("dragVertical");function Xo(e){var t=!1;if("y"===e)t=ko();else if("x"===e)t=Ro();else{var n=Ro(),g=ko();n&&g?t=function(){n(),g()}:(n&&n(),g&&g())}return t}function Jo(){var e=Xo(!0);return!e||(e(),!1)}function Yo(e,t,n){return function(g,o){Ao(g)&&!Jo()&&(e.animationState&&e.animationState.setActive(io.Hover,t),n&&n(g,o))}}var wo=function e(t,n){return!!n&&(t===n||e(t,n.parentElement))};function Ho(e){return(0,t.useEffect)((function(){return function(){return e()}}),[])}var No=function(e,t){return function(n){return t(e(n))}},Ko=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(No)};var Fo=new Set;function xo(e,t,n){e||Fo.has(t)||(console.warn(t),n&&console.warn(n),Fo.add(t))}var Eo=["root"],Mo=new WeakMap,zo=new WeakMap,Lo=function(e){var t=Mo.get(e.target);t&&t(e)},Uo=function(e){e.forEach(Lo)};function Qo(e,t,n){var g=function(e){var t=e.root,n=tt(e,Eo),g=t||document;zo.has(g)||zo.set(g,{});var o=zo.get(g),l=JSON.stringify(n);return o[l]||(o[l]=new IntersectionObserver(Uo,$e({root:t},n))),o[l]}(t);return Mo.set(e,n),g.observe(e),function(){Mo.delete(e),g.unobserve(e)}}var To={some:0,all:1};function Do(e,n,g,o){var l=o.root,a=o.margin,r=o.amount,I=void 0===r?"some":r,i=o.once;(0,t.useEffect)((function(){if(e&&g.current){var t={root:null===l||void 0===l?void 0:l.current,rootMargin:a,threshold:"number"===typeof I?I:To[I]};return Qo(g.current,t,(function(e){var t=e.isIntersecting;if(n.isInView!==t&&(n.isInView=t,!i||t||!n.hasEnteredView)){t&&(n.hasEnteredView=!0),g.animationState&&g.animationState.setActive(io.InView,t);var o=g.getProps(),l=t?o.onViewportEnter:o.onViewportLeave;l&&l(e)}}))}}),[e,l,a,I])}function jo(e,n,g,o){var l=o.fallback,a=void 0===l||l;(0,t.useEffect)((function(){e&&a&&requestAnimationFrame((function(){n.hasEnteredView=!0;var e=g.getProps().onViewportEnter;e&&e(null),g.animationState&&g.animationState.setActive(io.InView,!0)}))}),[e])}var Po=function(e){return function(t){return e(t),null}},Oo={inView:Po((function(e){var n=e.visualElement,g=e.whileInView,o=e.onViewportEnter,l=e.onViewportLeave,a=e.viewport,r=void 0===a?{}:a,I=(0,t.useRef)({hasEnteredView:!1,isInView:!1}),i=Boolean(g||o||l);r.once&&I.current.hasEnteredView&&(i=!1),("undefined"===typeof IntersectionObserver?jo:Do)(i,I.current,n,r)})),tap:Po((function(e){var n=e.onTap,g=e.onTapStart,o=e.onTapCancel,l=e.whileTap,a=e.visualElement,r=n||g||o||l,I=(0,t.useRef)(!1),i=(0,t.useRef)(null),C={passive:!(g||n||o||A)};function c(){i.current&&i.current(),i.current=null}function u(){return c(),I.current=!1,a.animationState&&a.animationState.setActive(io.Tap,!1),!Jo()}function s(e,t){u()&&(wo(a.current,e.target)?n&&n(e,t):o&&o(e,t))}function d(e,t){u()&&o&&o(e,t)}function A(e,t){c(),I.current||(I.current=!0,i.current=Ko(So(window,"pointerup",s,C),So(window,"pointercancel",d,C)),a.animationState&&a.animationState.setActive(io.Tap,!0),g&&g(e,t))}Vo(a,"pointerdown",r?A:void 0,C),Ho(c)})),focus:Po((function(e){var t=e.whileFocus,n=e.visualElement,g=n.animationState;so(n,"focus",t?function(){g&&g.setActive(io.Focus,!0)}:void 0),so(n,"blur",t?function(){g&&g.setActive(io.Focus,!1)}:void 0)})),hover:Po((function(e){var t=e.onHoverStart,n=e.onHoverEnd,g=e.whileHover,o=e.visualElement;Vo(o,"pointerenter",t||g?Yo(o,!0,t):void 0,{passive:!t}),Vo(o,"pointerleave",n||g?Yo(o,!1,n):void 0,{passive:!n})}))};function qo(){var e=(0,t.useContext)(Xn);if(null===e)return[!0,null];var n=e.isPresent,g=e.onExitComplete,o=e.register,l=(0,t.useId)();(0,t.useEffect)((function(){return o(l)}),[]);return!n&&g?[!1,function(){return g&&g(l)}]:[!0]}function _o(e,t){if(!Array.isArray(t))return!1;var n=t.length;if(n!==e.length)return!1;for(var g=0;g<n;g++)if(t[g]!==e[g])return!1;return!0}function $o(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n}Object.create;Object.create;var el=function(e,t,n){return Math.min(Math.max(n,e),t)},tl=.001;function nl(e){var t,n,g=e.duration,o=void 0===g?800:g,l=e.bounce,a=void 0===l?.25:l,r=e.velocity,I=void 0===r?0:r,i=e.mass,C=void 0===i?1:i,c=1-a;c=el(.05,1,c),o=el(.01,10,o/1e3),c<1?(t=function(e){var t=e*c,n=t*o,g=t-I,l=gl(e,c),a=Math.exp(-n);return tl-g/l*a},n=function(e){var n=e*c*o,g=n*I+I,l=Math.pow(c,2)*Math.pow(e,2)*o,a=Math.exp(-n),r=gl(Math.pow(e,2),c);return(-t(e)+tl>0?-1:1)*((g-l)*a)/r}):(t=function(e){return Math.exp(-e*o)*((e-I)*o+1)-.001},n=function(e){return Math.exp(-e*o)*(o*o*(I-e))});var u=function(e,t,n){for(var g=n,o=1;o<12;o++)g-=e(g)/t(g);return g}(t,n,5/o);if(o*=1e3,isNaN(u))return{stiffness:100,damping:10,duration:o};var s=Math.pow(u,2)*C;return{stiffness:s,damping:2*c*Math.sqrt(C*s),duration:o}}function gl(e,t){return e*Math.sqrt(1-t*t)}var ol=["duration","bounce"],ll=["stiffness","damping","mass"];function al(e,t){return t.some((function(t){return void 0!==e[t]}))}function rl(e){var t=e.from,n=void 0===t?0:t,g=e.to,o=void 0===g?1:g,l=e.restSpeed,a=void 0===l?2:l,r=e.restDelta,I=$o(e,["from","to","restSpeed","restDelta"]),i={done:!1,value:n},C=function(e){var t=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!al(e,ll)&&al(e,ol)){var n=nl(e);(t=Object.assign(Object.assign(Object.assign({},t),n),{velocity:0,mass:1})).isResolvedFromDuration=!0}return t}(I),c=C.stiffness,u=C.damping,s=C.mass,d=C.velocity,A=C.duration,m=C.isResolvedFromDuration,b=Il,p=Il;function h(){var e=d?-d/1e3:0,t=o-n,g=u/(2*Math.sqrt(c*s)),l=Math.sqrt(c/s)/1e3;if(void 0===r&&(r=Math.min(Math.abs(o-n)/100,.4)),g<1){var a=gl(l,g);b=function(n){var r=Math.exp(-g*l*n);return o-r*((e+g*l*t)/a*Math.sin(a*n)+t*Math.cos(a*n))},p=function(n){var o=Math.exp(-g*l*n);return g*l*o*(Math.sin(a*n)*(e+g*l*t)/a+t*Math.cos(a*n))-o*(Math.cos(a*n)*(e+g*l*t)-a*t*Math.sin(a*n))}}else if(1===g)b=function(n){return o-Math.exp(-l*n)*(t+(e+l*t)*n)};else{var I=l*Math.sqrt(g*g-1);b=function(n){var a=Math.exp(-g*l*n),r=Math.min(I*n,300);return o-a*((e+g*l*t)*Math.sinh(r)+I*t*Math.cosh(r))/I}}}return h(),{next:function(e){var t=b(e);if(m)i.done=e>=A;else{var n=1e3*p(e),g=Math.abs(n)<=a,l=Math.abs(o-t)<=r;i.done=g&&l}return i.value=i.done?o:t,i},flipTarget:function(){d=-d;var e=[o,n];n=e[0],o=e[1],h()}}}rl.needsInterpolation=function(e,t){return"string"===typeof e||"string"===typeof t};var Il=function(e){return 0},il=function(e,t,n){var g=t-e;return 0===g?1:(n-e)/g},Cl=function(e,t,n){return-n*e+n*t+e},cl=function(e,t){return function(n){return Boolean(hg(n)&&pg.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t))}},ul=function(e,t,n){return function(g){var o;if(!hg(g))return g;var l=Z(g.match(mg),4),a=l[0],r=l[1],I=l[2],i=l[3];return Ne(o={},e,parseFloat(a)),Ne(o,t,parseFloat(r)),Ne(o,n,parseFloat(I)),Ne(o,"alpha",void 0!==i?parseFloat(i):1),o}},sl=dg(0,255),dl=Object.assign(Object.assign({},Vg),{transform:function(e){return Math.round(sl(e))}}),Al={test:cl("rgb","red"),parse:ul("red","green","blue"),transform:function(e){var t=e.red,n=e.green,g=e.blue,o=e.alpha,l=void 0===o?1:o;return"rgba("+dl.transform(t)+", "+dl.transform(n)+", "+dl.transform(g)+", "+Ag(Wg.transform(l))+")"}};var ml={test:cl("#"),parse:function(e){var t="",n="",g="",o="";return e.length>5?(t=e.substr(1,2),n=e.substr(3,2),g=e.substr(5,2),o=e.substr(7,2)):(t=e.substr(1,1),n=e.substr(2,1),g=e.substr(3,1),o=e.substr(4,1),t+=t,n+=n,g+=g,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(g,16),alpha:o?parseInt(o,16)/255:1}},transform:Al.transform},bl={test:cl("hsl","hue"),parse:ul("hue","saturation","lightness"),transform:function(e){var t=e.hue,n=e.saturation,g=e.lightness,o=e.alpha,l=void 0===o?1:o;return"hsla("+Math.round(t)+", "+Zg.transform(Ag(n))+", "+Zg.transform(Ag(g))+", "+Ag(Wg.transform(l))+")"}};function pl(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function hl(e){var t=e.hue,n=e.saturation,g=e.lightness,o=e.alpha;t/=360,g/=100;var l=0,a=0,r=0;if(n/=100){var I=g<.5?g*(1+n):g+n-g*n,i=2*g-I;l=pl(i,I,t+1/3),a=pl(i,I,t),r=pl(i,I,t-1/3)}else l=a=r=g;return{red:Math.round(255*l),green:Math.round(255*a),blue:Math.round(255*r),alpha:o}}var fl=function(e,t,n){var g=e*e,o=t*t;return Math.sqrt(Math.max(0,n*(o-g)+g))},yl=[ml,Al,bl],Zl=function(e){return yl.find((function(t){return t.test(e)}))},vl=function(e){return"'".concat(e,"' is not an animatable color. Use the equivalent color code instead.")},Gl=function(e,t){var n=Zl(e),g=Zl(t);vl(e),vl(t);var o=n.parse(e),l=g.parse(t);n===bl&&(o=hl(o),n=Al),g===bl&&(l=hl(l),g=Al);var a=Object.assign({},o);return function(e){for(var t in a)"alpha"!==t&&(a[t]=fl(o[t],l[t],e));return a.alpha=Cl(o.alpha,l.alpha,e),n.transform(a)}},Bl={test:function(e){return Al.test(e)||ml.test(e)||bl.test(e)},parse:function(e){return Al.test(e)?Al.parse(e):bl.test(e)?bl.parse(e):ml.parse(e)},transform:function(e){return hg(e)?e:e.hasOwnProperty("red")?Al.transform(e):bl.transform(e)}},Sl="${c}",Vl="${n}";function Wl(e){"number"===typeof e&&(e="".concat(e));var t=[],n=0,g=e.match(bg);g&&(n=g.length,e=e.replace(bg,Sl),t.push.apply(t,I(g.map(Bl.parse))));var o=e.match(mg);return o&&(e=e.replace(mg,Vl),t.push.apply(t,I(o.map(Vg.parse)))),{values:t,numColors:n,tokenised:e}}function Rl(e){return Wl(e).values}function kl(e){var t=Wl(e),n=t.values,g=t.numColors,o=t.tokenised,l=n.length;return function(e){for(var t=o,n=0;n<l;n++)t=t.replace(n<g?Sl:Vl,n<g?Bl.transform(e[n]):Ag(e[n]));return t}}var Xl=function(e){return"number"===typeof e?0:e};var Jl={test:function(e){var t,n,g,o;return isNaN(e)&&hg(e)&&(null!==(n=null===(t=e.match(mg))||void 0===t?void 0:t.length)&&void 0!==n?n:0)+(null!==(o=null===(g=e.match(bg))||void 0===g?void 0:g.length)&&void 0!==o?o:0)>0},parse:Rl,createTransformer:kl,getAnimatableNone:function(e){var t=Rl(e);return kl(e)(t.map(Xl))}},Yl=function(e){return"number"===typeof e};function wl(e,t){return Yl(e)?function(n){return Cl(e,t,n)}:Bl.test(e)?Gl(e,t):Fl(e,t)}var Hl=function(e,t){var n=I(e),g=n.length,o=e.map((function(e,n){return wl(e,t[n])}));return function(e){for(var t=0;t<g;t++)n[t]=o[t](e);return n}},Nl=function(e,t){var n=Object.assign(Object.assign({},e),t),g={};for(var o in n)void 0!==e[o]&&void 0!==t[o]&&(g[o]=wl(e[o],t[o]));return function(e){for(var t in g)n[t]=g[t](e);return n}};function Kl(e){for(var t=Jl.parse(e),n=t.length,g=0,o=0,l=0,a=0;a<n;a++)g||"number"===typeof t[a]?g++:void 0!==t[a].hue?l++:o++;return{parsed:t,numNumbers:g,numRGB:o,numHSL:l}}var Fl=function(e,t){var n=Jl.createTransformer(t),g=Kl(e),o=Kl(t);return g.numHSL===o.numHSL&&g.numRGB===o.numRGB&&g.numNumbers>=o.numNumbers?Ko(Hl(g.parsed,o.parsed),n):("Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),function(n){return"".concat(n>0?t:e)})},xl=function(e,t){return function(n){return Cl(e,t,n)}};function El(e,t,n){for(var g,o=[],l=n||("number"===typeof(g=e[0])?xl:"string"===typeof g?Bl.test(g)?Gl:Fl:Array.isArray(g)?Hl:"object"===typeof g?Nl:void 0),a=e.length-1,r=0;r<a;r++){var I=l(e[r],e[r+1]);if(t){var i=Array.isArray(t)?t[r]:t;I=Ko(i,I)}o.push(I)}return o}function Ml(e,t){var n=Z(e,2),g=n[0],o=n[1],l=Z(t,1)[0];return function(e){return l(il(g,o,e))}}function zl(e,t){var n=e.length,g=n-1;return function(o){var l=0,a=!1;if(o<=e[0]?a=!0:o>=e[g]&&(l=g-1,a=!0),!a){for(var r=1;r<n&&!(e[r]>o||r===g);r++);l=r-1}var I=il(e[l],e[l+1],o);return t[l](I)}}function Ll(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},g=n.clamp,o=void 0===g||g,l=n.ease,a=n.mixer,r=e.length;t.length,!l||!Array.isArray(l)||l.length,e[0]>e[r-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());var I=El(t,l,a),i=2===r?Ml(e,I):zl(e,I);return o?function(t){return i(el(e[0],e[r-1],t))}:i}var Ul,Ql=function(e){return function(t){return 1-e(1-t)}},Tl=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},Dl=function(e){return function(t){return t*t*((e+1)*t-e)}},jl=function(e){return e},Pl=(Ul=2,function(e){return Math.pow(e,Ul)}),Ol=Ql(Pl),ql=Tl(Pl),_l=function(e){return 1-Math.sin(Math.acos(e))},$l=Ql(_l),ea=Tl($l),ta=Dl(1.525),na=Ql(ta),ga=Tl(ta),oa=function(e){var t=Dl(e);return function(e){return(e*=2)<1?.5*t(e):.5*(2-Math.pow(2,-10*(e-1)))}}(1.525),la=function(e){if(1===e||0===e)return e;var t=e*e;return e<.36363636363636365?7.5625*t:e<.7272727272727273?9.075*t-9.9*e+3.4:e<.9?12.066481994459833*t-19.63545706371191*e+8.898060941828255:10.8*e*e-20.52*e+10.72},aa=Ql(la);function ra(e,t){return e.map((function(){return t||ql})).splice(0,e.length-1)}function Ia(e){var t=e.from,n=void 0===t?0:t,g=e.to,o=void 0===g?1:g,l=e.ease,a=e.offset,r=e.duration,I=void 0===r?300:r,i={done:!1,value:n},C=Array.isArray(o)?o:[n,o],c=function(e,t){return e.map((function(e){return e*t}))}(a&&a.length===C.length?a:function(e){var t=e.length;return e.map((function(e,n){return 0!==n?n/(t-1):0}))}(C),I);function u(){return Ll(c,C,{ease:Array.isArray(l)?l:ra(C,l)})}var s=u();return{next:function(e){return i.value=s(e),i.done=e>=I,i},flipTarget:function(){C.reverse(),s=u()}}}var ia={keyframes:Ia,spring:rl,decay:function(e){var t=e.velocity,n=void 0===t?0:t,g=e.from,o=void 0===g?0:g,l=e.power,a=void 0===l?.8:l,r=e.timeConstant,I=void 0===r?350:r,i=e.restDelta,C=void 0===i?.5:i,c=e.modifyTarget,u={done:!1,value:o},s=a*n,d=o+s,A=void 0===c?d:c(d);return A!==d&&(s=A-o),{next:function(e){var t=-s*Math.exp(-e/I);return u.done=!(t>C||t<-C),u.value=u.done?A:A+t,u},flipTarget:function(){}}}};var Ca=1/60*1e3,ca="undefined"!==typeof performance?function(){return performance.now()}:function(){return Date.now()},ua="undefined"!==typeof window?function(e){return window.requestAnimationFrame(e)}:function(e){return setTimeout((function(){return e(ca())}),Ca)};var sa=!0,da=!1,Aa=!1,ma={delta:0,timestamp:0},ba=["read","update","preRender","render","postRender"],pa=ba.reduce((function(e,t){return e[t]=function(e){var t=[],n=[],g=0,o=!1,l=!1,a=new WeakSet,r={schedule:function(e){var l=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&o,r=l?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.add(e),-1===r.indexOf(e)&&(r.push(e),l&&o&&(g=t.length)),e},cancel:function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1),a.delete(e)},process:function(I){if(o)l=!0;else{o=!0;var i=[n,t];if(t=i[0],(n=i[1]).length=0,g=t.length)for(var C=0;C<g;C++){var c=t[C];c(I),a.has(c)&&(r.schedule(c),e())}o=!1,l&&(l=!1,r.process(I))}}};return r}((function(){return da=!0})),e}),{}),ha=ba.reduce((function(e,t){var n=pa[t];return e[t]=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],g=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return da||Ga(),n.schedule(e,t,g)},e}),{}),fa=ba.reduce((function(e,t){return e[t]=pa[t].cancel,e}),{}),ya=ba.reduce((function(e,t){return e[t]=function(){return pa[t].process(ma)},e}),{}),Za=function(e){return pa[e].process(ma)},va=function e(t){da=!1,ma.delta=sa?Ca:Math.max(Math.min(t-ma.timestamp,40),1),ma.timestamp=t,Aa=!0,ba.forEach(Za),Aa=!1,da&&(sa=!1,ua(e))},Ga=function(){da=!0,sa=!0,Aa||ua(va)},Ba=function(){return ma},Sa=ha;function Va(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e-t-n}var Wa=function(e){var t=function(t){var n=t.delta;return e(n)};return{start:function(){return Sa.update(t,!0)},stop:function(){return fa.update(t)}}};function Ra(e){var t,n,g,o,l,a=e.from,r=e.autoplay,I=void 0===r||r,i=e.driver,C=void 0===i?Wa:i,c=e.elapsed,u=void 0===c?0:c,s=e.repeat,d=void 0===s?0:s,A=e.repeatType,m=void 0===A?"loop":A,b=e.repeatDelay,p=void 0===b?0:b,h=e.onPlay,f=e.onStop,y=e.onComplete,Z=e.onRepeat,v=e.onUpdate,G=$o(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]),B=G.to,S=0,V=G.duration,W=!1,R=!0,k=function(e){if(Array.isArray(e.to))return Ia;if(ia[e.type])return ia[e.type];var t=new Set(Object.keys(e));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?Ia:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?rl:Ia}(G);(null===(n=(t=k).needsInterpolation)||void 0===n?void 0:n.call(t,a,B))&&(l=Ll([0,100],[a,B],{clamp:!1}),a=0,B=100);var X=k(Object.assign(Object.assign({},G),{from:a,to:B}));function J(){S++,"reverse"===m?u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?t-(e-t)+n:Va(t+-e,t,n)}(u,V,p,R=S%2===0):(u=Va(u,V,p),"mirror"===m&&X.flipTarget()),W=!1,Z&&Z()}function Y(e){if(R||(e=-e),u+=e,!W){var t=X.next(Math.max(0,u));o=t.value,l&&(o=l(o)),W=R?t.done:u<=0}null===v||void 0===v||v(o),W&&(0===S&&(null!==V&&void 0!==V||(V=u)),S<d?function(e,t,n,g){return g?e>=t+n:e<=-n}(u,V,p,R)&&J():(g.stop(),y&&y()))}return I&&(null===h||void 0===h||h(),(g=C(Y)).start()),{stop:function(){null===f||void 0===f||f(),g.stop()}}}function ka(e,t){return t?e*(1e3/t):0}var Xa=function(e){return 1e3*e},Ja=function(e,t){return 1-3*t+3*e},Ya=function(e,t){return 3*t-6*e},wa=function(e){return 3*e},Ha=function(e,t,n){return((Ja(t,n)*e+Ya(t,n))*e+wa(t))*e},Na=function(e,t,n){return 3*Ja(t,n)*e*e+2*Ya(t,n)*e+wa(t)};var Ka=.1;function Fa(e,t,n,g){if(e===t&&n===g)return jl;for(var o=new Float32Array(11),l=0;l<11;++l)o[l]=Ha(l*Ka,e,n);function a(t){for(var g=0,l=1;10!==l&&o[l]<=t;++l)g+=Ka;--l;var a=g+(t-o[l])/(o[l+1]-o[l])*Ka,r=Na(a,e,n);return r>=.001?function(e,t,n,g){for(var o=0;o<8;++o){var l=Na(t,n,g);if(0===l)return t;t-=(Ha(t,n,g)-e)/l}return t}(t,a,e,n):0===r?a:function(e,t,n,g,o){var l,a,r=0;do{(l=Ha(a=t+(n-t)/2,g,o)-e)>0?n=a:t=a}while(Math.abs(l)>1e-7&&++r<10);return a}(t,g,g+Ka,e,n)}return function(e){return 0===e||1===e?e:Ha(a(e),t,g)}}var xa={linear:jl,easeIn:Pl,easeInOut:ql,easeOut:Ol,circIn:_l,circInOut:ea,circOut:$l,backIn:ta,backInOut:ga,backOut:na,anticipate:oa,bounceIn:aa,bounceInOut:function(e){return e<.5?.5*(1-la(1-2*e)):.5*la(2*e-1)+.5},bounceOut:la},Ea=function(e){if(Array.isArray(e)){e.length;var t=Z(e,4);return Fa(t[0],t[1],t[2],t[3])}return"string"===typeof e?("Invalid easing type '".concat(e,"'"),xa[e]):e},Ma=function(e,t){return"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!Jl.test(t)||t.startsWith("url(")))},za=function(){return{type:"spring",stiffness:500,damping:25,restSpeed:10}},La=function(e){return{type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}},Ua=function(){return{type:"keyframes",ease:"linear",duration:.3}},Qa=function(e){return{type:"keyframes",duration:.8,values:e}},Ta={x:za,y:za,z:za,rotate:za,rotateX:za,rotateY:za,rotateZ:za,scaleX:La,scaleY:La,scale:La,opacity:Ua,backgroundColor:Ua,color:Ua,default:La},Da=new Set(["brightness","contrast","saturate","opacity"]);function ja(e){var t=Z(e.slice(0,-1).split("("),2),n=t[0],g=t[1];if("drop-shadow"===n)return e;var o=Z(g.match(mg)||[],1)[0];if(!o)return e;var l=g.replace(o,""),a=Da.has(n)?1:0;return o!==g&&(a*=100),n+"("+a+l+")"}var Pa=/([a-z-]*)\(.*?\)/g,Oa=Object.assign(Object.assign({},Jl),{getAnimatableNone:function(e){var t=e.match(Pa);return t?t.map(ja).join(" "):e}}),qa=$e($e({},Xg),{},{color:Bl,backgroundColor:Bl,outlineColor:Bl,fill:Bl,stroke:Bl,borderColor:Bl,borderTopColor:Bl,borderRightColor:Bl,borderBottomColor:Bl,borderLeftColor:Bl,filter:Oa,WebkitFilter:Oa}),_a=function(e){return qa[e]};function $a(e,t){var n,g=_a(e);return g!==Oa&&(g=Jl),null===(n=g.getAnimatableNone)||void 0===n?void 0:n.call(g,t)}var er=!1;function tr(e,t){var n=performance.now(),g=function g(o){var l=o.timestamp-n;l>=t&&(fa.read(g),e(l-t))};return Sa.read(g,!0),function(){return fa.read(g)}}var nr=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"],gr=["ease","times","yoyo","flip","loop"];function or(e){var t=e.ease,n=e.times,g=e.yoyo,o=e.flip,l=e.loop,a=tt(e,gr),r=$e({},a);return n&&(r.offset=n),a.duration&&(r.duration=Xa(a.duration)),a.repeatDelay&&(r.repeatDelay=Xa(a.repeatDelay)),t&&(r.ease=function(e){return Array.isArray(e)&&"number"!==typeof e[0]}(t)?t.map(Ea):Ea(t)),"tween"===a.type&&(r.type="keyframes"),(g||l||o)&&(!0,g?r.repeatType="reverse":l?r.repeatType="loop":o&&(r.repeatType="mirror"),r.repeat=l||g||o||a.repeat),"spring"!==a.type&&(r.type="keyframes"),r}function lr(e,t){var n,g;return null!==(g=null!==(n=(Cr(e,t)||{}).delay)&&void 0!==n?n:e.delay)&&void 0!==g?g:0}function ar(e,t,n){var g,o;return Array.isArray(t.to)&&void 0===e.duration&&(e.duration=.8),function(e){Array.isArray(e.to)&&null===e.to[0]&&(e.to=I(e.to),e.to[0]=e.from)}(t),function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from;var t=tt(e,nr);return!!Object.keys(t).length}(e)||(e=$e($e({},e),(g=n,$e({to:o=t.to},(go(o)?Qa:Ta[g]||Ta.default)(o))))),$e($e({},t),or(e))}function rr(e,t,n,g,o){var l=Cr(g,e)||{},a=void 0!==l.from?l.from:t.get(),r=Ma(e,n);"none"===a&&r&&"string"===typeof n?a=$a(e,n):Ir(a)&&"string"===typeof n?a=ir(n):!Array.isArray(n)&&Ir(n)&&"string"===typeof a&&(n=ir(a));var I=Ma(e,a);return"You are trying to animate ".concat(e,' from "').concat(a,'" to "').concat(n,'". ').concat(a," is not an animatable value - to enable this animation set ").concat(a," to a value animatable to ").concat(n," via the `style` property."),I&&r&&!1!==l.type?function(){var g={from:a,to:n,velocity:t.getVelocity(),onComplete:o,onUpdate:function(e){return t.set(e)}};return"inertia"===l.type||"decay"===l.type?function(e){var t,n=e.from,g=void 0===n?0:n,o=e.velocity,l=void 0===o?0:o,a=e.min,r=e.max,I=e.power,i=void 0===I?.8:I,C=e.timeConstant,c=void 0===C?750:C,u=e.bounceStiffness,s=void 0===u?500:u,d=e.bounceDamping,A=void 0===d?10:d,m=e.restDelta,b=void 0===m?1:m,p=e.modifyTarget,h=e.driver,f=e.onUpdate,y=e.onComplete,Z=e.onStop;function v(e){return void 0!==a&&e<a||void 0!==r&&e>r}function G(e){return void 0===a?r:void 0===r||Math.abs(a-e)<Math.abs(r-e)?a:r}function B(e){null===t||void 0===t||t.stop(),t=Ra(Object.assign(Object.assign({},e),{driver:h,onUpdate:function(t){var n;null===f||void 0===f||f(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:y,onStop:Z}))}function S(e){B(Object.assign({type:"spring",stiffness:s,damping:A,restDelta:b},e))}if(v(g))S({from:g,velocity:l,to:G(g)});else{var V=i*l+g;"undefined"!==typeof p&&(V=p(V));var W,R,k=G(V),X=k===a?-1:1;B({type:"decay",from:g,velocity:l,timeConstant:c,power:i,restDelta:b,modifyTarget:p,onUpdate:v(V)?function(e){W=R,R=e,l=ka(e-W,Ba().delta),(1===X&&e>k||-1===X&&e<k)&&S({from:e,to:k,velocity:l})}:void 0})}return{stop:function(){return null===t||void 0===t?void 0:t.stop()}}}($e($e({},g),l)):Ra($e($e({},ar(l,g,e)),{},{onUpdate:function(e){g.onUpdate(e),l.onUpdate&&l.onUpdate(e)},onComplete:function(){g.onComplete(),l.onComplete&&l.onComplete()}}))}:function(){var e=oo(n);return t.set(e),o(),l.onUpdate&&l.onUpdate(e),l.onComplete&&l.onComplete(),{stop:function(){}}}}function Ir(e){return 0===e||"string"===typeof e&&0===parseFloat(e)&&-1===e.indexOf(" ")}function ir(e){return"number"===typeof e?0:$a("",e)}function Cr(e,t){return e[t]||e.default||e}function cr(e,t,n){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return er&&(g={type:!1}),t.start((function(o){var l,a,r=rr(e,t,n,g,o),I=lr(g,e),i=function(){return l=r()};return I?a=tr(i,Xa(I)):i(),function(){a&&a(),l&&l.stop()}}))}var ur=function(e){return/^0[^.\s]+$/.test(e)};function sr(e,t){-1===e.indexOf(t)&&e.push(t)}function dr(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var Ar=function(){function e(){i(this,e),this.subscriptions=[]}return c(e,[{key:"add",value:function(e){var t=this;return sr(this.subscriptions,e),function(){return dr(t.subscriptions,e)}}},{key:"notify",value:function(e,t,n){var g=this.subscriptions.length;if(g)if(1===g)this.subscriptions[0](e,t,n);else for(var o=0;o<g;o++){var l=this.subscriptions[o];l&&l(e,t,n)}}},{key:"getSize",value:function(){return this.subscriptions.length}},{key:"clear",value:function(){this.subscriptions.length=0}}]),e}(),mr=function(){function e(t){var n,g=this;i(this,e),this.version="7.6.6",this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new Ar,this.velocityUpdateSubscribers=new Ar,this.renderSubscribers=new Ar,this.canTrackVelocity=!1,this.updateAndNotify=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];g.prev=g.current,g.current=e;var n=Ba(),o=n.delta,l=n.timestamp;g.lastUpdated!==l&&(g.timeDelta=o,g.lastUpdated=l,Sa.postRender(g.scheduleVelocityCheck)),g.prev!==g.current&&g.updateSubscribers.notify(g.current),g.velocityUpdateSubscribers.getSize()&&g.velocityUpdateSubscribers.notify(g.getVelocity()),t&&g.renderSubscribers.notify(g.current)},this.scheduleVelocityCheck=function(){return Sa.postRender(g.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==g.lastUpdated&&(g.prev=g.current,g.velocityUpdateSubscribers.notify(g.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=(n=this.current,!isNaN(parseFloat(n)))}return c(e,[{key:"onChange",value:function(e){return this.updateSubscribers.add(e)}},{key:"clearListeners",value:function(){this.updateSubscribers.clear()}},{key:"onRenderRequest",value:function(e){return e(this.get()),this.renderSubscribers.add(e)}},{key:"attach",value:function(e){this.passiveEffect=e}},{key:"set",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}},{key:"get",value:function(){return this.current}},{key:"getPrevious",value:function(){return this.prev}},{key:"getVelocity",value:function(){return this.canTrackVelocity?ka(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}},{key:"start",value:function(e){var t=this;return this.stop(),new Promise((function(n){t.hasAnimated=!0,t.stopAnimation=e(n)})).then((function(){return t.clearAnimation()}))}},{key:"stop",value:function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()}},{key:"isAnimating",value:function(){return!!this.stopAnimation}},{key:"clearAnimation",value:function(){this.stopAnimation=null}},{key:"destroy",value:function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()}}]),e}();function br(e){return new mr(e)}var pr=function(e){return function(t){return t.test(e)}},hr=[Vg,vg,Zg,yg,Bg,Gg,{test:function(e){return"auto"===e},parse:function(e){return e}}],fr=function(e){return hr.find(pr(e))},yr=[].concat(I(hr),[Bl,Jl]),Zr=function(e){return yr.find(pr(e))};function vr(e,t,n){var g=e.getProps();return no(g,t,void 0!==n?n:g.custom,function(e){var t={};return e.values.forEach((function(e,n){return t[n]=e.get()})),t}(e),function(e){var t={};return e.values.forEach((function(e,n){return t[n]=e.getVelocity()})),t}(e))}var Gr=["transitionEnd","transition"];function Br(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,br(n))}function Sr(e,t){var n=vr(e,t),g=n?e.makeTargetAnimatable(n,!1):{},o=g.transitionEnd,l=void 0===o?{}:o,a=(g.transition,tt(g,Gr));for(var r in a=$e($e({},a),l)){Br(e,r,oo(a[r]))}}function Vr(e,t){if(t)return(t[e]||t.default||t).from}function Wr(e){return Boolean(Ig(e)&&e.add)}var Rr=["transition","transitionEnd"];function kr(e,t){var n,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=vr(e,t,g.custom),l=o||{},a=l.transition,r=void 0===a?e.getDefaultTransition()||{}:a;g.transitionOverride&&(r=g.transitionOverride);var I=o?function(){return Xr(e,o,g)}:function(){return Promise.resolve()},i=(null===(n=e.variantChildren)||void 0===n?void 0:n.size)?function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=r,l=o.delayChildren,a=void 0===l?0:l,I=o.staggerChildren,i=o.staggerDirection;return Jr(e,t,a+n,I,i,g)}:function(){return Promise.resolve()},C=r,c=C.when;if(c){var u="beforeChildren"===c?[I,i]:[i,I],s=Z(u,2),d=s[0],A=s[1];return d().then(A)}return Promise.all([I(),i(g.delay)])}function Xr(e,t){var n,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=g.delay,l=void 0===o?0:o,a=g.transitionOverride,r=g.type,I=e.makeTargetAnimatable(t),i=I.transition,C=void 0===i?e.getDefaultTransition():i,c=I.transitionEnd,u=tt(I,Rr),s=e.getValue("willChange");a&&(C=a);var d=[],A=r&&(null===(n=e.animationState)||void 0===n?void 0:n.getState()[r]),m=function(t){var n=e.getValue(t),g=u[t];if(!n||void 0===g||A&&wr(A,t))return"continue";var o=$e({delay:l},C);e.shouldReduceMotion&&ag.has(t)&&(o=$e($e({},o),{},{type:!1,delay:0}));var a=cr(t,n,g,o);Wr(s)&&(s.add(t),a=a.then((function(){return s.remove(t)}))),d.push(a)};for(var b in u)m(b);return Promise.all(d).then((function(){c&&Sr(e,c)}))}function Jr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5?arguments[5]:void 0,a=[],r=(e.variantChildren.size-1)*g,I=1===o?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e*g}:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return r-e*g};return Array.from(e.variantChildren).sort(Yr).forEach((function(e,g){a.push(kr(e,t,$e($e({},l),{},{delay:n+I(g)})).then((function(){return e.notify("AnimationComplete",t)})))})),Promise.all(a)}function Yr(e,t){return e.sortNodePosition(t)}function wr(e,t){var n=e.protectedKeys,g=e.needsAnimating,o=n.hasOwnProperty(t)&&!0!==g[t];return g[t]=!1,o}var Hr=["transition","transitionEnd"],Nr=[io.Animate,io.InView,io.Focus,io.Hover,io.Tap,io.Drag,io.Exit],Kr=[].concat(Nr).reverse(),Fr=Nr.length;function xr(e){return function(t){return Promise.all(t.map((function(t){var n=t.animation,g=t.options;return function(e,t){var n,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){var o=t.map((function(t){return kr(e,t,g)}));n=Promise.all(o)}else if("string"===typeof t)n=kr(e,t,g);else{var l="function"===typeof t?vr(e,t,g.custom):t;n=Xr(e,l,g)}return n.then((function(){return e.notify("AnimationComplete",t)}))}(e,n,g)})))}}function Er(e){var t=xr(e),n=function(){var e;return Ne(e={},io.Animate,Mr(!0)),Ne(e,io.InView,Mr()),Ne(e,io.Hover,Mr()),Ne(e,io.Tap,Mr()),Ne(e,io.Drag,Mr()),Ne(e,io.Focus,Mr()),Ne(e,io.Exit,Mr()),e}(),g=!0,o=function(t,n){var g=vr(e,n);if(g){g.transition;var o=g.transitionEnd,l=tt(g,Hr);t=$e($e($e({},t),l),o)}return t};function l(l,a){for(var r,i=e.getProps(),C=e.getVariantContext(!0)||{},c=[],u=new Set,s={},d=1/0,A=function(t){var A=Kr[t],m=n[A],b=null!==(r=i[A])&&void 0!==r?r:C[A],p=Kn(b),h=A===a?m.isActive:null;!1===h&&(d=t);var f=b===C[A]&&b!==i[A]&&p;if(f&&g&&e.manuallyAnimateOnMount&&(f=!1),m.protectedKeys=$e({},s),!m.isActive&&null===h||!b&&!m.prevProp||Fn(b)||"boolean"===typeof b)return"continue";var y=function(e,t){if("string"===typeof t)return t!==e;if(Array.isArray(t))return!_o(t,e);return!1}(m.prevProp,b),Z=y||A===a&&m.isActive&&!f&&p||t>d&&p,v=Array.isArray(b)?b:[b],G=v.reduce(o,{});!1===h&&(G={});var B=m.prevResolvedValues,S=void 0===B?{}:B,V=$e($e({},S),G),W=function(e){Z=!0,u.delete(e),m.needsAnimating[e]=!0};for(var R in V){var k=G[R],X=S[R];s.hasOwnProperty(R)||(k!==X?go(k)&&go(X)?!_o(k,X)||y?W(R):m.protectedKeys[R]=!0:void 0!==k?W(R):u.add(R):void 0!==k&&u.has(R)?W(R):m.protectedKeys[R]=!0)}m.prevProp=b,m.prevResolvedValues=G,m.isActive&&(s=$e($e({},s),G)),g&&e.blockInitialAnimation&&(Z=!1),Z&&!f&&c.push.apply(c,I(v.map((function(e){return{animation:e,options:$e({type:A},l)}}))))},m=0;m<Fr;m++)A(m);if(u.size){var b={};u.forEach((function(t){var n=e.getBaseTarget(t);void 0!==n&&(b[t]=n)})),c.push({animation:b})}var p=Boolean(c.length);return g&&!1===i.initial&&!e.manuallyAnimateOnMount&&(p=!1),g=!1,p?t(c):Promise.resolve()}return{animateChanges:l,setActive:function(t,g,o){var a;if(n[t].isActive===g)return Promise.resolve();null===(a=e.variantChildren)||void 0===a||a.forEach((function(e){var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,g)})),n[t].isActive=g;var r=l(o,t);for(var I in n)n[I].protectedKeys={};return r},setAnimateFunction:function(n){t=n(e)},getState:function(){return n}}}function Mr(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var zr={animation:Po((function(e){var n=e.visualElement,g=e.animate;n.animationState||(n.animationState=Er(n)),Fn(g)&&(0,t.useEffect)((function(){return g.subscribe(n)}),[g])})),exit:Po((function(e){var n=e.custom,g=e.visualElement,o=Z(qo(),2),l=o[0],a=o[1],r=(0,t.useContext)(Xn);(0,t.useEffect)((function(){g.isPresent=l;var e=g.animationState&&g.animationState.setActive(io.Exit,!l,{custom:r&&r.custom||n});e&&!l&&e.then(a)}),[l])}))},Lr=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},Ur=function(e){return Lr(e)&&e.hasOwnProperty("z")},Qr=function(e,t){return Math.abs(e-t)};function Tr(e,t){if(Yl(e)&&Yl(t))return Qr(e,t);if(Lr(e)&&Lr(t)){var n=Qr(e.x,t.x),g=Qr(e.y,t.y),o=Ur(e)&&Ur(t)?Qr(e.z,t.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(g,2)+Math.pow(o,2))}}var Dr=function(){function e(t,n){var g=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=o.transformPagePoint;if(i(this,e),this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(g.lastMoveEvent&&g.lastMoveEventInfo){var e=Or(g.lastMoveEventInfo,g.history),t=null!==g.startEvent,n=Tr(e.offset,{x:0,y:0})>=3;if(t||n){var o=e.point,l=Ba().timestamp;g.history.push($e($e({},o),{},{timestamp:l}));var a=g.handlers,r=a.onStart,I=a.onMove;t||(r&&r(g.lastMoveEvent,e),g.startEvent=g.lastMoveEvent),I&&I(g.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){g.lastMoveEvent=e,g.lastMoveEventInfo=jr(t,g.transformPagePoint),Ao(e)&&0===e.buttons?g.handlePointerUp(e,t):Sa.update(g.updatePoint,!0)},this.handlePointerUp=function(e,t){g.end();var n=g.handlers,o=n.onEnd,l=n.onSessionEnd,a=Or(jr(t,g.transformPagePoint),g.history);g.startEvent&&o&&o(e,a),l&&l(e,a)},!(mo(t)&&t.touches.length>1)){this.handlers=n,this.transformPagePoint=l;var a=yo(t),r=jr(a,this.transformPagePoint),I=r.point,C=Ba(),c=C.timestamp;this.history=[$e($e({},I),{},{timestamp:c})];var u=n.onSessionStart;u&&u(t,Or(r,this.history)),this.removeListeners=Ko(So(window,"pointermove",this.handlePointerMove),So(window,"pointerup",this.handlePointerUp),So(window,"pointercancel",this.handlePointerUp))}}return c(e,[{key:"updateHandlers",value:function(e){this.handlers=e}},{key:"end",value:function(){this.removeListeners&&this.removeListeners(),fa.update(this.updatePoint)}}]),e}();function jr(e,t){return t?{point:t(e.point)}:e}function Pr(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Or(e,t){var n=e.point;return{point:n,delta:Pr(n,_r(t)),offset:Pr(n,qr(t)),velocity:$r(t,.1)}}function qr(e){return e[0]}function _r(e){return e[e.length-1]}function $r(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,g=null,o=_r(e);n>=0&&(g=e[n],!(o.timestamp-g.timestamp>Xa(t)));)n--;if(!g)return{x:0,y:0};var l=(o.timestamp-g.timestamp)/1e3;if(0===l)return{x:0,y:0};var a={x:(o.x-g.x)/l,y:(o.y-g.y)/l};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function eI(e){return e.max-e.min}function tI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Tr(e,t)<n}function nI(e,t,n){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=g,e.originPoint=Cl(t.min,t.max,e.origin),e.scale=eI(n)/eI(t),(tI(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Cl(n.min,n.max,e.origin)-e.originPoint,(tI(e.translate)||isNaN(e.translate))&&(e.translate=0)}function gI(e,t,n,g){nI(e.x,t.x,n.x,null===g||void 0===g?void 0:g.originX),nI(e.y,t.y,n.y,null===g||void 0===g?void 0:g.originY)}function oI(e,t,n){e.min=n.min+t.min,e.max=e.min+eI(t)}function lI(e,t,n){e.min=t.min-n.min,e.max=e.min+eI(t)}function aI(e,t,n){lI(e.x,t.x,n.x),lI(e.y,t.y,n.y)}function rI(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function II(e,t){var n=t.min-e.min,g=t.max-e.max;if(t.max-t.min<e.max-e.min){var o=[g,n];n=o[0],g=o[1]}return{min:n,max:g}}var iI=.35;function CI(e,t,n){return{min:cI(e,t),max:cI(e,n)}}function cI(e,t){var n;return"number"===typeof e?e:null!==(n=e[t])&&void 0!==n?n:0}function uI(e){return[e("x"),e("y")]}function sI(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}function dI(e){return void 0===e||1===e}function AI(e){var t=e.scale,n=e.scaleX,g=e.scaleY;return!dI(t)||!dI(n)||!dI(g)}function mI(e){return AI(e)||bI(e)||e.z||e.rotate||e.rotateX||e.rotateY}function bI(e){return pI(e.x)||pI(e.y)}function pI(e){return e&&"0%"!==e}function hI(e,t,n){return n+t*(e-n)}function fI(e,t,n,g,o){return void 0!==o&&(e=hI(e,o,g)),hI(e,n,g)+t}function yI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,g=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;e.min=fI(e.min,t,n,g,o),e.max=fI(e.max,t,n,g,o)}function ZI(e,t){var n=t.x,g=t.y;yI(e.x,n.translate,n.scale,n.originPoint),yI(e.y,g.translate,g.scale,g.originPoint)}function vI(e,t){e.min=e.min+t,e.max=e.max+t}function GI(e,t,n){var g=Z(n,3),o=g[0],l=g[1],a=g[2],r=void 0!==t[a]?t[a]:.5,I=Cl(e.min,e.max,r);yI(e,t[o],t[l],I,t.scale)}var BI=["x","scaleX","originX"],SI=["y","scaleY","originY"];function VI(e,t){GI(e.x,t,BI),GI(e.y,t,SI)}function WI(e,t){return sI(function(e,t){if(!t)return e;var n=t({x:e.left,y:e.top}),g=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:g.y,right:g.x}}(e.getBoundingClientRect(),t))}var RI=new WeakMap,kI=function(){function e(t){i(this,e),this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=t}return c(e,[{key:"start",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},g=n.snapToCursor,o=void 0!==g&&g;if(!1!==this.visualElement.isPresent){var l=function(e){t.stopAnimation(),o&&t.snapToCursor(yo(e,"page").point)},a=function(e,n){var g,o=t.getProps(),l=o.drag,a=o.dragPropagation,r=o.onDragStart;(!l||a||(t.openGlobalLock&&t.openGlobalLock(),t.openGlobalLock=Xo(l),t.openGlobalLock))&&(t.isDragging=!0,t.currentDirection=null,t.resolveConstraints(),t.visualElement.projection&&(t.visualElement.projection.isAnimationBlocked=!0,t.visualElement.projection.target=void 0),uI((function(e){var n,g,o=t.getAxisMotionValue(e).get()||0;if(Zg.test(o)){var l=null===(g=null===(n=t.visualElement.projection)||void 0===n?void 0:n.layout)||void 0===g?void 0:g.layoutBox[e];if(l)o=eI(l)*(parseFloat(o)/100)}t.originPoint[e]=o})),null===r||void 0===r||r(e,n),null===(g=t.visualElement.animationState)||void 0===g||g.setActive(io.Drag,!0))},r=function(e,n){var g=t.getProps(),o=g.dragPropagation,l=g.dragDirectionLock,a=g.onDirectionLock,r=g.onDrag;if(o||t.openGlobalLock){var I=n.offset;if(l&&null===t.currentDirection)return t.currentDirection=JI(I),void(null!==t.currentDirection&&(null===a||void 0===a||a(t.currentDirection)));t.updateAxis("x",n.point,I),t.updateAxis("y",n.point,I),t.visualElement.render(),null===r||void 0===r||r(e,n)}},I=function(e,n){return t.stop(e,n)};this.panSession=new Dr(e,{onSessionStart:l,onStart:a,onMove:r,onSessionEnd:I},{transformPagePoint:this.visualElement.getTransformPagePoint()})}}},{key:"stop",value:function(e,t){var n=this.isDragging;if(this.cancel(),n){var g=t.velocity;this.startAnimation(g);var o=this.getProps().onDragEnd;null===o||void 0===o||o(e,t)}}},{key:"cancel",value:function(){var e,t;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),null===(e=this.panSession)||void 0===e||e.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(t=this.visualElement.animationState)||void 0===t||t.setActive(io.Drag,!1)}},{key:"updateAxis",value:function(e,t,n){var g=this.getProps().drag;if(n&&XI(e,g,this.currentDirection)){var o=this.getAxisMotionValue(e),l=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(l=function(e,t,n){var g=t.min,o=t.max;return void 0!==g&&e<g?e=n?Cl(g,e,n.min):Math.max(e,g):void 0!==o&&e>o&&(e=n?Cl(o,e,n.max):Math.min(e,o)),e}(l,this.constraints[e],this.elastic[e])),o.set(l)}}},{key:"resolveConstraints",value:function(){var e=this,t=this.getProps(),n=t.dragConstraints,g=t.dragElastic,o=(this.visualElement.projection||{}).layout,l=this.constraints;n&&Nn(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!n||!o)&&function(e,t){var n=t.top,g=t.left,o=t.bottom,l=t.right;return{x:rI(e.x,g,l),y:rI(e.y,n,o)}}(o.layoutBox,n),this.elastic=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iI;return!1===e?e=0:!0===e&&(e=iI),{x:CI(e,"left","right"),y:CI(e,"top","bottom")}}(g),l!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&uI((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(o.layoutBox[t],e.constraints[t]))}))}},{key:"resolveRefConstraints",value:function(){var e=this.getProps(),t=e.dragConstraints,n=e.onMeasureDragConstraints;if(!t||!Nn(t))return!1;var g=t.current,o=this.visualElement.projection;if(!o||!o.layout)return!1;var l=function(e,t,n){var g=WI(e,n),o=t.scroll;return o&&(vI(g.x,o.x),vI(g.y,o.y)),g}(g,o.root,this.visualElement.getTransformPagePoint()),a=function(e,t){return{x:II(e.x,t.x),y:II(e.y,t.y)}}(o.layout.layoutBox,l);if(n){var r=n(function(e){var t=e.x,n=e.y;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(a));this.hasMutatedConstraints=!!r,r&&(a=sI(r))}return a}},{key:"startAnimation",value:function(e){var t=this,n=this.getProps(),g=n.drag,o=n.dragMomentum,l=n.dragElastic,a=n.dragTransition,r=n.dragSnapToOrigin,I=n.onDragTransitionEnd,i=this.constraints||{},C=uI((function(n){var I;if(XI(n,g,t.currentDirection)){var C=null!==(I=null===i||void 0===i?void 0:i[n])&&void 0!==I?I:{};r&&(C={min:0,max:0});var c=l?200:1e6,u=l?40:1e7,s=$e($e({type:"inertia",velocity:o?e[n]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10},a),C);return t.startAxisValueAnimation(n,s)}}));return Promise.all(C).then(I)}},{key:"startAxisValueAnimation",value:function(e,t){return cr(e,this.getAxisMotionValue(e),0,t)}},{key:"stopAnimation",value:function(){var e=this;uI((function(t){return e.getAxisMotionValue(t).stop()}))}},{key:"getAxisMotionValue",value:function(e){var t,n,g="_drag"+e.toUpperCase(),o=this.visualElement.getProps()[g];return o||this.visualElement.getValue(e,null!==(n=null===(t=this.visualElement.getProps().initial)||void 0===t?void 0:t[e])&&void 0!==n?n:0)}},{key:"snapToCursor",value:function(e){var t=this;uI((function(n){if(XI(n,t.getProps().drag,t.currentDirection)){var g=t.visualElement.projection,o=t.getAxisMotionValue(n);if(g&&g.layout){var l=g.layout.layoutBox[n],a=l.min,r=l.max;o.set(e[n]-Cl(a,r,.5))}}}))}},{key:"scalePositionWithinConstraints",value:function(){var e,t=this;if(this.visualElement.current){var n=this.getProps(),g=n.drag,o=n.dragConstraints,l=this.visualElement.projection;if(Nn(o)&&l&&this.constraints){this.stopAnimation();var a={x:0,y:0};uI((function(e){var n=t.getAxisMotionValue(e);if(n){var g=n.get();a[e]=function(e,t){var n=.5,g=eI(e),o=eI(t);return o>g?n=il(t.min,t.max-g,e.min):g>o&&(n=il(e.min,e.max-o,t.min)),el(0,1,n)}({min:g,max:g},t.constraints[e])}}));var r=this.visualElement.getProps().transformTemplate;this.visualElement.current.style.transform=r?r({},""):"none",null===(e=l.root)||void 0===e||e.updateScroll(),l.updateLayout(),this.resolveConstraints(),uI((function(e){if(XI(e,g,null)){var n=t.getAxisMotionValue(e),o=t.constraints[e],l=o.min,r=o.max;n.set(Cl(l,r,a[e]))}}))}}}},{key:"addListeners",value:function(){var e,t=this;if(this.visualElement.current){RI.set(this.visualElement,this);var n=So(this.visualElement.current,"pointerdown",(function(e){var n=t.getProps(),g=n.drag,o=n.dragListener;g&&(void 0===o||o)&&t.start(e)})),g=function(){Nn(t.getProps().dragConstraints)&&(t.constraints=t.resolveRefConstraints())},o=this.visualElement.projection,l=o.addEventListener("measure",g);o&&!o.layout&&(null===(e=o.root)||void 0===e||e.updateScroll(),o.updateLayout()),g();var a=uo(window,"resize",(function(){return t.scalePositionWithinConstraints()})),r=o.addEventListener("didUpdate",(function(e){var n=e.delta,g=e.hasLayoutChanged;t.isDragging&&g&&(uI((function(e){var g=t.getAxisMotionValue(e);g&&(t.originPoint[e]+=n[e].translate,g.set(g.get()+n[e].translate))})),t.visualElement.render())}));return function(){a(),n(),l(),null===r||void 0===r||r()}}}},{key:"getProps",value:function(){var e=this.visualElement.getProps(),t=e.drag,n=void 0!==t&&t,g=e.dragDirectionLock,o=void 0!==g&&g,l=e.dragPropagation,a=void 0!==l&&l,r=e.dragConstraints,I=void 0!==r&&r,i=e.dragElastic,C=void 0===i?iI:i,c=e.dragMomentum,u=void 0===c||c;return $e($e({},e),{},{drag:n,dragDirectionLock:o,dragPropagation:a,dragConstraints:I,dragElastic:C,dragMomentum:u})}}]),e}();function XI(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}function JI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}var YI={pan:Po((function(e){var n=e.onPan,g=e.onPanStart,o=e.onPanEnd,l=e.onPanSessionStart,a=e.visualElement,r=n||g||o||l,I=(0,t.useRef)(null),i=(0,t.useContext)(Rn).transformPagePoint,C={onSessionStart:l,onStart:g,onMove:n,onEnd:function(e,t){I.current=null,o&&o(e,t)}};(0,t.useEffect)((function(){null!==I.current&&I.current.updateHandlers(C)})),Vo(a,"pointerdown",r&&function(e){I.current=new Dr(e,C,{transformPagePoint:i})}),Ho((function(){return I.current&&I.current.end()}))})),drag:Po((function(e){var n=e.dragControls,g=e.visualElement,o=Tn((function(){return new kI(g)}));(0,t.useEffect)((function(){return n&&n.subscribe(o)}),[o,n]),(0,t.useEffect)((function(){return o.addListeners()}),[o])}))};function wI(e){return"string"===typeof e&&e.startsWith("var(--")}var HI=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function NI(e){var t=HI.exec(e);if(!t)return[,];var n=Z(t,3);return[n[1],n[2]]}function KI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');var g=NI(e),o=Z(g,2),l=o[0],a=o[1];if(l){var r=window.getComputedStyle(t).getPropertyValue(l);return r?r.trim():wI(a)?KI(a,t,n+1):a}}function FI(e,t,n){var g=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t)),o=e.current;if(!(o instanceof Element))return{target:g,transitionEnd:n};for(var l in n&&(n=$e({},n)),e.values.forEach((function(e){var t=e.get();if(wI(t)){var n=KI(t,o);n&&e.set(n)}})),g){var a=g[l];if(wI(a)){var r=KI(a,o);r&&(g[l]=r,n&&void 0===n[l]&&(n[l]=a))}}return{target:g,transitionEnd:n}}var xI,EI=new Set(["width","height","top","left","right","bottom","x","y"]),MI=function(e){return EI.has(e)},zI=function(e,t){e.set(t,!1),e.set(t)},LI=function(e){return e===Vg||e===vg};!function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(xI||(xI={}));var UI=function(e,t){return parseFloat(e.split(", ")[t])},QI=function(e,t){return function(n,g){var o=g.transform;if("none"===o||!o)return 0;var l=o.match(/^matrix3d\((.+)\)$/);if(l)return UI(l[1],t);var a=o.match(/^matrix\((.+)\)$/);return a?UI(a[1],e):0}},TI=new Set(["x","y","z"]),DI=lg.filter((function(e){return!TI.has(e)}));function jI(e){var t=[];return DI.forEach((function(n){var g=e.getValue(n);void 0!==g&&(t.push([n,g.get()]),g.set(n.startsWith("scale")?1:0))})),t.length&&e.render(),t}var PI={width:function(e,t){var n=e.x,g=t.paddingLeft,o=void 0===g?"0":g,l=t.paddingRight,a=void 0===l?"0":l;return n.max-n.min-parseFloat(o)-parseFloat(a)},height:function(e,t){var n=e.y,g=t.paddingTop,o=void 0===g?"0":g,l=t.paddingBottom,a=void 0===l?"0":l;return n.max-n.min-parseFloat(o)-parseFloat(a)},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.y,g=t.top;return parseFloat(g)+(n.max-n.min)},right:function(e,t){var n=e.x,g=t.left;return parseFloat(g)+(n.max-n.min)},x:QI(4,13),y:QI(5,14)},OI=function(e,t,n){var g=t.measureViewportBox(),o=t.current,l=getComputedStyle(o),a=l.display,r={};"none"===a&&t.setStaticValue("display",e.display||"block"),n.forEach((function(e){r[e]=PI[e](g,l)})),t.render();var I=t.measureViewportBox();return n.forEach((function(n){var g=t.getValue(n);zI(g,r[n]),e[n]=PI[n](I,l)})),e};function qI(e,t,n,g){return function(e){return Object.keys(e).some(MI)}(t)?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=$e({},t),g=$e({},g);var o=Object.keys(t).filter(MI),l=[],a=!1,r=[];if(o.forEach((function(o){var I=e.getValue(o);if(e.hasValue(o)){var i,C=n[o],c=fr(C),u=t[o];if(go(u)){var s=u.length,d=null===u[0]?1:0;C=u[d],c=fr(C);for(var A=d;A<s;A++)i?fr(u[A]):(i=fr(u[A]))===c||LI(c)&&LI(i)}else i=fr(u);if(c!==i)if(LI(c)&&LI(i)){var m=I.get();"string"===typeof m&&I.set(parseFloat(m)),"string"===typeof u?t[o]=parseFloat(u):Array.isArray(u)&&i===vg&&(t[o]=u.map(parseFloat))}else(null===c||void 0===c?void 0:c.transform)&&(null===i||void 0===i?void 0:i.transform)&&(0===C||0===u)?0===C?I.set(i.transform(C)):t[o]=c.transform(u):(a||(l=jI(e),a=!0),r.push(o),g[o]=void 0!==g[o]?g[o]:t[o],zI(I,u))}})),r.length){var I=r.indexOf("height")>=0?window.pageYOffset:null,i=OI(t,e,r);return l.length&&l.forEach((function(t){var n=Z(t,2),g=n[0],o=n[1];e.getValue(g).set(o)})),e.render(),Jn&&null!==I&&window.scrollTo({top:I}),{target:i,transitionEnd:g}}return{target:t,transitionEnd:g}}(e,t,n,g):{target:t,transitionEnd:g}}var _I={current:null},$I={current:!1};var ei=["willChange"],ti=Object.keys(Qn),ni=ti.length,gi=["AnimationStart","AnimationComplete","Update","Unmount","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],oi=function(){function e(t){var n=this,g=t.parent,o=t.props,l=t.reducedMotionConfig,a=t.visualState,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.isPresent=!0,this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=function(){return n.notify("Update",n.latestValues)},this.render=function(){n.current&&(n.triggerBuild(),n.renderInstance(n.current,n.renderState,n.props.style,n.projection))},this.scheduleRender=function(){return Sa.render(n.render,!1,!0)};var I=a.latestValues,C=a.renderState;this.latestValues=I,this.baseTarget=$e({},I),this.initialValues=o.initial?$e({},I):{},this.renderState=C,this.parent=g,this.props=o,this.depth=g?g.depth+1:0,this.reducedMotionConfig=l,this.options=r,this.isControllingVariants=En(o),this.isVariantNode=Mn(o),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(g&&g.current);var c=this.scrapeMotionValuesFromProps(o),u=c.willChange,s=tt(c,ei);for(var d in s){var A=s[d];void 0!==I[d]&&Ig(A)&&(A.set(I[d],!1),Wr(u)&&u.add(d))}if(o.values)for(var m in o.values){var b=o.values[m];void 0!==I[m]&&Ig(b)&&b.set(I[m])}}return c(e,[{key:"scrapeMotionValuesFromProps",value:function(e){return{}}},{key:"mount",value:function(e){var t,n=this;this.current=e,this.projection&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=null===(t=this.parent)||void 0===t?void 0:t.addVariantChild(this)),this.values.forEach((function(e,t){return n.bindToMotionValue(t,e)})),$I.current||function(){if($I.current=!0,Jn)if(window.matchMedia){var e=window.matchMedia("(prefers-reduced-motion)"),t=function(){return _I.current=e.matches};e.addListener(t),t()}else _I.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||_I.current),this.parent&&this.parent.children.add(this),this.setProps(this.props)}},{key:"unmount",value:function(){var e,t,n;for(var g in null===(e=this.projection)||void 0===e||e.unmount(),fa.update(this.notifyUpdate),fa.render(this.render),this.valueSubscriptions.forEach((function(e){return e()})),null===(t=this.removeFromVariantTree)||void 0===t||t.call(this),null===(n=this.parent)||void 0===n||n.children.delete(this),this.events)this.events[g].clear();this.current=null}},{key:"bindToMotionValue",value:function(e,t){var n=this,g=t.onChange((function(t){n.latestValues[e]=t,n.props.onUpdate&&Sa.update(n.notifyUpdate,!1,!0)})),o=t.onRenderRequest(this.scheduleRender);this.valueSubscriptions.set(e,(function(){g(),o()}))}},{key:"sortNodePosition",value:function(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}},{key:"loadFeatures",value:function(e,n,g,o,l,a){var r=this,I=[];for(var i=0;i<ni;i++){var C=ti[i],c=Qn[C],u=c.isEnabled,s=c.Component;u(e)&&s&&I.push((0,t.createElement)(s,$e($e({key:C},e),{},{visualElement:this})))}if(!this.projection&&l){this.projection=new l(o,this.latestValues,this.parent&&this.parent.projection);var d=e.layoutId,A=e.layout,m=e.drag,b=e.dragConstraints,p=e.layoutScroll;this.projection.setOptions({layoutId:d,layout:A,alwaysMeasureLayout:Boolean(m)||b&&Nn(b),visualElement:this,scheduleRender:function(){return r.scheduleRender()},animationType:"string"===typeof A?A:"both",initialPromotionConfig:a,layoutScroll:p})}return I}},{key:"triggerBuild",value:function(){this.build(this.renderState,this.latestValues,this.options,this.props)}},{key:"measureViewportBox",value:function(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}},{key:"getStaticValue",value:function(e){return this.latestValues[e]}},{key:"setStaticValue",value:function(e,t){this.latestValues[e]=t}},{key:"makeTargetAnimatable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}},{key:"setProps",value:function(e){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.props=e;for(var t=0;t<gi.length;t++){var n=gi[t];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);var g=e["on"+n];g&&(this.propEventSubscriptions[n]=this.on(n,g))}this.prevMotionValues=function(e,t,n){var g=t.willChange;for(var o in t){var l=t[o],a=n[o];if(Ig(l))e.addValue(o,l),Wr(g)&&g.add(o);else if(Ig(a))e.addValue(o,br(l)),Wr(g)&&g.remove(o);else if(a!==l)if(e.hasValue(o)){var r=e.getValue(o);!r.hasAnimated&&r.set(l)}else{var I=e.getStaticValue(o);e.addValue(o,br(void 0!==I?I:l))}}for(var i in n)void 0===t[i]&&e.removeValue(i);return t}(this,this.scrapeMotionValuesFromProps(e),this.prevMotionValues)}},{key:"getProps",value:function(){return this.props}},{key:"getVariant",value:function(e){var t;return null===(t=this.props.variants)||void 0===t?void 0:t[e]}},{key:"getDefaultTransition",value:function(){return this.props.transition}},{key:"getTransformPagePoint",value:function(){return this.props.transformPagePoint}},{key:"getClosestVariantNode",value:function(){var e;return this.isVariantNode?this:null===(e=this.parent)||void 0===e?void 0:e.getClosestVariantNode()}},{key:"getVariantContext",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n)return null===(e=this.parent)||void 0===e?void 0:e.getVariantContext();if(!this.isControllingVariants){var g=(null===(t=this.parent)||void 0===t?void 0:t.getVariantContext())||{};return void 0!==this.props.initial&&(g.initial=this.props.initial),g}for(var o={},l=0;l<ai;l++){var a=li[l],r=this.props[a];(Kn(r)||!1===r)&&(o[a]=r)}return o}},{key:"addVariantChild",value:function(e){var t,n=this.getClosestVariantNode();if(n)return null===(t=n.variantChildren)||void 0===t||t.add(e),function(){return n.variantChildren.delete(e)}}},{key:"addValue",value:function(e,t){this.hasValue(e)&&this.removeValue(e),this.values.set(e,t),this.latestValues[e]=t.get(),this.bindToMotionValue(e,t)}},{key:"removeValue",value:function(e){var t;this.values.delete(e),null===(t=this.valueSubscriptions.get(e))||void 0===t||t(),this.valueSubscriptions.delete(e),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}},{key:"hasValue",value:function(e){return this.values.has(e)}},{key:"getValue",value:function(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];var n=this.values.get(e);return void 0===n&&void 0!==t&&(n=br(t),this.addValue(e,n)),n}},{key:"readValue",value:function(e){return void 0===this.latestValues[e]&&this.current?this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}},{key:"setBaseTarget",value:function(e,t){this.baseTarget[e]=t}},{key:"getBaseTarget",value:function(e){var t,n=this.props.initial,g="string"===typeof n||"object"===typeof n?null===(t=no(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==g)return g;var o=this.getBaseTargetFromProps(this.props,e);return void 0===o||Ig(o)?void 0!==this.initialValues[e]&&void 0===g?void 0:this.baseTarget[e]:o}},{key:"on",value:function(e,t){return this.events[e]||(this.events[e]=new Ar),this.events[e].add(t)}},{key:"notify",value:function(e){for(var t,n,g=arguments.length,o=new Array(g>1?g-1:0),l=1;l<g;l++)o[l-1]=arguments[l];null===(n=this.events[e])||void 0===n||(t=n).notify.apply(t,o)}}]),e}(),li=["initial"].concat(I(Nr)),ai=li.length,ri=["transition","transitionEnd"],Ii=function(e){s(n,e);var t=h(n);function n(){return i(this,n),t.apply(this,arguments)}return c(n,[{key:"sortInstanceNodePosition",value:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1}},{key:"getBaseTargetFromProps",value:function(e,t){var n;return null===(n=e.style)||void 0===n?void 0:n[t]}},{key:"removeValueFromRenderState",value:function(e,t){var n=t.vars,g=t.style;delete n[e],delete g[e]}},{key:"makeTargetAnimatableFromInstance",value:function(e,t,n){var g=e.transition,o=e.transitionEnd,l=tt(e,ri),a=t.transformValues,r=function(e,t,n){var g,o={};for(var l in e){var a=Vr(l,t);o[l]=void 0!==a?a:null===(g=n.getValue(l))||void 0===g?void 0:g.get()}return o}(l,g||{},this);if(a&&(o&&(o=a(o)),l&&(l=a(l)),r&&(r=a(r))),n){!function(e,t,n){var g,o,l=Object.keys(t).filter((function(t){return!e.hasValue(t)})),a=l.length;if(a)for(var r=0;r<a;r++){var I=l[r],i=t[I],C=null;Array.isArray(i)&&(C=i[0]),null===C&&(C=null!==(o=null!==(g=n[I])&&void 0!==g?g:e.readValue(I))&&void 0!==o?o:t[I]),void 0!==C&&null!==C&&("string"===typeof C&&(/^\-?\d*\.?\d+$/.test(C)||ur(C))?C=parseFloat(C):!Zr(C)&&Jl.test(i)&&(C=$a(I,i)),e.addValue(I,br(C)),void 0===n[I]&&(n[I]=C),null!==C&&e.setBaseTarget(I,C))}}(this,l,r);var I=function(e,t,n,g){var o=FI(e,t,g);return qI(e,t=o.target,n,g=o.transitionEnd)}(this,l,r,o);o=I.transitionEnd,l=I.target}return $e({transition:g,transitionEnd:o},l)}}]),n}(oi);var ii=function(e){s(n,e);var t=h(n);function n(){return i(this,n),t.apply(this,arguments)}return c(n,[{key:"readValueFromInstance",value:function(e,t){if(ag.has(t)){var n=_a(t);return n&&n.default||0}var g,o=(g=e,window.getComputedStyle(g)),l=(ug(t)?o.getPropertyValue(t):o[t])||0;return"string"===typeof l?l.trim():l}},{key:"measureInstanceViewportBox",value:function(e,t){return WI(e,t.transformPagePoint)}},{key:"build",value:function(e,t,n,g){Jg(e,t,n,g.transformTemplate)}},{key:"scrapeMotionValuesFromProps",value:function(e){return eo(e)}},{key:"renderInstance",value:function(e,t,n,g){qg(e,t,n,g)}}]),n}(Ii),Ci=function(e){s(n,e);var t=h(n);function n(){return i(this,n),t.apply(this,arguments)}return c(n,[{key:"getBaseTargetFromProps",value:function(e,t){return e[t]}},{key:"readValueFromInstance",value:function(e,t){var n;return ag.has(t)?(null===(n=_a(t))||void 0===n?void 0:n.default)||0:(t=_g.has(t)?t:Og(t),e.getAttribute(t))}},{key:"measureInstanceViewportBox",value:function(){return{x:{min:0,max:0},y:{min:0,max:0}}}},{key:"scrapeMotionValuesFromProps",value:function(e){return to(e)}},{key:"build",value:function(e,t,n,g){Tg(e,t,n,g.transformTemplate)}},{key:"renderInstance",value:function(e,t,n,g){$g(e,t,0,g)}}]),n}(Ii),ci=function(e,t){return gg(e)?new Ci(t,{enableHardwareAcceleration:!1}):new ii(t,{enableHardwareAcceleration:!0})};function ui(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var si={correct:function(e,t){if(!t.target)return e;if("string"===typeof e){if(!vg.test(e))return e;e=parseFloat(e)}var n=ui(e,t.target.x),g=ui(e,t.target.y);return"".concat(n,"% ").concat(g,"%")}},di="_$css",Ai={correct:function(e,t){var n=t.treeScale,g=t.projectionDelta,o=e,l=e.includes("var("),a=[];l&&(e=e.replace(HI,(function(e){return a.push(e),di})));var r=Jl.parse(e);if(r.length>5)return o;var I=Jl.createTransformer(e),i="number"!==typeof r[0]?1:0,C=g.x.scale*n.x,c=g.y.scale*n.y;r[0+i]/=C,r[1+i]/=c;var u=Cl(C,c,.5);"number"===typeof r[2+i]&&(r[2+i]/=u),"number"===typeof r[3+i]&&(r[3+i]/=u);var s=I(r);if(l){var d=0;s=s.replace(di,(function(){var e=a[d];return d++,e}))}return s}},mi=function(e){s(n,e);var t=h(n);function n(){return i(this,n),t.apply(this,arguments)}return c(n,[{key:"componentDidMount",value:function(){var e,t=this,n=this.props,g=n.visualElement,o=n.layoutGroup,l=n.switchLayoutGroup,a=n.layoutId,r=g.projection;e=bi,Object.assign(og,e),r&&(o.group&&o.group.add(r),l&&l.register&&a&&l.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",(function(){t.safeToRemove()})),r.setOptions($e($e({},r.options),{},{onExitComplete:function(){return t.safeToRemove()}}))),Dn.hasEverUpdated=!0}},{key:"getSnapshotBeforeUpdate",value:function(e){var t=this,n=this.props,g=n.layoutDependency,o=n.visualElement,l=n.drag,a=n.isPresent,r=o.projection;return r?(r.isPresent=a,l||e.layoutDependency!==g||void 0===g?r.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?r.promote():r.relegate()||Sa.postRender((function(){var e;(null===(e=r.getStack())||void 0===e?void 0:e.members.length)||t.safeToRemove()}))),null):null}},{key:"componentDidUpdate",value:function(){var e=this.props.visualElement.projection;e&&(e.root.didUpdate(),!e.currentAnimation&&e.isLead()&&this.safeToRemove())}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.visualElement,n=e.layoutGroup,g=e.switchLayoutGroup,o=t.projection;o&&(o.scheduleCheckAfterUnmount(),(null===n||void 0===n?void 0:n.group)&&n.group.remove(o),(null===g||void 0===g?void 0:g.deregister)&&g.deregister(o))}},{key:"safeToRemove",value:function(){var e=this.props.safeToRemove;null===e||void 0===e||e()}},{key:"render",value:function(){return null}}]),n}(t.Component);var bi={borderRadius:$e($e({},si),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:si,borderTopRightRadius:si,borderBottomLeftRadius:si,borderBottomRightRadius:si,boxShadow:Ai},pi={measureLayout:function(e){var n=Z(qo(),2),g=n[0],o=n[1],l=(0,t.useContext)(Pn);return t.createElement(mi,$e($e({},e),{},{layoutGroup:l,switchLayoutGroup:(0,t.useContext)(qn),isPresent:g,safeToRemove:o}))}};function hi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},g=Ig(e)?e:br(e);return cr("",g,t,n),{stop:function(){return g.stop()},isAnimating:function(){return g.isAnimating()}}}var fi=["TopLeft","TopRight","BottomLeft","BottomRight"],yi=fi.length,Zi=function(e){return"string"===typeof e?parseFloat(e):e},vi=function(e){return"number"===typeof e||vg.test(e)};function Gi(e,t,n,g,o,l){var a,r,I,i;o?(e.opacity=Cl(0,null!==(a=n.opacity)&&void 0!==a?a:1,Si(g)),e.opacityExit=Cl(null!==(r=t.opacity)&&void 0!==r?r:1,0,Vi(g))):l&&(e.opacity=Cl(null!==(I=t.opacity)&&void 0!==I?I:1,null!==(i=n.opacity)&&void 0!==i?i:1,g));for(var C=0;C<yi;C++){var c="border".concat(fi[C],"Radius"),u=Bi(t,c),s=Bi(n,c);if(void 0!==u||void 0!==s)u||(u=0),s||(s=0),0===u||0===s||vi(u)===vi(s)?(e[c]=Math.max(Cl(Zi(u),Zi(s),g),0),(Zg.test(s)||Zg.test(u))&&(e[c]+="%")):e[c]=s}(t.rotate||n.rotate)&&(e.rotate=Cl(t.rotate||0,n.rotate||0,g))}function Bi(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e.borderRadius}var Si=Wi(0,.5,$l),Vi=Wi(.5,.95,jl);function Wi(e,t,n){return function(g){return g<e?0:g>t?1:n(il(e,t,g))}}function Ri(e,t){e.min=t.min,e.max=t.max}function ki(e,t){Ri(e.x,t.x),Ri(e.y,t.y)}function Xi(e,t,n,g,o){return e=hI(e-=t,1/n,g),void 0!==o&&(e=hI(e,1/o,g)),e}function Ji(e,t,n,g,o){var l=Z(n,3),a=l[0],r=l[1],I=l[2];!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4?arguments[4]:void 0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;if(Zg.test(t)){t=parseFloat(t),t=Cl(a.min,a.max,t/100)-a.min}if("number"===typeof t){var r=Cl(l.min,l.max,g);e===l&&(r-=t),e.min=Xi(e.min,t,n,r,o),e.max=Xi(e.max,t,n,r,o)}}(e,t[a],t[r],t[I],t.scale,g,o)}var Yi=["x","scaleX","originX"],wi=["y","scaleY","originY"];function Hi(e,t,n,g){Ji(e.x,t,Yi,null===n||void 0===n?void 0:n.x,null===g||void 0===g?void 0:g.x),Ji(e.y,t,wi,null===n||void 0===n?void 0:n.y,null===g||void 0===g?void 0:g.y)}function Ni(e){return 0===e.translate&&1===e.scale}function Ki(e){return Ni(e.x)&&Ni(e.y)}function Fi(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function xi(e){return eI(e.x)/eI(e.y)}var Ei=function(){function e(){i(this,e),this.members=[]}return c(e,[{key:"add",value:function(e){sr(this.members,e),e.scheduleRender()}},{key:"remove",value:function(e){if(dr(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var t=this.members[this.members.length-1];t&&this.promote(t)}}},{key:"relegate",value:function(e){var t,n=this.members.findIndex((function(t){return e===t}));if(0===n)return!1;for(var g=n;g>=0;g--){var o=this.members[g];if(!1!==o.isPresent){t=o;break}}return!!t&&(this.promote(t),!0)}},{key:"promote",value:function(e,t){var n,g=this.lead;e!==g&&(this.prevLead=g,this.lead=e,e.show(),g&&(g.instance&&g.scheduleRender(),e.scheduleRender(),e.resumeFrom=g,t&&(e.resumeFrom.preserveOpacity=!0),g.snapshot&&(e.snapshot=g.snapshot,e.snapshot.latestValues=g.animationValues||g.latestValues,e.snapshot.isShared=!0),(null===(n=e.root)||void 0===n?void 0:n.isUpdating)&&(e.isLayoutDirty=!0),!1===e.options.crossfade&&g.hide()))}},{key:"exitAnimationComplete",value:function(){this.members.forEach((function(e){var t,n,g,o,l;null===(n=(t=e.options).onExitComplete)||void 0===n||n.call(t),null===(l=null===(g=e.resumingFrom)||void 0===g?void 0:(o=g.options).onExitComplete)||void 0===l||l.call(o)}))}},{key:"scheduleRender",value:function(){this.members.forEach((function(e){e.instance&&e.scheduleRender(!1)}))}},{key:"removeLeadSnapshot",value:function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}]),e}();function Mi(e,t,n){var g=e.x.translate/t.x,o=e.y.translate/t.y,l="translate3d(".concat(g,"px, ").concat(o,"px, 0) ");if(l+="scale(".concat(1/t.x,", ").concat(1/t.y,") "),n){var a=n.rotate,r=n.rotateX,I=n.rotateY;a&&(l+="rotate(".concat(a,"deg) ")),r&&(l+="rotateX(".concat(r,"deg) ")),I&&(l+="rotateY(".concat(I,"deg) "))}var i=e.x.scale*t.x,C=e.y.scale*t.y;return"translate3d(0px, 0px, 0) scale(1, 1) scale(1, 1)"===(l+="scale(".concat(i,", ").concat(C,")"))?"none":l}var zi=function(e,t){return e.depth-t.depth},Li=function(){function e(){i(this,e),this.children=[],this.isDirty=!1}return c(e,[{key:"add",value:function(e){sr(this.children,e),this.isDirty=!0}},{key:"remove",value:function(e){dr(this.children,e),this.isDirty=!0}},{key:"forEach",value:function(e){this.isDirty&&this.children.sort(zi),this.isDirty=!1,this.children.forEach(e)}}]),e}(),Ui=["","X","Y","Z"];function Qi(e){var t=e.attachResizeListener,n=e.defaultParent,g=e.measureScroll,o=e.checkIsScrollRoot,l=e.resetTransform;return function(){function e(t){var g=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null===n||void 0===n?void 0:n();i(this,e),this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=function(){g.isUpdating&&(g.isUpdating=!1,g.clearAllSnapshots())},this.updateProjection=function(){g.nodes.forEach(_i),g.nodes.forEach($i)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.elementId=t,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[].concat(I(l.path),[l]):[],this.parent=l,this.depth=l?l.depth+1:0,t&&this.root.registerPotentialNode(t,this);for(var a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new Li)}return c(e,[{key:"addEventListener",value:function(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Ar),this.eventHandlers.get(e).add(t)}},{key:"notifyListeners",value:function(e){for(var t=this.eventHandlers.get(e),n=arguments.length,g=new Array(n>1?n-1:0),o=1;o<n;o++)g[o-1]=arguments[o];null===t||void 0===t||t.notify.apply(t,g)}},{key:"hasListeners",value:function(e){return this.eventHandlers.has(e)}},{key:"registerPotentialNode",value:function(e,t){this.potentialNodes.set(e,t)}},{key:"mount",value:function(e){var n,g=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.instance){this.isSVG=e instanceof SVGElement&&"svg"!==e.tagName,this.instance=e;var l=this.options,a=l.layoutId,r=l.layout,I=l.visualElement;if(I&&!I.current&&I.mount(e),this.root.nodes.add(this),null===(n=this.parent)||void 0===n||n.children.add(this),this.elementId&&this.root.potentialNodes.delete(this.elementId),o&&(r||a)&&(this.isLayoutDirty=!0),t){var i,C=function(){return g.root.updateBlockedByResize=!1};t(e,(function(){g.root.updateBlockedByResize=!0,i&&i(),i=tr(C,250),Dn.hasAnimatedSinceResize&&(Dn.hasAnimatedSinceResize=!1,g.nodes.forEach(qi))}))}a&&this.root.registerSharedNode(a,this),!1!==this.options.animate&&I&&(a||r)&&this.addEventListener("didUpdate",(function(e){var t,n,o,l,a,r=e.delta,i=e.hasLayoutChanged,C=e.hasRelativeTargetChanged,c=e.layout;if(g.isTreeAnimationBlocked())return g.target=void 0,void(g.relativeTarget=void 0);var u=null!==(n=null!==(t=g.options.transition)&&void 0!==t?t:I.getDefaultTransition())&&void 0!==n?n:aC,s=I.getProps(),d=s.onLayoutAnimationStart,A=s.onLayoutAnimationComplete,m=!g.targetLayout||!Fi(g.targetLayout,c)||C,b=!i&&C;if((null===(o=g.resumeFrom)||void 0===o?void 0:o.instance)||b||i&&(m||!g.currentAnimation)){g.resumeFrom&&(g.resumingFrom=g.resumeFrom,g.resumingFrom.resumingFrom=void 0),g.setAnimationOrigin(r,b);var p=$e($e({},Cr(u,"layout")),{},{onPlay:d,onComplete:A});I.shouldReduceMotion&&(p.delay=0,p.type=!1),g.startAnimation(p)}else i||0!==g.animationProgress||qi(g),g.isLead()&&(null===(a=(l=g.options).onExitComplete)||void 0===a||a.call(l));g.targetLayout=c}))}}},{key:"unmount",value:function(){var e,t;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),null===(e=this.getStack())||void 0===e||e.remove(this),null===(t=this.parent)||void 0===t||t.children.delete(this),this.instance=void 0,fa.preRender(this.updateProjection)}},{key:"blockUpdate",value:function(){this.updateManuallyBlocked=!0}},{key:"unblockUpdate",value:function(){this.updateManuallyBlocked=!1}},{key:"isUpdateBlocked",value:function(){return this.updateManuallyBlocked||this.updateBlockedByResize}},{key:"isTreeAnimationBlocked",value:function(){var e;return this.isAnimationBlocked||(null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimationBlocked())||!1}},{key:"startUpdate",value:function(){var e;this.isUpdateBlocked()||(this.isUpdating=!0,null===(e=this.nodes)||void 0===e||e.forEach(eC))}},{key:"willUpdate",value:function(){var e,t,n,g=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.isUpdateBlocked())null===(t=(e=this.options).onExitComplete)||void 0===t||t.call(e);else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var o=0;o<this.path.length;o++){var l=this.path[o];l.shouldResetTransform=!0,l.updateScroll()}var a=this.options,r=a.layoutId,I=a.layout;if(void 0!==r||I){var i=null===(n=this.options.visualElement)||void 0===n?void 0:n.getProps().transformTemplate;this.prevTransformTemplateValue=null===i||void 0===i?void 0:i(this.latestValues,""),this.updateSnapshot(),g&&this.notifyListeners("willUpdate")}}}},{key:"didUpdate",value:function(){if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Pi);this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(rC),this.potentialNodes.clear()),this.nodes.forEach(Oi),this.nodes.forEach(Ti),this.nodes.forEach(Di),this.clearAllSnapshots(),ya.update(),ya.preRender(),ya.render())}},{key:"clearAllSnapshots",value:function(){this.nodes.forEach(ji),this.sharedNodes.forEach(tC)}},{key:"scheduleUpdateProjection",value:function(){Sa.preRender(this.updateProjection,!1,!0)}},{key:"scheduleCheckAfterUnmount",value:function(){var e=this;Sa.postRender((function(){e.isLayoutDirty?e.root.didUpdate():e.root.checkUpdateFailed()}))}},{key:"updateSnapshot",value:function(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}},{key:"updateLayout",value:function(){var e;if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var t=0;t<this.path.length;t++){this.path[t].updateScroll()}var n=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox),null===(e=this.options.visualElement)||void 0===e||e.notify("LayoutMeasure",this.layout.layoutBox,null===n||void 0===n?void 0:n.layoutBox)}}},{key:"updateScroll",value:function(){this.options.layoutScroll&&this.instance&&(this.isScrollRoot=o(this.instance),this.scroll=g(this.instance))}},{key:"resetTransform",value:function(){var e;if(l){var t=this.isLayoutDirty||this.shouldResetTransform,n=this.projectionDelta&&!Ki(this.projectionDelta),g=null===(e=this.options.visualElement)||void 0===e?void 0:e.getProps().transformTemplate,o=null===g||void 0===g?void 0:g(this.latestValues,""),a=o!==this.prevTransformTemplateValue;t&&(n||mI(this.latestValues)||a)&&(l(this.instance,o),this.shouldResetTransform=!1,this.scheduleRender())}}},{key:"measure",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.measurePageBox(),n=this.removeElementScroll(t);return e&&(n=this.removeTransform(n)),iC(n),{measuredBox:t,layoutBox:n,latestValues:{}}}},{key:"measurePageBox",value:function(){var e=this.options.visualElement;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};var t=e.measureViewportBox(),n=this.root.scroll;return n&&(vI(t.x,n.x),vI(t.y,n.y)),t}},{key:"removeElementScroll",value:function(e){var t={x:{min:0,max:0},y:{min:0,max:0}};ki(t,e);for(var n=0;n<this.path.length;n++){var g=this.path[n],o=g.scroll,l=g.options,a=g.isScrollRoot;if(g!==this.root&&o&&l.layoutScroll){if(a){ki(t,e);var r=this.root.scroll;r&&(vI(t.x,-r.x),vI(t.y,-r.y))}vI(t.x,o.x),vI(t.y,o.y)}}return t}},{key:"applyTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={x:{min:0,max:0},y:{min:0,max:0}};ki(n,e);for(var g=0;g<this.path.length;g++){var o=this.path[g];!t&&o.options.layoutScroll&&o.scroll&&o!==o.root&&VI(n,{x:-o.scroll.x,y:-o.scroll.y}),mI(o.latestValues)&&VI(n,o.latestValues)}return mI(this.latestValues)&&VI(n,this.latestValues),n}},{key:"removeTransform",value:function(e){var t,n={x:{min:0,max:0},y:{min:0,max:0}};ki(n,e);for(var g=0;g<this.path.length;g++){var o=this.path[g];if(o.instance&&mI(o.latestValues)){AI(o.latestValues)&&o.updateSnapshot();var l={x:{min:0,max:0},y:{min:0,max:0}};ki(l,o.measurePageBox()),Hi(n,o.latestValues,null===(t=o.snapshot)||void 0===t?void 0:t.layoutBox,l)}}return mI(this.latestValues)&&Hi(n,this.latestValues),n}},{key:"setTargetDelta",value:function(e){this.targetDelta=e,this.root.scheduleUpdateProjection()}},{key:"setOptions",value:function(e){this.options=$e($e($e({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}},{key:"clearMeasurements",value:function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}},{key:"resolveTargetDelta",value:function(){var e,t=this.options,n=t.layout,g=t.layoutId;if(this.layout&&(n||g)){if(!this.targetDelta&&!this.relativeTarget){var o=this.getClosestProjectingParent();o&&o.layout?(this.relativeParent=o,this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},aI(this.relativeTargetOrigin,this.layout.layoutBox,o.layout.layoutBox),ki(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}var l,a,r;if(this.relativeTarget||this.targetDelta)if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&(null===(e=this.relativeParent)||void 0===e?void 0:e.target)?(l=this.target,a=this.relativeTarget,r=this.relativeParent.target,oI(l.x,a.x,r.x),oI(l.y,a.y,r.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):ki(this.target,this.layout.layoutBox),ZI(this.target,this.targetDelta)):ki(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;var I=this.getClosestProjectingParent();I&&Boolean(I.resumingFrom)===Boolean(this.resumingFrom)&&!I.options.layoutScroll&&I.target?(this.relativeParent=I,this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},aI(this.relativeTargetOrigin,this.target,I.target),ki(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}},{key:"getClosestProjectingParent",value:function(){if(this.parent&&!AI(this.parent.latestValues)&&!bI(this.parent.latestValues))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()}},{key:"calcProjection",value:function(){var e,t=this.options,n=t.layout,g=t.layoutId;if(this.isTreeAnimating=Boolean((null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimating)||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(n||g)){var o=this.getLead();ki(this.layoutCorrected,this.layout.layoutBox),function(e,t,n){var g,o,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=n.length;if(a){var r,I;t.x=t.y=1;for(var i=0;i<a;i++)I=(r=n[i]).projectionDelta,"contents"!==(null===(o=null===(g=r.instance)||void 0===g?void 0:g.style)||void 0===o?void 0:o.display)&&(l&&r.options.layoutScroll&&r.scroll&&r!==r.root&&VI(e,{x:-r.scroll.x,y:-r.scroll.y}),I&&(t.x*=I.x.scale,t.y*=I.y.scale,ZI(e,I)),l&&mI(r.latestValues)&&VI(e,r.latestValues))}}(this.layoutCorrected,this.treeScale,this.path,Boolean(this.resumingFrom)||this!==o);var l=o.target;if(l){this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});var a=this.treeScale.x,r=this.treeScale.y,I=this.projectionTransform;gI(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=Mi(this.projectionDelta,this.treeScale),this.projectionTransform===I&&this.treeScale.x===a&&this.treeScale.y===r||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l))}}}},{key:"hide",value:function(){this.isVisible=!1}},{key:"show",value:function(){this.isVisible=!0}},{key:"scheduleRender",value:function(){var e,t,n,g=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];null===(t=(e=this.options).scheduleRender)||void 0===t||t.call(e),g&&(null===(n=this.getStack())||void 0===n||n.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}},{key:"setAnimationOrigin",value:function(e){var t,n=this,g=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.snapshot,l=(null===o||void 0===o?void 0:o.latestValues)||{},a=$e({},this.latestValues),r={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!g;var I={x:{min:0,max:0},y:{min:0,max:0}},i=null===o||void 0===o?void 0:o.isShared,C=((null===(t=this.getStack())||void 0===t?void 0:t.members.length)||0)<=1,c=Boolean(i&&!C&&!0===this.options.crossfade&&!this.path.some(lC));this.animationProgress=0,this.mixTargetDelta=function(t){var g,o=t/1e3;nC(r.x,e.x,o),nC(r.y,e.y,o),n.setTargetDelta(r),n.relativeTarget&&n.relativeTargetOrigin&&n.layout&&(null===(g=n.relativeParent)||void 0===g?void 0:g.layout)&&(aI(I,n.layout.layoutBox,n.relativeParent.layout.layoutBox),oC(n.relativeTarget,n.relativeTargetOrigin,I,o)),i&&(n.animationValues=a,Gi(a,l,n.latestValues,o,c,C)),n.root.scheduleUpdateProjection(),n.scheduleRender(),n.animationProgress=o},this.mixTargetDelta(0)}},{key:"startAnimation",value:function(e){var t,n,g=this;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),this.resumingFrom&&(null===(n=this.resumingFrom.currentAnimation)||void 0===n||n.stop()),this.pendingAnimation&&(fa.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Sa.update((function(){Dn.hasAnimatedSinceResize=!0,g.currentAnimation=hi(0,1e3,$e($e({},e),{},{onUpdate:function(t){var n;g.mixTargetDelta(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:function(){var t;null===(t=e.onComplete)||void 0===t||t.call(e),g.completeAnimation()}})),g.resumingFrom&&(g.resumingFrom.currentAnimation=g.currentAnimation),g.pendingAnimation=void 0}))}},{key:"completeAnimation",value:function(){var e;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),null===(e=this.getStack())||void 0===e||e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}},{key:"finishAnimation",value:function(){var e;this.currentAnimation&&(null===(e=this.mixTargetDelta)||void 0===e||e.call(this,1e3),this.currentAnimation.stop()),this.completeAnimation()}},{key:"applyTransformsToTarget",value:function(){var e=this.getLead(),t=e.targetWithTransforms,n=e.target,g=e.layout,o=e.latestValues;if(t&&n&&g){if(this!==e&&this.layout&&g&&CC(this.options.animationType,this.layout.layoutBox,g.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};var l=eI(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+l;var a=eI(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+a}ki(t,n),VI(t,o),gI(this.projectionDeltaWithTransform,this.layoutCorrected,t,o)}}},{key:"registerSharedNode",value:function(e,t){var n,g,o;this.sharedNodes.has(e)||this.sharedNodes.set(e,new Ei),this.sharedNodes.get(e).add(t),t.promote({transition:null===(n=t.options.initialPromotionConfig)||void 0===n?void 0:n.transition,preserveFollowOpacity:null===(o=null===(g=t.options.initialPromotionConfig)||void 0===g?void 0:g.shouldPreserveFollowOpacity)||void 0===o?void 0:o.call(g,t)})}},{key:"isLead",value:function(){var e=this.getStack();return!e||e.lead===this}},{key:"getLead",value:function(){var e;return this.options.layoutId&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}},{key:"getPrevLead",value:function(){var e;return this.options.layoutId?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}},{key:"getStack",value:function(){var e=this.options.layoutId;if(e)return this.root.sharedNodes.get(e)}},{key:"promote",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needsReset,n=e.transition,g=e.preserveFollowOpacity,o=this.getStack();o&&o.promote(this,g),t&&(this.projectionDelta=void 0,this.needsReset=!0),n&&this.setOptions({transition:n})}},{key:"relegate",value:function(){var e=this.getStack();return!!e&&e.relegate(this)}},{key:"resetRotation",value:function(){var e=this.options.visualElement;if(e){for(var t=!1,n={},g=0;g<Ui.length;g++){var o="rotate"+Ui[g];e.getStaticValue(o)&&(t=!0,n[o]=e.getStaticValue(o),e.setStaticValue(o,0))}if(t){for(var l in null===e||void 0===e||e.render(),n)e.setStaticValue(l,n[l]);e.scheduleRender()}}}},{key:"getProjectionStyles",value:function(){var e,t,n,g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o={};if(!this.instance||this.isSVG)return o;if(!this.isVisible)return{visibility:"hidden"};o.visibility="";var l=null===(e=this.options.visualElement)||void 0===e?void 0:e.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,o.opacity="",o.pointerEvents=lo(g.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none",o;var a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target){var r={};return this.options.layoutId&&(r.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,r.pointerEvents=lo(g.pointerEvents)||""),this.hasProjected&&!mI(this.latestValues)&&(r.transform=l?l({},""):"none",this.hasProjected=!1),r}var I=a.animationValues||a.latestValues;this.applyTransformsToTarget(),o.transform=Mi(this.projectionDeltaWithTransform,this.treeScale,I),l&&(o.transform=l(I,o.transform));var i=this.projectionDelta,C=i.x,c=i.y;for(var u in o.transformOrigin="".concat(100*C.origin,"% ").concat(100*c.origin,"% 0"),a.animationValues?o.opacity=a===this?null!==(n=null!==(t=I.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:I.opacityExit:o.opacity=a===this?void 0!==I.opacity?I.opacity:"":void 0!==I.opacityExit?I.opacityExit:0,og)if(void 0!==I[u]){var s=og[u],d=s.correct,A=s.applyTo,m=d(I[u],a);if(A)for(var b=A.length,p=0;p<b;p++)o[A[p]]=m;else o[u]=m}return this.options.layoutId&&(o.pointerEvents=a===this?lo(g.pointerEvents)||"":"none"),o}},{key:"clearSnapshot",value:function(){this.resumeFrom=this.snapshot=void 0}},{key:"resetTree",value:function(){this.root.nodes.forEach((function(e){var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(Pi),this.root.sharedNodes.clear()}}]),e}()}function Ti(e){e.updateLayout()}function Di(e){var t,n,g,o=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&o&&e.hasListeners("didUpdate")){var l=e.layout,a=l.layoutBox,r=l.measuredBox,I=e.options.animationType;"size"===I?uI((function(e){var t=o.isShared?o.measuredBox[e]:o.layoutBox[e],n=eI(t);t.min=a[e].min,t.max=t.min+n})):CC(I,o.layoutBox,a)&&uI((function(e){var t=o.isShared?o.measuredBox[e]:o.layoutBox[e],n=eI(a[e]);t.max=t.min+n}));var i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};gI(i,a,o.layoutBox);var C={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};o.isShared?gI(C,e.applyTransform(r,!0),o.measuredBox):gI(C,a,o.layoutBox);var c=!Ki(i),u=!1;if(!e.resumeFrom){var s=e.getClosestProjectingParent();if(s&&!s.resumeFrom){var d=s.snapshot,A=s.layout;if(d&&A){var m={x:{min:0,max:0},y:{min:0,max:0}};aI(m,o.layoutBox,d.layoutBox);var b={x:{min:0,max:0},y:{min:0,max:0}};aI(b,a,A.layoutBox),Fi(m,b)||(u=!0)}}}e.notifyListeners("didUpdate",{layout:a,snapshot:o,delta:C,layoutDelta:i,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else e.isLead()&&(null===(g=(n=e.options).onExitComplete)||void 0===g||g.call(n));e.options.transition=void 0}function ji(e){e.clearSnapshot()}function Pi(e){e.clearMeasurements()}function Oi(e){var t=e.options.visualElement;(null===t||void 0===t?void 0:t.getProps().onBeforeLayoutMeasure)&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function qi(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0}function _i(e){e.resolveTargetDelta()}function $i(e){e.calcProjection()}function eC(e){e.resetRotation()}function tC(e){e.removeLeadSnapshot()}function nC(e,t,n){e.translate=Cl(t.translate,0,n),e.scale=Cl(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function gC(e,t,n,g){e.min=Cl(t.min,n.min,g),e.max=Cl(t.max,n.max,g)}function oC(e,t,n,g){gC(e.x,t.x,n.x,g),gC(e.y,t.y,n.y,g)}function lC(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}var aC={duration:.45,ease:[.4,0,.1,1]};function rC(e,t){for(var n=e.root,g=e.path.length-1;g>=0;g--)if(Boolean(e.path[g].instance)){n=e.path[g];break}var o=(n&&n!==e.root?n.instance:document).querySelector('[data-projection-id="'.concat(t,'"]'));o&&e.mount(o,!0)}function IC(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function iC(e){IC(e.x),IC(e.y)}function CC(e,t,n){return"position"===e||"preserve-aspect"===e&&!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1;return Tr(e,t)<=n}(xi(t),xi(n),.2)}var cC=Qi({attachResizeListener:function(e,t){return uo(e,"resize",t)},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}},checkIsScrollRoot:function(){return!0}}),uC={current:void 0},sC=Qi({measureScroll:function(e){return{x:e.scrollLeft,y:e.scrollTop}},defaultParent:function(){if(!uC.current){var e=new cC(0,{});e.mount(window),e.setOptions({layoutScroll:!0}),uC.current=e}return uC.current},resetTransform:function(e,t){e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:function(e){return Boolean("fixed"===window.getComputedStyle(e).position)}}),dC=$e($e($e($e({},zr),Oo),YI),pi),AC=tg((function(e,t){return function(e,t,n,g,o){var l=t.forwardMotionProps,a=void 0!==l&&l;return $e($e({},gg(e)?Co:co),{},{preloadedFeatures:n,useRender:Pg(a),createVisualElement:g,projectionNodeConstructor:o,Component:e})}(e,t,dC,ci,sC)}));var mC=n(184),bC=function(e){return e.children},pC={initial:{opacity:0},in:{opacity:1},out:{opacity:0}},hC={type:"tween",ease:"linear",duration:.5};function fC(){var e=pe().pathname;return(0,mC.jsx)(bC,{children:(0,mC.jsx)(AC.div,{initial:"initial",animate:"in",variants:pC,transition:hC,children:(0,mC.jsx)(ke,{})},e)})}function yC(){var e=function(){setTimeout((function(){document.getElementById("loader_block").style.opacity=0,setTimeout((function(){document.getElementById("loader_block").style.display="none"}),310)}),200)};if("complete"!==document.readyState)return window.addEventListener("load",e,!1),function(){return window.removeEventListener("load",e)};e()}function ZC(){ZC=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,g=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",r=o.toStringTag||"@@toStringTag";function I(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{I({},"")}catch(R){I=function(e,t,n){return e[t]=n}}function i(e,t,n,o){var l=t&&t.prototype instanceof u?t:u,a=Object.create(l.prototype),r=new S(o||[]);return g(a,"_invoke",{value:Z(e,n,r)}),a}function C(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=i;var c={};function u(){}function s(){}function d(){}var A={};I(A,l,(function(){return this}));var b=Object.getPrototypeOf,p=b&&b(b(V([])));p&&p!==t&&n.call(p,l)&&(A=p);var h=d.prototype=u.prototype=Object.create(A);function f(e){["next","throw","return"].forEach((function(t){I(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function o(g,l,a,r){var I=C(e[g],e,l);if("throw"!==I.type){var i=I.arg,c=i.value;return c&&"object"==m(c)&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){o("next",e,a,r)}),(function(e){o("throw",e,a,r)})):t.resolve(c).then((function(e){i.value=e,a(i)}),(function(e){return o("throw",e,a,r)}))}r(I.arg)}var l;g(this,"_invoke",{value:function(e,n){function g(){return new t((function(t,g){o(e,n,t,g)}))}return l=l?l.then(g,g):g()}})}function Z(e,t,n){var g="suspendedStart";return function(o,l){if("executing"===g)throw new Error("Generator is already running");if("completed"===g){if("throw"===o)throw l;return W()}for(n.method=o,n.arg=l;;){var a=n.delegate;if(a){var r=v(a,n);if(r){if(r===c)continue;return r}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===g)throw g="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);g="executing";var I=C(e,t,n);if("normal"===I.type){if(g=n.done?"completed":"suspendedYield",I.arg===c)continue;return{value:I.arg,done:n.done}}"throw"===I.type&&(g="completed",n.method="throw",n.arg=I.arg)}}}function v(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,v(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var g=C(n,e.iterator,t.arg);if("throw"===g.type)return t.method="throw",t.arg=g.arg,t.delegate=null,c;var o=g.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function G(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(G,this),this.reset(!0)}function V(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var g=-1,o=function t(){for(;++g<e.length;)if(n.call(e,g))return t.value=e[g],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:W}}function W(){return{value:void 0,done:!0}}return s.prototype=d,g(h,"constructor",{value:d,configurable:!0}),g(d,"constructor",{value:s,configurable:!0}),s.displayName=I(d,r,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===s||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,I(e,r,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},f(y.prototype),I(y.prototype,a,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,g,o,l){void 0===l&&(l=Promise);var a=new y(i(t,n,g,o),l);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},f(h),I(h,r,"Generator"),I(h,l,(function(){return this})),I(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var g in t)n.push(g);return n.reverse(),function e(){for(;n.length;){var g=n.pop();if(g in t)return e.value=g,e.done=!1,e}return e.done=!0,e}},e.values=V,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function g(n,g){return a.type="throw",a.arg=e,t.next=n,g&&(t.method="next",t.arg=void 0),!!g}for(var o=this.tryEntries.length-1;o>=0;--o){var l=this.tryEntries[o],a=l.completion;if("root"===l.tryLoc)return g("end");if(l.tryLoc<=this.prev){var r=n.call(l,"catchLoc"),I=n.call(l,"finallyLoc");if(r&&I){if(this.prev<l.catchLoc)return g(l.catchLoc,!0);if(this.prev<l.finallyLoc)return g(l.finallyLoc)}else if(r){if(this.prev<l.catchLoc)return g(l.catchLoc,!0)}else{if(!I)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return g(l.finallyLoc)}}}},abrupt:function(e,t){for(var g=this.tryEntries.length-1;g>=0;--g){var o=this.tryEntries[g];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var l=o;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var a=l?l.completion:{};return a.type=e,a.arg=t,l?(this.method="next",this.next=l.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var g=n.completion;if("throw"===g.type){var o=g.arg;B(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:V(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function vC(e,t,n,g,o,l,a){try{var r=e[l](a),I=r.value}catch(i){return void n(i)}r.done?t(I):Promise.resolve(I).then(g,o)}function GC(e){return function(){var t=this,n=arguments;return new Promise((function(g,o){var l=e.apply(t,n);function a(e){vC(l,g,o,a,r,"next",e)}function r(e){vC(l,g,o,a,r,"throw",e)}a(void 0)}))}}var BC={nav:"MenuBar_nav__XFAy5",navBtn:"MenuBar_navBtn__Q2Fzu",navWrap:"MenuBar_navWrap__7bfj3",logo:"MenuBar_logo__4xrbX",gap:"MenuBar_gap__eM0xu",menu:"MenuBar_menu__ivF2G"};function SC(){return SC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var g in n)Object.prototype.hasOwnProperty.call(n,g)&&(e[g]=n[g])}return e},SC.apply(this,arguments)}function VC(e,t){if(null==e)return{};var n,g,o={},l=Object.keys(e);for(g=0;g<l.length;g++)n=l[g],t.indexOf(n)>=0||(o[n]=e[n]);return o}var WC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function RC(e){var n,g=e.basename,o=e.children,l=e.window,a=t.useRef();null==a.current&&(a.current=(void 0===(n={window:l,v5Compat:!0})&&(n={}),Y((function(e,t){var n=e.location;return R("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:k(t)}),null,n)));var r=a.current,I=Z(t.useState({action:r.action,location:r.location}),2),i=I[0],C=I[1];return t.useLayoutEffect((function(){return r.listen(C)}),[r]),t.createElement(Je,{basename:g,children:o,location:i.location,navigationType:i.action,navigator:r})}var kC=t.forwardRef((function(e,n){var g=e.onClick,o=e.relative,l=e.reloadDocument,a=e.replace,r=e.state,I=e.target,i=e.to,C=e.preventScrollReset,c=VC(e,WC),u=function(e,n){var g=(void 0===n?{}:n).relative;be()||L(!1);var o=t.useContext(se),l=o.basename,a=o.navigator,r=ye(e,{relative:g}),I=r.hash,i=r.pathname,C=r.search,c=i;return"/"!==l&&(c="/"===i?l:j([l,i])),a.createHref({pathname:c,search:C,hash:I})}(i,{relative:o}),s=function(e,n){var g=void 0===n?{}:n,o=g.target,l=g.replace,a=g.state,r=g.preventScrollReset,I=g.relative,i=he(),C=pe(),c=ye(e,{relative:I});return t.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,o)){t.preventDefault();var n=void 0!==l?l:k(C)===k(c);i(e,{replace:n,state:a,preventScrollReset:r,relative:I})}}),[C,i,c,l,a,o,e,r,I])}(i,{replace:a,state:r,target:I,preventScrollReset:C,relative:o});return t.createElement("a",SC({},c,{href:u,onClick:l?g:function(e){g&&g(e),e.defaultPrevented||s(e)},ref:n,target:I}))}));var XC,JC;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(XC||(XC={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(JC||(JC={}));function YC(){var e=(0,t.useRef)(!1);return Yn((function(){return e.current=!0,function(){e.current=!1}}),[]),e}var wC=function(e){s(n,e);var t=h(n);function n(){return i(this,n),t.apply(this,arguments)}return c(n,[{key:"getSnapshotBeforeUpdate",value:function(e){var t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){var n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft}return null}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return this.props.children}}]),n}(t.Component);function HC(e){var n=e.children,g=e.isPresent,o=(0,t.useId)(),l=(0,t.useRef)(null),a=(0,t.useRef)({width:0,height:0,top:0,left:0});return(0,t.useInsertionEffect)((function(){var e=a.current,t=e.width,n=e.height,r=e.top,I=e.left;if(!g&&l.current&&t&&n){l.current.dataset.motionPopId=o;var i=document.createElement("style");return document.head.appendChild(i),i.sheet&&i.sheet.insertRule('\n          [data-motion-pop-id="'.concat(o,'"] {\n            position: absolute !important;\n            width: ').concat(t,"px !important;\n            height: ").concat(n,"px !important;\n            top: ").concat(r,"px !important;\n            left: ").concat(I,"px !important;\n          }\n        ")),function(){document.head.removeChild(i)}}}),[g]),t.createElement(wC,{isPresent:g,childRef:l,sizeRef:a},t.cloneElement(n,{ref:l}))}var NC=function(e){var n=e.children,g=e.initial,o=e.isPresent,l=e.onExitComplete,a=e.custom,r=e.presenceAffectsLayout,I=e.mode,i=Tn(KC),C=(0,t.useId)(),c=(0,t.useMemo)((function(){return{id:C,initial:g,isPresent:o,custom:a,onExitComplete:function(e){i.set(e,!0);var t,n=ig(i.values());try{for(n.s();!(t=n.n()).done;){if(!t.value)return}}catch(g){n.e(g)}finally{n.f()}l&&l()},register:function(e){return i.set(e,!1),function(){return i.delete(e)}}}}),r?void 0:[o]);return(0,t.useMemo)((function(){i.forEach((function(e,t){return i.set(t,!1)}))}),[o]),t.useEffect((function(){!o&&!i.size&&l&&l()}),[o]),"popLayout"===I&&(n=t.createElement(HC,{isPresent:o},n)),t.createElement(Xn.Provider,{value:c},n)};function KC(){return new Map}var FC=function(e){return e.key||""};var xC=function(e){var n=e.children,g=e.custom,o=e.initial,l=void 0===o||o,a=e.onExitComplete,r=e.exitBeforeEnter,i=e.presenceAffectsLayout,C=void 0===i||i,c=e.mode,u=void 0===c?"sync":c;r&&(u="wait",xo(!1,"Replace exitBeforeEnter with mode='wait'"));var s=function(){var e=YC(),n=Z((0,t.useState)(0),2),g=n[0],o=n[1],l=(0,t.useCallback)((function(){e.current&&o(g+1)}),[g]);return[(0,t.useCallback)((function(){return Sa.postRender(l)}),[l]),g]}(),d=Z(s,1)[0],A=(0,t.useContext)(Pn).forceRender;A&&(d=A);var m=YC(),b=function(e){var n=[];return t.Children.forEach(e,(function(e){(0,t.isValidElement)(e)&&n.push(e)})),n}(n),p=b,h=new Set,f=(0,t.useRef)(p),y=(0,t.useRef)(new Map).current,v=(0,t.useRef)(!0);if(Yn((function(){v.current=!1,function(e,t){e.forEach((function(e){var n=FC(e);t.set(n,e)}))}(b,y),f.current=p})),Ho((function(){v.current=!0,y.clear(),h.clear()})),v.current)return t.createElement(t.Fragment,null,p.map((function(e){return t.createElement(NC,{key:FC(e),isPresent:!0,initial:!!l&&void 0,presenceAffectsLayout:C,mode:u},e)})));p=I(p);for(var G=f.current.map(FC),B=b.map(FC),S=G.length,V=0;V<S;V++){var W=G[V];-1===B.indexOf(W)&&h.add(W)}return"wait"===u&&h.size&&(p=[]),h.forEach((function(e){if(-1===B.indexOf(e)){var n=y.get(e);if(n){var o=G.indexOf(e);p.splice(o,0,t.createElement(NC,{key:FC(n),isPresent:!1,onExitComplete:function(){y.delete(e),h.delete(e);var t=f.current.findIndex((function(t){return t.key===e}));if(f.current.splice(t,1),!h.size){if(f.current=b,!1===m.current)return;d(),a&&a()}},custom:g,presenceAffectsLayout:C,mode:u},n))}}})),p=p.map((function(e){var n=e.key;return h.has(n)?e:t.createElement(NC,{key:FC(e),isPresent:!0,presenceAffectsLayout:C,mode:u},e)})),t.createElement(t.Fragment,null,h.size?p:p.map((function(e){return(0,t.cloneElement)(e)})))},EC="fade_outerWrapper__AKv-K",MC="fade_innerWrapper__J2fgl";function zC(e){return(0,mC.jsx)("div",{className:EC,children:(0,mC.jsx)(xC,{children:(0,mC.jsx)(AC.span,{className:MC,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:e.one2Two?e.one:e.two},e.one2Two)})})}function LC(e,t){return function(){return e.apply(t,arguments)}}var UC,QC=Object.prototype.toString,TC=Object.getPrototypeOf,DC=(UC=Object.create(null),function(e){var t=QC.call(e);return UC[t]||(UC[t]=t.slice(8,-1).toLowerCase())}),jC=function(e){return e=e.toLowerCase(),function(t){return DC(t)===e}},PC=function(e){return function(t){return typeof t===e}},OC=Array.isArray,qC=PC("undefined");var _C=jC("ArrayBuffer");var $C=PC("string"),ec=PC("function"),tc=PC("number"),nc=function(e){return null!==e&&"object"===typeof e},gc=function(e){if("object"!==DC(e))return!1;var t=TC(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},oc=jC("Date"),lc=jC("File"),ac=jC("Blob"),rc=jC("FileList"),Ic=jC("URLSearchParams");function ic(e,t){var n,g,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=o.allOwnKeys,a=void 0!==l&&l;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),OC(e))for(n=0,g=e.length;n<g;n++)t.call(null,e[n],n,e);else{var r,I=a?Object.getOwnPropertyNames(e):Object.keys(e),i=I.length;for(n=0;n<i;n++)r=I[n],t.call(null,e[r],r,e)}}var Cc,cc=(Cc="undefined"!==typeof Uint8Array&&TC(Uint8Array),function(e){return Cc&&e instanceof Cc}),uc=jC("HTMLFormElement"),sc=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),dc=jC("RegExp"),Ac=function(e,t){var n=Object.getOwnPropertyDescriptors(e),g={};ic(n,(function(n,o){!1!==t(n,o,e)&&(g[o]=n)})),Object.defineProperties(e,g)},mc={isArray:OC,isArrayBuffer:_C,isBuffer:function(e){return null!==e&&!qC(e)&&null!==e.constructor&&!qC(e.constructor)&&ec(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||QC.call(e)===t||ec(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&_C(e.buffer)},isString:$C,isNumber:tc,isBoolean:function(e){return!0===e||!1===e},isObject:nc,isPlainObject:gc,isUndefined:qC,isDate:oc,isFile:lc,isBlob:ac,isRegExp:dc,isFunction:ec,isStream:function(e){return nc(e)&&ec(e.pipe)},isURLSearchParams:Ic,isTypedArray:cc,isFileList:rc,forEach:ic,merge:function e(){for(var t={},n=function(n,g){gc(t[g])&&gc(n)?t[g]=e(t[g],n):gc(n)?t[g]=e({},n):OC(n)?t[g]=n.slice():t[g]=n},g=0,o=arguments.length;g<o;g++)arguments[g]&&ic(arguments[g],n);return t},extend:function(e,t,n){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=g.allOwnKeys;return ic(t,(function(t,g){n&&ec(t)?e[g]=LC(t,n):e[g]=t}),{allOwnKeys:o}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,g){e.prototype=Object.create(t.prototype,g),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,g){var o,l,a,r={};if(t=t||{},null==e)return t;do{for(l=(o=Object.getOwnPropertyNames(e)).length;l-- >0;)a=o[l],g&&!g(a,e,t)||r[a]||(t[a]=e[a],r[a]=!0);e=!1!==n&&TC(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:DC,kindOfTest:jC,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var g=e.indexOf(t,n);return-1!==g&&g===n},toArray:function(e){if(!e)return null;if(OC(e))return e;var t=e.length;if(!tc(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,g=(e&&e[Symbol.iterator]).call(e);(n=g.next())&&!n.done;){var o=n.value;t.call(e,o[0],o[1])}},matchAll:function(e,t){for(var n,g=[];null!==(n=e.exec(t));)g.push(n);return g},isHTMLForm:uc,hasOwnProperty:sc,hasOwnProp:sc,reduceDescriptors:Ac,freezeMethods:function(e){Ac(e,(function(t,n){var g=e[n];ec(g)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},g=function(e){e.forEach((function(e){n[e]=!0}))};return OC(e)?g(e):g(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t}};function bc(e,t,n,g,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),g&&(this.request=g),o&&(this.response=o)}mc.inherits(bc,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var pc=bc.prototype,hc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){hc[e]={value:e}})),Object.defineProperties(bc,hc),Object.defineProperty(pc,"isAxiosError",{value:!0}),bc.from=function(e,t,n,g,o,l){var a=Object.create(pc);return mc.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),bc.call(a,e.message,t,n,g,o),a.cause=e,a.name=e.name,l&&Object.assign(a,l),a};var fc=bc,yc=n(7473);function Zc(e){return mc.isPlainObject(e)||mc.isArray(e)}function vc(e){return mc.endsWith(e,"[]")?e.slice(0,-2):e}function Gc(e,t,n){return e?e.concat(t).map((function(e,t){return e=vc(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var Bc=mc.toFlatObject(mc,{},null,(function(e){return/^is[A-Z]/.test(e)}));var Sc=function(e,t,n){if(!mc.isObject(e))throw new TypeError("target must be an object");t=t||new(yc||FormData);var g,o=(n=mc.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!mc.isUndefined(t[e])}))).metaTokens,l=n.visitor||C,a=n.dots,r=n.indexes,I=(n.Blob||"undefined"!==typeof Blob&&Blob)&&((g=t)&&mc.isFunction(g.append)&&"FormData"===g[Symbol.toStringTag]&&g[Symbol.iterator]);if(!mc.isFunction(l))throw new TypeError("visitor must be a function");function i(e){if(null===e)return"";if(mc.isDate(e))return e.toISOString();if(!I&&mc.isBlob(e))throw new fc("Blob is not supported. Use a Buffer instead.");return mc.isArrayBuffer(e)||mc.isTypedArray(e)?I&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function C(e,n,g){var l=e;if(e&&!g&&"object"===typeof e)if(mc.endsWith(n,"{}"))n=o?n:n.slice(0,-2),e=JSON.stringify(e);else if(mc.isArray(e)&&function(e){return mc.isArray(e)&&!e.some(Zc)}(e)||mc.isFileList(e)||mc.endsWith(n,"[]")&&(l=mc.toArray(e)))return n=vc(n),l.forEach((function(e,g){!mc.isUndefined(e)&&null!==e&&t.append(!0===r?Gc([n],g,a):null===r?n:n+"[]",i(e))})),!1;return!!Zc(e)||(t.append(Gc(g,n,a),i(e)),!1)}var c=[],u=Object.assign(Bc,{defaultVisitor:C,convertValue:i,isVisitable:Zc});if(!mc.isObject(e))throw new TypeError("data must be an object");return function e(n,g){if(!mc.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+g.join("."));c.push(n),mc.forEach(n,(function(n,o){!0===(!(mc.isUndefined(n)||null===n)&&l.call(t,n,mc.isString(o)?o.trim():o,g,u))&&e(n,g?g.concat(o):[o])})),c.pop()}}(e),t};function Vc(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Wc(e,t){this._pairs=[],e&&Sc(e,this,t)}var Rc=Wc.prototype;Rc.append=function(e,t){this._pairs.push([e,t])},Rc.toString=function(e){var t=e?function(t){return e.call(this,t,Vc)}:Vc;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var kc=Wc;function Xc(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Jc(e,t,n){if(!t)return e;var g,o=n&&n.encode||Xc,l=n&&n.serialize;if(g=l?l(t,n):mc.isURLSearchParams(t)?t.toString():new kc(t,n).toString(o)){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+g}return e}var Yc=function(){function e(){i(this,e),this.handlers=[]}return c(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){mc.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),wc=Yc,Hc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Nc="undefined"!==typeof URLSearchParams?URLSearchParams:kc,Kc=FormData,Fc=function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),xc={isBrowser:!0,classes:{URLSearchParams:Nc,FormData:Kc,Blob:Blob},isStandardBrowserEnv:Fc,protocols:["http","https","file","blob","url","data"]};var Ec=function(e){function t(e,n,g,o){var l=e[o++],a=Number.isFinite(+l),r=o>=e.length;return l=!l&&mc.isArray(g)?g.length:l,r?(mc.hasOwnProp(g,l)?g[l]=[g[l],n]:g[l]=n,!a):(g[l]&&mc.isObject(g[l])||(g[l]=[]),t(e,n,g[l],o)&&mc.isArray(g[l])&&(g[l]=function(e){var t,n,g={},o=Object.keys(e),l=o.length;for(t=0;t<l;t++)g[n=o[t]]=e[n];return g}(g[l])),!a)}if(mc.isFormData(e)&&mc.isFunction(e.entries)){var n={};return mc.forEachEntry(e,(function(e,g){t(function(e){return mc.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),g,n,0)})),n}return null};var Mc=xc.isStandardBrowserEnv?{write:function(e,t,n,g,o,l){var a=[];a.push(e+"="+encodeURIComponent(t)),mc.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),mc.isString(g)&&a.push("path="+g),mc.isString(o)&&a.push("domain="+o),!0===l&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function zc(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var Lc=xc.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function g(e){var g=e;return t&&(n.setAttribute("href",g),g=n.href),n.setAttribute("href",g),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=g(window.location.href),function(t){var n=mc.isString(t)?g(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};function Uc(e,t,n){fc.call(this,null==e?"canceled":e,fc.ERR_CANCELED,t,n),this.name="CanceledError"}mc.inherits(Uc,fc,{__CANCEL__:!0});var Qc=Uc;var Tc=mc.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Dc=Symbol("internals"),jc=Symbol("defaults");function Pc(e){return e&&String(e).trim().toLowerCase()}function Oc(e){return!1===e||null==e?e:mc.isArray(e)?e.map(Oc):String(e)}function qc(e,t,n,g){return mc.isFunction(g)?g.call(this,t,n):mc.isString(t)?mc.isString(g)?-1!==t.indexOf(g):mc.isRegExp(g)?g.test(t):void 0:void 0}function _c(e,t){t=t.toLowerCase();for(var n,g=Object.keys(e),o=g.length;o-- >0;)if(t===(n=g[o]).toLowerCase())return n;return null}function $c(e,t){e&&this.set(e),this[jc]=t||null}Object.assign($c.prototype,{set:function(e,t,n){var g=this;function o(e,t,n){var o=Pc(t);if(!o)throw new Error("header name must be a non-empty string");var l=_c(g,o);(!l||!0===n||!1!==g[l]&&!1!==n)&&(g[l||t]=Oc(e))}return mc.isPlainObject(e)?mc.forEach(e,(function(e,n){o(e,n,t)})):o(t,e,n),this},get:function(e,t){if(e=Pc(e)){var n=_c(this,e);if(n){var g=this[n];if(!t)return g;if(!0===t)return function(e){for(var t,n=Object.create(null),g=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=g.exec(e);)n[t[1]]=t[2];return n}(g);if(mc.isFunction(t))return t.call(this,g,n);if(mc.isRegExp(t))return t.exec(g);throw new TypeError("parser must be boolean|regexp|function")}}},has:function(e,t){if(e=Pc(e)){var n=_c(this,e);return!(!n||t&&!qc(0,this[n],n,t))}return!1},delete:function(e,t){var n=this,g=!1;function o(e){if(e=Pc(e)){var o=_c(n,e);!o||t&&!qc(0,n[o],o,t)||(delete n[o],g=!0)}}return mc.isArray(e)?e.forEach(o):o(e),g},clear:function(){return Object.keys(this).forEach(this.delete.bind(this))},normalize:function(e){var t=this,n={};return mc.forEach(this,(function(g,o){var l=_c(n,o);if(l)return t[l]=Oc(g),void delete t[o];var a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(o):String(o).trim();a!==o&&delete t[o],t[a]=Oc(g),n[a]=!0})),this},toJSON:function(e){var t=Object.create(null);return mc.forEach(Object.assign({},this[jc]||null,this),(function(n,g){null!=n&&!1!==n&&(t[g]=e&&mc.isArray(n)?n.join(", "):n)})),t}}),Object.assign($c,{from:function(e){return mc.isString(e)?new this(function(e){var t,n,g,o={};return e&&e.split("\n").forEach((function(e){g=e.indexOf(":"),t=e.substring(0,g).trim().toLowerCase(),n=e.substring(g+1).trim(),!t||o[t]&&Tc[t]||("set-cookie"===t?o[t]?o[t].push(n):o[t]=[n]:o[t]=o[t]?o[t]+", "+n:n)})),o}(e)):e instanceof this?e:new this(e)},accessor:function(e){var t=(this[Dc]=this[Dc]={accessors:{}}).accessors,n=this.prototype;function g(e){var g=Pc(e);t[g]||(!function(e,t){var n=mc.toCamelCase(" "+t);["get","set","has"].forEach((function(g){Object.defineProperty(e,g+n,{value:function(e,n,o){return this[g].call(this,t,e,n,o)},configurable:!0})}))}(n,e),t[g]=!0)}return mc.isArray(e)?e.forEach(g):g(e),this}}),$c.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]),mc.freezeMethods($c.prototype),mc.freezeMethods($c);var eu=$c;var tu=function(e,t){e=e||10;var n,g=new Array(e),o=new Array(e),l=0,a=0;return t=void 0!==t?t:1e3,function(r){var I=Date.now(),i=o[a];n||(n=I),g[l]=r,o[l]=I;for(var C=a,c=0;C!==l;)c+=g[C++],C%=e;if((l=(l+1)%e)===a&&(a=(a+1)%e),!(I-n<t)){var u=i&&I-i;return u?Math.round(1e3*c/u):void 0}}};function nu(e,t){var n=0,g=tu(50,250);return function(o){var l=o.loaded,a=o.lengthComputable?o.total:void 0,r=l-n,I=g(r);n=l;var i={loaded:l,total:a,progress:a?l/a:void 0,bytes:r,rate:I||void 0,estimated:I&&a&&l<=a?(a-l)/I:void 0};i[t?"download":"upload"]=!0,e(i)}}function gu(e){return new Promise((function(t,n){var g,o=e.data,l=eu.from(e.headers).normalize(),a=e.responseType;function r(){e.cancelToken&&e.cancelToken.unsubscribe(g),e.signal&&e.signal.removeEventListener("abort",g)}mc.isFormData(o)&&xc.isStandardBrowserEnv&&l.setContentType(!1);var I=new XMLHttpRequest;if(e.auth){var i=e.auth.username||"",C=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";l.set("Authorization","Basic "+btoa(i+":"+C))}var c=zc(e.baseURL,e.url);function u(){if(I){var g=eu.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders());!function(e,t,n){var g=n.config.validateStatus;n.status&&g&&!g(n.status)?t(new fc("Request failed with status code "+n.status,[fc.ERR_BAD_REQUEST,fc.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),r()}),(function(e){n(e),r()}),{data:a&&"text"!==a&&"json"!==a?I.response:I.responseText,status:I.status,statusText:I.statusText,headers:g,config:e,request:I}),I=null}}if(I.open(e.method.toUpperCase(),Jc(c,e.params,e.paramsSerializer),!0),I.timeout=e.timeout,"onloadend"in I?I.onloadend=u:I.onreadystatechange=function(){I&&4===I.readyState&&(0!==I.status||I.responseURL&&0===I.responseURL.indexOf("file:"))&&setTimeout(u)},I.onabort=function(){I&&(n(new fc("Request aborted",fc.ECONNABORTED,e,I)),I=null)},I.onerror=function(){n(new fc("Network Error",fc.ERR_NETWORK,e,I)),I=null},I.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",g=e.transitional||Hc;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new fc(t,g.clarifyTimeoutError?fc.ETIMEDOUT:fc.ECONNABORTED,e,I)),I=null},xc.isStandardBrowserEnv){var s=(e.withCredentials||Lc(c))&&e.xsrfCookieName&&Mc.read(e.xsrfCookieName);s&&l.set(e.xsrfHeaderName,s)}void 0===o&&l.setContentType(null),"setRequestHeader"in I&&mc.forEach(l.toJSON(),(function(e,t){I.setRequestHeader(t,e)})),mc.isUndefined(e.withCredentials)||(I.withCredentials=!!e.withCredentials),a&&"json"!==a&&(I.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&I.addEventListener("progress",nu(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&I.upload&&I.upload.addEventListener("progress",nu(e.onUploadProgress)),(e.cancelToken||e.signal)&&(g=function(t){I&&(n(!t||t.type?new Qc(null,e,I):t),I.abort(),I=null)},e.cancelToken&&e.cancelToken.subscribe(g),e.signal&&(e.signal.aborted?g():e.signal.addEventListener("abort",g)));var d=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(c);d&&-1===xc.protocols.indexOf(d)?n(new fc("Unsupported protocol "+d+":",fc.ERR_BAD_REQUEST,e)):I.send(o||null)}))}var ou={http:gu,xhr:gu},lu=function(e){if(mc.isString(e)){var t=ou[e];if(!e)throw Error(mc.hasOwnProp(e)?"Adapter '".concat(e,"' is not available in the build"):"Can not resolve adapter '".concat(e,"'"));return t}if(!mc.isFunction(e))throw new TypeError("adapter is not a function");return e},au={"Content-Type":"application/x-www-form-urlencoded"};var ru={transitional:Hc,adapter:function(){var e;return"undefined"!==typeof XMLHttpRequest?e=lu("xhr"):"undefined"!==typeof process&&"process"===mc.kindOf(process)&&(e=lu("http")),e}(),transformRequest:[function(e,t){var n,g=t.getContentType()||"",o=g.indexOf("application/json")>-1,l=mc.isObject(e);if(l&&mc.isHTMLForm(e)&&(e=new FormData(e)),mc.isFormData(e))return o&&o?JSON.stringify(Ec(e)):e;if(mc.isArrayBuffer(e)||mc.isBuffer(e)||mc.isStream(e)||mc.isFile(e)||mc.isBlob(e))return e;if(mc.isArrayBufferView(e))return e.buffer;if(mc.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(l){if(g.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Sc(e,new xc.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,g){return xc.isNode&&mc.isBuffer(e)?(this.append(t,e.toString("base64")),!1):g.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=mc.isFileList(e))||g.indexOf("multipart/form-data")>-1){var a=this.env&&this.env.FormData;return Sc(n?{"files[]":e}:e,a&&new a,this.formSerializer)}}return l||o?(t.setContentType("application/json",!1),function(e,t,n){if(mc.isString(e))try{return(t||JSON.parse)(e),mc.trim(e)}catch(g){if("SyntaxError"!==g.name)throw g}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||ru.transitional,n=t&&t.forcedJSONParsing,g="json"===this.responseType;if(e&&mc.isString(e)&&(n&&!this.responseType||g)){var o=!(t&&t.silentJSONParsing)&&g;try{return JSON.parse(e)}catch(l){if(o){if("SyntaxError"===l.name)throw fc.from(l,fc.ERR_BAD_RESPONSE,this,null,this.response);throw l}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xc.classes.FormData,Blob:xc.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};mc.forEach(["delete","get","head"],(function(e){ru.headers[e]={}})),mc.forEach(["post","put","patch"],(function(e){ru.headers[e]=mc.merge(au)}));var Iu=ru;function iu(e,t){var n=this||Iu,g=t||n,o=eu.from(g.headers),l=g.data;return mc.forEach(e,(function(e){l=e.call(n,l,o.normalize(),t?t.status:void 0)})),o.normalize(),l}function Cu(e){return!(!e||!e.__CANCEL__)}function cu(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Qc}function uu(e){return cu(e),e.headers=eu.from(e.headers),e.data=iu.call(e,e.transformRequest),(e.adapter||Iu.adapter)(e).then((function(t){return cu(e),t.data=iu.call(e,e.transformResponse,t),t.headers=eu.from(t.headers),t}),(function(t){return Cu(t)||(cu(e),t&&t.response&&(t.response.data=iu.call(e,e.transformResponse,t.response),t.response.headers=eu.from(t.response.headers))),Promise.reject(t)}))}function su(e,t){t=t||{};var n={};function g(e,t){return mc.isPlainObject(e)&&mc.isPlainObject(t)?mc.merge(e,t):mc.isPlainObject(t)?mc.merge({},t):mc.isArray(t)?t.slice():t}function o(n){return mc.isUndefined(t[n])?mc.isUndefined(e[n])?void 0:g(void 0,e[n]):g(e[n],t[n])}function l(e){if(!mc.isUndefined(t[e]))return g(void 0,t[e])}function a(n){return mc.isUndefined(t[n])?mc.isUndefined(e[n])?void 0:g(void 0,e[n]):g(void 0,t[n])}function r(n){return n in t?g(e[n],t[n]):n in e?g(void 0,e[n]):void 0}var I={url:l,method:l,data:l,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:r};return mc.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=I[e]||o,g=t(e);mc.isUndefined(g)&&t!==r||(n[e]=g)})),n}var du="1.1.3",Au={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){Au[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var mu={};Au.transitional=function(e,t,n){function g(e,t){return"[Axios v1.1.3] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,o,l){if(!1===e)throw new fc(g(o," has been removed"+(t?" in "+t:"")),fc.ERR_DEPRECATED);return t&&!mu[o]&&(mu[o]=!0,console.warn(g(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,l)}};var bu={assertOptions:function(e,t,n){if("object"!==typeof e)throw new fc("options must be an object",fc.ERR_BAD_OPTION_VALUE);for(var g=Object.keys(e),o=g.length;o-- >0;){var l=g[o],a=t[l];if(a){var r=e[l],I=void 0===r||a(r,l,e);if(!0!==I)throw new fc("option "+l+" must be "+I,fc.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new fc("Unknown option "+l,fc.ERR_BAD_OPTION)}},validators:Au},pu=bu.validators,hu=function(){function e(t){i(this,e),this.defaults=t,this.interceptors={request:new wc,response:new wc}}return c(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n=t=su(this.defaults,t),g=n.transitional,o=n.paramsSerializer;void 0!==g&&bu.assertOptions(g,{silentJSONParsing:pu.transitional(pu.boolean),forcedJSONParsing:pu.transitional(pu.boolean),clarifyTimeoutError:pu.transitional(pu.boolean)},!1),void 0!==o&&bu.assertOptions(o,{encode:pu.function,serialize:pu.function},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();var l=t.headers&&mc.merge(t.headers.common,t.headers[t.method]);l&&mc.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),t.headers=new eu(t.headers,l);var a=[],r=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));var I,i=[];this.interceptors.response.forEach((function(e){i.push(e.fulfilled,e.rejected)}));var C,c=0;if(!r){var u=[uu.bind(this),void 0];for(u.unshift.apply(u,a),u.push.apply(u,i),C=u.length,I=Promise.resolve(t);c<C;)I=I.then(u[c++],u[c++]);return I}C=a.length;var s=t;for(c=0;c<C;){var d=a[c++],A=a[c++];try{s=d(s)}catch(m){A.call(this,m);break}}try{I=uu.call(this,s)}catch(m){return Promise.reject(m)}for(c=0,C=i.length;c<C;)I=I.then(i[c++],i[c++]);return I}},{key:"getUri",value:function(e){return Jc(zc((e=su(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();mc.forEach(["delete","get","head","options"],(function(e){hu.prototype[e]=function(t,n){return this.request(su(n||{},{method:e,url:t,data:(n||{}).data}))}})),mc.forEach(["post","put","patch"],(function(e){function t(t){return function(n,g,o){return this.request(su(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:g}))}}hu.prototype[e]=t(),hu.prototype[e+"Form"]=t(!0)}));var fu=hu,yu=function(){function e(t){if(i(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var g=this;this.promise.then((function(e){if(g._listeners){for(var t=g._listeners.length;t-- >0;)g._listeners[t](e);g._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){g.subscribe(e),t=e})).then(e);return n.cancel=function(){g.unsubscribe(t)},n},t((function(e,t,o){g.reason||(g.reason=new Qc(e,t,o),n(g.reason))}))}return c(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t,n=new e((function(e){t=e}));return{token:n,cancel:t}}}]),e}(),Zu=yu;var vu=function e(t){var n=new fu(t),g=LC(fu.prototype.request,n);return mc.extend(g,fu.prototype,n,{allOwnKeys:!0}),mc.extend(g,n,null,{allOwnKeys:!0}),g.create=function(n){return e(su(t,n))},g}(Iu);vu.Axios=fu,vu.CanceledError=Qc,vu.CancelToken=Zu,vu.isCancel=Cu,vu.VERSION=du,vu.toFormData=Sc,vu.AxiosError=fc,vu.Cancel=vu.CanceledError,vu.all=function(e){return Promise.all(e)},vu.spread=function(e){return function(t){return e.apply(null,t)}},vu.isAxiosError=function(e){return mc.isObject(e)&&!0===e.isAxiosError},vu.formToJSON=function(e){return Ec(mc.isHTMLForm(e)?new FormData(e):e)};var Gu=vu,Bu=(Gu.Axios,Gu.AxiosError,Gu.CanceledError,Gu.isCancel,Gu.CancelToken,Gu.VERSION,Gu.all,Gu.Cancel,Gu.isAxiosError,Gu.spread,Gu.toFormData,Gu),Su={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},Vu=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:Su}))};Vu.displayName="UserOutlined";var Wu=t.forwardRef(Vu),Ru={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},ku=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:Ru}))};ku.displayName="TableOutlined";var Xu=t.forwardRef(ku),Ju={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 00-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 100 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 00-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 00-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6z"}}]},name:"shopping-cart",theme:"outlined"},Yu=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:Ju}))};Yu.displayName="ShoppingCartOutlined";var wu=t.forwardRef(Yu),Hu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"},Nu=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:Hu}))};Nu.displayName="CalendarOutlined";var Ku=t.forwardRef(Nu),Fu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"},xu=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:Fu}))};xu.displayName="SettingOutlined";var Eu=t.forwardRef(xu),Mu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 264c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48zm-8 136H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM480 544H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 308H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm356.8-74.4c29-26.3 47.2-64.3 47.2-106.6 0-79.5-64.5-144-144-144s-144 64.5-144 144c0 42.3 18.2 80.3 47.2 106.6-57 32.5-96.2 92.7-99.2 162.1-.2 4.5 3.5 8.3 8 8.3h48.1c4.2 0 7.7-3.3 8-7.6C564 871.2 621.7 816 692 816s128 55.2 131.9 124.4c.2 4.2 3.7 7.6 8 7.6H880c4.6 0 8.2-3.8 8-8.3-2.9-69.5-42.2-129.6-99.2-162.1zM692 591c44.2 0 80 35.8 80 80s-35.8 80-80 80-80-35.8-80-80 35.8-80 80-80z"}}]},name:"solution",theme:"outlined"},zu=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:Mu}))};zu.displayName="SolutionOutlined";var Lu=t.forwardRef(zu),Uu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},Qu=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:Uu}))};Qu.displayName="CloseOutlined";var Tu=t.forwardRef(Qu),Du={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"},ju=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:Du}))};ju.displayName="MenuOutlined";var Pu=t.forwardRef(ju),Ou={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},qu=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:Ou}))};qu.displayName="EllipsisOutlined";var _u=t.forwardRef(qu),$u=n(9613),es=n.n($u);function ts(e){var n=t.useRef();n.current=e;var g=t.useCallback((function(){for(var e,t=arguments.length,g=new Array(t),o=0;o<t;o++)g[o]=arguments[o];return null===(e=n.current)||void 0===e?void 0:e.call.apply(e,[n].concat(g))}),[]);return g}var ns,gs=Kt()?t.useLayoutEffect:t.useEffect,os=gs;function ls(e){var n=t.useRef(!1),g=Z(t.useState(e),2),o=g[0],l=g[1];return t.useEffect((function(){return n.current=!1,function(){n.current=!0}}),[]),[o,function(e,t){t&&n.current||l(e)}]}function as(e){return void 0!==e}function rs(e,n){var g=n||{},o=g.defaultValue,l=g.value,a=g.onChange,r=g.postState,I=Z(ls((function(){var t,n=void 0;return as(l)?(n=l,t=ns.PROP):as(o)?(n="function"===typeof o?o():o,t=ns.PROP):(n="function"===typeof e?e():e,t=ns.INNER),[n,t,n]})),2),i=I[0],C=I[1],c=as(l)?l:i[0],u=r?r(c):c;!function(e,n){var g=t.useRef(!0);gs((function(){if(!g.current)return e()}),n),gs((function(){return g.current=!1,function(){g.current=!0}}),[])}((function(){C((function(e){var t=Z(e,1)[0];return[l,ns.PROP,t]}))}),[l]);var s=t.useRef(),d=ts((function(e,t){C((function(t){var n=Z(t,3),g=n[0],o=n[1],l=n[2],a="function"===typeof e?e(g):e;if(a===g)return t;var r=o===ns.INNER&&s.current!==l?l:g;return[a,ns.INNER,r]}),t)})),A=ts(a);return os((function(){var e=Z(i,3),t=e[0],n=e[1],g=e[2];t!==g&&n===ns.INNER&&(A(t,g),s.current=g)}),[i]),[u,d]}!function(e){e[e.INNER=0]="INNER",e[e.PROP=1]="PROP"}(ns||(ns={}));var Is=n(3873);function is(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},g=[];return t.Children.forEach(e,(function(e){(void 0!==e&&null!==e||n.keepEmpty)&&(Array.isArray(e)?g=g.concat(is(e)):(0,Is.isFragment)(e)&&e.props?g=g.concat(is(e.props.children,n)):g.push(e))})),g}function Cs(e,n,g){var o=t.useRef({});return"value"in o.current&&!g(o.current.condition,n)||(o.current.value=e(),o.current.condition=n),o.current.value}function cs(e,t){"function"===typeof e?e(t):"object"===m(e)&&e&&"current"in e&&(e.current=t)}function us(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var g=t.filter((function(e){return e}));return g.length<=1?g[0]:function(e){t.forEach((function(t){cs(t,e)}))}}function ss(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Cs((function(){return us.apply(void 0,t)}),t,(function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}))}function ds(e){var t,n,g=(0,Is.isMemo)(e)?e.type.type:e.type;return!("function"===typeof g&&!(null===(t=g.prototype)||void 0===t?void 0:t.render))&&!("function"===typeof e&&!(null===(n=e.prototype)||void 0===n?void 0:n.render))}var As=n(4164),ms=n.t(As,2);function bs(e){return e instanceof HTMLElement?e:As.findDOMNode(e)}var ps=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,g){return e[0]===t&&(n=g,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),g=this.__entries__[n];return g&&g[1]},t.prototype.set=function(t,n){var g=e(this.__entries__,t);~g?this.__entries__[g][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,g=e(n,t);~g&&n.splice(g,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,g=this.__entries__;n<g.length;n++){var o=g[n];e.call(t,o[1],o[0])}},t}()}(),hs="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,fs="undefined"!==typeof n.g&&n.g.Math===Math?n.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),ys="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(fs):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var Zs=["top","right","bottom","left","width","height","size","weight"],vs="undefined"!==typeof MutationObserver,Gs=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,g=!1,o=0;function l(){n&&(n=!1,e()),g&&r()}function a(){ys(l)}function r(){var e=Date.now();if(n){if(e-o<2)return;g=!0}else n=!0,g=!1,setTimeout(a,t);o=e}return r}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){hs&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),vs?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){hs&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t,g=Zs.some((function(e){return!!~n.indexOf(e)}));g&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Bs=function(e,t){for(var n=0,g=Object.keys(t);n<g.length;n++){var o=g[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},Ss=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||fs},Vs=Ys(0,0,0,0);function Ws(e){return parseFloat(e)||0}function Rs(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+Ws(e["border-"+n+"-width"])}),0)}function ks(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return Vs;var g=Ss(e).getComputedStyle(e),o=function(e){for(var t={},n=0,g=["top","right","bottom","left"];n<g.length;n++){var o=g[n],l=e["padding-"+o];t[o]=Ws(l)}return t}(g),l=o.left+o.right,a=o.top+o.bottom,r=Ws(g.width),I=Ws(g.height);if("border-box"===g.boxSizing&&(Math.round(r+l)!==t&&(r-=Rs(g,"left","right")+l),Math.round(I+a)!==n&&(I-=Rs(g,"top","bottom")+a)),!function(e){return e===Ss(e).document.documentElement}(e)){var i=Math.round(r+l)-t,C=Math.round(I+a)-n;1!==Math.abs(i)&&(r-=i),1!==Math.abs(C)&&(I-=C)}return Ys(o.left,o.top,r,I)}var Xs="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof Ss(e).SVGGraphicsElement}:function(e){return e instanceof Ss(e).SVGElement&&"function"===typeof e.getBBox};function Js(e){return hs?Xs(e)?function(e){var t=e.getBBox();return Ys(0,0,t.width,t.height)}(e):ks(e):Vs}function Ys(e,t,n,g){return{x:e,y:t,width:n,height:g}}var ws=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ys(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=Js(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),Hs=function(e,t){var n=function(e){var t=e.x,n=e.y,g=e.width,o=e.height,l="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(l.prototype);return Bs(a,{x:t,y:n,width:g,height:o,top:n,right:t+g,bottom:o+n,left:t}),a}(t);Bs(this,{target:e,contentRect:n})},Ns=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new ps,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof Ss(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new ws(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof Ss(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new Hs(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Ks="undefined"!==typeof WeakMap?new WeakMap:new ps,Fs=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Gs.getInstance(),g=new Ns(t,n,this);Ks.set(this,g)};["observe","unobserve","disconnect"].forEach((function(e){Fs.prototype[e]=function(){var t;return(t=Ks.get(this))[e].apply(t,arguments)}}));var xs="undefined"!==typeof fs.ResizeObserver?fs.ResizeObserver:Fs,Es=new Map;var Ms=new xs((function(e){e.forEach((function(e){var t,n=e.target;null===(t=Es.get(n))||void 0===t||t.forEach((function(e){return e(n)}))}))}));var zs=function(e){s(n,e);var t=h(n);function n(){return i(this,n),t.apply(this,arguments)}return c(n,[{key:"render",value:function(){return this.props.children}}]),n}(t.Component),Ls=t.createContext(null);function Us(e){var n=e.children,g=e.disabled,o=t.useRef(null),l=t.useRef(null),a=t.useContext(Ls),r="function"===typeof n,I=r?n(o):n,i=t.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),C=!r&&t.isValidElement(I)&&ds(I),c=C?I.ref:null,u=t.useMemo((function(){return us(c,o)}),[c,o]),s=t.useRef(e);s.current=e;var d=t.useCallback((function(e){var t=s.current,n=t.onResize,g=t.data,o=e.getBoundingClientRect(),l=o.width,r=o.height,I=e.offsetWidth,C=e.offsetHeight,c=Math.floor(l),u=Math.floor(r);if(i.current.width!==c||i.current.height!==u||i.current.offsetWidth!==I||i.current.offsetHeight!==C){var d={width:c,height:u,offsetWidth:I,offsetHeight:C};i.current=d;var A=I===Math.round(l)?l:I,m=C===Math.round(r)?r:C,b=$e($e({},d),{},{offsetWidth:A,offsetHeight:m});null===a||void 0===a||a(b,e,g),n&&Promise.resolve().then((function(){n(b,e)}))}}),[]);return t.useEffect((function(){var e,t,n=bs(o.current)||bs(l.current);return n&&!g&&(e=n,t=d,Es.has(e)||(Es.set(e,new Set),Ms.observe(e)),Es.get(e).add(t)),function(){return function(e,t){Es.has(e)&&(Es.get(e).delete(t),Es.get(e).size||(Ms.unobserve(e),Es.delete(e)))}(n,d)}}),[o.current,g]),t.createElement(zs,{ref:l},C?t.cloneElement(I,{ref:u}):I)}function Qs(e){var n=e.children;return("function"===typeof n?[n]:is(n)).map((function(n,g){var o=(null===n||void 0===n?void 0:n.key)||"".concat("rc-observer-key","-").concat(g);return t.createElement(Us,Ke({},e,{key:o}),n)}))}Qs.Collection=function(e){var n=e.children,g=e.onBatchResize,o=t.useRef(0),l=t.useRef([]),a=t.useContext(Ls),r=t.useCallback((function(e,t,n){o.current+=1;var r=o.current;l.current.push({size:e,element:t,data:n}),Promise.resolve().then((function(){r===o.current&&(null===g||void 0===g||g(l.current),l.current=[])})),null===a||void 0===a||a(e,t,n)}),[g,a]);return t.createElement(Ls.Provider,{value:r},n)};var Ts=Qs,Ds=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],js=void 0;function Ps(e,n){var g=e.prefixCls,o=e.invalidate,l=e.item,a=e.renderItem,r=e.responsive,I=e.responsiveDisabled,i=e.registerSize,C=e.itemKey,c=e.className,u=e.style,s=e.children,d=e.display,A=e.order,m=e.component,b=void 0===m?"div":m,p=tt(e,Ds),h=r&&!d;function f(e){i(C,e)}t.useEffect((function(){return function(){f(null)}}),[]);var y,Z=a&&l!==js?a(l):s;o||(y={opacity:h?0:1,height:h?0:js,overflowY:h?"hidden":js,order:r?A:js,pointerEvents:h?"none":js,position:h?"absolute":js});var v={};h&&(v["aria-hidden"]=!0);var G=t.createElement(b,Ke({className:xe()(!o&&g,c),style:$e($e({},y),u)},v,p,{ref:n}),Z);return r&&(G=t.createElement(Ts,{onResize:function(e){f(e.offsetWidth)},disabled:I},G)),G}var Os=t.forwardRef(Ps);Os.displayName="Item";var qs=Os,_s=function(e){return+setTimeout(e,16)},$s=function(e){return clearTimeout(e)};"undefined"!==typeof window&&"requestAnimationFrame"in window&&(_s=function(e){return window.requestAnimationFrame(e)},$s=function(e){return window.cancelAnimationFrame(e)});var ed=0,td=new Map;function nd(e){td.delete(e)}function gd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=ed+=1;function g(t){if(0===t)nd(n),e();else{var o=_s((function(){g(t-1)}));td.set(n,o)}}return g(t),n}gd.cancel=function(e){var t=td.get(e);return nd(t),$s(t)};var od=["component"],ld=["className"],ad=["className"],rd=function(e,n){var g=t.useContext(cd);if(!g){var o=e.component,l=void 0===o?"div":o,a=tt(e,od);return t.createElement(l,Ke({},a,{ref:n}))}var r=g.className,I=tt(g,ld),i=e.className,C=tt(e,ad);return t.createElement(cd.Provider,{value:null},t.createElement(qs,Ke({ref:n,className:xe()(r,i)},I,C)))},Id=t.forwardRef(rd);Id.displayName="RawItem";var id=Id,Cd=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],cd=t.createContext(null),ud="responsive",sd="invalidate";function dd(e){return"+ ".concat(e.length," ...")}function Ad(e,n){var g=e.prefixCls,o=void 0===g?"rc-overflow":g,l=e.data,a=void 0===l?[]:l,r=e.renderItem,I=e.renderRawItem,i=e.itemKey,C=e.itemWidth,c=void 0===C?10:C,u=e.ssr,s=e.style,d=e.className,A=e.maxCount,m=e.renderRest,b=e.renderRawRest,p=e.suffix,h=e.component,f=void 0===h?"div":h,y=e.itemComponent,v=e.onVisibleChange,G=tt(e,Cd),B=function(){var e=Z(ls({}),2)[1],n=(0,t.useRef)([]),g=0,o=0;return function(t){var l=g;return g+=1,n.current.length<l+1&&(n.current[l]=t),[n.current[l],function(t){n.current[l]="function"===typeof t?t(n.current[l]):t,gd.cancel(o),o=gd((function(){e({},!0)}))}]}}(),S="full"===u,V=Z(B(null),2),W=V[0],R=V[1],k=W||0,X=Z(B(new Map),2),J=X[0],Y=X[1],w=Z(B(0),2),H=w[0],N=w[1],K=Z(B(0),2),F=K[0],x=K[1],E=Z(B(0),2),M=E[0],z=E[1],L=Z((0,t.useState)(null),2),U=L[0],Q=L[1],T=Z((0,t.useState)(null),2),D=T[0],j=T[1],P=t.useMemo((function(){return null===D&&S?Number.MAX_SAFE_INTEGER:D||0}),[D,W]),O=Z((0,t.useState)(!1),2),q=O[0],_=O[1],$="".concat(o,"-item"),ee=Math.max(H,F),te=A===ud,ne=a.length&&te,ge=A===sd,oe=ne||"number"===typeof A&&a.length>A,le=(0,t.useMemo)((function(){var e=a;return ne?e=null===W&&S?a:a.slice(0,Math.min(a.length,k/c)):"number"===typeof A&&(e=a.slice(0,A)),e}),[a,c,W,A,ne]),ae=(0,t.useMemo)((function(){return ne?a.slice(P+1):a.slice(le.length)}),[a,le,ne,P]),re=(0,t.useCallback)((function(e,t){var n;return"function"===typeof i?i(e):null!==(n=i&&(null===e||void 0===e?void 0:e[i]))&&void 0!==n?n:t}),[i]),Ie=(0,t.useCallback)(r||function(e){return e},[r]);function ie(e,t,n){(D!==e||void 0!==t&&t!==U)&&(j(e),n||(_(e<a.length-1),null===v||void 0===v||v(e)),void 0!==t&&Q(t))}function Ce(e,t){Y((function(n){var g=new Map(n);return null===t?g.delete(e):g.set(e,t),g}))}function ce(e){return J.get(re(le[e],e))}os((function(){if(k&&ee&&le){var e=M,t=le.length,n=t-1;if(!t)return void ie(0,null);for(var g=0;g<t;g+=1){var o=ce(g);if(S&&(o=o||0),void 0===o){ie(g-1,void 0,!0);break}if(e+=o,0===n&&e<=k||g===n-1&&e+ce(n)<=k){ie(n,null);break}if(e+ee>k){ie(g-1,e-o-M+F);break}}p&&ce(0)+M>k&&Q(null)}}),[k,J,F,M,re,le]);var ue=q&&!!ae.length,se={};null!==U&&ne&&(se={position:"absolute",left:U,top:0});var de,Ae={prefixCls:$,responsive:ne,component:y,invalidate:ge},me=I?function(e,n){var g=re(e,n);return t.createElement(cd.Provider,{key:g,value:$e($e({},Ae),{},{order:n,item:e,itemKey:g,registerSize:Ce,display:n<=P})},I(e,n))}:function(e,n){var g=re(e,n);return t.createElement(qs,Ke({},Ae,{order:n,key:g,item:e,renderItem:Ie,itemKey:g,registerSize:Ce,display:n<=P}))},be={order:ue?P:Number.MAX_SAFE_INTEGER,className:"".concat($,"-rest"),registerSize:function(e,t){x(t),N(F)},display:ue};if(b)b&&(de=t.createElement(cd.Provider,{value:$e($e({},Ae),be)},b(ae)));else{var pe=m||dd;de=t.createElement(qs,Ke({},Ae,be),"function"===typeof pe?pe(ae):pe)}var he=t.createElement(f,Ke({className:xe()(!ge&&o,d),style:s,ref:n},G),le.map(me),oe?de:null,p&&t.createElement(qs,Ke({},Ae,{responsive:te,responsiveDisabled:!ne,order:P,className:"".concat($,"-suffix"),registerSize:function(e,t){z(t)},display:!0,style:se}),p));return te&&(he=t.createElement(Ts,{onResize:function(e,t){R(t.clientWidth)},disabled:!ne},he)),he}var md=t.forwardRef(Ad);md.displayName="Overflow",md.Item=id,md.RESPONSIVE=ud,md.INVALIDATE=sd;var bd=md,pd={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=pd.F1&&t<=pd.F12)return!1;switch(t){case pd.ALT:case pd.CAPS_LOCK:case pd.CONTEXT_MENU:case pd.CTRL:case pd.DOWN:case pd.END:case pd.ESC:case pd.HOME:case pd.INSERT:case pd.LEFT:case pd.MAC_FF_META:case pd.META:case pd.NUMLOCK:case pd.NUM_CENTER:case pd.PAGE_DOWN:case pd.PAGE_UP:case pd.PAUSE:case pd.PRINT_SCREEN:case pd.RIGHT:case pd.SHIFT:case pd.UP:case pd.WIN_KEY:case pd.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=pd.ZERO&&e<=pd.NINE)return!0;if(e>=pd.NUM_ZERO&&e<=pd.NUM_MULTIPLY)return!0;if(e>=pd.A&&e<=pd.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case pd.SPACE:case pd.QUESTION_MARK:case pd.NUM_PLUS:case pd.NUM_MINUS:case pd.NUM_PERIOD:case pd.NUM_DIVISION:case pd.SEMICOLON:case pd.DASH:case pd.EQUALS:case pd.COMMA:case pd.PERIOD:case pd.SLASH:case pd.APOSTROPHE:case pd.SINGLE_QUOTE:case pd.OPEN_SQUARE_BRACKET:case pd.BACKSLASH:case pd.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},hd=pd,fd=["children","locked"],yd=t.createContext(null);function Zd(e){var n=e.children,g=e.locked,o=tt(e,fd),l=t.useContext(yd),a=Cs((function(){return function(e,t){var n=$e({},e);return Object.keys(t).forEach((function(e){var g=t[e];void 0!==g&&(n[e]=g)})),n}(l,o)}),[l,o],(function(e,t){return!g&&(e[0]!==t[0]||!es()(e[1],t[1]))}));return t.createElement(yd.Provider,{value:a},n)}function vd(e,n,g,o){var l=t.useContext(yd),a=l.activeKey,r=l.onActive,I=l.onInactive,i={active:a===e};return n||(i.onMouseEnter=function(t){null===g||void 0===g||g({key:e,domEvent:t}),r(e)},i.onMouseLeave=function(t){null===o||void 0===o||o({key:e,domEvent:t}),I(e)}),i}var Gd=["item"];function Bd(e){var t=e.item,n=tt(e,Gd);return Object.defineProperty(n,"item",{get:function(){return Nt(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}function Sd(e){var n=e.icon,g=e.props,o=e.children;return("function"===typeof n?t.createElement(n,$e({},g)):n)||o||null}function Vd(e){var n=t.useContext(yd),g=n.mode,o=n.rtl,l=n.inlineIndent;if("inline"!==g)return null;return o?{paddingRight:e*l}:{paddingLeft:e*l}}var Wd=[],Rd=t.createContext(null);function kd(){return t.useContext(Rd)}var Xd=t.createContext(Wd);function Jd(e){var n=t.useContext(Xd);return t.useMemo((function(){return void 0!==e?[].concat(I(n),[e]):n}),[n,e])}var Yd=t.createContext(null),wd=t.createContext(null);function Hd(e,t){return void 0===e?null:"".concat(e,"-").concat(t)}function Nd(e){return Hd(t.useContext(wd),e)}var Kd=t.createContext({}),Fd=["title","attribute","elementRef"],xd=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],Ed=["active"],Md=function(e){s(g,e);var n=h(g);function g(){return i(this,g),n.apply(this,arguments)}return c(g,[{key:"render",value:function(){var e=this.props,n=e.title,g=e.attribute,o=e.elementRef,l=hn(tt(e,Fd),["eventKey"]);return Nt(!g,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),t.createElement(bd.Item,Ke({},g,{title:"string"===typeof n?n:void 0},l,{ref:o}))}}]),g}(t.Component),zd=function(e){var n,g=e.style,o=e.className,l=e.eventKey,a=(e.warnKey,e.disabled),r=e.itemIcon,i=e.children,C=e.role,c=e.onMouseEnter,u=e.onMouseLeave,s=e.onClick,d=e.onKeyDown,A=e.onFocus,m=tt(e,xd),b=Nd(l),p=t.useContext(yd),h=p.prefixCls,f=p.onItemClick,y=p.disabled,Z=p.overflowDisabled,v=p.itemIcon,G=p.selectedKeys,B=p.onActive,S=t.useContext(Kd)._internalRenderMenuItem,V="".concat(h,"-item"),W=t.useRef(),R=t.useRef(),k=y||a,X=Jd(l);var J=function(e){return{key:l,keyPath:I(X).reverse(),item:W.current,domEvent:e}},Y=r||v,w=vd(l,k,c,u),H=w.active,N=tt(w,Ed),K=G.includes(l),F=Vd(X.length),x={};"option"===e.role&&(x["aria-selected"]=K);var E=t.createElement(Md,Ke({ref:W,elementRef:R,role:null===C?"none":C||"menuitem",tabIndex:a?null:-1,"data-menu-id":Z&&b?null:b},m,N,x,{component:"li","aria-disabled":a,style:$e($e({},F),g),className:xe()(V,(n={},Ne(n,"".concat(V,"-active"),H),Ne(n,"".concat(V,"-selected"),K),Ne(n,"".concat(V,"-disabled"),k),n),o),onClick:function(e){if(!k){var t=J(e);null===s||void 0===s||s(Bd(t)),f(t)}},onKeyDown:function(e){if(null===d||void 0===d||d(e),e.which===hd.ENTER){var t=J(e);null===s||void 0===s||s(Bd(t)),f(t)}},onFocus:function(e){B(l),null===A||void 0===A||A(e)}}),i,t.createElement(Sd,{props:$e($e({},e),{},{isSelected:K}),icon:Y}));return S&&(E=S(E,e,{selected:K})),E};var Ld=function(e){var n=e.eventKey,g=kd(),o=Jd(n);return t.useEffect((function(){if(g)return g.registerPath(n,o),function(){g.unregisterPath(n,o)}}),[o]),g?null:t.createElement(zd,e)},Ud=["label","children","key","type"];function Qd(e,n){return is(e).map((function(e,g){if(t.isValidElement(e)){var o,l,a=e.key,r=null!==(o=null===(l=e.props)||void 0===l?void 0:l.eventKey)&&void 0!==o?o:a;(null===r||void 0===r)&&(r="tmp_key-".concat([].concat(I(n),[g]).join("-")));var i={key:r,eventKey:r};return t.cloneElement(e,i)}return e}))}function Td(e){return(e||[]).map((function(e,n){if(e&&"object"===m(e)){var g=e.label,o=e.children,l=e.key,a=e.type,r=tt(e,Ud),I=null!==l&&void 0!==l?l:"tmp-".concat(n);return o||"group"===a?"group"===a?t.createElement($b,Ke({key:I},r,{title:g}),Td(o)):t.createElement(Sb,Ke({key:I},r,{title:g}),Td(o)):"divider"===a?t.createElement(ep,Ke({key:I},r)):t.createElement(Ld,Ke({key:I},r),g)}return null})).filter((function(e){return e}))}function Dd(e,t,n){var g=e;return t&&(g=Td(t)),Qd(g,n)}function jd(e){var n=t.useRef(e);n.current=e;var g=t.useCallback((function(){for(var e,t=arguments.length,g=new Array(t),o=0;o<t;o++)g[o]=arguments[o];return null===(e=n.current)||void 0===e?void 0:e.call.apply(e,[n].concat(g))}),[]);return e?g:void 0}var Pd=["className","children"],Od=function(e,n){var g=e.className,o=e.children,l=tt(e,Pd),a=t.useContext(yd),r=a.prefixCls,I=a.mode,i=a.rtl;return t.createElement("ul",Ke({className:xe()(r,i&&"".concat(r,"-rtl"),"".concat(r,"-sub"),"".concat(r,"-").concat("inline"===I?"inline":"vertical"),g)},l,{"data-menu-list":!0,ref:n}),o)},qd=t.forwardRef(Od);qd.displayName="SubMenuList";var _d=qd;function $d(e,t,n,g){var o=As.unstable_batchedUpdates?function(e){As.unstable_batchedUpdates(n,e)}:n;return e.addEventListener&&e.addEventListener(t,o,g),{remove:function(){e.removeEventListener&&e.removeEventListener(t,o,g)}}}var eA=(0,t.forwardRef)((function(e,n){var g=e.didUpdate,o=e.getContainer,l=e.children,a=(0,t.useRef)(),r=(0,t.useRef)();(0,t.useImperativeHandle)(n,(function(){return{}}));var I=(0,t.useRef)(!1);return!I.current&&Kt()&&(r.current=o(),a.current=r.current.parentNode,I.current=!0),(0,t.useEffect)((function(){null===g||void 0===g||g(e)})),(0,t.useEffect)((function(){return null===r.current.parentNode&&null!==a.current&&a.current.appendChild(r.current),function(){var e,t;null===(e=r.current)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(r.current)}}),[]),r.current?As.createPortal(l,r.current):null})),tA=eA;function nA(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}var gA=function(){if("undefined"===typeof navigator||"undefined"===typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null===e||void 0===e?void 0:e.substr(0,4))};function oA(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var lA=function(e,t){var n={animationend:oA("Animation","AnimationEnd"),transitionend:oA("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}(Kt(),"undefined"!==typeof window?window:{}),aA={};if(Kt()){var rA=document.createElement("div");aA=rA.style}var IA={};function iA(e){if(IA[e])return IA[e];var t=lA[e];if(t)for(var n=Object.keys(t),g=n.length,o=0;o<g;o+=1){var l=n[o];if(Object.prototype.hasOwnProperty.call(t,l)&&l in aA)return IA[e]=t[l],IA[e]}return""}var CA=iA("animationend"),cA=iA("transitionend"),uA=!(!CA||!cA),sA=CA||"animationend",dA=cA||"transitionend";function AA(e,t){if(!e)return null;if("object"===m(e)){var n=t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}));return e[n]}return"".concat(e,"-").concat(t)}var mA="none",bA="appear",pA="enter",hA="leave",fA="none",yA="prepare",ZA="start",vA="active",GA="end",BA=Kt()?t.useLayoutEffect:t.useEffect,SA=[yA,ZA,vA,GA];function VA(e){return e===vA||e===GA}var WA=function(e,n){var g=Z(ls(fA),2),o=g[0],l=g[1],a=function(){var e=t.useRef(null);function n(){gd.cancel(e.current)}return t.useEffect((function(){return function(){n()}}),[]),[function t(g){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;n();var l=gd((function(){o<=1?g({isCanceled:function(){return l!==e.current}}):t(g,o-1)}));e.current=l},n]}(),r=Z(a,2),I=r[0],i=r[1];return BA((function(){if(o!==fA&&o!==GA){var e=SA.indexOf(o),t=SA[e+1],g=n(o);false===g?l(t,!0):I((function(e){function n(){e.isCanceled()||l(t,!0)}!0===g?n():Promise.resolve(g).then(n)}))}}),[e,o]),t.useEffect((function(){return function(){i()}}),[]),[function(){l(yA,!0)},o]};function RA(e,n,g,o){var l=o.motionEnter,a=void 0===l||l,r=o.motionAppear,I=void 0===r||r,i=o.motionLeave,C=void 0===i||i,c=o.motionDeadline,u=o.motionLeaveImmediately,s=o.onAppearPrepare,d=o.onEnterPrepare,A=o.onLeavePrepare,m=o.onAppearStart,b=o.onEnterStart,p=o.onLeaveStart,h=o.onAppearActive,f=o.onEnterActive,y=o.onLeaveActive,v=o.onAppearEnd,G=o.onEnterEnd,B=o.onLeaveEnd,S=o.onVisibleChanged,V=Z(ls(),2),W=V[0],R=V[1],k=Z(ls(mA),2),X=k[0],J=k[1],Y=Z(ls(null),2),w=Y[0],H=Y[1],N=(0,t.useRef)(!1),K=(0,t.useRef)(null);function F(){return g()}var x=(0,t.useRef)(!1);function E(e){var t=F();if(!e||e.deadline||e.target===t){var n,g=x.current;X===bA&&g?n=null===v||void 0===v?void 0:v(t,e):X===pA&&g?n=null===G||void 0===G?void 0:G(t,e):X===hA&&g&&(n=null===B||void 0===B?void 0:B(t,e)),X!==mA&&g&&!1!==n&&(J(mA,!0),H(null,!0))}}var M=function(e){var n=(0,t.useRef)(),g=(0,t.useRef)(e);g.current=e;var o=t.useCallback((function(e){g.current(e)}),[]);function l(e){e&&(e.removeEventListener(dA,o),e.removeEventListener(sA,o))}return t.useEffect((function(){return function(){l(n.current)}}),[]),[function(e){n.current&&n.current!==e&&l(n.current),e&&e!==n.current&&(e.addEventListener(dA,o),e.addEventListener(sA,o),n.current=e)},l]}(E),z=Z(M,1)[0],L=t.useMemo((function(){var e,t,n;switch(X){case bA:return Ne(e={},yA,s),Ne(e,ZA,m),Ne(e,vA,h),e;case pA:return Ne(t={},yA,d),Ne(t,ZA,b),Ne(t,vA,f),t;case hA:return Ne(n={},yA,A),Ne(n,ZA,p),Ne(n,vA,y),n;default:return{}}}),[X]),U=Z(WA(X,(function(e){if(e===yA){var t=L.prepare;return!!t&&t(F())}var n;T in L&&H((null===(n=L[T])||void 0===n?void 0:n.call(L,F(),null))||null);return T===vA&&(z(F()),c>0&&(clearTimeout(K.current),K.current=setTimeout((function(){E({deadline:!0})}),c))),true})),2),Q=U[0],T=U[1],D=VA(T);x.current=D,BA((function(){R(n);var t,g=N.current;(N.current=!0,e)&&(!g&&n&&I&&(t=bA),g&&n&&a&&(t=pA),(g&&!n&&C||!g&&u&&!n&&C)&&(t=hA),t&&(J(t),Q()))}),[n]),(0,t.useEffect)((function(){(X===bA&&!I||X===pA&&!a||X===hA&&!C)&&J(mA)}),[I,a,C]),(0,t.useEffect)((function(){return function(){N.current=!1,clearTimeout(K.current)}}),[]);var j=t.useRef(!1);(0,t.useEffect)((function(){W&&(j.current=!0),void 0!==W&&X===mA&&((j.current||W)&&(null===S||void 0===S||S(W)),j.current=!0)}),[W,X]);var P=w;return L.prepare&&T===ZA&&(P=$e({transition:"none"},P)),[X,T,P,null!==W&&void 0!==W?W:n]}var kA=function(e){s(n,e);var t=h(n);function n(){return i(this,n),t.apply(this,arguments)}return c(n,[{key:"render",value:function(){return this.props.children}}]),n}(t.Component),XA=kA;var JA=function(e){var n=e;function g(e){return!(!e.motionName||!n)}"object"===m(e)&&(n=e.transitionSupport);var o=t.forwardRef((function(e,n){var o=e.visible,l=void 0===o||o,a=e.removeOnLeave,r=void 0===a||a,I=e.forceRender,i=e.children,C=e.motionName,c=e.leavedClassName,u=e.eventProps,s=g(e),d=(0,t.useRef)(),A=(0,t.useRef)();var m=Z(RA(s,l,(function(){try{return d.current instanceof HTMLElement?d.current:bs(A.current)}catch(e){return null}}),e),4),b=m[0],p=m[1],h=m[2],f=m[3],y=t.useRef(f);f&&(y.current=!0);var v,G=t.useCallback((function(e){d.current=e,cs(n,e)}),[n]),B=$e($e({},u),{},{visible:l});if(i)if(b!==mA&&g(e)){var S,V;p===yA?V="prepare":VA(p)?V="active":p===ZA&&(V="start"),v=i($e($e({},B),{},{className:xe()(AA(C,b),(S={},Ne(S,AA(C,"".concat(b,"-").concat(V)),V),Ne(S,C,"string"===typeof C),S)),style:h}),G)}else v=f?i($e({},B),G):!r&&y.current?i($e($e({},B),{},{className:c}),G):I?i($e($e({},B),{},{style:{display:"none"}}),G):null;else v=null;t.isValidElement(v)&&ds(v)&&(v.ref||(v=t.cloneElement(v,{ref:G})));return t.createElement(XA,{ref:A},v)}));return o.displayName="CSSMotion",o}(uA),YA="add",wA="keep",HA="remove",NA="removed";function KA(e){var t;return $e($e({},t=e&&"object"===m(e)&&"key"in e?e:{key:e}),{},{key:String(t.key)})}function FA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(KA)}function xA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],g=0,o=t.length,l=FA(e),a=FA(t);l.forEach((function(e){for(var t=!1,l=g;l<o;l+=1){var r=a[l];if(r.key===e.key){g<l&&(n=n.concat(a.slice(g,l).map((function(e){return $e($e({},e),{},{status:YA})}))),g=l),n.push($e($e({},r),{},{status:wA})),g+=1,t=!0;break}}t||n.push($e($e({},e),{},{status:HA}))})),g<o&&(n=n.concat(a.slice(g).map((function(e){return $e($e({},e),{},{status:YA})}))));var r={};n.forEach((function(e){var t=e.key;r[t]=(r[t]||0)+1}));var I=Object.keys(r).filter((function(e){return r[e]>1}));return I.forEach((function(e){n=n.filter((function(t){var n=t.key,g=t.status;return n!==e||g!==HA})),n.forEach((function(t){t.key===e&&(t.status=wA)}))})),n}var EA=["component","children","onVisibleChanged","onAllRemoved"],MA=["status"],zA=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];var LA=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JA,g=function(e){s(o,e);var g=h(o);function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=g.call.apply(g,[this].concat(n))).state={keyEntities:[]},e.removeKey=function(t){var n=e.state.keyEntities.map((function(e){return e.key!==t?e:$e($e({},e),{},{status:NA})}));return e.setState({keyEntities:n}),n.filter((function(e){return e.status!==NA})).length},e}return c(o,[{key:"render",value:function(){var e=this,g=this.state.keyEntities,o=this.props,l=o.component,a=o.children,r=o.onVisibleChanged,I=o.onAllRemoved,i=tt(o,EA),C=l||t.Fragment,c={};return zA.forEach((function(e){c[e]=i[e],delete i[e]})),delete i.keys,t.createElement(C,i,g.map((function(g){var o=g.status,l=tt(g,MA),i=o===YA||o===wA;return t.createElement(n,Ke({},c,{key:l.key,visible:i,eventProps:l,onVisibleChanged:function(t){(null===r||void 0===r||r(t,{key:l.key}),t)||0===e.removeKey(l.key)&&I&&I()}}),a)})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,g=t.keyEntities,o=FA(n);return{keyEntities:xA(g,o).filter((function(e){var t=g.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==NA||e.status!==HA}))}}}]),o}(t.Component);return g.defaultProps={component:"div"},g}(uA),UA=JA;function QA(e){var t=e.prefixCls,n=e.motion,g=e.animation,o=e.transitionName;return n||(g?{motionName:"".concat(t,"-").concat(g)}:o?{motionName:o}:null)}function TA(e){var n=e.prefixCls,g=e.visible,o=e.zIndex,l=e.mask,a=e.maskMotion,r=e.maskAnimation,I=e.maskTransitionName;if(!l)return null;var i={};return(a||I||r)&&(i=$e({motionAppear:!0},QA({motion:a,prefixCls:n,transitionName:I,animation:r}))),t.createElement(UA,Ke({},i,{visible:g,removeOnLeave:!0}),(function(e){var g=e.className;return t.createElement("div",{style:{zIndex:o},className:xe()("".concat(n,"-mask"),g)})}))}var DA,jA=function(e){if(!e)return!1;if(e instanceof HTMLElement&&e.offsetParent)return!0;if(e instanceof SVGGraphicsElement&&e.getBBox){var t=e.getBBox(),n=t.width,g=t.height;if(n||g)return!0}if(e instanceof HTMLElement&&e.getBoundingClientRect){var o=e.getBoundingClientRect(),l=o.width,a=o.height;if(l||a)return!0}return!1};function PA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);t&&(g=g.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,g)}return n}function OA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PA(Object(n),!0).forEach((function(t){_A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qA(e){return qA="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qA(e)}function _A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $A={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function em(){if(void 0!==DA)return DA;DA="";var e=document.createElement("p").style;for(var t in $A)t+"Transform"in e&&(DA=t);return DA}function tm(){return em()?"".concat(em(),"TransitionProperty"):"transitionProperty"}function nm(){return em()?"".concat(em(),"Transform"):"transform"}function gm(e,t){var n=tm();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function om(e,t){var n=nm();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}var lm,am=/matrix\((.*)\)/,rm=/matrix3d\((.*)\)/;function Im(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function im(e,t,n){var g=n;if("object"!==qA(t))return"undefined"!==typeof g?("number"===typeof g&&(g="".concat(g,"px")),void(e.style[t]=g)):lm(e,t);for(var o in t)t.hasOwnProperty(o)&&im(e,o,t[o])}function Cm(e,t){var n=e["page".concat(t?"Y":"X","Offset")],g="scroll".concat(t?"Top":"Left");if("number"!==typeof n){var o=e.document;"number"!==typeof(n=o.documentElement[g])&&(n=o.body[g])}return n}function cm(e){return Cm(e)}function um(e){return Cm(e,!0)}function sm(e){var t=function(e){var t,n,g,o=e.ownerDocument,l=o.body,a=o&&o.documentElement;return t=e.getBoundingClientRect(),n=Math.floor(t.left),g=Math.floor(t.top),{left:n-=a.clientLeft||l.clientLeft||0,top:g-=a.clientTop||l.clientTop||0}}(e),n=e.ownerDocument,g=n.defaultView||n.parentWindow;return t.left+=cm(g),t.top+=um(g),t}function dm(e){return null!==e&&void 0!==e&&e==e.window}function Am(e){return dm(e)?e.document:9===e.nodeType?e:e.ownerDocument}var mm=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),bm=/^(top|right|bottom|left)$/;function pm(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function hm(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function fm(e,t,n){"static"===im(e,"position")&&(e.style.position="relative");var g=-999,o=-999,l=pm("left",n),a=pm("top",n),r=hm(l),I=hm(a);"left"!==l&&(g=999),"top"!==a&&(o=999);var i,C="",c=sm(e);("left"in t||"top"in t)&&(C=(i=e).style.transitionProperty||i.style[tm()]||"",gm(e,"none")),"left"in t&&(e.style[r]="",e.style[l]="".concat(g,"px")),"top"in t&&(e.style[I]="",e.style[a]="".concat(o,"px")),Im(e);var u=sm(e),s={};for(var d in t)if(t.hasOwnProperty(d)){var A=pm(d,n),m="left"===d?g:o,b=c[d]-u[d];s[A]=A===d?m+b:m-b}im(e,s),Im(e),("left"in t||"top"in t)&&gm(e,C);var p={};for(var h in t)if(t.hasOwnProperty(h)){var f=pm(h,n),y=t[h]-c[h];p[f]=h===f?s[f]+y:s[f]-y}im(e,p)}function ym(e,t){var n=sm(e),g=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(nm());if(n&&"none"!==n){var g=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(g[12]||g[4],0),y:parseFloat(g[13]||g[5],0)}}return{x:0,y:0}}(e),o={x:g.x,y:g.y};"left"in t&&(o.x=g.x+t.left-n.left),"top"in t&&(o.y=g.y+t.top-n.top),function(e,t){var n=window.getComputedStyle(e,null),g=n.getPropertyValue("transform")||n.getPropertyValue(nm());if(g&&"none"!==g){var o,l=g.match(am);l?((o=(l=l[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,o[5]=t.y,om(e,"matrix(".concat(o.join(","),")"))):((o=g.match(rm)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,o[13]=t.y,om(e,"matrix3d(".concat(o.join(","),")")))}else om(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}(e,o)}function Zm(e,t){for(var n=0;n<e.length;n++)t(e[n])}function vm(e){return"border-box"===lm(e,"boxSizing")}"undefined"!==typeof window&&(lm=window.getComputedStyle?function(e,t,n){var g=n,o="",l=Am(e);return(g=g||l.defaultView.getComputedStyle(e,null))&&(o=g.getPropertyValue(t)||g[t]),o}:function(e,t){var n=e.currentStyle&&e.currentStyle[t];if(mm.test(n)&&!bm.test(t)){var g=e.style,o=g.left,l=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,g.left="fontSize"===t?"1em":n||0,n=g.pixelLeft+"px",g.left=o,e.runtimeStyle.left=l}return""===n?"auto":n});var Gm=["margin","border","padding"];function Bm(e,t,n){var g,o={},l=e.style;for(g in t)t.hasOwnProperty(g)&&(o[g]=l[g],l[g]=t[g]);for(g in n.call(e),t)t.hasOwnProperty(g)&&(l[g]=o[g])}function Sm(e,t,n){var g,o,l,a=0;for(o=0;o<t.length;o++)if(g=t[o])for(l=0;l<n.length;l++){var r=void 0;r="border"===g?"".concat(g).concat(n[l],"Width"):g+n[l],a+=parseFloat(lm(e,r))||0}return a}var Vm={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function Wm(e,t,n){var g=n;if(dm(e))return"width"===t?Vm.viewportWidth(e):Vm.viewportHeight(e);if(9===e.nodeType)return"width"===t?Vm.docWidth(e):Vm.docHeight(e);var o="width"===t?["Left","Right"]:["Top","Bottom"],l="width"===t?Math.floor(e.getBoundingClientRect().width):Math.floor(e.getBoundingClientRect().height),a=vm(e),r=0;(null===l||void 0===l||l<=0)&&(l=void 0,(null===(r=lm(e,t))||void 0===r||Number(r)<0)&&(r=e.style[t]||0),r=parseFloat(r)||0),void 0===g&&(g=a?1:-1);var I=void 0!==l||a,i=l||r;return-1===g?I?i-Sm(e,["border","padding"],o):r:I?1===g?i:i+(2===g?-Sm(e,["border"],o):Sm(e,["margin"],o)):r+Sm(e,Gm.slice(g),o)}Zm(["Width","Height"],(function(e){Vm["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],Vm["viewport".concat(e)](n))},Vm["viewport".concat(e)]=function(t){var n="client".concat(e),g=t.document,o=g.body,l=g.documentElement[n];return"CSS1Compat"===g.compatMode&&l||o&&o[n]||l}}));var Rm={position:"absolute",visibility:"hidden",display:"block"};function km(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var g,o=t[0];return 0!==o.offsetWidth?g=Wm.apply(void 0,t):Bm(o,Rm,(function(){g=Wm.apply(void 0,t)})),g}function Xm(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}Zm(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);Vm["outer".concat(t)]=function(t,n){return t&&km(t,e,n?0:1)};var n="width"===e?["Left","Right"]:["Top","Bottom"];Vm[e]=function(t,g){var o=g;return void 0!==o?t?(vm(t)&&(o+=Sm(t,["padding","border"],n)),im(t,e,o)):void 0:t&&km(t,e,-1)}}));var Jm={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:Am,offset:function(e,t,n){if("undefined"===typeof t)return sm(e);!function(e,t,n){if(n.ignoreShake){var g=sm(e),o=g.left.toFixed(0),l=g.top.toFixed(0),a=t.left.toFixed(0),r=t.top.toFixed(0);if(o===a&&l===r)return}n.useCssRight||n.useCssBottom?fm(e,t,n):n.useCssTransform&&nm()in document.body.style?ym(e,t):fm(e,t,n)}(e,t,n||{})},isWindow:dm,each:Zm,css:im,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:Xm,getWindowScrollLeft:function(e){return cm(e)},getWindowScrollTop:function(e){return um(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)Jm.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};Xm(Jm,Vm);var Ym=Jm.getParent;function wm(e){if(Jm.isWindow(e)||9===e.nodeType)return null;var t,n=Jm.getDocument(e).body,g=Jm.css(e,"position");if(!("fixed"===g||"absolute"===g))return"html"===e.nodeName.toLowerCase()?null:Ym(e);for(t=Ym(e);t&&t!==n&&9!==t.nodeType;t=Ym(t))if("static"!==(g=Jm.css(t,"position")))return t;return null}var Hm=Jm.getParent;function Nm(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},g=wm(e),o=Jm.getDocument(e),l=o.defaultView||o.parentWindow,a=o.body,r=o.documentElement;g;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===g.clientWidth||g===a||g===r||"visible"===Jm.css(g,"overflow")){if(g===a||g===r)break}else{var I=Jm.offset(g);I.left+=g.clientLeft,I.top+=g.clientTop,n.top=Math.max(n.top,I.top),n.right=Math.min(n.right,I.left+g.clientWidth),n.bottom=Math.min(n.bottom,I.top+g.clientHeight),n.left=Math.max(n.left,I.left)}g=wm(g)}var i=null;Jm.isWindow(e)||9===e.nodeType||(i=e.style.position,"absolute"===Jm.css(e,"position")&&(e.style.position="fixed"));var C=Jm.getWindowScrollLeft(l),c=Jm.getWindowScrollTop(l),u=Jm.viewportWidth(l),s=Jm.viewportHeight(l),d=r.scrollWidth,A=r.scrollHeight,m=window.getComputedStyle(a);if("hidden"===m.overflowX&&(d=l.innerWidth),"hidden"===m.overflowY&&(A=l.innerHeight),e.style&&(e.style.position=i),t||function(e){if(Jm.isWindow(e)||9===e.nodeType)return!1;var t=Jm.getDocument(e),n=t.body,g=null;for(g=Hm(e);g&&g!==n&&g!==t;g=Hm(g))if("fixed"===Jm.css(g,"position"))return!0;return!1}(e))n.left=Math.max(n.left,C),n.top=Math.max(n.top,c),n.right=Math.min(n.right,C+u),n.bottom=Math.min(n.bottom,c+s);else{var b=Math.max(d,C+u);n.right=Math.min(n.right,b);var p=Math.max(A,c+s);n.bottom=Math.min(n.bottom,p)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function Km(e){var t,n,g;if(Jm.isWindow(e)||9===e.nodeType){var o=Jm.getWindow(e);t={left:Jm.getWindowScrollLeft(o),top:Jm.getWindowScrollTop(o)},n=Jm.viewportWidth(o),g=Jm.viewportHeight(o)}else t=Jm.offset(e),n=Jm.outerWidth(e),g=Jm.outerHeight(e);return t.width=n,t.height=g,t}function Fm(e,t){var n=t.charAt(0),g=t.charAt(1),o=e.width,l=e.height,a=e.left,r=e.top;return"c"===n?r+=l/2:"b"===n&&(r+=l),"c"===g?a+=o/2:"r"===g&&(a+=o),{left:a,top:r}}function xm(e,t,n,g,o){var l=Fm(t,n[1]),a=Fm(e,n[0]),r=[a.left-l.left,a.top-l.top];return{left:Math.round(e.left-r[0]+g[0]-o[0]),top:Math.round(e.top-r[1]+g[1]-o[1])}}function Em(e,t,n){return e.left<n.left||e.left+t.width>n.right}function Mm(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function zm(e,t,n){var g=[];return Jm.each(e,(function(e){g.push(e.replace(t,(function(e){return n[e]})))})),g}function Lm(e,t){return e[t]=-e[t],e}function Um(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function Qm(e,t){e[0]=Um(e[0],t.width),e[1]=Um(e[1],t.height)}function Tm(e,t,n,g){var o=n.points,l=n.offset||[0,0],a=n.targetOffset||[0,0],r=n.overflow,I=n.source||e;l=[].concat(l),a=[].concat(a);var i={},C=0,c=Nm(I,!(!(r=r||{})||!r.alwaysByViewport)),u=Km(I);Qm(l,u),Qm(a,t);var s=xm(u,t,o,l,a),d=Jm.merge(u,s);if(c&&(r.adjustX||r.adjustY)&&g){if(r.adjustX&&Em(s,u,c)){var A=zm(o,/[lr]/gi,{l:"r",r:"l"}),m=Lm(l,0),b=Lm(a,0);(function(e,t,n){return e.left>n.right||e.left+t.width<n.left})(xm(u,t,A,m,b),u,c)||(C=1,o=A,l=m,a=b)}if(r.adjustY&&Mm(s,u,c)){var p=zm(o,/[tb]/gi,{t:"b",b:"t"}),h=Lm(l,1),f=Lm(a,1);(function(e,t,n){return e.top>n.bottom||e.top+t.height<n.top})(xm(u,t,p,h,f),u,c)||(C=1,o=p,l=h,a=f)}C&&(s=xm(u,t,o,l,a),Jm.mix(d,s));var y=Em(s,u,c),Z=Mm(s,u,c);if(y||Z){var v=o;y&&(v=zm(o,/[lr]/gi,{l:"r",r:"l"})),Z&&(v=zm(o,/[tb]/gi,{t:"b",b:"t"})),o=v,l=n.offset||[0,0],a=n.targetOffset||[0,0]}i.adjustX=r.adjustX&&y,i.adjustY=r.adjustY&&Z,(i.adjustX||i.adjustY)&&(d=function(e,t,n,g){var o=Jm.clone(e),l={width:t.width,height:t.height};return g.adjustX&&o.left<n.left&&(o.left=n.left),g.resizeWidth&&o.left>=n.left&&o.left+l.width>n.right&&(l.width-=o.left+l.width-n.right),g.adjustX&&o.left+l.width>n.right&&(o.left=Math.max(n.right-l.width,n.left)),g.adjustY&&o.top<n.top&&(o.top=n.top),g.resizeHeight&&o.top>=n.top&&o.top+l.height>n.bottom&&(l.height-=o.top+l.height-n.bottom),g.adjustY&&o.top+l.height>n.bottom&&(o.top=Math.max(n.bottom-l.height,n.top)),Jm.mix(o,l)}(s,u,c,i))}return d.width!==u.width&&Jm.css(I,"width",Jm.width(I)+d.width-u.width),d.height!==u.height&&Jm.css(I,"height",Jm.height(I)+d.height-u.height),Jm.offset(I,{left:d.left,top:d.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:o,offset:l,targetOffset:a,overflow:i}}function Dm(e,t,n){var g=n.target||t,o=Km(g),l=!function(e,t){var n=Nm(e,t),g=Km(e);return!n||g.left+g.width<=n.left||g.top+g.height<=n.top||g.left>=n.right||g.top>=n.bottom}(g,n.overflow&&n.overflow.alwaysByViewport);return Tm(e,o,n,l)}Dm.__getOffsetParent=wm,Dm.__getVisibleRectForElement=Nm;var jm=n(8111),Pm=n.n(jm);function Om(e,t){var n=null,g=null;var o=new xs((function(e){var o=Z(e,1)[0].target;if(document.documentElement.contains(o)){var l=o.getBoundingClientRect(),a=l.width,r=l.height,I=Math.floor(a),i=Math.floor(r);n===I&&g===i||Promise.resolve().then((function(){t({width:I,height:i})})),n=I,g=i}}));return e&&o.observe(e),function(){o.disconnect()}}function qm(e){return"function"!==typeof e?null:e()}function _m(e){return"object"===m(e)&&e?e:null}var $m=function(e,n){var g=e.children,o=e.disabled,l=e.target,a=e.align,r=e.onAlign,I=e.monitorWindowResize,i=e.monitorBufferTime,C=void 0===i?0:i,c=t.useRef({}),u=t.useRef(),s=t.Children.only(g),d=t.useRef({});d.current.disabled=o,d.current.target=l,d.current.align=a,d.current.onAlign=r;var A=function(e,n){var g=t.useRef(!1),o=t.useRef(null);function l(){window.clearTimeout(o.current)}return[function t(a){if(l(),g.current&&!0!==a)o.current=window.setTimeout((function(){g.current=!1,t()}),n);else{if(!1===e())return;g.current=!0,o.current=window.setTimeout((function(){g.current=!1}),n)}},function(){g.current=!1,l()}]}((function(){var e=d.current,t=e.disabled,n=e.target,g=e.align,o=e.onAlign;if(!t&&n){var l,a=u.current,r=qm(n),I=_m(n);c.current.element=r,c.current.point=I,c.current.align=g;var i=document.activeElement;return r&&jA(r)?l=Dm(a,r,g):I&&(l=function(e,t,n){var g,o,l=Jm.getDocument(e),a=l.defaultView||l.parentWindow,r=Jm.getWindowScrollLeft(a),I=Jm.getWindowScrollTop(a),i=Jm.viewportWidth(a),C=Jm.viewportHeight(a),c={left:g="pageX"in t?t.pageX:r+t.clientX,top:o="pageY"in t?t.pageY:I+t.clientY,width:0,height:0},u=g>=0&&g<=r+i&&o>=0&&o<=I+C,s=[n.points[0],"cc"];return Tm(e,c,OA(OA({},n),{},{points:s}),u)}(a,I,g)),function(e,t){e!==document.activeElement&&Ft(t,e)&&"function"===typeof e.focus&&e.focus()}(i,a),o&&l&&o(a,l),!0}return!1}),C),m=Z(A,2),b=m[0],p=m[1],h=t.useRef({cancel:function(){}}),f=t.useRef({cancel:function(){}});t.useEffect((function(){var e,t,n=qm(l),g=_m(l);u.current!==f.current.element&&(f.current.cancel(),f.current.element=u.current,f.current.cancel=Om(u.current,b)),c.current.element===n&&((e=c.current.point)===(t=g)||e&&t&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY))&&Pm()(c.current.align,a)||(b(),h.current.element!==n&&(h.current.cancel(),h.current.element=n,h.current.cancel=Om(n,b)))})),t.useEffect((function(){o?p():b()}),[o]);var y=t.useRef(null);return t.useEffect((function(){I?y.current||(y.current=$d(window,"resize",b)):y.current&&(y.current.remove(),y.current=null)}),[I]),t.useEffect((function(){return function(){h.current.cancel(),f.current.cancel(),y.current&&y.current.remove(),p()}}),[]),t.useImperativeHandle(n,(function(){return{forceAlign:function(){return b(!0)}}})),t.isValidElement(s)&&(s=t.cloneElement(s,{ref:us(s.ref,u)})),s},eb=t.forwardRef($m);eb.displayName="Align";var tb=eb,nb=["measure","alignPre","align",null,"motion"],gb=t.forwardRef((function(e,n){var g=e.visible,o=e.prefixCls,l=e.className,a=e.style,r=e.children,I=e.zIndex,i=e.stretch,C=e.destroyPopupOnHide,c=e.forceRender,u=e.align,s=e.point,d=e.getRootDomNode,A=e.getClassNameFromAlign,m=e.onAlign,b=e.onMouseEnter,p=e.onMouseLeave,h=e.onMouseDown,f=e.onTouchStart,y=e.onClick,v=(0,t.useRef)(),G=(0,t.useRef)(),B=Z((0,t.useState)(),2),S=B[0],V=B[1],W=function(e){var n=Z(t.useState({width:0,height:0}),2),g=n[0],o=n[1];return[t.useMemo((function(){var t={};if(e){var n=g.width,o=g.height;-1!==e.indexOf("height")&&o?t.height=o:-1!==e.indexOf("minHeight")&&o&&(t.minHeight=o),-1!==e.indexOf("width")&&n?t.width=n:-1!==e.indexOf("minWidth")&&n&&(t.minWidth=n)}return t}),[e,g]),function(e){o({width:e.offsetWidth,height:e.offsetHeight})}]}(i),R=Z(W,2),k=R[0],X=R[1];var J=function(e,n){var g=Z(ls(null),2),o=g[0],l=g[1],a=(0,t.useRef)();function r(e){l(e,!0)}function I(){gd.cancel(a.current)}return(0,t.useEffect)((function(){r("measure")}),[e]),(0,t.useEffect)((function(){"measure"===o&&n(),o&&(a.current=gd(GC(ZC().mark((function e(){var t,n;return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=nb.indexOf(o),(n=nb[t+1])&&-1!==t&&r(n);case 3:case"end":return e.stop()}}),e)})))))}),[o]),(0,t.useEffect)((function(){return function(){I()}}),[]),[o,function(e){I(),a.current=gd((function(){r((function(e){switch(o){case"align":return"motion";case"motion":return"stable"}return e})),null===e||void 0===e||e()}))}]}(g,(function(){i&&X(d())})),Y=Z(J,2),w=Y[0],H=Y[1],N=Z((0,t.useState)(0),2),K=N[0],F=N[1],x=(0,t.useRef)();function E(){var e;null===(e=v.current)||void 0===e||e.forceAlign()}function M(e,t){var n=A(t);S!==n&&V(n),F((function(e){return e+1})),"align"===w&&(null===m||void 0===m||m(e,t))}os((function(){"alignPre"===w&&F(0)}),[w]),os((function(){"align"===w&&(K<3?E():H((function(){var e;null===(e=x.current)||void 0===e||e.call(x)})))}),[K]);var z=$e({},QA(e));function L(){return new Promise((function(e){x.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=z[e];z[e]=function(e,n){return H(),null===t||void 0===t?void 0:t(e,n)}})),t.useEffect((function(){z.motionName||"motion"!==w||H()}),[z.motionName,w]),t.useImperativeHandle(n,(function(){return{forceAlign:E,getElement:function(){return G.current}}}));var U=$e($e({},k),{},{zIndex:I,opacity:"motion"!==w&&"stable"!==w&&g?0:void 0,pointerEvents:g||"stable"===w?void 0:"none"},a),Q=!0;null===u||void 0===u||!u.points||"align"!==w&&"stable"!==w||(Q=!1);var T=r;return t.Children.count(r)>1&&(T=t.createElement("div",{className:"".concat(o,"-content")},r)),t.createElement(UA,Ke({visible:g,ref:G,leavedClassName:"".concat(o,"-hidden")},z,{onAppearPrepare:L,onEnterPrepare:L,removeOnLeave:C,forceRender:c}),(function(e,n){var g=e.className,a=e.style,r=xe()(o,l,S,g);return t.createElement(tb,{target:s||d,key:"popup",ref:v,monitorWindowResize:!0,disabled:Q,align:u,onAlign:M},t.createElement("div",{ref:n,className:r,onMouseEnter:b,onMouseLeave:p,onMouseDownCapture:h,onTouchStartCapture:f,onClick:y,style:$e($e({},a),U)},T))}))}));gb.displayName="PopupInner";var ob=gb,lb=t.forwardRef((function(e,n){var g=e.prefixCls,o=e.visible,l=e.zIndex,a=e.children,r=e.mobile,I=(r=void 0===r?{}:r).popupClassName,i=r.popupStyle,C=r.popupMotion,c=void 0===C?{}:C,u=r.popupRender,s=e.onClick,d=t.useRef();t.useImperativeHandle(n,(function(){return{forceAlign:function(){},getElement:function(){return d.current}}}));var A=$e({zIndex:l},i),m=a;return t.Children.count(a)>1&&(m=t.createElement("div",{className:"".concat(g,"-content")},a)),u&&(m=u(m)),t.createElement(UA,Ke({visible:o,ref:d,removeOnLeave:!0},c),(function(e,n){var o=e.className,l=e.style,a=xe()(g,I,o);return t.createElement("div",{ref:n,className:a,onClick:s,style:$e($e({},l),A)},m)}))}));lb.displayName="MobilePopupInner";var ab=lb,rb=["visible","mobile"],Ib=t.forwardRef((function(e,n){var g=e.visible,o=e.mobile,l=tt(e,rb),a=Z((0,t.useState)(g),2),r=a[0],I=a[1],i=Z((0,t.useState)(!1),2),C=i[0],c=i[1],u=$e($e({},l),{},{visible:r});(0,t.useEffect)((function(){I(g),g&&o&&c(gA())}),[g,o]);var s=C?t.createElement(ab,Ke({},u,{mobile:o,ref:n})):t.createElement(ob,Ke({},u,{ref:n}));return t.createElement("div",null,t.createElement(TA,u),s)}));Ib.displayName="Popup";var ib=Ib,Cb=t.createContext(null);function cb(){}function ub(){return""}function sb(e){return e?e.ownerDocument:window.document}var db=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];var Ab=function(e){var n=function(n){s(o,n);var g=h(o);function o(e){var n,l;return i(this,o),Ne(b(n=g.call(this,e)),"popupRef",t.createRef()),Ne(b(n),"triggerRef",t.createRef()),Ne(b(n),"portalContainer",void 0),Ne(b(n),"attachId",void 0),Ne(b(n),"clickOutsideHandler",void 0),Ne(b(n),"touchOutsideHandler",void 0),Ne(b(n),"contextMenuOutsideHandler1",void 0),Ne(b(n),"contextMenuOutsideHandler2",void 0),Ne(b(n),"mouseDownTimeout",void 0),Ne(b(n),"focusTime",void 0),Ne(b(n),"preClickTime",void 0),Ne(b(n),"preTouchTime",void 0),Ne(b(n),"delayTimer",void 0),Ne(b(n),"hasPopupMouseDown",void 0),Ne(b(n),"onMouseEnter",(function(e){var t=n.props.mouseEnterDelay;n.fireEvents("onMouseEnter",e),n.delaySetPopupVisible(!0,t,t?null:e)})),Ne(b(n),"onMouseMove",(function(e){n.fireEvents("onMouseMove",e),n.setPoint(e)})),Ne(b(n),"onMouseLeave",(function(e){n.fireEvents("onMouseLeave",e),n.delaySetPopupVisible(!1,n.props.mouseLeaveDelay)})),Ne(b(n),"onPopupMouseEnter",(function(){n.clearDelayTimer()})),Ne(b(n),"onPopupMouseLeave",(function(e){var t;e.relatedTarget&&!e.relatedTarget.setTimeout&&Ft(null===(t=n.popupRef.current)||void 0===t?void 0:t.getElement(),e.relatedTarget)||n.delaySetPopupVisible(!1,n.props.mouseLeaveDelay)})),Ne(b(n),"onFocus",(function(e){n.fireEvents("onFocus",e),n.clearDelayTimer(),n.isFocusToShow()&&(n.focusTime=Date.now(),n.delaySetPopupVisible(!0,n.props.focusDelay))})),Ne(b(n),"onMouseDown",(function(e){n.fireEvents("onMouseDown",e),n.preClickTime=Date.now()})),Ne(b(n),"onTouchStart",(function(e){n.fireEvents("onTouchStart",e),n.preTouchTime=Date.now()})),Ne(b(n),"onBlur",(function(e){n.fireEvents("onBlur",e),n.clearDelayTimer(),n.isBlurToHide()&&n.delaySetPopupVisible(!1,n.props.blurDelay)})),Ne(b(n),"onContextMenu",(function(e){e.preventDefault(),n.fireEvents("onContextMenu",e),n.setPopupVisible(!0,e)})),Ne(b(n),"onContextMenuClose",(function(){n.isContextMenuToShow()&&n.close()})),Ne(b(n),"onClick",(function(e){if(n.fireEvents("onClick",e),n.focusTime){var t;if(n.preClickTime&&n.preTouchTime?t=Math.min(n.preClickTime,n.preTouchTime):n.preClickTime?t=n.preClickTime:n.preTouchTime&&(t=n.preTouchTime),Math.abs(t-n.focusTime)<20)return;n.focusTime=0}n.preClickTime=0,n.preTouchTime=0,n.isClickToShow()&&(n.isClickToHide()||n.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var g=!n.state.popupVisible;(n.isClickToHide()&&!g||g&&n.isClickToShow())&&n.setPopupVisible(!n.state.popupVisible,e)})),Ne(b(n),"onPopupMouseDown",(function(){var e;(n.hasPopupMouseDown=!0,clearTimeout(n.mouseDownTimeout),n.mouseDownTimeout=window.setTimeout((function(){n.hasPopupMouseDown=!1}),0),n.context)&&(e=n.context).onPopupMouseDown.apply(e,arguments)})),Ne(b(n),"onDocumentClick",(function(e){if(!n.props.mask||n.props.maskClosable){var t=e.target,g=n.getRootDomNode(),o=n.getPopupDomNode();Ft(g,t)&&!n.isContextMenuOnly()||Ft(o,t)||n.hasPopupMouseDown||n.close()}})),Ne(b(n),"getRootDomNode",(function(){var e=n.props.getTriggerDOMNode;if(e)return e(n.triggerRef.current);try{var t=bs(n.triggerRef.current);if(t)return t}catch(g){}return As.findDOMNode(b(n))})),Ne(b(n),"getPopupClassNameFromAlign",(function(e){var t=[],g=n.props,o=g.popupPlacement,l=g.builtinPlacements,a=g.prefixCls,r=g.alignPoint,I=g.getPopupClassNameFromAlign;return o&&l&&t.push(function(e,t,n,g){for(var o=n.points,l=Object.keys(e),a=0;a<l.length;a+=1){var r=l[a];if(nA(e[r].points,o,g))return"".concat(t,"-placement-").concat(r)}return""}(l,a,e,r)),I&&t.push(I(e)),t.join(" ")})),Ne(b(n),"getComponent",(function(){var e=n.props,g=e.prefixCls,o=e.destroyPopupOnHide,l=e.popupClassName,a=e.onPopupAlign,r=e.popupMotion,I=e.popupAnimation,i=e.popupTransitionName,C=e.popupStyle,c=e.mask,u=e.maskAnimation,s=e.maskTransitionName,d=e.maskMotion,A=e.zIndex,m=e.popup,b=e.stretch,p=e.alignPoint,h=e.mobile,f=e.forceRender,y=e.onPopupClick,Z=n.state,v=Z.popupVisible,G=Z.point,B=n.getPopupAlign(),S={};return n.isMouseEnterToShow()&&(S.onMouseEnter=n.onPopupMouseEnter),n.isMouseLeaveToHide()&&(S.onMouseLeave=n.onPopupMouseLeave),S.onMouseDown=n.onPopupMouseDown,S.onTouchStart=n.onPopupMouseDown,t.createElement(ib,Ke({prefixCls:g,destroyPopupOnHide:o,visible:v,point:p&&G,className:l,align:B,onAlign:a,animation:I,getClassNameFromAlign:n.getPopupClassNameFromAlign},S,{stretch:b,getRootDomNode:n.getRootDomNode,style:C,mask:c,zIndex:A,transitionName:i,maskAnimation:u,maskTransitionName:s,maskMotion:d,ref:n.popupRef,motion:r,mobile:h,forceRender:f,onClick:y}),"function"===typeof m?m():m)})),Ne(b(n),"attachParent",(function(e){gd.cancel(n.attachId);var t,g=n.props,o=g.getPopupContainer,l=g.getDocument,a=n.getRootDomNode();o?(a||0===o.length)&&(t=o(a)):t=l(n.getRootDomNode()).body,t?t.appendChild(e):n.attachId=gd((function(){n.attachParent(e)}))})),Ne(b(n),"getContainer",(function(){if(!n.portalContainer){var e=(0,n.props.getDocument)(n.getRootDomNode()).createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",n.portalContainer=e}return n.attachParent(n.portalContainer),n.portalContainer})),Ne(b(n),"setPoint",(function(e){n.props.alignPoint&&e&&n.setState({point:{pageX:e.pageX,pageY:e.pageY}})})),Ne(b(n),"handlePortalUpdate",(function(){n.state.prevPopupVisible!==n.state.popupVisible&&n.props.afterPopupVisibleChange(n.state.popupVisible)})),Ne(b(n),"triggerContextValue",{onPopupMouseDown:n.onPopupMouseDown}),l="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,n.state={prevPopupVisible:l,popupVisible:l},db.forEach((function(e){n["fire".concat(e)]=function(t){n.fireEvents(e,t)}})),n}return c(o,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=$d(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=$d(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=$d(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=$d(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),gd.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,g=e.builtinPlacements;return t&&g?function(e,t,n){return $e($e({},e[t]||{}),n)}(g,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,g=this.state.popupVisible;this.clearDelayTimer(),g!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:g}),this.props.onPopupVisibleChange(e)),n&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var g=this,o=1e3*t;if(this.clearDelayTimer(),o){var l=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){g.setPopupVisible(e,l),g.clearDelayTimer()}),o)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var g=this.props[e];g&&g(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var n=this.state.popupVisible,g=this.props,o=g.children,l=g.forceRender,a=g.alignPoint,r=g.className,I=g.autoDestroy,i=t.Children.only(o),C={key:"trigger"};this.isContextMenuToShow()?C.onContextMenu=this.onContextMenu:C.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(C.onClick=this.onClick,C.onMouseDown=this.onMouseDown,C.onTouchStart=this.onTouchStart):(C.onClick=this.createTwoChains("onClick"),C.onMouseDown=this.createTwoChains("onMouseDown"),C.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(C.onMouseEnter=this.onMouseEnter,a&&(C.onMouseMove=this.onMouseMove)):C.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?C.onMouseLeave=this.onMouseLeave:C.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(C.onFocus=this.onFocus,C.onBlur=this.onBlur):(C.onFocus=this.createTwoChains("onFocus"),C.onBlur=this.createTwoChains("onBlur"));var c=xe()(i&&i.props&&i.props.className,r);c&&(C.className=c);var u=$e({},C);ds(i)&&(u.ref=us(this.triggerRef,i.ref));var s,d=t.cloneElement(i,u);return(n||this.popupRef.current||l)&&(s=t.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!n&&I&&(s=null),t.createElement(Cb.Provider,{value:this.triggerContextValue},d,s)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,g={};return void 0!==n&&t.popupVisible!==n&&(g.popupVisible=n,g.prevPopupVisible=t.popupVisible),g}}]),o}(t.Component);return Ne(n,"contextType",Cb),Ne(n,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:ub,getDocument:sb,onPopupVisibleChange:cb,afterPopupVisibleChange:cb,onPopupAlign:cb,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),n}(tA),mb={adjustX:1,adjustY:1},bb={topLeft:{points:["bl","tl"],overflow:mb,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:mb,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:mb,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:mb,offset:[4,0]}},pb={topLeft:{points:["bl","tl"],overflow:mb,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:mb,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:mb,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:mb,offset:[4,0]}};function hb(e,t,n){return t||(n?n[e]||n.other:void 0)}var fb={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function yb(e){var n=e.prefixCls,g=e.visible,o=e.children,l=e.popup,a=e.popupClassName,r=e.popupOffset,I=e.disabled,i=e.mode,C=e.onVisibleChange,c=t.useContext(yd),u=c.getPopupContainer,s=c.rtl,d=c.subMenuOpenDelay,A=c.subMenuCloseDelay,m=c.builtinPlacements,b=c.triggerSubMenuAction,p=c.forceSubMenuRender,h=c.rootClassName,f=c.motion,y=c.defaultMotions,v=Z(t.useState(!1),2),G=v[0],B=v[1],S=$e($e({},s?pb:bb),m),V=fb[i],W=$e($e({},hb(i,f,y)),{},{leavedClassName:"".concat(n,"-hidden"),removeOnLeave:!1,motionAppear:!0}),R=t.useRef();return t.useEffect((function(){return R.current=gd((function(){B(g)})),function(){gd.cancel(R.current)}}),[g]),t.createElement(Ab,{prefixCls:n,popupClassName:xe()("".concat(n,"-popup"),Ne({},"".concat(n,"-rtl"),s),a,h),stretch:"horizontal"===i?"minWidth":null,getPopupContainer:u,builtinPlacements:S,popupPlacement:V,popupVisible:G,popup:l,popupAlign:r&&{offset:r},action:I?[]:[b],mouseEnterDelay:d,mouseLeaveDelay:A,onPopupVisibleChange:C,forceRender:p,popupMotion:W},o)}function Zb(e){var n=e.id,g=e.open,o=e.keyPath,l=e.children,a="inline",r=t.useContext(yd),I=r.prefixCls,i=r.forceSubMenuRender,C=r.motion,c=r.defaultMotions,u=r.mode,s=t.useRef(!1);s.current=u===a;var d=Z(t.useState(!s.current),2),A=d[0],m=d[1],b=!!s.current&&g;t.useEffect((function(){s.current&&m(!1)}),[u]);var p=$e({},hb(a,C,c));o.length>1&&(p.motionAppear=!1);var h=p.onVisibleChanged;return p.onVisibleChanged=function(e){return s.current||e||m(!0),null===h||void 0===h?void 0:h(e)},A?null:t.createElement(Zd,{mode:a,locked:!s.current},t.createElement(UA,Ke({visible:b},p,{forceRender:i,removeOnLeave:!1,leavedClassName:"".concat(I,"-hidden")}),(function(e){var g=e.className,o=e.style;return t.createElement(_d,{id:n,className:g,style:o},l)})))}var vb=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],Gb=["active"],Bb=function(e){var n,g=e.style,o=e.className,l=e.title,a=e.eventKey,r=(e.warnKey,e.disabled),I=e.internalPopupClose,i=e.children,C=e.itemIcon,c=e.expandIcon,u=e.popupClassName,s=e.popupOffset,d=e.onClick,A=e.onMouseEnter,m=e.onMouseLeave,b=e.onTitleClick,p=e.onTitleMouseEnter,h=e.onTitleMouseLeave,f=tt(e,vb),y=Nd(a),v=t.useContext(yd),G=v.prefixCls,B=v.mode,S=v.openKeys,V=v.disabled,W=v.overflowDisabled,R=v.activeKey,k=v.selectedKeys,X=v.itemIcon,J=v.expandIcon,Y=v.onItemClick,w=v.onOpenChange,H=v.onActive,N=t.useContext(Kd)._internalRenderSubMenuItem,K=t.useContext(Yd).isSubPathKey,F=Jd(),x="".concat(G,"-submenu"),E=V||r,M=t.useRef(),z=t.useRef();var L=C||X,U=c||J,Q=S.includes(a),T=!W&&Q,D=K(k,a),j=vd(a,E,p,h),P=j.active,O=tt(j,Gb),q=Z(t.useState(!1),2),_=q[0],$=q[1],ee=function(e){E||$(e)},te=t.useMemo((function(){return P||"inline"!==B&&(_||K([R],a))}),[B,P,R,_,a,K]),ne=Vd(F.length),ge=jd((function(e){null===d||void 0===d||d(Bd(e)),Y(e)})),oe=y&&"".concat(y,"-popup"),le=t.createElement("div",Ke({role:"menuitem",style:ne,className:"".concat(x,"-title"),tabIndex:E?null:-1,ref:M,title:"string"===typeof l?l:null,"data-menu-id":W&&y?null:y,"aria-expanded":T,"aria-haspopup":!0,"aria-controls":oe,"aria-disabled":E,onClick:function(e){E||(null===b||void 0===b||b({key:a,domEvent:e}),"inline"===B&&w(a,!Q))},onFocus:function(){H(a)}},O),l,t.createElement(Sd,{icon:"horizontal"!==B?U:null,props:$e($e({},e),{},{isOpen:T,isSubMenu:!0})},t.createElement("i",{className:"".concat(x,"-arrow")}))),ae=t.useRef(B);if("inline"!==B&&(ae.current=F.length>1?"vertical":B),!W){var re=ae.current;le=t.createElement(yb,{mode:re,prefixCls:x,visible:!I&&T&&"inline"!==B,popupClassName:u,popupOffset:s,popup:t.createElement(Zd,{mode:"horizontal"===re?"vertical":re},t.createElement(_d,{id:oe,ref:z},i)),disabled:E,onVisibleChange:function(e){"inline"!==B&&w(a,e)}},le)}var Ie=t.createElement(bd.Item,Ke({role:"none"},f,{component:"li",style:g,className:xe()(x,"".concat(x,"-").concat(B),o,(n={},Ne(n,"".concat(x,"-open"),T),Ne(n,"".concat(x,"-active"),te),Ne(n,"".concat(x,"-selected"),D),Ne(n,"".concat(x,"-disabled"),E),n)),onMouseEnter:function(e){ee(!0),null===A||void 0===A||A({key:a,domEvent:e})},onMouseLeave:function(e){ee(!1),null===m||void 0===m||m({key:a,domEvent:e})}}),le,!W&&t.createElement(Zb,{id:oe,open:T,keyPath:F},i));return N&&(Ie=N(Ie,e,{selected:D,active:te,open:T,disabled:E})),t.createElement(Zd,{onItemClick:ge,mode:"horizontal"===B?"vertical":B,itemIcon:L,expandIcon:U},Ie)};function Sb(e){var n,g=e.eventKey,o=e.children,l=Jd(g),a=Qd(o,l),r=kd();return t.useEffect((function(){if(r)return r.registerPath(g,l),function(){r.unregisterPath(g,l)}}),[l]),n=r?a:t.createElement(Bb,e,a),t.createElement(Xd.Provider,{value:l},n)}function Vb(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(jA(e)){var n=e.nodeName.toLowerCase(),g=["input","select","textarea","button"].includes(n)||e.isContentEditable||"a"===n&&!!e.getAttribute("href"),o=e.getAttribute("tabindex"),l=Number(o),a=null;return o&&!Number.isNaN(l)?a=l:g&&null===a&&(a=0),g&&e.disabled&&(a=null),null!==a&&(a>=0||t&&a<0)}return!1}function Wb(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=I(e.querySelectorAll("*")).filter((function(e){return Vb(e,t)}));return Vb(e,t)&&n.unshift(e),n}var Rb=hd.LEFT,kb=hd.RIGHT,Xb=hd.UP,Jb=hd.DOWN,Yb=hd.ENTER,wb=hd.ESC,Hb=hd.HOME,Nb=hd.END,Kb=[Xb,Jb,Rb,kb];function Fb(e,t){return Wb(e,!0).filter((function(e){return t.has(e)}))}function xb(e,t,n){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return null;var o=Fb(e,t),l=o.length,a=o.findIndex((function(e){return n===e}));return g<0?-1===a?a=l-1:a-=1:g>0&&(a+=1),o[a=(a+l)%l]}function Eb(e,n,g,o,l,a,r,I,i,C){var c=t.useRef(),u=t.useRef();u.current=n;var s=function(){gd.cancel(c.current)};return t.useEffect((function(){return function(){s()}}),[]),function(t){var d=t.which;if([].concat(Kb,[Yb,wb,Hb,Nb]).includes(d)){var A,m,b,p=function(){return A=new Set,m=new Map,b=new Map,a().forEach((function(e){var t=document.querySelector("[data-menu-id='".concat(Hd(o,e),"']"));t&&(A.add(t),b.set(t,e),m.set(e,t))})),A};p();var h=function(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}(m.get(n),A),f=b.get(h),y=function(e,t,n,g){var o,l,a,r,I="prev",i="next",C="children",c="parent";if("inline"===e&&g===Yb)return{inlineTrigger:!0};var u=(Ne(o={},Xb,I),Ne(o,Jb,i),o),s=(Ne(l={},Rb,n?i:I),Ne(l,kb,n?I:i),Ne(l,Jb,C),Ne(l,Yb,C),l),d=(Ne(a={},Xb,I),Ne(a,Jb,i),Ne(a,Yb,C),Ne(a,wb,c),Ne(a,Rb,n?C:c),Ne(a,kb,n?c:C),a);switch(null===(r={inline:u,horizontal:s,vertical:d,inlineSub:u,horizontalSub:d,verticalSub:d}["".concat(e).concat(t?"":"Sub")])||void 0===r?void 0:r[g]){case I:return{offset:-1,sibling:!0};case i:return{offset:1,sibling:!0};case c:return{offset:-1,sibling:!1};case C:return{offset:1,sibling:!1};default:return null}}(e,1===r(f,!0).length,g,d);if(!y&&d!==Hb&&d!==Nb)return;(Kb.includes(d)||[Hb,Nb].includes(d))&&t.preventDefault();var Z=function(e){if(e){var t=e,n=e.querySelector("a");(null===n||void 0===n?void 0:n.getAttribute("href"))&&(t=n);var g=b.get(e);I(g),s(),c.current=gd((function(){u.current===g&&t.focus()}))}};if([Hb,Nb].includes(d)||y.sibling||!h){var v,G,B=Fb(v=h&&"inline"!==e?function(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}(h):l.current,A);G=d===Hb?B[0]:d===Nb?B[B.length-1]:xb(v,A,h,y.offset),Z(G)}else if(y.inlineTrigger)i(f);else if(y.offset>0)i(f,!0),s(),c.current=gd((function(){p();var e=h.getAttribute("aria-controls"),t=xb(document.getElementById(e),A);Z(t)}),5);else if(y.offset<0){var S=r(f,!0),V=S[S.length-2],W=m.get(V);i(V,!1),Z(W)}}null===C||void 0===C||C(t)}}var Mb=Math.random().toFixed(5).toString().slice(2),zb=0;var Lb="__RC_UTIL_PATH_SPLIT__",Ub=function(e){return e.join(Lb)},Qb="rc-menu-more";function Tb(){var e=Z(t.useState({}),2)[1],n=(0,t.useRef)(new Map),g=(0,t.useRef)(new Map),o=Z(t.useState([]),2),l=o[0],a=o[1],r=(0,t.useRef)(0),i=(0,t.useRef)(!1),C=(0,t.useCallback)((function(t,o){var l=Ub(o);g.current.set(l,t),n.current.set(t,l),r.current+=1;var a,I=r.current;a=function(){I===r.current&&(i.current||e({}))},Promise.resolve().then(a)}),[]),c=(0,t.useCallback)((function(e,t){var o=Ub(t);g.current.delete(o),n.current.delete(e)}),[]),u=(0,t.useCallback)((function(e){a(e)}),[]),s=(0,t.useCallback)((function(e,t){var g=n.current.get(e)||"",o=g.split(Lb);return t&&l.includes(o[0])&&o.unshift(Qb),o}),[l]),d=(0,t.useCallback)((function(e,t){return e.some((function(e){return s(e,!0).includes(t)}))}),[s]),A=(0,t.useCallback)((function(e){var t="".concat(n.current.get(e)).concat(Lb),o=new Set;return I(g.current.keys()).forEach((function(e){e.startsWith(t)&&o.add(g.current.get(e))})),o}),[]);return t.useEffect((function(){return function(){i.current=!0}}),[]),{registerPath:C,unregisterPath:c,refreshOverflowKeys:u,isSubPathKey:d,getKeyPath:s,getKeys:function(){var e=I(n.current.keys());return l.length&&e.push(Qb),e},getSubPathKeys:A}}var Db=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],jb=[],Pb=t.forwardRef((function(e,n){var g,o,l=e.prefixCls,a=void 0===l?"rc-menu":l,r=e.rootClassName,i=e.style,C=e.className,c=e.tabIndex,u=void 0===c?0:c,s=e.items,d=e.children,A=e.direction,m=e.id,b=e.mode,p=void 0===b?"vertical":b,h=e.inlineCollapsed,f=e.disabled,y=e.disabledOverflow,v=e.subMenuOpenDelay,G=void 0===v?.1:v,B=e.subMenuCloseDelay,S=void 0===B?.1:B,V=e.forceSubMenuRender,W=e.defaultOpenKeys,R=e.openKeys,k=e.activeKey,X=e.defaultActiveFirst,J=e.selectable,Y=void 0===J||J,w=e.multiple,H=void 0!==w&&w,N=e.defaultSelectedKeys,K=e.selectedKeys,F=e.onSelect,x=e.onDeselect,E=e.inlineIndent,M=void 0===E?24:E,z=e.motion,L=e.defaultMotions,U=e.triggerSubMenuAction,Q=void 0===U?"hover":U,T=e.builtinPlacements,D=e.itemIcon,j=e.expandIcon,P=e.overflowedIndicator,O=void 0===P?"...":P,q=e.overflowedIndicatorPopupClassName,_=e.getPopupContainer,$=e.onClick,ee=e.onOpenChange,te=e.onKeyDown,ne=(e.openAnimation,e.openTransitionName,e._internalRenderMenuItem),ge=e._internalRenderSubMenuItem,oe=tt(e,Db),le=t.useMemo((function(){return Dd(d,s,jb)}),[d,s]),ae=Z(t.useState(!1),2),re=ae[0],Ie=ae[1],ie=t.useRef(),Ce=function(e){var n=Z(rs(e,{value:e}),2),g=n[0],o=n[1];return t.useEffect((function(){zb+=1;var e="".concat(Mb,"-").concat(zb);o("rc-menu-uuid-".concat(e))}),[]),g}(m),ce="rtl"===A;var ue=Z(t.useMemo((function(){return"inline"!==p&&"vertical"!==p||!h?[p,!1]:["vertical",h]}),[p,h]),2),se=ue[0],de=ue[1],Ae=Z(t.useState(0),2),me=Ae[0],be=Ae[1],pe=me>=le.length-1||"horizontal"!==se||y,he=Z(rs(W,{value:R,postState:function(e){return e||jb}}),2),fe=he[0],ye=he[1],Ze=function(e){ye(e),null===ee||void 0===ee||ee(e)},ve=Z(t.useState(fe),2),Ge=ve[0],Be=ve[1],Se="inline"===se,Ve=t.useRef(!1);t.useEffect((function(){Se&&Be(fe)}),[fe]),t.useEffect((function(){Ve.current&&(Se?ye(Ge):Ze(jb))}),[Se]),t.useEffect((function(){return Ve.current=!0,function(){Ve.current=!1}}),[]);var We=Tb(),Re=We.registerPath,ke=We.unregisterPath,Xe=We.refreshOverflowKeys,Je=We.isSubPathKey,Ye=We.getKeyPath,we=We.getKeys,He=We.getSubPathKeys,Fe=t.useMemo((function(){return{registerPath:Re,unregisterPath:ke}}),[Re,ke]),Ee=t.useMemo((function(){return{isSubPathKey:Je}}),[Je]);t.useEffect((function(){Xe(pe?jb:le.slice(me+1).map((function(e){return e.key})))}),[me,pe]);var Me=Z(rs(k||X&&(null===(g=le[0])||void 0===g?void 0:g.key),{value:k}),2),ze=Me[0],Le=Me[1],Ue=jd((function(e){Le(e)})),Qe=jd((function(){Le(void 0)}));(0,t.useImperativeHandle)(n,(function(){return{list:ie.current,focus:function(e){var t,n,g,o,l=null!==ze&&void 0!==ze?ze:null===(t=le.find((function(e){return!e.props.disabled})))||void 0===t?void 0:t.key;l&&(null===(n=ie.current)||void 0===n||null===(g=n.querySelector("li[data-menu-id='".concat(Hd(Ce,l),"']")))||void 0===g||null===(o=g.focus)||void 0===o||o.call(g,e))}}}));var Te=Z(rs(N||[],{value:K,postState:function(e){return Array.isArray(e)?e:null===e||void 0===e?jb:[e]}}),2),De=Te[0],je=Te[1],Pe=jd((function(e){null===$||void 0===$||$(Bd(e)),function(e){if(Y){var t,n=e.key,g=De.includes(n);t=H?g?De.filter((function(e){return e!==n})):[].concat(I(De),[n]):[n],je(t);var o=$e($e({},e),{},{selectedKeys:t});g?null===x||void 0===x||x(o):null===F||void 0===F||F(o)}!H&&fe.length&&"inline"!==se&&Ze(jb)}(e)})),Oe=jd((function(e,t){var n=fe.filter((function(t){return t!==e}));if(t)n.push(e);else if("inline"!==se){var g=He(e);n=n.filter((function(e){return!g.has(e)}))}es()(fe,n)||Ze(n)})),qe=jd(_),_e=Eb(se,ze,ce,Ce,ie,we,Ye,Le,(function(e,t){var n=null!==t&&void 0!==t?t:!fe.includes(e);Oe(e,n)}),te);t.useEffect((function(){Ie(!0)}),[]);var et=t.useMemo((function(){return{_internalRenderMenuItem:ne,_internalRenderSubMenuItem:ge}}),[ne,ge]),nt="horizontal"!==se||y?le:le.map((function(e,n){return t.createElement(Zd,{key:e.key,overflowDisabled:n>me},e)})),gt=t.createElement(bd,Ke({id:m,ref:ie,prefixCls:"".concat(a,"-overflow"),component:"ul",itemComponent:Ld,className:xe()(a,"".concat(a,"-root"),"".concat(a,"-").concat(se),C,(o={},Ne(o,"".concat(a,"-inline-collapsed"),de),Ne(o,"".concat(a,"-rtl"),ce),o),r),dir:A,style:i,role:"menu",tabIndex:u,data:nt,renderRawItem:function(e){return e},renderRawRest:function(e){var n=e.length,g=n?le.slice(-n):null;return t.createElement(Sb,{eventKey:Qb,title:O,disabled:pe,internalPopupClose:0===n,popupClassName:q},g)},maxCount:"horizontal"!==se||y?bd.INVALIDATE:bd.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(e){be(e)},onKeyDown:_e},oe));return t.createElement(Kd.Provider,{value:et},t.createElement(wd.Provider,{value:Ce},t.createElement(Zd,{prefixCls:a,rootClassName:r,mode:se,openKeys:fe,rtl:ce,disabled:f,motion:re?z:null,defaultMotions:re?L:null,activeKey:ze,onActive:Ue,onInactive:Qe,selectedKeys:De,inlineIndent:M,subMenuOpenDelay:G,subMenuCloseDelay:S,forceSubMenuRender:V,builtinPlacements:T,triggerSubMenuAction:Q,getPopupContainer:qe,itemIcon:D,expandIcon:j,onItemClick:Pe,onOpenChange:Oe},t.createElement(Yd.Provider,{value:Ee},gt),t.createElement("div",{style:{display:"none"},"aria-hidden":!0},t.createElement(Rd.Provider,{value:Fe},le)))))})),Ob=["className","title","eventKey","children"],qb=["children"],_b=function(e){var n=e.className,g=e.title,o=(e.eventKey,e.children),l=tt(e,Ob),a=t.useContext(yd).prefixCls,r="".concat(a,"-item-group");return t.createElement("li",Ke({},l,{onClick:function(e){return e.stopPropagation()},className:xe()(r,n)}),t.createElement("div",{className:"".concat(r,"-title"),title:"string"===typeof g?g:void 0},g),t.createElement("ul",{className:"".concat(r,"-list")},o))};function $b(e){var n=e.children,g=tt(e,qb),o=Qd(n,Jd(g.eventKey));return kd()?o:t.createElement(_b,hn(g,["warnKey"]),o)}function ep(e){var n=e.className,g=e.style,o=t.useContext(yd).prefixCls;return kd()?null:t.createElement("li",{className:xe()("".concat(o,"-item-divider"),n),style:g})}var tp=Pb;tp.Item=Ld,tp.SubMenu=Sb,tp.ItemGroup=$b,tp.Divider=ep;var np=tp,gp=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},op=function(){return{height:0,opacity:0}},lp=function(e){return{height:e.scrollHeight,opacity:1}},ap=function(e,t){return!0===(null===t||void 0===t?void 0:t.deadline)||"height"===t.propertyName},rp={motionName:"ant-motion-collapse",onAppearStart:op,onEnterStart:op,onAppearActive:lp,onEnterActive:lp,onLeaveStart:function(e){return{height:e?e.offsetHeight:0}},onLeaveActive:op,onAppearEnd:ap,onEnterEnd:ap,onLeaveEnd:ap,motionDeadline:500},Ip=(gp("bottomLeft","bottomRight","topLeft","topRight"),function(e){return void 0===e||"topLeft"!==e&&"topRight"!==e?"slide-up":"slide-down"}),ip=function(e,t,n){return void 0!==n?n:"".concat(e,"-").concat(t)},Cp=rp,cp=t.isValidElement;function up(e){return e&&cp(e)&&e.type===t.Fragment}function sp(e,n){return function(e,n,g){return cp(e)?t.cloneElement(e,"function"===typeof g?g(e.props||{}):g):n}(e,e,n)}var dp=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},Ap=function(e){var n=e.prefixCls,g=e.className,o=e.dashed,l=dp(e,["prefixCls","className","dashed"]),a=(0,t.useContext(Ee).getPrefixCls)("menu",n),r=xe()(Ne({},"".concat(a,"-item-divider-dashed"),!!o),g);return t.createElement(ep,Ke({className:r},l))},mp={adjustX:1,adjustY:1},bp=[0,0],pp={left:{points:["cr","cl"],overflow:mp,offset:[-4,0],targetOffset:bp},right:{points:["cl","cr"],overflow:mp,offset:[4,0],targetOffset:bp},top:{points:["bc","tc"],overflow:mp,offset:[0,-4],targetOffset:bp},bottom:{points:["tc","bc"],overflow:mp,offset:[0,4],targetOffset:bp},topLeft:{points:["bl","tl"],overflow:mp,offset:[0,-4],targetOffset:bp},leftTop:{points:["tr","tl"],overflow:mp,offset:[-4,0],targetOffset:bp},topRight:{points:["br","tr"],overflow:mp,offset:[0,-4],targetOffset:bp},rightTop:{points:["tl","tr"],overflow:mp,offset:[4,0],targetOffset:bp},bottomRight:{points:["tr","br"],overflow:mp,offset:[0,4],targetOffset:bp},rightBottom:{points:["bl","br"],overflow:mp,offset:[4,0],targetOffset:bp},bottomLeft:{points:["tl","bl"],overflow:mp,offset:[0,4],targetOffset:bp},leftBottom:{points:["br","bl"],overflow:mp,offset:[-4,0],targetOffset:bp}};function hp(e){var n=e.showArrow,g=e.arrowContent,o=e.children,l=e.prefixCls,a=e.id,r=e.overlayInnerStyle,I=e.className,i=e.style;return t.createElement("div",{className:xe()("".concat(l,"-content"),I),style:i},!1!==n&&t.createElement("div",{className:"".concat(l,"-arrow"),key:"arrow"},g),t.createElement("div",{className:"".concat(l,"-inner"),id:a,role:"tooltip",style:r},"function"===typeof o?o():o))}var fp=function(e,n){var g=e.overlayClassName,o=e.trigger,l=void 0===o?["hover"]:o,a=e.mouseEnterDelay,r=void 0===a?0:a,I=e.mouseLeaveDelay,i=void 0===I?.1:I,C=e.overlayStyle,c=e.prefixCls,u=void 0===c?"rc-tooltip":c,s=e.children,d=e.onVisibleChange,A=e.afterVisibleChange,b=e.transitionName,p=e.animation,h=e.motion,f=e.placement,y=void 0===f?"right":f,Z=e.align,v=void 0===Z?{}:Z,G=e.destroyTooltipOnHide,B=void 0!==G&&G,S=e.defaultVisible,V=e.getTooltipContainer,W=e.overlayInnerStyle,R=e.arrowContent,k=e.overlay,X=e.id,J=e.showArrow,Y=tt(e,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"]),w=(0,t.useRef)(null);(0,t.useImperativeHandle)(n,(function(){return w.current}));var H=$e({},Y);"visible"in e&&(H.popupVisible=e.visible);var N=!1,K=!1;if("boolean"===typeof B)N=B;else if(B&&"object"===m(B)){var F=B.keepParent;N=!0===F,K=!1===F}return t.createElement(Ab,Ke({popupClassName:g,prefixCls:u,popup:function(){return t.createElement(hp,{showArrow:J,arrowContent:R,key:"content",prefixCls:u,id:X,overlayInnerStyle:W},k)},action:l,builtinPlacements:pp,popupPlacement:y,ref:w,popupAlign:v,getPopupContainer:V,onPopupVisibleChange:d,afterPopupVisibleChange:A,popupTransitionName:b,popupAnimation:p,popupMotion:h,defaultPopupVisible:S,destroyPopupOnHide:N,autoDestroy:K,mouseLeaveDelay:i,popupStyle:C,mouseEnterDelay:r},H),s)},yp=(0,t.forwardRef)(fp),Zp=(gp("success","processing","error","default","warning"),gp("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime")),vp={adjustX:1,adjustY:1},Gp={adjustX:0,adjustY:0},Bp=[0,0];function Sp(e){return"boolean"===typeof e?e?vp:Gp:Ke(Ke({},Gp),e)}function Vp(e){var t=e.arrowWidth,n=void 0===t?4:t,g=e.horizontalArrowShift,o=void 0===g?16:g,l=e.verticalArrowShift,a=void 0===l?8:l,r=e.autoAdjustOverflow,I=e.arrowPointAtCenter,i={left:{points:["cr","cl"],offset:[-4,0]},right:{points:["cl","cr"],offset:[4,0]},top:{points:["bc","tc"],offset:[0,-4]},bottom:{points:["tc","bc"],offset:[0,4]},topLeft:{points:["bl","tc"],offset:[-(o+n),-4]},leftTop:{points:["tr","cl"],offset:[-4,-(a+n)]},topRight:{points:["br","tc"],offset:[o+n,-4]},rightTop:{points:["tl","cr"],offset:[4,-(a+n)]},bottomRight:{points:["tr","bc"],offset:[o+n,4]},rightBottom:{points:["bl","cr"],offset:[4,a+n]},bottomLeft:{points:["tl","bc"],offset:[-(o+n),4]},leftBottom:{points:["br","cl"],offset:[-4,a+n]}};return Object.keys(i).forEach((function(e){i[e]=I?Ke(Ke({},i[e]),{overflow:Sp(r),targetOffset:Bp}):Ke(Ke({},pp[e]),{overflow:Sp(r)}),i[e].ignoreShake=!0})),i}var Wp=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},Rp=new RegExp("^(".concat(Zp.join("|"),")(-inverse)?$"));function kp(e,n){var g=e.type;if((!0===g.__ANT_BUTTON||"button"===e.type)&&e.props.disabled||!0===g.__ANT_SWITCH&&(e.props.disabled||e.props.loading)||!0===g.__ANT_RADIO&&e.props.disabled){var o=function(e,t){var n={},g=Ke({},e);return t.forEach((function(t){e&&t in e&&(n[t]=e[t],delete g[t])})),{picked:n,omitted:g}}(e.props.style,["position","left","right","top","bottom","float","display","zIndex"]),l=o.picked,a=o.omitted,r=Ke(Ke({display:"inline-block"},l),{cursor:"not-allowed",width:e.props.block?"100%":void 0}),I=sp(e,{style:Ke(Ke({},a),{pointerEvents:"none"}),className:null});return t.createElement("span",{style:r,className:xe()(e.props.className,"".concat(n,"-disabled-compatible-wrapper"))},I)}return e}var Xp=t.forwardRef((function(e,n){var g,o=t.useContext(Ee),l=o.getPopupContainer,a=o.getPrefixCls,r=o.direction;var I=Z(rs(!1,{value:void 0!==e.open?e.open:e.visible,defaultValue:void 0!==e.defaultOpen?e.defaultOpen:e.defaultVisible}),2),i=I[0],C=I[1],c=function(){var t=e.title,n=e.overlay;return!t&&!n&&0!==t},u=function(){var t=e.builtinPlacements,n=e.arrowPointAtCenter,g=void 0!==n&&n,o=e.autoAdjustOverflow;return t||Vp({arrowPointAtCenter:g,autoAdjustOverflow:void 0===o||o})},s=e.getPopupContainer,d=e.placement,A=void 0===d?"top":d,m=e.mouseEnterDelay,b=void 0===m?.1:m,p=e.mouseLeaveDelay,h=void 0===p?.1:p,f=Wp(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay"]),y=e.prefixCls,v=e.openClassName,G=e.getTooltipContainer,B=e.overlayClassName,S=e.color,V=e.overlayInnerStyle,W=e.children,R=a("tooltip",y),k=a(),X=i;"open"in e||"visible"in e||!c()||(X=!1);var J=kp(cp(W)&&!up(W)?W:t.createElement("span",null,W),R),Y=J.props,w=Y.className&&"string"!==typeof Y.className?Y.className:xe()(Y.className,Ne({},v||"".concat(R,"-open"),!0)),H=xe()(B,(Ne(g={},"".concat(R,"-rtl"),"rtl"===r),Ne(g,"".concat(R,"-").concat(S),S&&Rp.test(S)),g)),N=V,K={};return S&&!Rp.test(S)&&(N=Ke(Ke({},V),{background:S}),K={"--antd-arrow-background-color":S}),t.createElement(yp,Ke({},f,{placement:A,mouseEnterDelay:b,mouseLeaveDelay:h,prefixCls:R,overlayClassName:H,getTooltipContainer:s||G||l,ref:n,builtinPlacements:u(),overlay:function(){var t=e.title,n=e.overlay;return 0===t?t:n||t||""}(),visible:X,onVisibleChange:function(t){var n,g;C(!c()&&t),c()||(null===(n=e.onOpenChange)||void 0===n||n.call(e,t),null===(g=e.onVisibleChange)||void 0===g||g.call(e,t))},onPopupAlign:function(e,t){var n=u(),g=Object.keys(n).find((function(e){var g,o;return n[e].points[0]===(null===(g=t.points)||void 0===g?void 0:g[0])&&n[e].points[1]===(null===(o=t.points)||void 0===o?void 0:o[1])}));if(g){var o=e.getBoundingClientRect(),l={top:"50%",left:"50%"};/top|Bottom/.test(g)?l.top="".concat(o.height-t.offset[1],"px"):/Top|bottom/.test(g)&&(l.top="".concat(-t.offset[1],"px")),/left|Right/.test(g)?l.left="".concat(o.width-t.offset[0],"px"):/right|Left/.test(g)&&(l.left="".concat(-t.offset[0],"px")),e.style.transformOrigin="".concat(l.left," ").concat(l.top)}},overlayInnerStyle:N,arrowContent:t.createElement("span",{className:"".concat(R,"-arrow-content"),style:K}),motion:{motionName:ip(k,"zoom-big-fast",e.transitionName),motionDeadline:1e3}}),X?sp(J,{className:w}):J)}));var Jp=Xp,Yp=(0,t.createContext)({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),wp=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},Hp=function(e){s(g,e);var n=h(g);function g(){var e;return i(this,g),(e=n.apply(this,arguments)).renderItem=function(n){var g,o,l=n.siderCollapsed,a=e.context,r=a.prefixCls,I=a.firstLevel,i=a.inlineCollapsed,C=a.direction,c=a.disableMenuItemTitleTooltip,u=e.props,s=u.className,d=u.children,A=e.props,m=A.title,b=A.icon,p=A.danger,h=wp(A,["title","icon","danger"]),f=m;"undefined"===typeof m?f=I?d:"":!1===m&&(f="");var y={title:f};l||i||(y.title=null,y.open=!1);var Z=is(d).length,v=t.createElement(Ld,Ke({},h,{className:xe()((g={},Ne(g,"".concat(r,"-item-danger"),p),Ne(g,"".concat(r,"-item-only-child"),1===(b?Z+1:Z)),g),s),title:"string"===typeof m?m:void 0}),sp(b,{className:xe()(cp(b)?null===(o=b.props)||void 0===o?void 0:o.className:"","".concat(r,"-item-icon"))}),e.renderItemChildren(i));return c||(v=t.createElement(Jp,Ke({},y,{placement:"rtl"===C?"left":"right",overlayClassName:"".concat(r,"-inline-collapsed-tooltip")}),v)),v},e}return c(g,[{key:"renderItemChildren",value:function(e){var n=this.context,g=n.prefixCls,o=n.firstLevel,l=this.props,a=l.icon,r=l.children,I=t.createElement("span",{className:"".concat(g,"-title-content")},r);return(!a||cp(r)&&"span"===r.type)&&r&&e&&o&&"string"===typeof r?t.createElement("div",{className:"".concat(g,"-inline-collapsed-noicon")},r.charAt(0)):I}},{key:"render",value:function(){return t.createElement(vn.Consumer,null,this.renderItem)}}]),g}(t.Component);Hp.contextType=Yp;var Np=function(e){var n,g,o=e.popupClassName,l=e.icon,a=e.title,r=e.theme,I=t.useContext(Yp),i=I.prefixCls,C=I.inlineCollapsed,c=I.antdMenuTheme,u=Jd();if(l){var s=cp(a)&&"span"===a.type;g=t.createElement(t.Fragment,null,sp(l,{className:xe()(cp(l)?null===(n=l.props)||void 0===n?void 0:n.className:"","".concat(i,"-item-icon"))}),s?a:t.createElement("span",{className:"".concat(i,"-title-content")},a))}else g=C&&!u.length&&a&&"string"===typeof a?t.createElement("div",{className:"".concat(i,"-inline-collapsed-noicon")},a.charAt(0)):t.createElement("span",{className:"".concat(i,"-title-content")},a);var d=t.useMemo((function(){return Ke(Ke({},I),{firstLevel:!1})}),[I]);return t.createElement(Yp.Provider,{value:d},t.createElement(Sb,Ke({},hn(e,["icon"]),{title:g,popupClassName:xe()(i,"".concat(i,"-").concat(r||c),o)})))},Kp=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n};function Fp(e){return(e||[]).map((function(e,n){if(e&&"object"===m(e)){var g=e,o=g.label,l=g.children,a=g.key,r=g.type,I=Kp(g,["label","children","key","type"]),i=null!==a&&void 0!==a?a:"tmp-".concat(n);return l||"group"===r?"group"===r?t.createElement($b,Ke({key:i},I,{title:o}),Fp(l)):t.createElement(Np,Ke({key:i},I,{title:o}),Fp(l)):"divider"===r?t.createElement(Ap,Ke({key:i},I)):t.createElement(Hp,Ke({key:i},I),o)}return null})).filter((function(e){return e}))}function xp(e){return t.useMemo((function(){return e?Fp(e):e}),[e])}var Ep=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},Mp=t.createContext(null),zp=function(e){var n=e.children,g=Ep(e,["children"]),o=t.useContext(Mp),l=t.useMemo((function(){return Ke(Ke({},o),g)}),[o,g.prefixCls,g.mode,g.selectable]);return t.createElement(Mp.Provider,{value:l},n)},Lp=Mp,Up=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},Qp=(0,t.forwardRef)((function(e,n){var g,o=t.useContext(Lp)||{},l=t.useContext(Ee),a=l.getPrefixCls,r=l.getPopupContainer,I=l.direction,i=a(),C=e.prefixCls,c=e.className,u=e.theme,s=void 0===u?"light":u,d=e.expandIcon,A=e._internalDisableMenuItemTitleTooltip,m=e.inlineCollapsed,b=e.siderCollapsed,p=e.items,h=e.children,f=e.mode,y=e.selectable,Z=e.onClick,v=hn(Up(e,["prefixCls","className","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","items","children","mode","selectable","onClick"]),["collapsedWidth"]),G=xp(p)||h;null===(g=o.validator)||void 0===g||g.call(o,{mode:f});var B,S=ts((function(){var e;null===Z||void 0===Z||Z.apply(void 0,arguments),null===(e=null===o||void 0===o?void 0:o.onClick)||void 0===e||e.call(o)})),V=o.mode||f,W=null!==y&&void 0!==y?y:o.selectable,R=t.useMemo((function(){return void 0!==b?b:m}),[m,b]),k={horizontal:{motionName:"".concat(i,"-slide-up")},inline:Cp,other:{motionName:"".concat(i,"-zoom-big")}},X=a("menu",C||o.prefixCls),J=xe()("".concat(X,"-").concat(s),c);B="function"===typeof d?d:sp(d||o.expandIcon,{className:"".concat(X,"-submenu-expand-icon")});var Y=t.useMemo((function(){return{prefixCls:X,inlineCollapsed:R||!1,antdMenuTheme:s,direction:I,firstLevel:!0,disableMenuItemTitleTooltip:A}}),[X,R,s,I,A]);return t.createElement(Lp.Provider,{value:null},t.createElement(Yp.Provider,{value:Y},t.createElement(np,Ke({getPopupContainer:r,overflowedIndicator:t.createElement(_u,null),overflowedIndicatorPopupClassName:"".concat(X,"-").concat(s),mode:V,selectable:W,onClick:S},v,{inlineCollapsed:R,className:J,prefixCls:X,direction:I,defaultMotions:k,expandIcon:B,ref:n}),G)))})),Tp=function(e){s(g,e);var n=h(g);function g(){var e;return i(this,g),(e=n.apply(this,arguments)).focus=function(t){var n;null===(n=e.menu)||void 0===n||n.focus(t)},e}return c(g,[{key:"render",value:function(){var e=this;return t.createElement(vn.Consumer,null,(function(n){return t.createElement(Qp,Ke({ref:function(t){e.menu=t}},e.props,n))}))}}]),g}(t.Component);Tp.Divider=Ap,Tp.Item=Hp,Tp.SubMenu=Np,Tp.ItemGroup=$b;var Dp=Tp,jp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},Pp=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:jp}))};Pp.displayName="CheckCircleFilled";var Op=t.forwardRef(Pp),qp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},_p=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:qp}))};_p.displayName="CloseCircleFilled";var $p=t.forwardRef(_p),eh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},th=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:eh}))};th.displayName="ExclamationCircleFilled";var nh=t.forwardRef(th),gh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},oh=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:gh}))};oh.displayName="InfoCircleFilled";var lh=t.forwardRef(oh),ah={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},rh=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:ah}))};rh.displayName="LoadingOutlined";var Ih,ih=t.forwardRef(rh),Ch=$e({},ms),ch=Ch.version,uh=Ch.render,sh=Ch.unmountComponentAtNode;try{Number((ch||"").split(".")[0])>=18&&(Ih=Ch.createRoot)}catch(HY){}function dh(e){var t=Ch.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&"object"===m(t)&&(t.usingClientEntryPoint=e)}var Ah="__rc_react_root__";function mh(e,t){Ih?function(e,t){dh(!0);var n=t[Ah]||Ih(t);dh(!1),n.render(e),t[Ah]=n}(e,t):function(e,t){uh(e,t)}(e,t)}function bh(e){return ph.apply(this,arguments)}function ph(){return(ph=GC(ZC().mark((function e(t){return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve().then((function(){var e;null===(e=t[Ah])||void 0===e||e.unmount(),delete t[Ah]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hh(e){sh(e)}function fh(){return(fh=GC(ZC().mark((function e(t){return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===Ih){e.next=2;break}return e.abrupt("return",bh(t));case 2:hh(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yh=function(e){s(g,e);var n=h(g);function g(){var e;i(this,g);for(var t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return(e=n.call.apply(n,[this].concat(o))).closeTimer=null,e.close=function(t){t&&t.stopPropagation(),e.clearCloseTimer();var n=e.props,g=n.onClose,o=n.noticeKey;g&&g(o)},e.startCloseTimer=function(){e.props.duration&&(e.closeTimer=window.setTimeout((function(){e.close()}),1e3*e.props.duration))},e.clearCloseTimer=function(){e.closeTimer&&(clearTimeout(e.closeTimer),e.closeTimer=null)},e}return c(g,[{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentDidUpdate",value:function(e){(this.props.duration!==e.duration||this.props.updateMark!==e.updateMark||this.props.visible!==e.visible&&this.props.visible)&&this.restartCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"restartCloseTimer",value:function(){this.clearCloseTimer(),this.startCloseTimer()}},{key:"render",value:function(){var e=this,n=this.props,g=n.prefixCls,o=n.className,l=n.closable,a=n.closeIcon,r=n.style,I=n.onClick,i=n.children,C=n.holder,c="".concat(g,"-notice"),u=Object.keys(this.props).reduce((function(t,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||(t[n]=e.props[n]),t}),{}),s=t.createElement("div",Ke({className:xe()(c,o,Ne({},"".concat(c,"-closable"),l)),style:r,onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onClick:I},u),t.createElement("div",{className:"".concat(c,"-content")},i),l?t.createElement("a",{tabIndex:0,onClick:this.close,className:"".concat(c,"-close")},a||t.createElement("span",{className:"".concat(c,"-close-x")})):null);return C?As.createPortal(s,C):s}}]),g}(t.Component);function Zh(e){var n=t.useRef({}),g=Z(t.useState([]),2),o=g[0],l=g[1];return[function(g){var o=!0;e.add(g,(function(e,g){var a=g.key;if(e&&(!n.current[a]||o)){var r=t.createElement(yh,Ke({},g,{holder:e}));n.current[a]=r,l((function(e){var t=e.findIndex((function(e){return e.key===g.key}));if(-1===t)return[].concat(I(e),[r]);var n=I(e);return n[t]=r,n}))}o=!1}))},t.createElement(t.Fragment,null,o)]}yh.defaultProps={onClose:function(){},duration:1.5};var vh=["getContainer"],Gh=0,Bh=Date.now();function Sh(){var e=Gh;return Gh+=1,"rcNotification_".concat(Bh,"_").concat(e)}var Vh=function(e){s(g,e);var n=h(g);function g(){var e;i(this,g);for(var t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return(e=n.call.apply(n,[this].concat(o))).state={notices:[]},e.hookRefs=new Map,e.add=function(t,n){var g,o=null!==(g=t.key)&&void 0!==g?g:Sh(),l=$e($e({},t),{},{key:o}),a=e.props.maxCount;e.setState((function(e){var t=e.notices,g=t.map((function(e){return e.notice.key})).indexOf(o),r=t.concat();return-1!==g?r.splice(g,1,{notice:l,holderCallback:n}):(a&&t.length>=a&&(l.key=r[0].notice.key,l.updateMark=Sh(),l.userPassKey=o,r.shift()),r.push({notice:l,holderCallback:n})),{notices:r}}))},e.remove=function(t){e.setState((function(e){return{notices:e.notices.filter((function(e){var n=e.notice,g=n.key,o=n.userPassKey;return(null!==o&&void 0!==o?o:g)!==t}))}}))},e.noticePropsMap={},e}return c(g,[{key:"getTransitionName",value:function(){var e=this.props,t=e.prefixCls,n=e.animation,g=this.props.transitionName;return!g&&n&&(g="".concat(t,"-").concat(n)),g}},{key:"render",value:function(){var e=this,n=this.state.notices,g=this.props,o=g.prefixCls,l=g.className,a=g.closeIcon,r=g.style,I=[];return n.forEach((function(t,g){var l=t.notice,r=t.holderCallback,i=g===n.length-1?l.updateMark:void 0,C=l.key,c=l.userPassKey,u=$e($e($e({prefixCls:o,closeIcon:a},l),l.props),{},{key:C,noticeKey:c||C,updateMark:i,onClose:function(t){var n;e.remove(t),null===(n=l.onClose)||void 0===n||n.call(l)},onClick:l.onClick,children:l.content});I.push(C),e.noticePropsMap[C]={props:u,holderCallback:r}})),t.createElement("div",{className:xe()(o,l),style:r},t.createElement(LA,{keys:I,motionName:this.getTransitionName(),onVisibleChanged:function(t,n){var g=n.key;t||delete e.noticePropsMap[g]}},(function(n){var g=n.key,l=n.className,a=n.style,r=n.visible,I=e.noticePropsMap[g],i=I.props,C=I.holderCallback;return C?t.createElement("div",{key:g,className:xe()(l,"".concat(o,"-hook-holder")),style:$e({},a),ref:function(t){"undefined"!==typeof g&&(t?(e.hookRefs.set(g,t),C(t,i)):e.hookRefs.delete(g))}}):t.createElement(yh,Ke({},i,{className:xe()(l,null===i||void 0===i?void 0:i.className),style:$e($e({},a),null===i||void 0===i?void 0:i.style),visible:r}))})))}}]),g}(t.Component);Vh.newInstance=void 0,Vh.defaultProps={prefixCls:"rc-notification",animation:"fade",style:{top:65,left:"50%"}},Vh.newInstance=function(e,n){var g=e||{},o=g.getContainer,l=tt(g,vh),a=document.createElement("div");o?o().appendChild(a):document.body.appendChild(a);var r=!1;mh(t.createElement(Vh,Ke({},l,{ref:function(e){r||(r=!0,n({notice:function(t){e.add(t)},removeNotice:function(t){e.remove(t)},component:e,destroy:function(){!function(e){fh.apply(this,arguments)}(a),a.parentNode&&a.parentNode.removeChild(a)},useNotification:function(){return Zh(e)}}))}})),a)};var Wh=Vh,Rh="RC_FORM_INTERNAL_HOOKS",kh=function(){Nt(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Xh=t.createContext({getFieldValue:kh,getFieldsValue:kh,getFieldError:kh,getFieldWarning:kh,getFieldsError:kh,isFieldsTouched:kh,isFieldTouched:kh,isFieldValidating:kh,isFieldsValidating:kh,resetFields:kh,setFields:kh,setFieldValue:kh,setFieldsValue:kh,validateFields:kh,submit:kh,getInternalHooks:function(){return kh(),{dispatch:kh,initEntityValue:kh,registerField:kh,useSubscribe:kh,setInitialValues:kh,destroyForm:kh,setCallbacks:kh,registerWatch:kh,getFields:kh,setValidateMessages:kh,setPreserve:kh,getInitialValue:kh}}});function Jh(e){return void 0===e||null===e?[]:Array.isArray(e)?e:[e]}function Yh(){return Yh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var g in n)Object.prototype.hasOwnProperty.call(n,g)&&(e[g]=n[g])}return e},Yh.apply(this,arguments)}function wh(e){return wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wh(e)}function Hh(e,t){return Hh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hh(e,t)}function Nh(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(HY){return!1}}function Kh(e,t,n){return Kh=Nh()?Reflect.construct.bind():function(e,t,n){var g=[null];g.push.apply(g,t);var o=new(Function.bind.apply(e,g));return n&&Hh(o,n.prototype),o},Kh.apply(null,arguments)}function Fh(e){var t="function"===typeof Map?new Map:void 0;return Fh=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,g)}function g(){return Kh(e,arguments,wh(this).constructor)}return g.prototype=Object.create(e.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),Hh(g,e)},Fh(e)}var xh=/%[sdj%]/g;function Eh(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function Mh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),g=1;g<t;g++)n[g-1]=arguments[g];var o=0,l=n.length;if("function"===typeof e)return e.apply(null,n);if("string"===typeof e){var a=e.replace(xh,(function(e){if("%%"===e)return"%";if(o>=l)return e;switch(e){case"%s":return String(n[o++]);case"%d":return Number(n[o++]);case"%j":try{return JSON.stringify(n[o++])}catch(t){return"[Circular]"}break;default:return e}}));return a}return e}function zh(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!==typeof e||e))}function Lh(e,t,n){var g=0,o=e.length;!function l(a){if(a&&a.length)n(a);else{var r=g;g+=1,r<o?t(e[r],l):n([])}}([])}var Uh=function(e){var t,n;function g(t,n){var g;return(g=e.call(this,"Async Validation Error")||this).errors=t,g.fields=n,g}return n=e,(t=g).prototype=Object.create(n.prototype),t.prototype.constructor=t,Hh(t,n),g}(Fh(Error));function Qh(e,t,n,g,o){if(t.first){var l=new Promise((function(t,l){var a=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n]||[])})),t}(e);Lh(a,n,(function(e){return g(e),e.length?l(new Uh(e,Eh(e))):t(o)}))}));return l.catch((function(e){return e})),l}var a=!0===t.firstFields?Object.keys(e):t.firstFields||[],r=Object.keys(e),I=r.length,i=0,C=[],c=new Promise((function(t,l){var c=function(e){if(C.push.apply(C,e),++i===I)return g(C),C.length?l(new Uh(C,Eh(C))):t(o)};r.length||(g(C),t(o)),r.forEach((function(t){var g=e[t];-1!==a.indexOf(t)?Lh(g,n,c):function(e,t,n){var g=[],o=0,l=e.length;function a(e){g.push.apply(g,e||[]),++o===l&&n(g)}e.forEach((function(e){t(e,a)}))}(g,n,c)}))}));return c.catch((function(e){return e})),c}function Th(e,t){return function(n){var g,o;return g=e.fullFields?function(e,t){for(var n=e,g=0;g<t.length;g++){if(void 0==n)return n;n=n[t[g]]}return n}(t,e.fullFields):t[n.field||e.fullField],(o=n)&&void 0!==o.message?(n.field=n.field||e.fullField,n.fieldValue=g,n):{message:"function"===typeof n?n():n,fieldValue:g,field:n.field||e.fullField}}}function Dh(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var g=t[n];"object"===typeof g&&"object"===typeof e[n]?e[n]=Yh({},e[n],g):e[n]=g}return e}var jh,Ph=function(e,t,n,g,o,l){!e.required||n.hasOwnProperty(e.field)&&!zh(t,l||e.type)||g.push(Mh(o.messages.required,e.fullField))},Oh=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,qh=/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i,_h={integer:function(e){return _h.number(e)&&parseInt(e,10)===e},float:function(e){return _h.number(e)&&!_h.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(HY){return!1}},date:function(e){return"function"===typeof e.getTime&&"function"===typeof e.getMonth&&"function"===typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"===typeof e},object:function(e){return"object"===typeof e&&!_h.array(e)},method:function(e){return"function"===typeof e},email:function(e){return"string"===typeof e&&e.length<=320&&!!e.match(Oh)},url:function(e){return"string"===typeof e&&e.length<=2048&&!!e.match(function(){if(jh)return jh;var e="[a-fA-F\\d:]",t=function(t){return t&&t.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",g="[a-fA-F\\d]{1,4}",o=("\n(?:\n(?:"+g+":){7}(?:"+g+"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:"+g+":){6}(?:"+n+"|:"+g+"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:"+g+":){5}(?::"+n+"|(?::"+g+"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:"+g+":){4}(?:(?::"+g+"){0,1}:"+n+"|(?::"+g+"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:"+g+":){3}(?:(?::"+g+"){0,2}:"+n+"|(?::"+g+"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:"+g+":){2}(?:(?::"+g+"){0,3}:"+n+"|(?::"+g+"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:"+g+":){1}(?:(?::"+g+"){0,4}:"+n+"|(?::"+g+"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::"+g+"){0,5}:"+n+"|(?::"+g+"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),l=new RegExp("(?:^"+n+"$)|(?:^"+o+"$)"),a=new RegExp("^"+n+"$"),r=new RegExp("^"+o+"$"),I=function(e){return e&&e.exact?l:new RegExp("(?:"+t(e)+n+t(e)+")|(?:"+t(e)+o+t(e)+")","g")};I.v4=function(e){return e&&e.exact?a:new RegExp(""+t(e)+n+t(e),"g")},I.v6=function(e){return e&&e.exact?r:new RegExp(""+t(e)+o+t(e),"g")};var i=I.v4().source,C=I.v6().source;return jh=new RegExp("(?:^(?:(?:(?:[a-z]+:)?//)|www\\.)(?:\\S+(?::\\S*)?@)?(?:localhost|"+i+"|"+C+'|(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#][^\\s"]*)?$)',"i")}())},hex:function(e){return"string"===typeof e&&!!e.match(qh)}},$h={required:Ph,whitespace:function(e,t,n,g,o){(/^\s+$/.test(t)||""===t)&&g.push(Mh(o.messages.whitespace,e.fullField))},type:function(e,t,n,g,o){if(e.required&&void 0===t)Ph(e,t,n,g,o);else{var l=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(l)>-1?_h[l](t)||g.push(Mh(o.messages.types[l],e.fullField,e.type)):l&&typeof t!==e.type&&g.push(Mh(o.messages.types[l],e.fullField,e.type))}},range:function(e,t,n,g,o){var l="number"===typeof e.len,a="number"===typeof e.min,r="number"===typeof e.max,I=t,i=null,C="number"===typeof t,c="string"===typeof t,u=Array.isArray(t);if(C?i="number":c?i="string":u&&(i="array"),!i)return!1;u&&(I=t.length),c&&(I=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),l?I!==e.len&&g.push(Mh(o.messages[i].len,e.fullField,e.len)):a&&!r&&I<e.min?g.push(Mh(o.messages[i].min,e.fullField,e.min)):r&&!a&&I>e.max?g.push(Mh(o.messages[i].max,e.fullField,e.max)):a&&r&&(I<e.min||I>e.max)&&g.push(Mh(o.messages[i].range,e.fullField,e.min,e.max))},enum:function(e,t,n,g,o){e.enum=Array.isArray(e.enum)?e.enum:[],-1===e.enum.indexOf(t)&&g.push(Mh(o.messages.enum,e.fullField,e.enum.join(", ")))},pattern:function(e,t,n,g,o){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||g.push(Mh(o.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"===typeof e.pattern){new RegExp(e.pattern).test(t)||g.push(Mh(o.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},ef=function(e,t,n,g,o){var l=e.type,a=[];if(e.required||!e.required&&g.hasOwnProperty(e.field)){if(zh(t,l)&&!e.required)return n();$h.required(e,t,g,a,o,l),zh(t,l)||$h.type(e,t,g,a,o)}n(a)},tf={string:function(e,t,n,g,o){var l=[];if(e.required||!e.required&&g.hasOwnProperty(e.field)){if(zh(t,"string")&&!e.required)return n();$h.required(e,t,g,l,o,"string"),zh(t,"string")||($h.type(e,t,g,l,o),$h.range(e,t,g,l,o),$h.pattern(e,t,g,l,o),!0===e.whitespace&&$h.whitespace(e,t,g,l,o))}n(l)},method:function(e,t,n,g,o){var l=[];if(e.required||!e.required&&g.hasOwnProperty(e.field)){if(zh(t)&&!e.required)return n();$h.required(e,t,g,l,o),void 0!==t&&$h.type(e,t,g,l,o)}n(l)},number:function(e,t,n,g,o){var l=[];if(e.required||!e.required&&g.hasOwnProperty(e.field)){if(""===t&&(t=void 0),zh(t)&&!e.required)return n();$h.required(e,t,g,l,o),void 0!==t&&($h.type(e,t,g,l,o),$h.range(e,t,g,l,o))}n(l)},boolean:function(e,t,n,g,o){var l=[];if(e.required||!e.required&&g.hasOwnProperty(e.field)){if(zh(t)&&!e.required)return n();$h.required(e,t,g,l,o),void 0!==t&&$h.type(e,t,g,l,o)}n(l)},regexp:function(e,t,n,g,o){var l=[];if(e.required||!e.required&&g.hasOwnProperty(e.field)){if(zh(t)&&!e.required)return n();$h.required(e,t,g,l,o),zh(t)||$h.type(e,t,g,l,o)}n(l)},integer:function(e,t,n,g,o){var l=[];if(e.required||!e.required&&g.hasOwnProperty(e.field)){if(zh(t)&&!e.required)return n();$h.required(e,t,g,l,o),void 0!==t&&($h.type(e,t,g,l,o),$h.range(e,t,g,l,o))}n(l)},float:function(e,t,n,g,o){var l=[];if(e.required||!e.required&&g.hasOwnProperty(e.field)){if(zh(t)&&!e.required)return n();$h.required(e,t,g,l,o),void 0!==t&&($h.type(e,t,g,l,o),$h.range(e,t,g,l,o))}n(l)},array:function(e,t,n,g,o){var l=[];if(e.required||!e.required&&g.hasOwnProperty(e.field)){if((void 0===t||null===t)&&!e.required)return n();$h.required(e,t,g,l,o,"array"),void 0!==t&&null!==t&&($h.type(e,t,g,l,o),$h.range(e,t,g,l,o))}n(l)},object:function(e,t,n,g,o){var l=[];if(e.required||!e.required&&g.hasOwnProperty(e.field)){if(zh(t)&&!e.required)return n();$h.required(e,t,g,l,o),void 0!==t&&$h.type(e,t,g,l,o)}n(l)},enum:function(e,t,n,g,o){var l=[];if(e.required||!e.required&&g.hasOwnProperty(e.field)){if(zh(t)&&!e.required)return n();$h.required(e,t,g,l,o),void 0!==t&&$h.enum(e,t,g,l,o)}n(l)},pattern:function(e,t,n,g,o){var l=[];if(e.required||!e.required&&g.hasOwnProperty(e.field)){if(zh(t,"string")&&!e.required)return n();$h.required(e,t,g,l,o),zh(t,"string")||$h.pattern(e,t,g,l,o)}n(l)},date:function(e,t,n,g,o){var l=[];if(e.required||!e.required&&g.hasOwnProperty(e.field)){if(zh(t,"date")&&!e.required)return n();var a;if($h.required(e,t,g,l,o),!zh(t,"date"))a=t instanceof Date?t:new Date(t),$h.type(e,a,g,l,o),a&&$h.range(e,a.getTime(),g,l,o)}n(l)},url:ef,hex:ef,email:ef,required:function(e,t,n,g,o){var l=[],a=Array.isArray(t)?"array":typeof t;$h.required(e,t,g,l,o,a),n(l)},any:function(e,t,n,g,o){var l=[];if(e.required||!e.required&&g.hasOwnProperty(e.field)){if(zh(t)&&!e.required)return n();$h.required(e,t,g,l,o)}n(l)}};function nf(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var gf=nf(),of=function(){function e(e){this.rules=null,this._messages=gf,this.define(e)}var t=e.prototype;return t.define=function(e){var t=this;if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==typeof e||Array.isArray(e))throw new Error("Rules must be an object");this.rules={},Object.keys(e).forEach((function(n){var g=e[n];t.rules[n]=Array.isArray(g)?g:[g]}))},t.messages=function(e){return e&&(this._messages=Dh(nf(),e)),this._messages},t.validate=function(t,n,g){var o=this;void 0===n&&(n={}),void 0===g&&(g=function(){});var l=t,a=n,r=g;if("function"===typeof a&&(r=a,a={}),!this.rules||0===Object.keys(this.rules).length)return r&&r(null,l),Promise.resolve(l);if(a.messages){var I=this.messages();I===gf&&(I=nf()),Dh(I,a.messages),a.messages=I}else a.messages=this.messages();var i={};(a.keys||Object.keys(this.rules)).forEach((function(e){var n=o.rules[e],g=l[e];n.forEach((function(n){var a=n;"function"===typeof a.transform&&(l===t&&(l=Yh({},l)),g=l[e]=a.transform(g)),(a="function"===typeof a?{validator:a}:Yh({},a)).validator=o.getValidationMethod(a),a.validator&&(a.field=e,a.fullField=a.fullField||e,a.type=o.getType(a),i[e]=i[e]||[],i[e].push({rule:a,value:g,source:l,field:e}))}))}));var C={};return Qh(i,a,(function(t,n){var g,o=t.rule,r=("object"===o.type||"array"===o.type)&&("object"===typeof o.fields||"object"===typeof o.defaultField);function I(e,t){return Yh({},t,{fullField:o.fullField+"."+e,fullFields:o.fullFields?[].concat(o.fullFields,[e]):[e]})}function i(g){void 0===g&&(g=[]);var i=Array.isArray(g)?g:[g];!a.suppressWarning&&i.length&&e.warning("async-validator:",i),i.length&&void 0!==o.message&&(i=[].concat(o.message));var c=i.map(Th(o,l));if(a.first&&c.length)return C[o.field]=1,n(c);if(r){if(o.required&&!t.value)return void 0!==o.message?c=[].concat(o.message).map(Th(o,l)):a.error&&(c=[a.error(o,Mh(a.messages.required,o.field))]),n(c);var u={};o.defaultField&&Object.keys(t.value).map((function(e){u[e]=o.defaultField})),u=Yh({},u,t.rule.fields);var s={};Object.keys(u).forEach((function(e){var t=u[e],n=Array.isArray(t)?t:[t];s[e]=n.map(I.bind(null,e))}));var d=new e(s);d.messages(a.messages),t.rule.options&&(t.rule.options.messages=a.messages,t.rule.options.error=a.error),d.validate(t.value,t.rule.options||a,(function(e){var t=[];c&&c.length&&t.push.apply(t,c),e&&e.length&&t.push.apply(t,e),n(t.length?t:null)}))}else n(c)}if(r=r&&(o.required||!o.required&&t.value),o.field=t.field,o.asyncValidator)g=o.asyncValidator(o,t.value,i,t.source,a);else if(o.validator){try{g=o.validator(o,t.value,i,t.source,a)}catch(c){null==console.error||console.error(c),a.suppressValidatorError||setTimeout((function(){throw c}),0),i(c.message)}!0===g?i():!1===g?i("function"===typeof o.message?o.message(o.fullField||o.field):o.message||(o.fullField||o.field)+" fails"):g instanceof Array?i(g):g instanceof Error&&i(g.message)}g&&g.then&&g.then((function(){return i()}),(function(e){return i(e)}))}),(function(e){!function(e){var t=[],n={};function g(e){var n;Array.isArray(e)?t=(n=t).concat.apply(n,e):t.push(e)}for(var o=0;o<e.length;o++)g(e[o]);t.length?(n=Eh(t),r(t,n)):r(null,l)}(e)}),l)},t.getType=function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!==typeof e.validator&&e.type&&!tf.hasOwnProperty(e.type))throw new Error(Mh("Unknown rule type %s",e.type));return e.type||"string"},t.getValidationMethod=function(e){if("function"===typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?tf.required:tf[this.getType(e)]||void 0},e}();of.register=function(e,t){if("function"!==typeof t)throw new Error("Cannot register a validator by type, validator is not a function");tf[e]=t},of.warning=function(){},of.messages=gf,of.validators=tf;var lf="'${name}' is not a valid ${type}",af={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:lf,method:lf,array:lf,object:lf,number:lf,date:lf,boolean:lf,integer:lf,float:lf,regexp:lf,email:lf,url:lf,hex:lf},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}};function rf(e,t){for(var n=e,g=0;g<t.length;g+=1){if(null===n||void 0===n)return;n=n[t[g]]}return n}function If(e){return f(e)||a(e)||r(e)||y()}function Cf(e,t,n,g){if(!t.length)return n;var o,l=If(t),a=l[0],r=l.slice(1);return o=e||"number"!==typeof a?Array.isArray(e)?I(e):$e({},e):[],g&&void 0===n&&1===r.length?delete o[a][r[0]]:o[a]=Cf(o[a],r,n,g),o}function cf(e,t,n){var g=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.length&&g&&void 0===n&&!rf(e,t.slice(0,-1))?e:Cf(e,t,n,g)}function uf(e){return Array.isArray(e)?function(e){return e.map((function(e){return uf(e)}))}(e):"object"===m(e)&&null!==e?function(e){if(Object.getPrototypeOf(e)===Object.prototype){var t={};for(var n in e)t[n]=uf(e[n]);return t}return e}(e):e}var sf=uf;function df(e){return Jh(e)}function Af(e,t){return rf(e,t)}function mf(e,t,n){var g=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=cf(e,t,n,g);return o}function bf(e,t){var n={};return t.forEach((function(t){var g=Af(e,t);n=mf(n,t,g)})),n}function pf(e,t){return e&&e.some((function(e){return Zf(e,t)}))}function hf(e){return"object"===m(e)&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function ff(e,t){var n=Array.isArray(e)?I(e):$e({},e);return t?(Object.keys(t).forEach((function(e){var g=n[e],o=t[e],l=hf(g)&&hf(o);n[e]=l?ff(g,o||{}):sf(o)})),n):n}function yf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),g=1;g<t;g++)n[g-1]=arguments[g];return n.reduce((function(e,t){return ff(e,t)}),e)}function Zf(e,t){return!(!e||!t||e.length!==t.length)&&e.every((function(e,n){return t[n]===e}))}function vf(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&"object"===m(t.target)&&e in t.target?t.target[e]:t}function Gf(e,t,n){var g=e.length;if(t<0||t>=g||n<0||n>=g)return e;var o=e[t],l=t-n;return l>0?[].concat(I(e.slice(0,n)),[o],I(e.slice(n,t)),I(e.slice(t+1,g))):l<0?[].concat(I(e.slice(0,t)),I(e.slice(t+1,n+1)),[o],I(e.slice(n+1,g))):e}var Bf=of;function Sf(e,t){return e.replace(/\$\{\w+\}/g,(function(e){var n=e.slice(2,-1);return t[n]}))}var Vf="CODE_LOGIC_ERROR";function Wf(e,t,n,g,o){return Rf.apply(this,arguments)}function Rf(){return Rf=GC(ZC().mark((function e(n,g,o,l,a){var r,i,C,c,u,s,d,A,m;return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(r=$e({},o)).ruleIndex,r.validator&&(i=r.validator,r.validator=function(){try{return i.apply(void 0,arguments)}catch(e){return console.error(e),Promise.reject(Vf)}}),C=null,r&&"array"===r.type&&r.defaultField&&(C=r.defaultField,delete r.defaultField),c=new Bf(Ne({},n,[r])),u=yf({},af,l.validateMessages),c.messages(u),s=[],e.prev=9,e.next=12,Promise.resolve(c.validate(Ne({},n,g),$e({},l)));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),e.t0.errors&&(s=e.t0.errors.map((function(e,n){var g=e.message,o=g===Vf?u.default:g;return t.isValidElement(o)?t.cloneElement(o,{key:"error_".concat(n)}):o})));case 17:if(s.length||!C){e.next=22;break}return e.next=20,Promise.all(g.map((function(e,t){return Wf("".concat(n,".").concat(t),e,C,l,a)})));case 20:return d=e.sent,e.abrupt("return",d.reduce((function(e,t){return[].concat(I(e),I(t))}),[]));case 22:return A=$e($e({},o),{},{name:n,enum:(o.enum||[]).join(", ")},a),m=s.map((function(e){return"string"===typeof e?Sf(e,A):e})),e.abrupt("return",m);case 25:case"end":return e.stop()}}),e,null,[[9,14]])}))),Rf.apply(this,arguments)}function kf(e,t,n,g,o,l){var a,r=e.join("."),I=n.map((function(e,t){var n=e.validator,g=$e($e({},e),{},{ruleIndex:t});return n&&(g.validator=function(e,t,g){var o=!1,l=n(e,t,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Promise.resolve().then((function(){Nt(!o,"Your validator function has already return a promise. `callback` will be ignored."),o||g.apply(void 0,t)}))}));o=l&&"function"===typeof l.then&&"function"===typeof l.catch,Nt(o,"`callback` is deprecated. Please return a promise instead."),o&&l.then((function(){g()})).catch((function(e){g(e||" ")}))}),g})).sort((function(e,t){var n=e.warningOnly,g=e.ruleIndex,o=t.warningOnly,l=t.ruleIndex;return!!n===!!o?g-l:n?1:-1}));if(!0===o)a=new Promise(function(){var e=GC(ZC().mark((function e(n,o){var a,i,C;return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<I.length)){e.next=12;break}return i=I[a],e.next=5,Wf(r,t,i,g,l);case 5:if(!(C=e.sent).length){e.next=9;break}return o([{errors:C,rule:i}]),e.abrupt("return");case 9:a+=1,e.next=1;break;case 12:n([]);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());else{var i=I.map((function(e){return Wf(r,t,e,g,l).then((function(t){return{errors:t,rule:e}}))}));a=(o?function(e){return Jf.apply(this,arguments)}(i):function(e){return Xf.apply(this,arguments)}(i)).then((function(e){return Promise.reject(e)}))}return a.catch((function(e){return e})),a}function Xf(){return(Xf=GC(ZC().mark((function e(t){return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t).then((function(e){var t;return(t=[]).concat.apply(t,I(e))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jf(){return(Jf=GC(ZC().mark((function e(t){var n;return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",new Promise((function(e){t.forEach((function(g){g.then((function(g){g.errors.length&&e([g]),(n+=1)===t.length&&e([])}))}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Yf=["name"],wf=[];function Hf(e,t,n,g,o,l){return"function"===typeof e?e(t,n,"source"in l?{source:l.source}:{}):g!==o}var Nf=function(e){s(g,e);var n=h(g);function g(e){var o;(i(this,g),(o=n.call(this,e)).state={resetCount:0},o.cancelRegisterFunc=null,o.mounted=!1,o.touched=!1,o.dirty=!1,o.validatePromise=null,o.prevValidating=void 0,o.errors=wf,o.warnings=wf,o.cancelRegister=function(){var e=o.props,t=e.preserve,n=e.isListField,g=e.name;o.cancelRegisterFunc&&o.cancelRegisterFunc(n,t,df(g)),o.cancelRegisterFunc=null},o.getNamePath=function(){var e=o.props,t=e.name,n=e.fieldContext.prefixName;return void 0!==t?[].concat(I(void 0===n?[]:n),I(t)):[]},o.getRules=function(){var e=o.props,t=e.rules,n=void 0===t?[]:t,g=e.fieldContext;return n.map((function(e){return"function"===typeof e?e(g):e}))},o.refresh=function(){o.mounted&&o.setState((function(e){return{resetCount:e.resetCount+1}}))},o.triggerMetaEvent=function(e){var t=o.props.onMetaChange;null===t||void 0===t||t($e($e({},o.getMeta()),{},{destroy:e}))},o.onStoreChange=function(e,t,n){var g=o.props,l=g.shouldUpdate,a=g.dependencies,r=void 0===a?[]:a,I=g.onReset,i=n.store,C=o.getNamePath(),c=o.getValue(e),u=o.getValue(i),s=t&&pf(t,C);switch("valueUpdate"===n.type&&"external"===n.source&&c!==u&&(o.touched=!0,o.dirty=!0,o.validatePromise=null,o.errors=wf,o.warnings=wf,o.triggerMetaEvent()),n.type){case"reset":if(!t||s)return o.touched=!1,o.dirty=!1,o.validatePromise=null,o.errors=wf,o.warnings=wf,o.triggerMetaEvent(),null===I||void 0===I||I(),void o.refresh();break;case"remove":if(l)return void o.reRender();break;case"setField":if(s){var d=n.data;return"touched"in d&&(o.touched=d.touched),"validating"in d&&!("originRCField"in d)&&(o.validatePromise=d.validating?Promise.resolve([]):null),"errors"in d&&(o.errors=d.errors||wf),"warnings"in d&&(o.warnings=d.warnings||wf),o.dirty=!0,o.triggerMetaEvent(),void o.reRender()}if(l&&!C.length&&Hf(l,e,i,c,u,n))return void o.reRender();break;case"dependenciesUpdate":if(r.map(df).some((function(e){return pf(n.relatedFields,e)})))return void o.reRender();break;default:if(s||(!r.length||C.length||l)&&Hf(l,e,i,c,u,n))return void o.reRender()}!0===l&&o.reRender()},o.validateRules=function(e){var t=o.getNamePath(),n=o.getValue(),g=Promise.resolve().then((function(){if(!o.mounted)return[];var l=o.props,a=l.validateFirst,r=void 0!==a&&a,i=l.messageVariables,C=(e||{}).triggerName,c=o.getRules();C&&(c=c.filter((function(e){return e})).filter((function(e){var t=e.validateTrigger;return!t||Jh(t).includes(C)})));var u=kf(t,n,c,e,r,i);return u.catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wf;if(o.validatePromise===g){var t;o.validatePromise=null;var n=[],l=[];null===(t=e.forEach)||void 0===t||t.call(e,(function(e){var t=e.rule.warningOnly,g=e.errors,o=void 0===g?wf:g;t?l.push.apply(l,I(o)):n.push.apply(n,I(o))})),o.errors=n,o.warnings=l,o.triggerMetaEvent(),o.reRender()}})),u}));return o.validatePromise=g,o.dirty=!0,o.errors=wf,o.warnings=wf,o.triggerMetaEvent(),o.reRender(),g},o.isFieldValidating=function(){return!!o.validatePromise},o.isFieldTouched=function(){return o.touched},o.isFieldDirty=function(){return!(!o.dirty&&void 0===o.props.initialValue)||void 0!==(0,o.props.fieldContext.getInternalHooks(Rh).getInitialValue)(o.getNamePath())},o.getErrors=function(){return o.errors},o.getWarnings=function(){return o.warnings},o.isListField=function(){return o.props.isListField},o.isList=function(){return o.props.isList},o.isPreserve=function(){return o.props.preserve},o.getMeta=function(){return o.prevValidating=o.isFieldValidating(),{touched:o.isFieldTouched(),validating:o.prevValidating,errors:o.errors,warnings:o.warnings,name:o.getNamePath()}},o.getOnlyChild=function(e){if("function"===typeof e){var n=o.getMeta();return $e($e({},o.getOnlyChild(e(o.getControlled(),n,o.props.fieldContext))),{},{isFunction:!0})}var g=is(e);return 1===g.length&&t.isValidElement(g[0])?{child:g[0],isFunction:!1}:{child:g,isFunction:!1}},o.getValue=function(e){var t=o.props.fieldContext.getFieldsValue,n=o.getNamePath();return Af(e||t(!0),n)},o.getControlled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.props,n=t.trigger,g=t.validateTrigger,l=t.getValueFromEvent,a=t.normalize,r=t.valuePropName,I=t.getValueProps,i=t.fieldContext,C=void 0!==g?g:i.validateTrigger,c=o.getNamePath(),u=i.getInternalHooks,s=i.getFieldsValue,d=u(Rh),A=d.dispatch,m=o.getValue(),b=I||function(e){return Ne({},r,e)},p=e[n],h=$e($e({},e),b(m));h[n]=function(){var e;o.touched=!0,o.dirty=!0,o.triggerMetaEvent();for(var t=arguments.length,n=new Array(t),g=0;g<t;g++)n[g]=arguments[g];e=l?l.apply(void 0,n):vf.apply(void 0,[r].concat(n)),a&&(e=a(e,m,s(!0))),A({type:"updateValue",namePath:c,value:e}),p&&p.apply(void 0,n)};var f=Jh(C||[]);return f.forEach((function(e){var t=h[e];h[e]=function(){t&&t.apply(void 0,arguments);var n=o.props.rules;n&&n.length&&A({type:"validateField",namePath:c,triggerName:e})}})),h},e.fieldContext)&&(0,(0,e.fieldContext.getInternalHooks)(Rh).initEntityValue)(b(o));return o}return c(g,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,n=e.fieldContext;if(this.mounted=!0,n){var g=(0,n.getInternalHooks)(Rh).registerField;this.cancelRegisterFunc=g(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,n=this.state.resetCount,g=this.props.children,o=this.getOnlyChild(g),l=o.child;return o.isFunction?e=l:t.isValidElement(l)?e=t.cloneElement(l,this.getControlled(l.props)):(Nt(!l,"`children` of Field is not validate ReactElement."),e=l),t.createElement(t.Fragment,{key:n},e)}}]),g}(t.Component);Nf.contextType=Xh,Nf.defaultProps={trigger:"onChange",valuePropName:"value"};var Kf=function(e){var n=e.name,g=tt(e,Yf),o=t.useContext(Xh),l=void 0!==n?df(n):void 0,a="keep";return g.isListField||(a="_".concat((l||[]).join("_"))),t.createElement(Nf,Ke({key:a,name:l},g,{fieldContext:o}))},Ff=t.createContext(null),xf=function(e){var n=e.name,g=e.initialValue,o=e.children,l=e.rules,a=e.validateTrigger,r=t.useContext(Xh),i=t.useRef({keys:[],id:0}).current,C=t.useMemo((function(){var e=df(r.prefixName)||[];return[].concat(I(e),I(df(n)))}),[r.prefixName,n]),c=t.useMemo((function(){return $e($e({},r),{},{prefixName:C})}),[r,C]),u=t.useMemo((function(){return{getKey:function(e){var t=C.length,n=e[t];return[i.keys[n],e.slice(t+1)]}}}),[C]);if("function"!==typeof o)return Nt(!1,"Form.List only accepts function as children."),null;return t.createElement(Ff.Provider,{value:u},t.createElement(Xh.Provider,{value:c},t.createElement(Kf,{name:[],shouldUpdate:function(e,t,n){return"internal"!==n.source&&e!==t},rules:l,validateTrigger:a,initialValue:g,isList:!0},(function(e,t){var n=e.value,g=void 0===n?[]:n,l=e.onChange,a=r.getFieldValue,c=function(){return a(C||[])||[]},u={add:function(e,t){var n=c();t>=0&&t<=n.length?(i.keys=[].concat(I(i.keys.slice(0,t)),[i.id],I(i.keys.slice(t))),l([].concat(I(n.slice(0,t)),[e],I(n.slice(t))))):(i.keys=[].concat(I(i.keys),[i.id]),l([].concat(I(n),[e]))),i.id+=1},remove:function(e){var t=c(),n=new Set(Array.isArray(e)?e:[e]);n.size<=0||(i.keys=i.keys.filter((function(e,t){return!n.has(t)})),l(t.filter((function(e,t){return!n.has(t)}))))},move:function(e,t){if(e!==t){var n=c();e<0||e>=n.length||t<0||t>=n.length||(i.keys=Gf(i.keys,e,t),l(Gf(n,e,t)))}}},s=g||[];return Array.isArray(s)||(s=[]),o(s.map((function(e,t){var n=i.keys[t];return void 0===n&&(i.keys[t]=i.id,n=i.keys[t],i.id+=1),{name:t,key:n,isListField:!0}})),u,t)}))))};var Ef="__@field_split__";function Mf(e){return e.map((function(e){return"".concat(m(e),":").concat(e)})).join(Ef)}var zf=function(){function e(){i(this,e),this.kvs=new Map}return c(e,[{key:"set",value:function(e,t){this.kvs.set(Mf(e),t)}},{key:"get",value:function(e){return this.kvs.get(Mf(e))}},{key:"update",value:function(e,t){var n=t(this.get(e));n?this.set(e,n):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete(Mf(e))}},{key:"map",value:function(e){return I(this.kvs.entries()).map((function(t){var n=Z(t,2),g=n[0],o=n[1],l=g.split(Ef);return e({key:l.map((function(e){var t=Z(e.match(/^([^:]*):(.*)$/),3),n=t[1],g=t[2];return"number"===n?Number(g):g})),value:o})}))}},{key:"toJSON",value:function(){var e={};return this.map((function(t){var n=t.key,g=t.value;return e[n.join(".")]=g,null})),e}}]),e}(),Lf=zf,Uf=["name","errors"],Qf=c((function e(t){var n=this;i(this,e),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldValue:n.setFieldValue,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(e){return e===Rh?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(Nt(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(e){n.subscribable=e},this.prevWithoutPreserves=null,this.setInitialValues=function(e,t){if(n.initialValues=e||{},t){var g,o=yf({},e,n.store);null===(g=n.prevWithoutPreserves)||void 0===g||g.map((function(t){var n=t.key;o=mf(o,n,Af(e,n))})),n.prevWithoutPreserves=null,n.updateStore(o)}},this.destroyForm=function(){var e=new Lf;n.getFieldEntities(!0).forEach((function(t){n.isMergedPreserve(t.isPreserve())||e.set(t.getNamePath(),!0)})),n.prevWithoutPreserves=e},this.getInitialValue=function(e){var t=Af(n.initialValues,e);return e.length?sf(t):t},this.setCallbacks=function(e){n.callbacks=e},this.setValidateMessages=function(e){n.validateMessages=e},this.setPreserve=function(e){n.preserve=e},this.watchList=[],this.registerWatch=function(e){return n.watchList.push(e),function(){n.watchList=n.watchList.filter((function(t){return t!==e}))}},this.notifyWatch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(n.watchList.length){var t=n.getFieldsValue();n.watchList.forEach((function(n){n(t,e)}))}},this.timeoutId=null,this.warningUnhooked=function(){0},this.updateStore=function(e){n.store=e},this.getFieldEntities=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?n.fieldEntities.filter((function(e){return e.getNamePath().length})):n.fieldEntities},this.getFieldsMap=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Lf;return n.getFieldEntities(e).forEach((function(e){var n=e.getNamePath();t.set(n,e)})),t},this.getFieldEntitiesForNamePathList=function(e){if(!e)return n.getFieldEntities(!0);var t=n.getFieldsMap(!0);return e.map((function(e){var n=df(e);return t.get(n)||{INVALIDATE_NAME_PATH:df(e)}}))},this.getFieldsValue=function(e,t){if(n.warningUnhooked(),!0===e&&!t)return n.store;var g=n.getFieldEntitiesForNamePathList(Array.isArray(e)?e:null),o=[];return g.forEach((function(n){var g,l="INVALIDATE_NAME_PATH"in n?n.INVALIDATE_NAME_PATH:n.getNamePath();if(e||!(null===(g=n.isListField)||void 0===g?void 0:g.call(n)))if(t){var a="getMeta"in n?n.getMeta():null;t(a)&&o.push(l)}else o.push(l)})),bf(n.store,o.map(df))},this.getFieldValue=function(e){n.warningUnhooked();var t=df(e);return Af(n.store,t)},this.getFieldsError=function(e){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(e).map((function(t,n){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors(),warnings:t.getWarnings()}:{name:df(e[n]),errors:[],warnings:[]}}))},this.getFieldError=function(e){n.warningUnhooked();var t=df(e);return n.getFieldsError([t])[0].errors},this.getFieldWarning=function(e){n.warningUnhooked();var t=df(e);return n.getFieldsError([t])[0].warnings},this.isFieldsTouched=function(){n.warningUnhooked();for(var e=arguments.length,t=new Array(e),g=0;g<e;g++)t[g]=arguments[g];var o,l=t[0],a=t[1],r=!1;0===t.length?o=null:1===t.length?Array.isArray(l)?(o=l.map(df),r=!1):(o=null,r=l):(o=l.map(df),r=a);var i=n.getFieldEntities(!0),C=function(e){return e.isFieldTouched()};if(!o)return r?i.every(C):i.some(C);var c=new Lf;o.forEach((function(e){c.set(e,[])})),i.forEach((function(e){var t=e.getNamePath();o.forEach((function(n){n.every((function(e,n){return t[n]===e}))&&c.update(n,(function(t){return[].concat(I(t),[e])}))}))}));var u=function(e){return e.some(C)},s=c.map((function(e){return e.value}));return r?s.every(u):s.some(u)},this.isFieldTouched=function(e){return n.warningUnhooked(),n.isFieldsTouched([e])},this.isFieldsValidating=function(e){n.warningUnhooked();var t=n.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var g=e.map(df);return t.some((function(e){var t=e.getNamePath();return pf(g,t)&&e.isFieldValidating()}))},this.isFieldValidating=function(e){return n.warningUnhooked(),n.isFieldsValidating([e])},this.resetWithFieldInitialValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Lf,g=n.getFieldEntities(!0);g.forEach((function(e){var n=e.props.initialValue,g=e.getNamePath();if(void 0!==n){var o=t.get(g)||new Set;o.add({entity:e,value:n}),t.set(g,o)}}));var o,l=function(g){g.forEach((function(g){if(void 0!==g.props.initialValue){var o=g.getNamePath();if(void 0!==n.getInitialValue(o))Nt(!1,"Form already set 'initialValues' with path '".concat(o.join("."),"'. Field can not overwrite it."));else{var l=t.get(o);if(l&&l.size>1)Nt(!1,"Multiple Field with path '".concat(o.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(l){var a=n.getFieldValue(o);e.skipExist&&void 0!==a||n.updateStore(mf(n.store,o,I(l)[0].value))}}}}))};e.entities?o=e.entities:e.namePathList?(o=[],e.namePathList.forEach((function(e){var n,g=t.get(e);g&&(n=o).push.apply(n,I(I(g).map((function(e){return e.entity}))))}))):o=g,l(o)},this.resetFields=function(e){n.warningUnhooked();var t=n.store;if(!e)return n.updateStore(yf({},n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(t,null,{type:"reset"}),void n.notifyWatch();var g=e.map(df);g.forEach((function(e){var t=n.getInitialValue(e);n.updateStore(mf(n.store,e,t))})),n.resetWithFieldInitialValue({namePathList:g}),n.notifyObservers(t,g,{type:"reset"}),n.notifyWatch(g)},this.setFields=function(e){n.warningUnhooked();var t=n.store,g=[];e.forEach((function(e){var o=e.name,l=(e.errors,tt(e,Uf)),a=df(o);g.push(a),"value"in l&&n.updateStore(mf(n.store,a,l.value)),n.notifyObservers(t,[a],{type:"setField",data:e})})),n.notifyWatch(g)},this.getFields=function(){return n.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),g=$e($e({},e.getMeta()),{},{name:t,value:n.getFieldValue(t)});return Object.defineProperty(g,"originRCField",{value:!0}),g}))},this.initEntityValue=function(e){var t=e.props.initialValue;if(void 0!==t){var g=e.getNamePath();void 0===Af(n.store,g)&&n.updateStore(mf(n.store,g,t))}},this.isMergedPreserve=function(e){var t=void 0!==e?e:n.preserve;return null===t||void 0===t||t},this.registerField=function(e){n.fieldEntities.push(e);var t=e.getNamePath();if(n.notifyWatch([t]),void 0!==e.props.initialValue){var g=n.store;n.resetWithFieldInitialValue({entities:[e],skipExist:!0}),n.notifyObservers(g,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(g,o){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter((function(t){return t!==e})),!n.isMergedPreserve(o)&&(!g||l.length>1)){var a=g?void 0:n.getInitialValue(t);if(t.length&&n.getFieldValue(t)!==a&&n.fieldEntities.every((function(e){return!Zf(e.getNamePath(),t)}))){var r=n.store;n.updateStore(mf(r,t,a,!0)),n.notifyObservers(r,[t],{type:"remove"}),n.triggerDependenciesUpdate(r,t)}}n.notifyWatch([t])}},this.dispatch=function(e){switch(e.type){case"updateValue":var t=e.namePath,g=e.value;n.updateValue(t,g);break;case"validateField":var o=e.namePath,l=e.triggerName;n.validateFields([o],{triggerName:l})}},this.notifyObservers=function(e,t,g){if(n.subscribable){var o=$e($e({},g),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(e,t,o)}))}else n.forceRootUpdate()},this.triggerDependenciesUpdate=function(e,t){var g=n.getDependencyChildrenFields(t);return g.length&&n.validateFields(g),n.notifyObservers(e,g,{type:"dependenciesUpdate",relatedFields:[t].concat(I(g))}),g},this.updateValue=function(e,t){var g=df(e),o=n.store;n.updateStore(mf(n.store,g,t)),n.notifyObservers(o,[g],{type:"valueUpdate",source:"internal"}),n.notifyWatch([g]);var l=n.triggerDependenciesUpdate(o,g),a=n.callbacks.onValuesChange;a&&a(bf(n.store,[g]),n.getFieldsValue());n.triggerOnFieldsChange([g].concat(I(l)))},this.setFieldsValue=function(e){n.warningUnhooked();var t=n.store;if(e){var g=yf(n.store,e);n.updateStore(g)}n.notifyObservers(t,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()},this.setFieldValue=function(e,t){n.setFields([{name:e,value:t}])},this.getDependencyChildrenFields=function(e){var t=new Set,g=[],o=new Lf;n.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var n=df(t);o.update(n,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))}));return function e(n){(o.get(n)||new Set).forEach((function(n){if(!t.has(n)){t.add(n);var o=n.getNamePath();n.isFieldDirty()&&o.length&&(g.push(o),e(o))}}))}(e),g},this.triggerOnFieldsChange=function(e,t){var g=n.callbacks.onFieldsChange;if(g){var o=n.getFields();if(t){var l=new Lf;t.forEach((function(e){var t=e.name,n=e.errors;l.set(t,n)})),o.forEach((function(e){e.errors=l.get(e.name)||e.errors}))}g(o.filter((function(t){var n=t.name;return pf(e,n)})),o)}},this.validateFields=function(e,t){n.warningUnhooked();var g=!!e,o=g?e.map(df):[],l=[];n.getFieldEntities(!0).forEach((function(a){if(g||o.push(a.getNamePath()),(null===t||void 0===t?void 0:t.recursive)&&g){var r=a.getNamePath();r.every((function(t,n){return e[n]===t||void 0===e[n]}))&&o.push(r)}if(a.props.rules&&a.props.rules.length){var i=a.getNamePath();if(!g||pf(o,i)){var C=a.validateRules($e({validateMessages:$e($e({},af),n.validateMessages)},t));l.push(C.then((function(){return{name:i,errors:[],warnings:[]}})).catch((function(e){var t,n=[],g=[];return null===(t=e.forEach)||void 0===t||t.call(e,(function(e){var t=e.rule.warningOnly,o=e.errors;t?g.push.apply(g,I(o)):n.push.apply(n,I(o))})),n.length?Promise.reject({name:i,errors:n,warnings:g}):{name:i,errors:n,warnings:g}})))}}}));var a=function(e){var t=!1,n=e.length,g=[];return e.length?new Promise((function(o,l){e.forEach((function(e,a){e.catch((function(e){return t=!0,e})).then((function(e){n-=1,g[a]=e,n>0||(t&&l(g),o(g))}))}))})):Promise.resolve([])}(l);n.lastValidatePromise=a,a.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));n.notifyObservers(n.store,t,{type:"validateFinish"}),n.triggerOnFieldsChange(t,e)}));var r=a.then((function(){return n.lastValidatePromise===a?Promise.resolve(n.getFieldsValue(o)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:n.getFieldsValue(o),errorFields:t,outOfDate:n.lastValidatePromise!==a})}));return r.catch((function(e){return e})),r},this.submit=function(){n.warningUnhooked(),n.validateFields().then((function(e){var t=n.callbacks.onFinish;if(t)try{t(e)}catch(g){console.error(g)}})).catch((function(e){var t=n.callbacks.onFinishFailed;t&&t(e)}))},this.forceRootUpdate=t}));var Tf=function(e){var n=t.useRef(),g=Z(t.useState({}),2)[1];if(!n.current)if(e)n.current=e;else{var o=new Qf((function(){g({})}));n.current=o.getForm()}return[n.current]},Df=t.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),jf=function(e){var n=e.validateMessages,g=e.onFormChange,o=e.onFormFinish,l=e.children,a=t.useContext(Df),r=t.useRef({});return t.createElement(Df.Provider,{value:$e($e({},a),{},{validateMessages:$e($e({},a.validateMessages),n),triggerFormChange:function(e,t){g&&g(e,{changedFields:t,forms:r.current}),a.triggerFormChange(e,t)},triggerFormFinish:function(e,t){o&&o(e,{values:t,forms:r.current}),a.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(r.current=$e($e({},r.current),{},Ne({},e,t))),a.registerForm(e,t)},unregisterForm:function(e){var t=$e({},r.current);delete t[e],r.current=t,a.unregisterForm(e)}})},l)},Pf=Df,Of=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],qf=function(e,n){var g=e.name,o=e.initialValues,l=e.fields,a=e.form,r=e.preserve,i=e.children,C=e.component,c=void 0===C?"form":C,u=e.validateMessages,s=e.validateTrigger,d=void 0===s?"onChange":s,A=e.onValuesChange,b=e.onFieldsChange,p=e.onFinish,h=e.onFinishFailed,f=tt(e,Of),y=t.useContext(Pf),v=Z(Tf(a),1)[0],G=v.getInternalHooks(Rh),B=G.useSubscribe,S=G.setInitialValues,V=G.setCallbacks,W=G.setValidateMessages,R=G.setPreserve,k=G.destroyForm;t.useImperativeHandle(n,(function(){return v})),t.useEffect((function(){return y.registerForm(g,v),function(){y.unregisterForm(g)}}),[y,v,g]),W($e($e({},y.validateMessages),u)),V({onValuesChange:A,onFieldsChange:function(e){if(y.triggerFormChange(g,e),b){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];b.apply(void 0,[e].concat(n))}},onFinish:function(e){y.triggerFormFinish(g,e),p&&p(e)},onFinishFailed:h}),R(r);var X,J=t.useRef(null);S(o,!J.current),J.current||(J.current=!0),t.useEffect((function(){return k}),[]);var Y="function"===typeof i;Y?X=i(v.getFieldsValue(!0),v):X=i;B(!Y);var w=t.useRef();t.useEffect((function(){(function(e,t){if(e===t)return!0;if(!e&&t||e&&!t)return!1;if(!e||!t||"object"!==m(e)||"object"!==m(t))return!1;var n=Object.keys(e),g=Object.keys(t);return I(new Set([].concat(n,g))).every((function(n){var g=e[n],o=t[n];return"function"===typeof g&&"function"===typeof o||g===o}))})(w.current||[],l||[])||v.setFields(l||[]),w.current=l}),[l,v]);var H=t.useMemo((function(){return $e($e({},v),{},{validateTrigger:d})}),[v,d]),N=t.createElement(Xh.Provider,{value:H},X);return!1===c?N:t.createElement(c,Ke({},f,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),v.submit()},onReset:function(e){var t;e.preventDefault(),v.resetFields(),null===(t=f.onReset)||void 0===t||t.call(f,e)}}),N)};function _f(e){try{return JSON.stringify(e)}catch(t){return Math.random()}}var $f=function(){for(var e=arguments.length,n=new Array(e),g=0;g<e;g++)n[g]=arguments[g];var o=n[0],l=void 0===o?[]:o,a=n[1],r=(0,t.useState)(),I=Z(r,2),i=I[0],C=I[1],c=(0,t.useMemo)((function(){return _f(i)}),[i]),u=(0,t.useRef)(c);u.current=c;var s=(0,t.useContext)(Xh),d=a||s,A=d&&d._init,m=df(l),b=(0,t.useRef)(m);return b.current=m,(0,t.useEffect)((function(){if(A){var e=d.getFieldsValue,t=(0,(0,d.getInternalHooks)(Rh).registerWatch)((function(e){var t=Af(e,b.current),n=_f(t);u.current!==n&&(u.current=n,C(t))})),n=Af(e(),b.current);return C(n),t}}),[A]),i},ey=t.forwardRef(qf);ey.FormProvider=jf,ey.Field=Kf,ey.List=xf,ey.useForm=Tf,ey.useWatch=$f;var ty={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},ny={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},gy={lang:Ke({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}),timePickerLocale:Ke({},ny)},oy="${label} is not a valid ${type}",ly={locale:"en",Pagination:ty,DatePicker:gy,TimePicker:ny,Calendar:gy,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:oy,method:oy,array:oy,object:oy,number:oy,date:oy,boolean:oy,integer:oy,float:oy,regexp:oy,email:oy,url:oy,hex:oy},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}},ay=Ke({},ly.Modal);function ry(e){ay=e?Ke(Ke({},ay),e):Ke({},ly.Modal)}var Iy=(0,t.createContext)(void 0),iy=function(e){var n=e.locale,g=void 0===n?{}:n,o=e.children;e._ANT_MARK__;t.useEffect((function(){return ry(g&&g.Modal),function(){ry()}}),[g]);var l=t.useMemo((function(){return Ke(Ke({},g),{exist:!0})}),[g]);return t.createElement(Iy.Provider,{value:l},o)},Cy=ly,cy=function(e){var n=e.componentName,g=void 0===n?"global":n,o=e.defaultLocale,l=e.children,a=t.useContext(Iy),r=t.useMemo((function(){var e,t=o||Cy[g],n=null!==(e=null===a||void 0===a?void 0:a[g])&&void 0!==e?e:{};return Ke(Ke({},t instanceof Function?t():t),n||{})}),[g,o,a]);return l(r,t.useMemo((function(){var e=a&&a.locale;return a&&a.exist&&!e?Cy.locale:e}),[a]),a)},uy={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},sy=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:uy}))};sy.displayName="CheckCircleOutlined";var dy=t.forwardRef(sy),Ay={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"},my=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:Ay}))};my.displayName="CloseCircleOutlined";var by=t.forwardRef(my),py={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},hy=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:py}))};hy.displayName="ExclamationCircleOutlined";var fy=t.forwardRef(hy),yy={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},Zy=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:yy}))};Zy.displayName="InfoCircleOutlined";var vy,Gy,By,Sy={},Vy=4.5,Wy=24,Ry=24,ky="",Xy="topRight",Jy=!1;function Yy(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wy,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ry;switch(e){case"top":t={left:"50%",transform:"translateX(-50%)",right:"auto",top:n,bottom:"auto"};break;case"topLeft":t={left:0,top:n,bottom:"auto"};break;case"topRight":t={right:0,top:n,bottom:"auto"};break;case"bottom":t={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:g};break;case"bottomLeft":t={left:0,top:"auto",bottom:g};break;default:t={right:0,top:"auto",bottom:g}}return t}function wy(e,t){var n=e.placement,g=void 0===n?Xy:n,o=e.top,l=e.bottom,a=e.getContainer,r=void 0===a?vy:a,I=e.prefixCls,i=$y(),C=i.getPrefixCls,c=i.getIconPrefixCls,u=C("notification",I||ky),s=c(),d="".concat(u,"-").concat(g),A=Sy[d];if(A)Promise.resolve(A).then((function(e){t({prefixCls:"".concat(u,"-notice"),iconPrefixCls:s,instance:e})}));else{var m=xe()("".concat(u,"-").concat(g),Ne({},"".concat(u,"-rtl"),!0===Jy));Sy[d]=new Promise((function(e){Wh.newInstance({prefixCls:u,className:m,style:Yy(g,o,l),getContainer:r,maxCount:By},(function(n){e(n),t({prefixCls:"".concat(u,"-notice"),iconPrefixCls:s,instance:n})}))}))}}var Hy={success:dy,info:t.forwardRef(Zy),error:by,warning:fy};function Ny(e,n,g){var o=e.duration,l=e.icon,a=e.type,r=e.description,I=e.message,i=e.btn,C=e.onClose,c=e.onClick,u=e.key,s=e.style,d=e.className,A=e.closeIcon,m=void 0===A?Gy:A,b=e.props,p=void 0===o?Vy:o,h=null;l?h=t.createElement("span",{className:"".concat(n,"-icon")},e.icon):a&&(h=t.createElement(Hy[a]||null,{className:"".concat(n,"-icon ").concat(n,"-icon-").concat(a)}));var f=t.createElement("span",{className:"".concat(n,"-close-x")},m||t.createElement(Tu,{className:"".concat(n,"-close-icon")})),y=!r&&h?t.createElement("span",{className:"".concat(n,"-message-single-line-auto-margin")}):null;return{content:t.createElement(gZ,{iconPrefixCls:g},t.createElement("div",{className:h?"".concat(n,"-with-icon"):"",role:"alert"},h,t.createElement("div",{className:"".concat(n,"-message")},y,I),t.createElement("div",{className:"".concat(n,"-description")},r),i?t.createElement("span",{className:"".concat(n,"-btn")},i):null)),duration:p,closable:!0,closeIcon:f,onClose:C,onClick:c,key:u,style:s||{},className:xe()(d,Ne({},"".concat(n,"-").concat(a),!!a)),props:b}}var Ky={open:function(e){wy(e,(function(t){var n=t.prefixCls,g=t.iconPrefixCls;t.instance.notice(Ny(e,n,g))}))},close:function(e){Object.keys(Sy).forEach((function(t){return Promise.resolve(Sy[t]).then((function(t){t.removeNotice(e)}))}))},config:function(e){var t=e.duration,n=e.placement,g=e.bottom,o=e.top,l=e.getContainer,a=e.closeIcon,r=e.prefixCls;void 0!==r&&(ky=r),void 0!==t&&(Vy=t),void 0!==n?Xy=n:e.rtl&&(Xy="topLeft"),void 0!==g&&(Ry=g),void 0!==o&&(Wy=o),void 0!==l&&(vy=l),void 0!==a&&(Gy=a),void 0!==e.rtl&&(Jy=e.rtl),void 0!==e.maxCount&&(By=e.maxCount)},destroy:function(){Object.keys(Sy).forEach((function(e){Promise.resolve(Sy[e]).then((function(e){e.destroy()})),delete Sy[e]}))}};["success","info","warning","error"].forEach((function(e){Ky[e]=function(t){return Ky.open(Ke(Ke({},t),{type:e}))}})),Ky.warn=Ky.warning,Ky.useNotification=function(e,n){return function(){var g,o=null,l=Z(Zh({add:function(e,t){null===o||void 0===o||o.component.add(e,t)}}),2),a=l[0],r=l[1];var I=t.useRef({});return I.current.open=function(t){var l=t.prefixCls,r=g("notification",l);e(Ke(Ke({},t),{prefixCls:r}),(function(e){var g=e.prefixCls,l=e.instance;o=l,a(n(t,g))}))},["success","info","warning","error"].forEach((function(e){I.current[e]=function(t){return I.current.open(Ke(Ke({},t),{type:e}))}})),[I.current,t.createElement(Me,{key:"holder"},(function(e){return g=e.getPrefixCls,r}))]}}(wy,Ny);var Fy=Ky,xy=function(){function e(t,n){var g;if(void 0===t&&(t=""),void 0===n&&(n={}),t instanceof e)return t;"number"===typeof t&&(t=function(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}(t)),this.originalInput=t;var o=mt(t);this.originalInput=t,this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(g=n.format)&&void 0!==g?g:o.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=o.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,g=e.b/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4))},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=lt(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.toHsv=function(){var e=Ct(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=Ct(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),g=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(n,"%, ").concat(g,"%)"):"hsva(".concat(t,", ").concat(n,"%, ").concat(g,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var e=It(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=It(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),g=Math.round(100*e.l);return 1===this.a?"hsl(".concat(t,", ").concat(n,"%, ").concat(g,"%)"):"hsla(".concat(t,", ").concat(n,"%, ").concat(g,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(e){return void 0===e&&(e=!1),ct(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),function(e,t,n,g,o){var l=[rt(Math.round(e).toString(16)),rt(Math.round(t).toString(16)),rt(Math.round(n).toString(16)),rt(ut(g))];return o&&l[0].startsWith(l[0].charAt(1))&&l[1].startsWith(l[1].charAt(1))&&l[2].startsWith(l[2].charAt(1))&&l[3].startsWith(l[3].charAt(1))?l[0].charAt(0)+l[1].charAt(0)+l[2].charAt(0)+l[3].charAt(0):l.join("")}(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb(".concat(e,", ").concat(t,", ").concat(n,")"):"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var e=function(e){return"".concat(Math.round(100*gt(e,255)),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*gt(e,255))};return 1===this.a?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+ct(this.r,this.g,this.b,!1),t=0,n=Object.entries(At);t<n.length;t++){var g=n[t],o=g[0];if(e===g[1])return o}return!1},e.prototype.toString=function(e){var t=Boolean(e);e=null!==e&&void 0!==e?e:this.format;var n=!1,g=this.a<1&&this.a>=0;return t||!g||!e.startsWith("hex")&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this.a?this.toName():this.toRgbString()},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=ot(n.l),new e(n)},e.prototype.brighten=function(t){void 0===t&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),new e(n)},e.prototype.darken=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=ot(n.l),new e(n)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=ot(n.s),new e(n)},e.prototype.saturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=ot(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),g=(n.h+t)%360;return n.h=g<0?360+g:g,new e(n)},e.prototype.mix=function(t,n){void 0===n&&(n=50);var g=this.toRgb(),o=new e(t).toRgb(),l=n/100;return new e({r:(o.r-g.r)*l+g.r,g:(o.g-g.g)*l+g.g,b:(o.b-g.b)*l+g.b,a:(o.a-g.a)*l+g.a})},e.prototype.analogous=function(t,n){void 0===t&&(t=6),void 0===n&&(n=30);var g=this.toHsl(),o=360/n,l=[this];for(g.h=(g.h-(o*t>>1)+720)%360;--t;)g.h=(g.h+o)%360,l.push(new e(g));return l},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);for(var n=this.toHsv(),g=n.h,o=n.s,l=n.v,a=[],r=1/t;t--;)a.push(new e({h:g,s:o,v:l})),l=(l+r)%1;return a},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),g=new e(t).toRgb();return new e({r:g.r+(n.r-g.r)*n.a,g:g.g+(n.g-g.g)*n.a,b:g.b+(n.b-g.b)*n.a})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),g=n.h,o=[this],l=360/t,a=1;a<t;a++)o.push(new e({h:(g+a*l)%360,s:n.s,l:n.l}));return o},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();var Ey="-ant-".concat(Date.now(),"-").concat(Math.random());function My(e,t){var n=function(e,t){var n={},g=function(e,t){var n=e.clone();return(n=(null===t||void 0===t?void 0:t(n))||n).toRgbString()},o=function(e,t){var o=new xy(e),l=Rt(o.toRgbString());n["".concat(t,"-color")]=g(o),n["".concat(t,"-color-disabled")]=l[1],n["".concat(t,"-color-hover")]=l[4],n["".concat(t,"-color-active")]=l[6],n["".concat(t,"-color-outline")]=o.clone().setAlpha(.2).toRgbString(),n["".concat(t,"-color-deprecated-bg")]=l[0],n["".concat(t,"-color-deprecated-border")]=l[2]};if(t.primaryColor){o(t.primaryColor,"primary");var l=new xy(t.primaryColor),a=Rt(l.toRgbString());a.forEach((function(e,t){n["primary-".concat(t+1)]=e})),n["primary-color-deprecated-l-35"]=g(l,(function(e){return e.lighten(35)})),n["primary-color-deprecated-l-20"]=g(l,(function(e){return e.lighten(20)})),n["primary-color-deprecated-t-20"]=g(l,(function(e){return e.tint(20)})),n["primary-color-deprecated-t-50"]=g(l,(function(e){return e.tint(50)})),n["primary-color-deprecated-f-12"]=g(l,(function(e){return e.setAlpha(.12*e.getAlpha())}));var r=new xy(a[0]);n["primary-color-active-deprecated-f-30"]=g(r,(function(e){return e.setAlpha(.3*e.getAlpha())})),n["primary-color-active-deprecated-d-02"]=g(r,(function(e){return e.darken(2)}))}t.successColor&&o(t.successColor,"success"),t.warningColor&&o(t.warningColor,"warning"),t.errorColor&&o(t.errorColor,"error"),t.infoColor&&o(t.infoColor,"info");var I=Object.keys(n).map((function(t){return"--".concat(e,"-").concat(t,": ").concat(n[t],";")}));return"\n  :root {\n    ".concat(I.join("\n"),"\n  }\n  ").trim()}(e,t);Kt()&&Pt(n,"".concat(Ey,"-dynamic-theme"))}var zy,Ly,Uy=t.createContext(!1),Qy=function(e){var n=e.children,g=e.disabled,o=t.useContext(Uy);return t.createElement(Uy.Provider,{value:g||o},n)},Ty=Uy,Dy=t.createContext(void 0),jy=function(e){var n=e.children,g=e.size;return t.createElement(Dy.Consumer,null,(function(e){return t.createElement(Dy.Provider,{value:g||e},n)}))},Py=Dy,Oy=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form"];function qy(){return zy||"ant"}function _y(){return Ly||"anticon"}var $y=function(){return{getPrefixCls:function(e,t){return t||(e?"".concat(qy(),"-").concat(e):qy())},getIconPrefixCls:_y,getRootPrefixCls:function(e,t){return e||(zy||(t&&t.includes("-")?t.replace(/^(.*)-[^-]*$/,"$1"):qy()))}}},eZ=function(e){var n,g,o=e.children,l=e.csp,a=e.autoInsertSpaceInButton,r=e.form,I=e.locale,i=e.componentSize,C=e.direction,c=e.space,u=e.virtual,s=e.dropdownMatchSelectWidth,d=e.legacyLocale,A=e.parentContext,m=e.iconPrefixCls,b=e.componentDisabled,p=t.useCallback((function(t,n){var g=e.prefixCls;if(n)return n;var o=g||A.getPrefixCls("");return t?"".concat(o,"-").concat(t):o}),[A.getPrefixCls,e.prefixCls]),h=Ke(Ke({},A),{csp:l,autoInsertSpaceInButton:a,locale:I||d,direction:C,space:c,virtual:u,dropdownMatchSelectWidth:s,getPrefixCls:p});Oy.forEach((function(t){var n=e[t];n&&(h[t]=n)}));var f=Cs((function(){return h}),h,(function(e,t){var n=Object.keys(e),g=Object.keys(t);return n.length!==g.length||n.some((function(n){return e[n]!==t[n]}))})),y=t.useMemo((function(){return{prefixCls:m,csp:l}}),[m,l]),Z=o,v={};return I&&(v=(null===(n=I.Form)||void 0===n?void 0:n.defaultValidateMessages)||(null===(g=ly.Form)||void 0===g?void 0:g.defaultValidateMessages)||{}),r&&r.validateMessages&&(v=Ke(Ke({},v),r.validateMessages)),Object.keys(v).length>0&&(Z=t.createElement(jf,{validateMessages:v},o)),I&&(Z=t.createElement(iy,{locale:I,_ANT_MARK__:"internalMark"},Z)),(m||l)&&(Z=t.createElement(nt.Provider,{value:y},Z)),i&&(Z=t.createElement(jy,{size:i},Z)),void 0!==b&&(Z=t.createElement(Qy,{disabled:b},Z)),t.createElement(Ee.Provider,{value:f},Z)},tZ=function(e){return t.useEffect((function(){e.direction&&(fZ.config({rtl:"rtl"===e.direction}),Fy.config({rtl:"rtl"===e.direction}))}),[e.direction]),t.createElement(cy,null,(function(n,g,o){return t.createElement(Me,null,(function(n){return t.createElement(eZ,Ke({parentContext:n,legacyLocale:o},e))}))}))};tZ.ConfigContext=Ee,tZ.SizeContext=Py,tZ.config=function(e){var t=e.prefixCls,n=e.iconPrefixCls,g=e.theme;void 0!==t&&(zy=t),void 0!==n&&(Ly=n),g&&My(qy(),g)};var nZ,gZ=tZ;var oZ,lZ,aZ,rZ=3,IZ=1,iZ="",CZ="move-up",cZ=!1,uZ=!1;function sZ(){return IZ++}function dZ(e,t){var n=e.prefixCls,g=e.getPopupContainer,o=$y(),l=o.getPrefixCls,a=o.getRootPrefixCls,r=o.getIconPrefixCls,I=l("message",n||iZ),i=a(e.rootPrefixCls,I),C=r();if(nZ)t({prefixCls:I,rootPrefixCls:i,iconPrefixCls:C,instance:nZ});else{var c={prefixCls:I,transitionName:cZ?CZ:"".concat(i,"-").concat(CZ),style:{top:oZ},getContainer:lZ||g,maxCount:aZ};Wh.newInstance(c,(function(e){nZ?t({prefixCls:I,rootPrefixCls:i,iconPrefixCls:C,instance:nZ}):(nZ=e,t({prefixCls:I,rootPrefixCls:i,iconPrefixCls:C,instance:e}))}))}}var AZ={info:lh,success:Op,error:$p,warning:nh,loading:ih},mZ=Object.keys(AZ);function bZ(e,n,g){var o,l=void 0!==e.duration?e.duration:rZ,a=AZ[e.type],r=xe()("".concat(n,"-custom-content"),(Ne(o={},"".concat(n,"-").concat(e.type),e.type),Ne(o,"".concat(n,"-rtl"),!0===uZ),o));return{key:e.key,duration:l,style:e.style||{},className:e.className,content:t.createElement(gZ,{iconPrefixCls:g},t.createElement("div",{className:r},e.icon||a&&t.createElement(a,null),t.createElement("span",null,e.content))),onClose:e.onClose,onClick:e.onClick}}var pZ={open:function(e){var t=e.key||sZ(),n=new Promise((function(n){var g=function(){return"function"===typeof e.onClose&&e.onClose(),n(!0)};dZ(e,(function(n){var o=n.prefixCls,l=n.iconPrefixCls;n.instance.notice(bZ(Ke(Ke({},e),{key:t,onClose:g}),o,l))}))})),g=function(){nZ&&nZ.removeNotice(t)};return g.then=function(e,t){return n.then(e,t)},g.promise=n,g},config:function(e){void 0!==e.top&&(oZ=e.top,nZ=null),void 0!==e.duration&&(rZ=e.duration),void 0!==e.prefixCls&&(iZ=e.prefixCls),void 0!==e.getContainer&&(lZ=e.getContainer,nZ=null),void 0!==e.transitionName&&(CZ=e.transitionName,nZ=null,cZ=!0),void 0!==e.maxCount&&(aZ=e.maxCount,nZ=null),void 0!==e.rtl&&(uZ=e.rtl)},destroy:function(e){if(nZ)if(e){(0,nZ.removeNotice)(e)}else{var t=nZ.destroy;t(),nZ=null}}};function hZ(e,t){e[t]=function(n,g,o){return function(e){return"[object Object]"===Object.prototype.toString.call(e)&&!!e.content}(n)?e.open(Ke(Ke({},n),{type:t})):("function"===typeof g&&(o=g,g=void 0),e.open({content:n,duration:g,type:t,onClose:o}))}}mZ.forEach((function(e){return hZ(pZ,e)})),pZ.warn=pZ.warning,pZ.useMessage=function(e,n){return function(){var g,o,l=null,a=Z(Zh({add:function(e,t){null===l||void 0===l||l.component.add(e,t)}}),2),r=a[0],I=a[1];var i=t.useRef({});return i.current.open=function(t){var a=t.prefixCls,I=g("message",a),i=g(),C=t.key||sZ(),c=new Promise((function(g){var a=function(){return"function"===typeof t.onClose&&t.onClose(),g(!0)};e(Ke(Ke({},t),{prefixCls:I,rootPrefixCls:i,getPopupContainer:o}),(function(e){var g=e.prefixCls,o=e.instance;l=o,r(n(Ke(Ke({},t),{key:C,onClose:a}),g))}))})),u=function(){l&&l.removeNotice(C)};return u.then=function(e,t){return c.then(e,t)},u.promise=c,u},mZ.forEach((function(e){return hZ(i.current,e)})),[i.current,t.createElement(Me,{key:"holder"},(function(e){return g=e.getPrefixCls,o=e.getPopupContainer,I}))]}}(dZ,bZ);var fZ=pZ,yZ=function(e,t,n,g){return(0,mC.jsx)(Dp.Item,{icon:n,children:(0,mC.jsx)(kC,{to:t,children:e})},g)},ZZ=function(e,t,n,g){return(0,mC.jsx)(Dp.Item,{icon:n,children:(0,mC.jsx)("a",{href:t,children:e})},g)};function vZ(){var e=Z((0,t.useState)(!1),2),n=e[0],g=e[1],o=Z((0,t.useState)(!1),2),l=o[0],a=o[1];return(0,t.useEffect)((function(){var e=function(){var e=GC(ZC().mark((function e(){var t;return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bu.get(window.APIROOT+"api/data/status");case 3:t=e.sent,a(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),fZ.error("Failed to fetch data from server");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,mC.jsxs)(mC.Fragment,{children:[(0,mC.jsxs)("div",{className:BC.menu,children:[(0,mC.jsx)("div",{className:BC.logo,children:(0,mC.jsx)("span",{children:"Mess Portal"})}),(0,mC.jsxs)(AC.div,{className:BC.navWrap,animate:{x:n?0:"-15rem"},transition:{duration:.3},children:[(0,mC.jsx)(Dp,{className:BC.nav,theme:"light",defaultSelectedKeys:["1"],mode:"inline",onClick:function(){return g(!n)},children:(0,mC.jsxs)(mC.Fragment,{children:[ZZ(l.loggedIn?"Sign out":"Sign in",l.loggedIn?"api/auth/signout":"/api/auth/signin",(0,mC.jsx)(Wu,{}),"2"),l.loggedIn?(0,mC.jsxs)(mC.Fragment,{children:[(0,mC.jsx)(Dp.Divider,{}),yZ("Schedule","/",(0,mC.jsx)(Xu,{}),"3"),yZ("Buy coupons","/buy-coupons",(0,mC.jsx)(wu,{}),"4"),yZ("Purchase history","/purchase-history",(0,mC.jsx)(Ku,{}),"5"),l.admin?(0,mC.jsxs)(mC.Fragment,{children:[(0,mC.jsx)(Dp.Divider,{}),yZ("Admin panel","/admin",(0,mC.jsx)(Eu,{}),"7"),yZ("Total meals","/total-meals",(0,mC.jsx)(Lu,{}),"8")]}):null]}):null]})}),(0,mC.jsx)("div",{className:BC.navBtn,onClick:function(){return g(!n)},children:(0,mC.jsx)(zC,{one2Two:n,one:(0,mC.jsx)(Tu,{}),two:(0,mC.jsx)(Pu,{})})}),(0,mC.jsx)("div",{className:BC.logoCover})]})]}),(0,mC.jsx)("div",{className:BC.gap})]})}var GZ,BZ,SZ=Object.defineProperty,VZ=Object.getOwnPropertySymbols,WZ=Object.prototype.hasOwnProperty,RZ=Object.prototype.propertyIsEnumerable,kZ=function(e,t,n){return t in e?SZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},XZ=function(e,t){for(var n in t||(t={}))WZ.call(t,n)&&kZ(e,n,t[n]);if(VZ){var g,o=ig(VZ(t));try{for(o.s();!(g=o.n()).done;){n=g.value;RZ.call(t,n)&&kZ(e,n,t[n])}}catch(l){o.e(l)}finally{o.f()}}return e},JZ=function(e,t){var n={};for(var g in e)WZ.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&VZ){var o,l=ig(VZ(e));try{for(l.s();!(o=l.n()).done;){g=o.value;t.indexOf(g)<0&&RZ.call(e,g)&&(n[g]=e[g])}}catch(a){l.e(a)}finally{l.f()}}return n};!function(e){var t=function(){function t(e,n,g,o){if(i(this,t),this.version=e,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(o<-1||o>7)throw new RangeError("Mask value out of range");this.size=4*e+17;for(var a=[],r=0;r<this.size;r++)a.push(!1);for(var I=0;I<this.size;I++)this.modules.push(a.slice()),this.isFunction.push(a.slice());this.drawFunctionPatterns();var C=this.addEccAndInterleave(g);if(this.drawCodewords(C),-1==o)for(var c=1e9,u=0;u<8;u++){this.applyMask(u),this.drawFormatBits(u);var s=this.getPenaltyScore();s<c&&(o=u,c=s),this.applyMask(u)}l(0<=o&&o<=7),this.mask=o,this.applyMask(o),this.drawFormatBits(o),this.isFunction=[]}return c(t,[{key:"getModule",value:function(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}},{key:"getModules",value:function(){return this.modules}},{key:"drawFunctionPatterns",value:function(){for(var e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var t=this.getAlignmentPatternPositions(),n=t.length,g=0;g<n;g++)for(var o=0;o<n;o++)0==g&&0==o||0==g&&o==n-1||g==n-1&&0==o||this.drawAlignmentPattern(t[g],t[o]);this.drawFormatBits(0),this.drawVersion()}},{key:"drawFormatBits",value:function(e){for(var t=this.errorCorrectionLevel.formatBits<<3|e,n=t,g=0;g<10;g++)n=n<<1^1335*(n>>>9);var a=21522^(t<<10|n);l(a>>>15==0);for(var r=0;r<=5;r++)this.setFunctionModule(8,r,o(a,r));this.setFunctionModule(8,7,o(a,6)),this.setFunctionModule(8,8,o(a,7)),this.setFunctionModule(7,8,o(a,8));for(var I=9;I<15;I++)this.setFunctionModule(14-I,8,o(a,I));for(var i=0;i<8;i++)this.setFunctionModule(this.size-1-i,8,o(a,i));for(var C=8;C<15;C++)this.setFunctionModule(8,this.size-15+C,o(a,C));this.setFunctionModule(8,this.size-8,!0)}},{key:"drawVersion",value:function(){if(!(this.version<7)){for(var e=this.version,t=0;t<12;t++)e=e<<1^7973*(e>>>11);var n=this.version<<12|e;l(n>>>18==0);for(var g=0;g<18;g++){var a=o(n,g),r=this.size-11+g%3,I=Math.floor(g/3);this.setFunctionModule(r,I,a),this.setFunctionModule(I,r,a)}}}},{key:"drawFinderPattern",value:function(e,t){for(var n=-4;n<=4;n++)for(var g=-4;g<=4;g++){var o=Math.max(Math.abs(g),Math.abs(n)),l=e+g,a=t+n;0<=l&&l<this.size&&0<=a&&a<this.size&&this.setFunctionModule(l,a,2!=o&&4!=o)}}},{key:"drawAlignmentPattern",value:function(e,t){for(var n=-2;n<=2;n++)for(var g=-2;g<=2;g++)this.setFunctionModule(e+g,t+n,1!=Math.max(Math.abs(g),Math.abs(n)))}},{key:"setFunctionModule",value:function(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}},{key:"addEccAndInterleave",value:function(e){var n=this.version,g=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(n,g))throw new RangeError("Invalid argument");for(var o=t.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][n],a=t.ECC_CODEWORDS_PER_BLOCK[g.ordinal][n],r=Math.floor(t.getNumRawDataModules(n)/8),I=o-r%o,i=Math.floor(r/o),C=[],c=t.reedSolomonComputeDivisor(a),u=0,s=0;u<o;u++){var d=e.slice(s,s+i-a+(u<I?0:1));s+=d.length;var A=t.reedSolomonComputeRemainder(d,c);u<I&&d.push(0),C.push(d.concat(A))}for(var m=[],b=function(e){C.forEach((function(t,n){(e!=i-a||n>=I)&&m.push(t[e])}))},p=0;p<C[0].length;p++)b(p);return l(m.length==r),m}},{key:"drawCodewords",value:function(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var n=0,g=this.size-1;g>=1;g-=2){6==g&&(g=5);for(var a=0;a<this.size;a++)for(var r=0;r<2;r++){var I=g-r,i=0==(g+1&2)?this.size-1-a:a;!this.isFunction[i][I]&&n<8*e.length&&(this.modules[i][I]=o(e[n>>>3],7-(7&n)),n++)}}l(n==8*e.length)}},{key:"applyMask",value:function(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(var t=0;t<this.size;t++)for(var n=0;n<this.size;n++){var g=void 0;switch(e){case 0:g=(n+t)%2==0;break;case 1:g=t%2==0;break;case 2:g=n%3==0;break;case 3:g=(n+t)%3==0;break;case 4:g=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:g=n*t%2+n*t%3==0;break;case 6:g=(n*t%2+n*t%3)%2==0;break;case 7:g=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&g&&(this.modules[t][n]=!this.modules[t][n])}}},{key:"getPenaltyScore",value:function(){for(var e=0,n=0;n<this.size;n++){for(var g=!1,o=0,a=[0,0,0,0,0,0,0],r=0;r<this.size;r++)this.modules[n][r]==g?5==++o?e+=t.PENALTY_N1:o>5&&e++:(this.finderPenaltyAddHistory(o,a),g||(e+=this.finderPenaltyCountPatterns(a)*t.PENALTY_N3),g=this.modules[n][r],o=1);e+=this.finderPenaltyTerminateAndCount(g,o,a)*t.PENALTY_N3}for(var I=0;I<this.size;I++){for(var i=!1,C=0,c=[0,0,0,0,0,0,0],u=0;u<this.size;u++)this.modules[u][I]==i?5==++C?e+=t.PENALTY_N1:C>5&&e++:(this.finderPenaltyAddHistory(C,c),i||(e+=this.finderPenaltyCountPatterns(c)*t.PENALTY_N3),i=this.modules[u][I],C=1);e+=this.finderPenaltyTerminateAndCount(i,C,c)*t.PENALTY_N3}for(var s=0;s<this.size-1;s++)for(var d=0;d<this.size-1;d++){var A=this.modules[s][d];A==this.modules[s][d+1]&&A==this.modules[s+1][d]&&A==this.modules[s+1][d+1]&&(e+=t.PENALTY_N2)}var m,b=0,p=ig(this.modules);try{for(p.s();!(m=p.n()).done;){b=m.value.reduce((function(e,t){return e+(t?1:0)}),b)}}catch(y){p.e(y)}finally{p.f()}var h=this.size*this.size,f=Math.ceil(Math.abs(20*b-10*h)/h)-1;return l(0<=f&&f<=9),l(0<=(e+=f*t.PENALTY_N4)&&e<=2568888),e}},{key:"getAlignmentPatternPositions",value:function(){if(1==this.version)return[];for(var e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2)),n=[6],g=this.size-7;n.length<e;g-=t)n.splice(1,0,g);return n}},{key:"finderPenaltyCountPatterns",value:function(e){var t=e[1];l(t<=3*this.size);var n=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(n&&e[0]>=4*t&&e[6]>=t?1:0)+(n&&e[6]>=4*t&&e[0]>=t?1:0)}},{key:"finderPenaltyTerminateAndCount",value:function(e,t,n){return e&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}},{key:"finderPenaltyAddHistory",value:function(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}}],[{key:"encodeText",value:function(n,g){var o=e.QrSegment.makeSegments(n);return t.encodeSegments(o,g)}},{key:"encodeBinary",value:function(n,g){var o=e.QrSegment.makeBytes(n);return t.encodeSegments([o],g)}},{key:"encodeSegments",value:function(e,n){var o,a,I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,C=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(t.MIN_VERSION<=I&&I<=i&&i<=t.MAX_VERSION)||C<-1||C>7)throw new RangeError("Invalid value");for(o=I;;o++){var u=8*t.getNumDataCodewords(o,n),s=r.getTotalBits(e,o);if(s<=u){a=s;break}if(o>=i)throw new RangeError("Data too long")}for(var d=0,A=[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH];d<A.length;d++){var m=A[d];c&&a<=8*t.getNumDataCodewords(o,m)&&(n=m)}var b,p=[],h=ig(e);try{for(h.s();!(b=h.n()).done;){var f=b.value;g(f.mode.modeBits,4,p),g(f.numChars,f.mode.numCharCountBits(o),p);var y,Z=ig(f.getData());try{for(Z.s();!(y=Z.n()).done;){var v=y.value;p.push(v)}}catch(V){Z.e(V)}finally{Z.f()}}}catch(V){h.e(V)}finally{h.f()}l(p.length==a);var G=8*t.getNumDataCodewords(o,n);l(p.length<=G),g(0,Math.min(4,G-p.length),p),g(0,(8-p.length%8)%8,p),l(p.length%8==0);for(var B=236;p.length<G;B^=253)g(B,8,p);for(var S=[];8*S.length<p.length;)S.push(0);return p.forEach((function(e,t){return S[t>>>3]|=e<<7-(7&t)})),new t(o,n,S,C)}},{key:"getNumRawDataModules",value:function(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");var n=(16*e+128)*e+64;if(e>=2){var g=Math.floor(e/7)+2;n-=(25*g-10)*g-55,e>=7&&(n-=36)}return l(208<=n&&n<=29648),n}},{key:"getNumDataCodewords",value:function(e,n){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][e]}},{key:"reedSolomonComputeDivisor",value:function(e){if(e<1||e>255)throw new RangeError("Degree out of range");for(var n=[],g=0;g<e-1;g++)n.push(0);n.push(1);for(var o=1,l=0;l<e;l++){for(var a=0;a<n.length;a++)n[a]=t.reedSolomonMultiply(n[a],o),a+1<n.length&&(n[a]^=n[a+1]);o=t.reedSolomonMultiply(o,2)}return n}},{key:"reedSolomonComputeRemainder",value:function(e,n){var g,o=n.map((function(e){return 0})),l=ig(e);try{var a=function(){var e=g.value^o.shift();o.push(0),n.forEach((function(n,g){return o[g]^=t.reedSolomonMultiply(n,e)}))};for(l.s();!(g=l.n()).done;)a()}catch(r){l.e(r)}finally{l.f()}return o}},{key:"reedSolomonMultiply",value:function(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");for(var n=0,g=7;g>=0;g--)n=n<<1^285*(n>>>7),n^=(t>>>g&1)*e;return l(n>>>8==0),n}}]),t}(),n=t;function g(e,t,n){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(var g=t-1;g>=0;g--)n.push(e>>>g&1)}function o(e,t){return 0!=(e>>>t&1)}function l(e){if(!e)throw new Error("Assertion error")}n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=n;var a=function(){function e(t,n,g){if(i(this,e),this.mode=t,this.numChars=n,this.bitData=g,n<0)throw new RangeError("Invalid argument");this.bitData=g.slice()}return c(e,[{key:"getData",value:function(){return this.bitData.slice()}}],[{key:"makeBytes",value:function(t){var n,o=[],l=ig(t);try{for(l.s();!(n=l.n()).done;){g(n.value,8,o)}}catch(a){l.e(a)}finally{l.f()}return new e(e.Mode.BYTE,t.length,o)}},{key:"makeNumeric",value:function(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");for(var n=[],o=0;o<t.length;){var l=Math.min(t.length-o,3);g(parseInt(t.substr(o,l),10),3*l+1,n),o+=l}return new e(e.Mode.NUMERIC,t.length,n)}},{key:"makeAlphanumeric",value:function(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");var n,o=[];for(n=0;n+2<=t.length;n+=2){var l=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n));g(l+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n+1)),11,o)}return n<t.length&&g(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n)),6,o),new e(e.Mode.ALPHANUMERIC,t.length,o)}},{key:"makeSegments",value:function(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}},{key:"makeEci",value:function(t){var n=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)g(t,8,n);else if(t<16384)g(2,2,n),g(t,14,n);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");g(6,3,n),g(t,21,n)}return new e(e.Mode.ECI,0,n)}},{key:"isNumeric",value:function(t){return e.NUMERIC_REGEX.test(t)}},{key:"isAlphanumeric",value:function(t){return e.ALPHANUMERIC_REGEX.test(t)}},{key:"getTotalBits",value:function(e,t){var n,g=0,o=ig(e);try{for(o.s();!(n=o.n()).done;){var l=n.value,a=l.mode.numCharCountBits(t);if(l.numChars>=1<<a)return 1/0;g+=4+a+l.bitData.length}}catch(r){o.e(r)}finally{o.f()}return g}},{key:"toUtf8ByteArray",value:function(e){e=encodeURI(e);for(var t=[],n=0;n<e.length;n++)"%"!=e.charAt(n)?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substr(n+1,2),16)),n+=2);return t}}]),e}(),r=a;r.NUMERIC_REGEX=/^[0-9]*$/,r.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,r.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=r}(GZ||(GZ={})),function(e){var t=c((function e(t,n){i(this,e),this.ordinal=t,this.formatBits=n})),n=t;n.LOW=new t(0,1),n.MEDIUM=new t(1,0),n.QUARTILE=new t(2,3),n.HIGH=new t(3,2),e.Ecc=n}((BZ=GZ||(GZ={})).QrCode||(BZ.QrCode={})),function(e){!function(e){var t=function(){function e(t,n){i(this,e),this.modeBits=t,this.numBitsCharCount=n}return c(e,[{key:"numCharCountBits",value:function(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}}]),e}(),n=t;n.NUMERIC=new t(1,[10,12,14]),n.ALPHANUMERIC=new t(2,[9,11,13]),n.BYTE=new t(4,[8,16,16]),n.KANJI=new t(8,[8,10,12]),n.ECI=new t(7,[0,0,0]),e.Mode=n}(e.QrSegment||(e.QrSegment={}))}(GZ||(GZ={}));var YZ=GZ,wZ={L:YZ.QrCode.Ecc.LOW,M:YZ.QrCode.Ecc.MEDIUM,Q:YZ.QrCode.Ecc.QUARTILE,H:YZ.QrCode.Ecc.HIGH},HZ="#FFFFFF",NZ="#000000";function KZ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[];return e.forEach((function(e,g){var o=null;e.forEach((function(l,a){if(!l&&null!==o)return n.push("M".concat(o+t," ").concat(g+t,"h").concat(a-o,"v1H").concat(o+t,"z")),void(o=null);if(a!==e.length-1)l&&null===o&&(o=a);else{if(!l)return;null===o?n.push("M".concat(a+t,",").concat(g+t," h1v1H").concat(a+t,"z")):n.push("M".concat(o+t,",").concat(g+t," h").concat(a+1-o,"v1H").concat(o+t,"z"))}}))})),n.join("")}function FZ(e,t){return e.slice().map((function(e,n){return n<t.y||n>=t.y+t.h?e:e.map((function(e,n){return(n<t.x||n>=t.x+t.w)&&e}))}))}function xZ(e,t,n,g){if(null==g)return null;var o=n?4:0,l=e.length+2*o,a=Math.floor(.1*t),r=l/t,I=(g.width||a)*r,i=(g.height||a)*r,C=null==g.x?e.length/2-I/2:g.x*r,c=null==g.y?e.length/2-i/2:g.y*r,u=null;if(g.excavate){var s=Math.floor(C),d=Math.floor(c);u={x:s,y:d,w:Math.ceil(I+C-s),h:Math.ceil(i+c-d)}}return{x:C,y:c,h:i,w:I,excavation:u}}!function(){try{(new Path2D).addPath(new Path2D)}catch(HY){return!1}}();function EZ(e){var n=e,g=n.value,o=n.size,l=void 0===o?128:o,a=n.level,r=void 0===a?"L":a,I=n.bgColor,i=void 0===I?HZ:I,C=n.fgColor,c=void 0===C?NZ:C,u=n.includeMargin,s=void 0!==u&&u,d=n.imageSettings,A=JZ(n,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]),m=YZ.QrCode.encodeText(g,wZ[r]).getModules(),b=s?4:0,p=m.length+2*b,h=xZ(m,l,s,d),f=null;null!=d&&null!=h&&(null!=h.excavation&&(m=FZ(m,h.excavation)),f=t.createElement("image",{xlinkHref:d.src,height:h.h,width:h.w,x:h.x+b,y:h.y+b,preserveAspectRatio:"none"}));var y=KZ(m,b);return t.createElement("svg",XZ({height:l,width:l,viewBox:"0 0 ".concat(p," ").concat(p)},A),t.createElement("path",{fill:i,d:"M0,0 h".concat(p,"v").concat(p,"H0z"),shapeRendering:"crispEdges"}),t.createElement("path",{fill:c,d:y,shapeRendering:"crispEdges"}),f)}var MZ={qrBody:"QRCode_qrBody__FddzX",loading:"QRCode_loading__pMUyx"},zZ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},LZ=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:zZ}))};LZ.displayName="ReloadOutlined";var UZ=t.forwardRef(LZ),QZ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M764 280.9c-14-30.6-33.9-58.1-59.3-81.6C653.1 151.4 584.6 125 512 125s-141.1 26.4-192.7 74.2c-25.4 23.6-45.3 51-59.3 81.7-14.6 32-22 65.9-22 100.9v27c0 6.2 5 11.2 11.2 11.2h54c6.2 0 11.2-5 11.2-11.2v-27c0-99.5 88.6-180.4 197.6-180.4s197.6 80.9 197.6 180.4c0 40.8-14.5 79.2-42 111.2-27.2 31.7-65.6 54.4-108.1 64-24.3 5.5-46.2 19.2-61.7 38.8a110.85 110.85 0 00-23.9 68.6v31.4c0 6.2 5 11.2 11.2 11.2h54c6.2 0 11.2-5 11.2-11.2v-31.4c0-15.7 10.9-29.5 26-32.9 58.4-13.2 111.4-44.7 149.3-88.7 19.1-22.3 34-47.1 44.3-74 10.7-27.9 16.1-57.2 16.1-87 0-35-7.4-69-22-100.9zM512 787c-30.9 0-56 25.1-56 56s25.1 56 56 56 56-25.1 56-56-25.1-56-56-56z"}}]},name:"question",theme:"outlined"},TZ=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:QZ}))};TZ.displayName="QuestionOutlined";var DZ,jZ=t.forwardRef(TZ),PZ=function(){if(!Kt()||!window.document.documentElement)return!1;if(void 0!==DZ)return DZ;var e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),DZ=1===e.scrollHeight,document.body.removeChild(e),DZ};function OZ(e){var n=e.className,g=e.direction,o=e.index,l=e.marginDirection,a=e.children,r=e.split,I=e.wrap,i=t.useContext(ov),C=i.horizontalSize,c=i.verticalSize,u=i.latestIndex,s={};return i.supportFlexGap||("vertical"===g?o<u&&(s={marginBottom:C/(r?2:1)}):s=Ke(Ke({},o<u&&Ne({},l,C/(r?2:1))),I&&{paddingBottom:c})),null===a||void 0===a?null:t.createElement(t.Fragment,null,t.createElement("div",{className:n,style:s},a),o<u&&r&&t.createElement("span",{className:"".concat(n,"-split"),style:s},r))}var qZ=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},_Z=t.createContext(null),$Z=function(e,n){var g=t.useContext(_Z),o=t.useMemo((function(){var t;if(!g)return"";var o=g.compactDirection,l=g.isFirstItem,a=g.isLastItem,r="vertical"===o?"-vertical-":"-";return xe()((Ne(t={},"".concat(e,"-compact").concat(r,"item"),!0),Ne(t,"".concat(e,"-compact").concat(r,"first-item"),l),Ne(t,"".concat(e,"-compact").concat(r,"last-item"),a),Ne(t,"".concat(e,"-compact").concat(r,"item-rtl"),"rtl"===n),t))}),[e,n,g]);return{compactSize:null===g||void 0===g?void 0:g.compactSize,compactDirection:null===g||void 0===g?void 0:g.compactDirection,compactItemClassnames:o}},ev=function(e){var n=e.children;return t.createElement(_Z.Provider,{value:null},n)},tv=function(e){var n=e.children,g=qZ(e,["children"]);return t.createElement(_Z.Provider,{value:g},n)},nv=function(e){var n,g=t.useContext(Ee),o=g.getPrefixCls,l=g.direction,a=e.size,r=void 0===a?"middle":a,I=e.direction,i=e.block,C=e.prefixCls,c=e.className,u=e.children,s=qZ(e,["size","direction","block","prefixCls","className","children"]),d=o("space-compact",C),A=xe()(d,(Ne(n={},"".concat(d,"-rtl"),"rtl"===l),Ne(n,"".concat(d,"-block"),i),Ne(n,"".concat(d,"-vertical"),"vertical"===I),n),c),m=t.useContext(_Z),b=is(u),p=t.useMemo((function(){return b.map((function(e,n){var g=e&&e.key||"".concat(d,"-item-").concat(n);return t.createElement(tv,{key:g,compactSize:r,compactDirection:I,isFirstItem:0===n&&(!m||(null===m||void 0===m?void 0:m.isFirstItem)),isLastItem:n===b.length-1&&(!m||(null===m||void 0===m?void 0:m.isLastItem))},e)}))}),[r,b,m]);return 0===b.length?null:t.createElement("div",Ke({className:A},s),p)},gv=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},ov=t.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),lv={small:8,middle:16,large:24};var av=function(e){var n,g=t.useContext(Ee),o=g.getPrefixCls,l=g.space,a=g.direction,r=e.size,I=void 0===r?(null===l||void 0===l?void 0:l.size)||"small":r,i=e.align,C=e.className,c=e.children,u=e.direction,s=void 0===u?"horizontal":u,d=e.prefixCls,A=e.split,m=e.style,b=e.wrap,p=void 0!==b&&b,h=gv(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),f=function(){var e=Z(t.useState(!1),2),n=e[0],g=e[1];return t.useEffect((function(){g(PZ())}),[]),n}(),y=Z(t.useMemo((function(){return(Array.isArray(I)?I:[I,I]).map((function(e){return function(e){return"string"===typeof e?lv[e]:e||0}(e)}))}),[I]),2),v=y[0],G=y[1],B=is(c,{keepEmpty:!0}),S=void 0===i&&"horizontal"===s?"center":i,V=o("space",d),W=xe()(V,"".concat(V,"-").concat(s),(Ne(n={},"".concat(V,"-rtl"),"rtl"===a),Ne(n,"".concat(V,"-align-").concat(S),S),n),C),R="".concat(V,"-item"),k="rtl"===a?"marginLeft":"marginRight",X=0,J=B.map((function(e,n){null!==e&&void 0!==e&&(X=n);var g=e&&e.key||"".concat(R,"-").concat(n);return t.createElement(OZ,{className:R,key:g,direction:s,index:n,marginDirection:k,split:A,wrap:p},e)})),Y=t.useMemo((function(){return{horizontalSize:v,verticalSize:G,latestIndex:X,supportFlexGap:f}}),[v,G,X,f]);if(0===B.length)return null;var w={};return p&&(w.flexWrap="wrap",f||(w.marginBottom=-G)),f&&(w.columnGap=v,w.rowGap=G),t.createElement("div",Ke({className:W,style:Ke(Ke({},w),m)},h),t.createElement(ov.Provider,{value:Y},J))};av.Compact=nv;var rv,Iv=av,iv=0,Cv={};function cv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=iv++,g=t;function o(){(g-=1)<=0?(e(),delete Cv[n]):Cv[n]=gd(o)}return Cv[n]=gd(o),n}function uv(e){return!e||null===e.offsetParent||e.hidden}function sv(e){return e instanceof Document?e.body:Array.from(e.childNodes).find((function(e){return(null===e||void 0===e?void 0:e.nodeType)===Node.ELEMENT_NODE}))}function dv(e){var t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return!(t&&t[1]&&t[2]&&t[3])||!(t[1]===t[2]&&t[2]===t[3])}cv.cancel=function(e){void 0!==e&&(gd.cancel(Cv[e]),delete Cv[e])},cv.ids=Cv;var Av=function(e){s(g,e);var n=h(g);function g(){var e;return i(this,g),(e=n.apply(this,arguments)).containerRef=t.createRef(),e.animationStart=!1,e.destroyed=!1,e.onClick=function(t,n){var g,o,l=e.props,a=l.insertExtraNode;if(!l.disabled&&t&&!uv(t)&&!t.className.includes("-leave")){e.extraNode=document.createElement("div");var r=b(e).extraNode,I=e.context.getPrefixCls;r.className="".concat(I(""),"-click-animating-node");var i=e.getAttributeName();if(t.setAttribute(i,"true"),n&&"#fff"!==n&&"#ffffff"!==n&&"rgb(255, 255, 255)"!==n&&"rgba(255, 255, 255, 1)"!==n&&dv(n)&&!/rgba\((?:\d*, ){3}0\)/.test(n)&&"transparent"!==n){r.style.borderColor=n;var C=(null===(g=t.getRootNode)||void 0===g?void 0:g.call(t))||t.ownerDocument,c=null!==(o=sv(C))&&void 0!==o?o:C;rv=Pt("\n      [".concat(I(""),"-click-animating-without-extra-node='true']::after, .").concat(I(""),"-click-animating-node {\n        --antd-wave-shadow-color: ").concat(n,";\n      }"),"antd-wave",{csp:e.csp,attachTo:c})}a&&t.appendChild(r),["transition","animation"].forEach((function(n){t.addEventListener("".concat(n,"start"),e.onTransitionStart),t.addEventListener("".concat(n,"end"),e.onTransitionEnd)}))}},e.onTransitionStart=function(t){if(!e.destroyed){var n=e.containerRef.current;t&&t.target===n&&!e.animationStart&&e.resetEffect(n)}},e.onTransitionEnd=function(t){t&&"fadeEffect"===t.animationName&&e.resetEffect(t.target)},e.bindAnimationEvent=function(t){if(t&&t.getAttribute&&!t.getAttribute("disabled")&&!t.className.includes("disabled")){var n=function(n){if("INPUT"!==n.target.tagName&&!uv(n.target)){e.resetEffect(t);var g=getComputedStyle(t).getPropertyValue("border-top-color")||getComputedStyle(t).getPropertyValue("border-color")||getComputedStyle(t).getPropertyValue("background-color");e.clickWaveTimeoutId=window.setTimeout((function(){return e.onClick(t,g)}),0),cv.cancel(e.animationStartId),e.animationStart=!0,e.animationStartId=cv((function(){e.animationStart=!1}),10)}};return t.addEventListener("click",n,!0),{cancel:function(){t.removeEventListener("click",n,!0)}}}},e.renderWave=function(n){var g=n.csp,o=e.props.children;if(e.csp=g,!t.isValidElement(o))return o;var l=e.containerRef;return ds(o)&&(l=us(o.ref,e.containerRef)),sp(o,{ref:l})},e}return c(g,[{key:"componentDidMount",value:function(){this.destroyed=!1;var e=this.containerRef.current;e&&1===e.nodeType&&(this.instance=this.bindAnimationEvent(e))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var e=this.context.getPrefixCls,t=this.props.insertExtraNode;return"".concat(e(""),t?"-click-animating":"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(e){var t=this;if(e&&e!==this.extraNode&&e instanceof Element){var n=this.props.insertExtraNode,g=this.getAttributeName();e.setAttribute(g,"false"),rv&&(rv.innerHTML=""),n&&this.extraNode&&e.contains(this.extraNode)&&e.removeChild(this.extraNode),["transition","animation"].forEach((function(n){e.removeEventListener("".concat(n,"start"),t.onTransitionStart),e.removeEventListener("".concat(n,"end"),t.onTransitionEnd)}))}}},{key:"render",value:function(){return t.createElement(Me,null,this.renderWave)}}]),g}(t.Component);Av.contextType=Ee;var mv=Av,bv=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},pv=t.createContext(void 0),hv=function(e){var n,g=t.useContext(Ee),o=g.getPrefixCls,l=g.direction,a=e.prefixCls,r=e.size,I=e.className,i=bv(e,["prefixCls","size","className"]),C=o("btn-group",a),c="";switch(r){case"large":c="lg";break;case"small":c="sm"}var u=xe()(C,(Ne(n={},"".concat(C,"-").concat(c),c),Ne(n,"".concat(C,"-rtl"),"rtl"===l),n),I);return t.createElement(pv.Provider,{value:r},t.createElement("div",Ke({},i,{className:u})))},fv=function(){return{width:0,opacity:0,transform:"scale(0)"}},yv=function(e){return{width:e.scrollWidth,opacity:1,transform:"scale(1)"}},Zv=function(e){var n=e.prefixCls,g=!!e.loading;return e.existIcon?t.createElement("span",{className:"".concat(n,"-loading-icon")},t.createElement(ih,null)):t.createElement(UA,{visible:g,motionName:"".concat(n,"-loading-icon-motion"),removeOnLeave:!0,onAppearStart:fv,onAppearActive:yv,onEnterStart:fv,onEnterActive:yv,onLeaveStart:yv,onLeaveActive:fv},(function(e,g){var o=e.className,l=e.style;return t.createElement("span",{className:"".concat(n,"-loading-icon"),style:l,ref:g},t.createElement(ih,{className:o}))}))},vv=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},Gv=/^[\u4e00-\u9fa5]{2}$/,Bv=Gv.test.bind(Gv);function Sv(e){return"text"===e||"link"===e}function Vv(e,n){var g=!1,o=[];return t.Children.forEach(e,(function(e){var t=m(e),n="string"===t||"number"===t;if(g&&n){var l=o.length-1,a=o[l];o[l]="".concat(a).concat(e)}else o.push(e);g=n})),t.Children.map(o,(function(e){return function(e,n){if(null!==e&&void 0!==e){var g=n?" ":"";return"string"!==typeof e&&"number"!==typeof e&&"string"===typeof e.type&&Bv(e.props.children)?sp(e,{children:e.props.children.split("").join(g)}):"string"===typeof e?Bv(e)?t.createElement("span",null,e.split("").join(g)):t.createElement("span",null,e):up(e)?t.createElement("span",null,e):e}}(e,n)}))}gp("default","primary","ghost","dashed","link","text"),gp("default","circle","round"),gp("submit","button","reset");var Wv=function(e,n){var g,o=e.loading,l=void 0!==o&&o,a=e.prefixCls,r=e.type,I=void 0===r?"default":r,i=e.danger,C=e.shape,c=void 0===C?"default":C,u=e.size,s=e.disabled,d=e.className,A=e.children,m=e.icon,b=e.ghost,p=void 0!==b&&b,h=e.block,f=void 0!==h&&h,y=e.htmlType,v=void 0===y?"button":y,G=vv(e,["loading","prefixCls","type","danger","shape","size","disabled","className","children","icon","ghost","block","htmlType"]),B=t.useContext(Py),S=t.useContext(Ty),V=null!==s&&void 0!==s?s:S,W=t.useContext(pv),R=Z(t.useState(!!l),2),k=R[0],X=R[1],J=Z(t.useState(!1),2),Y=J[0],w=J[1],H=t.useContext(Ee),N=H.getPrefixCls,K=H.autoInsertSpaceInButton,F=H.direction,x=n||t.createRef(),E=function(){return 1===t.Children.count(A)&&!m&&!Sv(I)},M="boolean"===typeof l?l:(null===l||void 0===l?void 0:l.delay)||!0;t.useEffect((function(){var e=null;return"number"===typeof M?e=window.setTimeout((function(){e=null,X(M)}),M):X(M),function(){e&&(window.clearTimeout(e),e=null)}}),[M]),t.useEffect((function(){if(x&&x.current&&!1!==K){var e=x.current.textContent;E()&&Bv(e)?Y||w(!0):Y&&w(!1)}}),[x]);var z=function(t){var n=e.onClick;k||V?t.preventDefault():null===n||void 0===n||n(t)},L=N("btn",a),U=!1!==K,Q=$Z(L,F),T=Q.compactSize,D=Q.compactItemClassnames,j=T||W||u||B,P=j&&{large:"lg",small:"sm",middle:void 0}[j]||"",O=k?"loading":m,q=hn(G,["navigate"]),_=xe()(L,(Ne(g={},"".concat(L,"-").concat(c),"default"!==c&&c),Ne(g,"".concat(L,"-").concat(I),I),Ne(g,"".concat(L,"-").concat(P),P),Ne(g,"".concat(L,"-icon-only"),!A&&0!==A&&!!O),Ne(g,"".concat(L,"-background-ghost"),p&&!Sv(I)),Ne(g,"".concat(L,"-loading"),k),Ne(g,"".concat(L,"-two-chinese-chars"),Y&&U&&!k),Ne(g,"".concat(L,"-block"),f),Ne(g,"".concat(L,"-dangerous"),!!i),Ne(g,"".concat(L,"-rtl"),"rtl"===F),Ne(g,"".concat(L,"-disabled"),void 0!==q.href&&V),g),D,d),$=m&&!k?m:t.createElement(Zv,{existIcon:!!m,prefixCls:L,loading:!!k}),ee=A||0===A?Vv(A,E()&&U):null;if(void 0!==q.href)return t.createElement("a",Ke({},q,{className:_,onClick:z,ref:x}),$,ee);var te=t.createElement("button",Ke({},G,{type:v,className:_,onClick:z,disabled:V,ref:x}),$,ee);return Sv(I)?te:t.createElement(mv,{disabled:!!k},te)},Rv=t.forwardRef(Wv);Rv.Group=hv,Rv.__ANT_BUTTON=!0;var kv=Rv;function Xv(){var e=Z((0,t.useState)(!1),2),n=e[0],g=e[1],o=Z((0,t.useState)(null),2),l=o[0],a=o[1];return(0,t.useEffect)((function(){var e=function(){var e=GC(ZC().mark((function e(){var t,n;return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,Bu.get(window.APIROOT+"api/user/data");case 4:t=e.sent,n=t.data.secret+t.data.email,a(n),g(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),fZ.error("Failed to fetch QR code");case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,mC.jsxs)("div",{className:MZ.qrBody,children:[(0,mC.jsxs)("div",{className:MZ.qrWrap,children:[(0,mC.jsx)("div",{className:MZ.loading,style:{opacity:n?1:0},children:(0,mC.jsx)(ih,{})}),(0,mC.jsx)(EZ,{className:MZ.qr,size:256,value:l})]}),(0,mC.jsxs)(Iv,{children:[(0,mC.jsx)(kv,{type:"primary",size:"large",icon:(0,mC.jsx)(UZ,{}),onClick:GC(ZC().mark((function e(){var t,n;return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,Bu.get(window.APIROOT+"api/user/resetSecret");case 4:t=e.sent,n=t.data.secret+t.data.email,a(n),g(!1),fZ.success("New QR code created successfully"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),fZ.error("Failed to create new QR code");case 14:case"end":return e.stop()}}),e,null,[[1,11]])}))),children:"Create New"}),(0,mC.jsx)(kv,{size:"large",icon:(0,mC.jsx)(jZ,{}),onClick:function(){return Fy.open({message:(0,mC.jsx)("b",{children:"Information"}),description:"Keep your QR code private. If you think it has been compromised, reissue a new one using this Create New button.",placement:"top",closeIcon:"[ CLOSE ]",duration:10})}})]})]})}var Jv="Schedule_menuBody__s6t8n",Yv="Schedule_table__4P-mT",wv="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/),Hv="aria-",Nv="data-";function Kv(e,t){return 0===e.indexOf(t)}function Fv(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:$e({},n);var g={};return Object.keys(e).forEach((function(n){(t.aria&&("role"===n||Kv(n,Hv))||t.data&&Kv(n,Nv)||t.attr&&wv.includes(n))&&(g[n]=e[n])})),g}var xv,Ev=function(e){if(Kt()&&window.document.documentElement){var t=Array.isArray(e)?e:[e],n=window.document.documentElement;return t.some((function(e){return e in n.style}))}return!1};function Mv(e,t){return Array.isArray(e)||void 0===t?Ev(e):function(e,t){if(!Ev(e))return!1;var n=document.createElement("div"),g=n.style[e];return n.style[e]=t,n.style[e]!==g}(e,t)}function zv(e){if("undefined"===typeof document)return 0;if(e||void 0===xv){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),g=n.style;g.position="absolute",g.top="0",g.left="0",g.pointerEvents="none",g.visibility="hidden",g.width="200px",g.height="150px",g.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var o=t.offsetWidth;n.style.overflow="scroll";var l=t.offsetWidth;o===l&&(l=n.clientWidth),document.body.removeChild(n),xv=o-l}return xv}function Lv(e){var t=e.match(/^(.*)px$/),n=Number(null===t||void 0===t?void 0:t[1]);return Number.isNaN(n)?zv():n}function Uv(e){if("undefined"===typeof document||!e||!(e instanceof Element))return{width:0,height:0};var t=getComputedStyle(e,"::-webkit-scrollbar"),n=t.width,g=t.height;return{width:Lv(n),height:Lv(g)}}var Qv=function(e){return null};var Tv=function(e){return null};function Dv(e){return void 0===e||null===e?[]:Array.isArray(e)?e:[e]}function jv(e,t){if(!t&&"number"!==typeof t)return e;for(var n=Dv(t),g=e,o=0;o<n.length;o+=1){if(!g)return null;g=g[n[o]]}return g}function Pv(e){var t=[],n={};return e.forEach((function(e){for(var g=e||{},o=g.key,l=g.dataIndex,a=o||Dv(l).join("-")||"RC_TABLE_KEY";n[a];)a="".concat(a,"_next");n[a]=!0,t.push(a)})),t}function Ov(e){return null!==e&&void 0!==e}var qv=t.createContext(!1);var _v=function(){var e=t.createContext(null);return{Context:e,Provider:function(n){var g=n.value,o=n.children,l=t.useRef(g);l.current=g;var a=Z(t.useState((function(){return{getValue:function(){return l.current},listeners:new Set}})),1)[0];return os((function(){a.listeners.forEach((function(e){e(g)}))}),[g]),t.createElement(e.Provider,{value:a},o)}}}(),$v=_v,eG=t.createContext(null),tG=t.createContext({renderWithProps:!1}),nG=["colSpan","rowSpan","style","className"];function gG(e,n){var g,o,l,a=e.prefixCls,r=e.className,I=e.record,i=e.index,C=e.renderIndex,c=e.dataIndex,u=e.render,s=e.children,d=e.component,A=void 0===d?"td":d,b=e.colSpan,p=e.rowSpan,h=e.fixLeft,f=e.fixRight,y=e.firstFixLeft,v=e.lastFixLeft,G=e.firstFixRight,B=e.lastFixRight,S=e.appendNode,V=e.additionalProps,W=void 0===V?{}:V,R=e.ellipsis,k=e.align,X=e.rowType,J=e.isSticky,Y=e.hovering,w=e.onHover,H="".concat(a,"-cell"),N=t.useContext(tG),K=t.useContext(qv),F=t.useContext(eG).allColumnsFixedLeft,x=Z(t.useMemo((function(){if(Ov(s))return[s];var e,n=jv(I,c),g=n,o=void 0;if(u){var l=u(n,I,C);!(e=l)||"object"!==m(e)||Array.isArray(e)||t.isValidElement(e)?g=l:(g=l.children,o=l.props,N.renderWithProps=!0)}return[g,o]}),[N.renderWithProps?Math.random():0,s,c,N,I,u,C]),2),E=x[0],M=x[1],z=E;"object"!==m(z)||Array.isArray(z)||t.isValidElement(z)||(z=null),R&&(v||G)&&(z=t.createElement("span",{className:"".concat(H,"-content")},z));var L=M||{},U=L.colSpan,Q=L.rowSpan,T=L.style,D=L.className,j=tt(L,nG),P=null!==(g=void 0!==U?U:b)&&void 0!==g?g:1,O=null!==(o=void 0!==Q?Q:p)&&void 0!==o?o:1;if(0===P||0===O)return null;var q={},_="number"===typeof h&&K,$="number"===typeof f&&K;_&&(q.position="sticky",q.left=h),$&&(q.position="sticky",q.right=f);var ee={};k&&(ee.textAlign=k);var te,ne=function(e){var n,g=e.ellipsis,o=e.rowType,l=e.children,a=!0===g?{showTitle:!0}:g;return a&&(a.showTitle||"header"===o)&&("string"===typeof l||"number"===typeof l?n=l.toString():t.isValidElement(l)&&"string"===typeof l.props.children&&(n=l.props.children)),n}({rowType:X,ellipsis:R,children:E}),ge=$e($e($e({title:ne},j),W),{},{colSpan:1!==P?P:null,rowSpan:1!==O?O:null,className:xe()(H,r,(l={},Ne(l,"".concat(H,"-fix-left"),_&&K),Ne(l,"".concat(H,"-fix-left-first"),y&&K),Ne(l,"".concat(H,"-fix-left-last"),v&&K),Ne(l,"".concat(H,"-fix-left-all"),v&&F&&K),Ne(l,"".concat(H,"-fix-right"),$&&K),Ne(l,"".concat(H,"-fix-right-first"),G&&K),Ne(l,"".concat(H,"-fix-right-last"),B&&K),Ne(l,"".concat(H,"-ellipsis"),R),Ne(l,"".concat(H,"-with-append"),S),Ne(l,"".concat(H,"-fix-sticky"),(_||$)&&J&&K),Ne(l,"".concat(H,"-row-hover"),!M&&Y),l),W.className,D),style:$e($e($e($e({},W.style),ee),q),T),onMouseEnter:function(e){var t;I&&w(i,i+O-1),null===W||void 0===W||null===(t=W.onMouseEnter)||void 0===t||t.call(W,e)},onMouseLeave:function(e){var t;I&&w(-1,-1),null===W||void 0===W||null===(t=W.onMouseLeave)||void 0===t||t.call(W,e)},ref:(te=A,"string"===typeof te||ds(te)?n:null)});return t.createElement(A,ge,S,z)}var oG=t.forwardRef(gG);oG.displayName="Cell";var lG=["expanded","className","hovering"],aG=t.memo(oG,(function(e,t){return t.shouldCellUpdate?lG.every((function(n){return e[n]===t[n]}))&&!t.shouldCellUpdate(t.record,e.record):es()(e,t)})),rG=t.forwardRef((function(e,n){var g=e.index,o=e.additionalProps,l=void 0===o?{}:o,a=e.colSpan,r=e.rowSpan,I=l.colSpan,i=l.rowSpan,C=null!==a&&void 0!==a?a:I,c=null!==r&&void 0!==r?r:i,u=function(e,n){var g=ts(n),o=t.useContext(null===e||void 0===e?void 0:e.Context),l=o||{},a=l.listeners,r=l.getValue,I=Z(t.useState((function(){return g(o?r():null)})),2),i=I[0],C=I[1];return os((function(){if(o)return a.add(e),function(){a.delete(e)};function e(e){C((function(t){var n=g(e);return es()(t,n)?t:n}))}}),[o]),i}($v,(function(e){var t=function(e,t,n,g){return e<=g&&e+t-1>=n}(g,c||1,null===e||void 0===e?void 0:e.startRow,null===e||void 0===e?void 0:e.endRow);return{onHover:null===e||void 0===e?void 0:e.onHover,hovering:t}})),s=u.onHover,d=u.hovering;return t.createElement(aG,Ke({},e,{colSpan:C,rowSpan:c,hovering:d,ref:n,onHover:s}))}));rG.displayName="WrappedCell";var IG=rG,iG=t.createContext(null);function CG(e,t,n,g,o){var l,a,r=n[e]||{},I=n[t]||{};"left"===r.fixed?l=g.left[e]:"right"===I.fixed&&(a=g.right[t]);var i=!1,C=!1,c=!1,u=!1,s=n[t+1],d=n[e-1];if("rtl"===o){if(void 0!==l)u=!(d&&"left"===d.fixed);else if(void 0!==a){c=!(s&&"right"===s.fixed)}}else if(void 0!==l){i=!(s&&"left"===s.fixed)}else if(void 0!==a){C=!(d&&"right"===d.fixed)}return{fixLeft:l,fixRight:a,lastFixLeft:i,firstFixRight:C,lastFixRight:c,firstFixLeft:u,isSticky:g.isSticky}}function cG(e){var n,g=e.cells,o=e.stickyOffsets,l=e.flattenColumns,a=e.rowComponent,r=e.cellComponent,I=e.onHeaderRow,i=e.index,C=t.useContext(iG),c=C.prefixCls,u=C.direction;I&&(n=I(g.map((function(e){return e.column})),i));var s=Pv(g.map((function(e){return e.column})));return t.createElement(a,n,g.map((function(e,n){var g,a=e.column,I=CG(e.colStart,e.colEnd,l,o,u);return a&&a.onHeaderCell&&(g=e.column.onHeaderCell(a)),t.createElement(IG,Ke({},e,{ellipsis:a.ellipsis,align:a.align,component:r,prefixCls:c,key:s[n]},I,{additionalProps:g,rowType:"header"}))})))}cG.displayName="HeaderRow";var uG=cG;var sG=function(e){var n=e.stickyOffsets,g=e.columns,o=e.flattenColumns,l=e.onHeaderRow,a=t.useContext(iG),r=a.prefixCls,I=a.getComponent,i=t.useMemo((function(){return function(e){var t=[];!function e(n,g){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t[o]=t[o]||[];var l=g;return n.filter(Boolean).map((function(n){var g={key:n.key,className:n.className||"",children:n.title,column:n,colStart:l},a=1,r=n.children;return r&&r.length>0&&(a=e(r,l,o+1).reduce((function(e,t){return e+t}),0),g.hasSubColumns=!0),"colSpan"in n&&(a=n.colSpan),"rowSpan"in n&&(g.rowSpan=n.rowSpan),g.colSpan=a,g.colEnd=g.colStart+a-1,t[o].push(g),l+=a,a}))}(e,0);for(var n=t.length,g=function(e){t[e].forEach((function(t){"rowSpan"in t||t.hasSubColumns||(t.rowSpan=n-e)}))},o=0;o<n;o+=1)g(o);return t}(g)}),[g]),C=I(["header","wrapper"],"thead"),c=I(["header","row"],"tr"),u=I(["header","cell"],"th");return t.createElement(C,{className:"".concat(r,"-thead")},i.map((function(e,g){return t.createElement(uG,{key:g,flattenColumns:o,cells:e,stickyOffsets:n,rowComponent:c,cellComponent:u,onHeaderRow:l,index:g})})))},dG=t.createContext(null);var AG=function(e){var n=e.prefixCls,g=e.children,o=e.component,l=e.cellComponent,a=e.className,r=e.expanded,I=e.colSpan,i=e.isEmpty,C=t.useContext(iG).scrollbarSize,c=t.useContext(dG),u=c.fixHeader,s=c.fixColumn,d=c.componentWidth,A=c.horizonScroll;return t.useMemo((function(){var e=g;return(i?A:s)&&(e=t.createElement("div",{style:{width:d-(u?C:0),position:"sticky",left:0,overflow:"hidden"},className:"".concat(n,"-expanded-row-fixed")},0!==d&&e)),t.createElement(o,{className:a,style:{display:r?null:"none"}},t.createElement(IG,{component:l,prefixCls:n,colSpan:I},e))}),[g,o,a,r,I,i,C,d,s,u,A])},mG=t.createContext(null);function bG(e){var n=e.className,g=e.style,o=e.record,l=e.index,a=e.renderIndex,r=e.rowKey,I=e.rowExpandable,i=e.expandedKeys,C=e.onRow,c=e.indent,u=void 0===c?0:c,s=e.rowComponent,d=e.cellComponent,A=e.childrenColumnName,m=t.useContext(iG),b=m.prefixCls,p=m.fixedInfoList,h=t.useContext(eG),f=h.flattenColumns,y=h.expandableType,v=h.expandRowByClick,G=h.onTriggerExpand,B=h.rowClassName,S=h.expandedRowClassName,V=h.indentSize,W=h.expandIcon,R=h.expandedRowRender,k=h.expandIconColumnIndex,X=Z(t.useState(!1),2),J=X[0],Y=X[1],w=i&&i.has(e.recordKey);t.useEffect((function(){w&&Y(!0)}),[w]);var H="row"===y&&(!I||I(o)),N="nest"===y,K=A&&o&&o[A],F=H||N,x=t.useRef(G);x.current=G;var E,M=function(){x.current.apply(x,arguments)},z=null===C||void 0===C?void 0:C(o,l);"string"===typeof B?E=B:"function"===typeof B&&(E=B(o,l,u));var L,U=Pv(f),Q=t.createElement(s,Ke({},z,{"data-row-key":r,className:xe()(n,"".concat(b,"-row"),"".concat(b,"-row-level-").concat(u),E,z&&z.className),style:$e($e({},g),z?z.style:null),onClick:function(e){var t;v&&F&&M(o,e);for(var n=arguments.length,g=new Array(n>1?n-1:0),l=1;l<n;l++)g[l-1]=arguments[l];null===z||void 0===z||null===(t=z.onClick)||void 0===t||t.call.apply(t,[z,e].concat(g))}}),f.map((function(e,n){var g,r,I=e.render,i=e.dataIndex,C=e.className,c=U[n],s=p[n];return n===(k||0)&&N&&(g=t.createElement(t.Fragment,null,t.createElement("span",{style:{paddingLeft:"".concat(V*u,"px")},className:"".concat(b,"-row-indent indent-level-").concat(u)}),W({prefixCls:b,expanded:w,expandable:K,record:o,onExpand:M}))),e.onCell&&(r=e.onCell(o,l)),t.createElement(IG,Ke({className:C,ellipsis:e.ellipsis,align:e.align,component:d,prefixCls:b,key:c,record:o,index:l,renderIndex:a,dataIndex:i,render:I,shouldCellUpdate:e.shouldCellUpdate,expanded:g&&w},s,{appendNode:g,additionalProps:r}))})));if(H&&(J||w)){var T=R(o,l,u+1,w),D=S&&S(o,l,u);L=t.createElement(AG,{expanded:w,className:xe()("".concat(b,"-expanded-row"),"".concat(b,"-expanded-row-level-").concat(u+1),D),prefixCls:b,component:s,cellComponent:d,colSpan:f.length,isEmpty:!1},T)}return t.createElement(t.Fragment,null,Q,L)}bG.displayName="BodyRow";var pG=bG;function hG(e,t,n,g,o,l){var a=[];a.push({record:e,indent:t,index:l});var r=o(e),i=null===g||void 0===g?void 0:g.has(r);if(e&&Array.isArray(e[n])&&i)for(var C=0;C<e[n].length;C+=1){var c=hG(e[n][C],t+1,n,g,o,C);a.push.apply(a,I(c))}return a}function fG(e){var n=e.columnKey,g=e.onColumnResize,o=t.useRef();return t.useEffect((function(){o.current&&g(n,o.current.offsetWidth)}),[]),t.createElement(Ts,{data:n},t.createElement("td",{ref:o,style:{padding:0,border:0,height:0}},t.createElement("div",{style:{height:0,overflow:"hidden"}},"\xa0")))}function yG(e){var n=e.prefixCls,g=e.columnsKey,o=e.onColumnResize;return t.createElement("tr",{"aria-hidden":"true",className:"".concat(n,"-measure-row"),style:{height:0,fontSize:0}},t.createElement(Ts.Collection,{onBatchResize:function(e){e.forEach((function(e){var t=e.data,n=e.size;o(t,n.offsetWidth)}))}},g.map((function(e){return t.createElement(fG,{key:e,columnKey:e,onColumnResize:o})}))))}function ZG(e){var n=e.data,g=e.getRowKey,o=e.measureColumnWidth,l=e.expandedKeys,a=e.onRow,r=e.rowExpandable,i=e.emptyNode,C=e.childrenColumnName,c=t.useContext(mG).onColumnResize,u=t.useContext(iG),s=u.prefixCls,d=u.getComponent,A=t.useContext(eG).flattenColumns,m=function(e,n,g,o){var l=t.useMemo((function(){if(null===g||void 0===g?void 0:g.size){for(var t=[],l=0;l<(null===e||void 0===e?void 0:e.length);l+=1){var a=e[l];t.push.apply(t,I(hG(a,0,n,g,o,l)))}return t}return null===e||void 0===e?void 0:e.map((function(e,t){return{record:e,indent:0,index:t}}))}),[e,n,g,o]);return l}(n,C,l,g),b=t.useRef({renderWithProps:!1}),p=Z(t.useState(-1),2),h=p[0],f=p[1],y=Z(t.useState(-1),2),v=y[0],G=y[1],B=t.useCallback((function(e,t){f(e),G(t)}),[]),S=t.useMemo((function(){var e,I=d(["body","wrapper"],"tbody"),u=d(["body","row"],"tr"),b=d(["body","cell"],"td");e=n.length?m.map((function(e,n){var o=e.record,I=e.indent,i=e.index,c=g(o,n);return t.createElement(pG,{key:c,rowKey:c,record:o,recordKey:c,index:n,renderIndex:i,rowComponent:u,cellComponent:b,expandedKeys:l,onRow:a,getRowKey:g,rowExpandable:r,childrenColumnName:C,indent:I})})):t.createElement(AG,{expanded:!0,className:"".concat(s,"-placeholder"),prefixCls:s,component:u,cellComponent:b,colSpan:A.length,isEmpty:!0},i);var p=Pv(A);return t.createElement(I,{className:"".concat(s,"-tbody")},o&&t.createElement(yG,{prefixCls:s,columnsKey:p,onColumnResize:c}),e)}),[n,s,a,o,l,g,d,i,A,C,c,r,m]);return t.createElement(tG.Provider,{value:b.current},t.createElement($v.Provider,{value:{startRow:h,endRow:v,onHover:B}},S))}var vG=t.memo(ZG);vG.displayName="Body";var GG=vG,BG=["expandable"],SG="RC_TABLE_INTERNAL_COL_DEFINE";var VG={},WG=["children"],RG=["fixed"];function kG(e){return is(e).filter((function(e){return t.isValidElement(e)})).map((function(e){var t=e.key,n=e.props,g=n.children,o=$e({key:t},tt(n,WG));return g&&(o.children=kG(g)),o}))}function XG(e){return e.reduce((function(e,t){var n=t.fixed,g=!0===n?"left":n,o=t.children;return o&&o.length>0?[].concat(I(e),I(XG(o).map((function(e){return $e({fixed:g},e)})))):[].concat(I(e),[$e($e({},t),{},{fixed:g})])}),[])}var JG=function(e,n){var g=e.prefixCls,o=e.columns,l=e.children,a=e.expandable,r=e.expandedKeys,I=e.columnTitle,i=e.getRowKey,C=e.onTriggerExpand,c=e.expandIcon,u=e.rowExpandable,s=e.expandIconColumnIndex,d=e.direction,A=e.expandRowByClick,m=e.columnWidth,b=e.fixed,p=t.useMemo((function(){return o||kG(l)}),[o,l]),h=t.useMemo((function(){if(a){var e,n=p.slice();if(!n.includes(VG)){var o=s||0;o>=0&&n.splice(o,0,VG)}0;var l=n.indexOf(VG);n=n.filter((function(e,t){return e!==VG||t===l}));var d,h=p[l];d="left"!==b&&!b||s?"right"!==b&&!b||s!==p.length?h?h.fixed:null:"right":"left";var f=(Ne(e={},SG,{className:"".concat(g,"-expand-icon-col"),columnType:"EXPAND_COLUMN"}),Ne(e,"title",I),Ne(e,"fixed",d),Ne(e,"className","".concat(g,"-row-expand-icon-cell")),Ne(e,"width",m),Ne(e,"render",(function(e,n,o){var l=i(n,o),a=r.has(l),I=!u||u(n),s=c({prefixCls:g,expanded:a,expandable:I,record:n,onExpand:C});return A?t.createElement("span",{onClick:function(e){return e.stopPropagation()}},s):s})),e);return n.map((function(e){return e===VG?f:e}))}return p.filter((function(e){return e!==VG}))}),[a,p,i,r,c,d]),f=t.useMemo((function(){var e=h;return n&&(e=n(e)),e.length||(e=[{render:function(){return null}}]),e}),[n,h,d]),y=t.useMemo((function(){return"rtl"===d?function(e){return e.map((function(e){var t=e.fixed,n=t;return"left"===t?n="right":"right"===t&&(n="left"),$e({fixed:n},tt(e,RG))}))}(XG(f)):XG(f)}),[f,d]);return[f,y]};function YG(e){var n=(0,t.useRef)(e),g=Z((0,t.useState)({}),2)[1],o=(0,t.useRef)(null),l=(0,t.useRef)([]);return(0,t.useEffect)((function(){return function(){o.current=null}}),[]),[n.current,function(e){l.current.push(e);var t=Promise.resolve();o.current=t,t.then((function(){if(o.current===t){var e=l.current,a=n.current;l.current=[],e.forEach((function(e){n.current=e(n.current)})),o.current=null,a!==n.current&&g({})}}))}]}var wG=function(e,n,g){return(0,t.useMemo)((function(){for(var t=[],o=[],l=0,a=0,r=0;r<n;r+=1)if("rtl"===g){o[r]=a,a+=e[r]||0;var I=n-r-1;t[I]=l,l+=e[I]||0}else{t[r]=l,l+=e[r]||0;var i=n-r-1;o[i]=a,a+=e[i]||0}return{left:t,right:o}}),[e,n,g])},HG=["columnType"];var NG=function(e){for(var n=e.colWidths,g=e.columns,o=[],l=!1,a=(e.columCount||g.length)-1;a>=0;a-=1){var r=n[a],I=g&&g[a],i=I&&I[SG];if(r||i||l){var C=i||{},c=(C.columnType,tt(C,HG));o.unshift(t.createElement("col",Ke({key:a,style:{width:r}},c))),l=!0}}return t.createElement("colgroup",null,o)};var KG=function(e){var n=e.className,g=e.children;return t.createElement("div",{className:n},g)},FG=t.createContext({});var xG=["children"];function EG(e){return e.children}EG.Row=function(e){var n=e.children,g=tt(e,xG);return t.createElement("tr",g,n)},EG.Cell=function(e){var n=e.className,g=e.index,o=e.children,l=e.colSpan,a=void 0===l?1:l,r=e.rowSpan,I=e.align,i=t.useContext(iG),C=i.prefixCls,c=i.direction,u=t.useContext(FG),s=u.scrollColumnIndex,d=u.stickyOffsets,A=g+a-1+1===s?a+1:a,m=CG(g,g+A-1,u.flattenColumns,d,c);return t.createElement(IG,Ke({className:n,index:g,component:"td",prefixCls:C,record:null,dataIndex:null,align:I,colSpan:A,rowSpan:r,render:function(){return o}},m))};var MG=EG;var zG=function(e){var n=e.children,g=e.stickyOffsets,o=e.flattenColumns,l=t.useContext(iG).prefixCls,a=o.length-1,r=o[a],I=t.useMemo((function(){return{stickyOffsets:g,flattenColumns:o,scrollColumnIndex:(null===r||void 0===r?void 0:r.scrollbar)?a:null}}),[r,o,a,g]);return t.createElement(FG.Provider,{value:I},t.createElement("tfoot",{className:"".concat(l,"-summary")},n))},LG=MG;function UG(e){var n,g=e.prefixCls,o=e.record,l=e.onExpand,a=e.expanded,r=e.expandable,I="".concat(g,"-row-expand-icon");if(!r)return t.createElement("span",{className:xe()(I,"".concat(g,"-row-spaced"))});return t.createElement("span",{className:xe()(I,(n={},Ne(n,"".concat(g,"-row-expanded"),a),Ne(n,"".concat(g,"-row-collapsed"),!a),n)),onClick:function(e){l(o,e),e.stopPropagation()}})}function QG(e){var t=e.getBoundingClientRect(),n=document.documentElement;return{left:t.left+(window.pageXOffset||n.scrollLeft)-(n.clientLeft||document.body.clientLeft||0),top:t.top+(window.pageYOffset||n.scrollTop)-(n.clientTop||document.body.clientTop||0)}}var TG=function(e,n){var g,o,l=e.scrollBodyRef,a=e.onScroll,r=e.offsetScroll,I=e.container,i=t.useContext(iG).prefixCls,C=(null===(g=l.current)||void 0===g?void 0:g.scrollWidth)||0,c=(null===(o=l.current)||void 0===o?void 0:o.clientWidth)||0,u=C&&c*(c/C),s=t.useRef(),d=Z(YG({scrollLeft:0,isHiddenScrollBar:!1}),2),A=d[0],m=d[1],b=t.useRef({delta:0,x:0}),p=Z(t.useState(!1),2),h=p[0],f=p[1],y=function(){f(!1)},v=function(e){var t,n=(e||(null===(t=window)||void 0===t?void 0:t.event)).buttons;if(h&&0!==n){var g=b.current.x+e.pageX-b.current.x-b.current.delta;g<=0&&(g=0),g+u>=c&&(g=c-u),a({scrollLeft:g/c*(C+2)}),b.current.x=e.pageX}else h&&f(!1)},G=function(){if(l.current){var e=QG(l.current).top,t=e+l.current.offsetHeight,n=I===window?document.documentElement.scrollTop+window.innerHeight:QG(I).top+I.clientHeight;t-zv()<=n||e>=n-r?m((function(e){return $e($e({},e),{},{isHiddenScrollBar:!0})})):m((function(e){return $e($e({},e),{},{isHiddenScrollBar:!1})}))}},B=function(e){m((function(t){return $e($e({},t),{},{scrollLeft:e/C*c||0})}))};return t.useImperativeHandle(n,(function(){return{setScrollLeft:B}})),t.useEffect((function(){var e=$d(document.body,"mouseup",y,!1),t=$d(document.body,"mousemove",v,!1);return G(),function(){e.remove(),t.remove()}}),[u,h]),t.useEffect((function(){var e=$d(I,"scroll",G,!1),t=$d(window,"resize",G,!1);return function(){e.remove(),t.remove()}}),[I]),t.useEffect((function(){A.isHiddenScrollBar||m((function(e){var t=l.current;return t?$e($e({},e),{},{scrollLeft:t.scrollLeft/t.scrollWidth*t.clientWidth}):e}))}),[A.isHiddenScrollBar]),C<=c||!u||A.isHiddenScrollBar?null:t.createElement("div",{style:{height:zv(),width:c,bottom:r},className:"".concat(i,"-sticky-scroll")},t.createElement("div",{onMouseDown:function(e){e.persist(),b.current.delta=e.pageX-A.scrollLeft,b.current.x=0,f(!0),e.preventDefault()},ref:s,className:xe()("".concat(i,"-sticky-scroll-bar"),Ne({},"".concat(i,"-sticky-scroll-bar-active"),h)),style:{width:"".concat(u,"px"),transform:"translate3d(".concat(A.scrollLeft,"px, 0, 0)")}}))},DG=t.forwardRef(TG),jG=Kt()?window:null;var PG=["className","noData","columns","flattenColumns","colWidths","columCount","stickyOffsets","direction","fixHeader","stickyTopOffset","stickyBottomOffset","stickyClassName","onScroll","maxContentScroll","children"];var OG=t.forwardRef((function(e,n){var g=e.className,o=e.noData,l=e.columns,a=e.flattenColumns,r=e.colWidths,i=e.columCount,C=e.stickyOffsets,c=e.direction,u=e.fixHeader,s=e.stickyTopOffset,d=e.stickyBottomOffset,A=e.stickyClassName,m=e.onScroll,b=e.maxContentScroll,p=e.children,h=tt(e,PG),f=t.useContext(iG),y=f.prefixCls,Z=f.scrollbarSize,v=f.isSticky,G=v&&!u?0:Z,B=t.useRef(null),S=t.useCallback((function(e){cs(n,e),cs(B,e)}),[]);t.useEffect((function(){var e;function t(e){var t=e.currentTarget,n=e.deltaX;n&&(m({currentTarget:t,scrollLeft:t.scrollLeft+n}),e.preventDefault())}return null===(e=B.current)||void 0===e||e.addEventListener("wheel",t),function(){var e;null===(e=B.current)||void 0===e||e.removeEventListener("wheel",t)}}),[]);var V=t.useMemo((function(){return a.every((function(e){return e.width>=0}))}),[a]),W=a[a.length-1],R={fixed:W?W.fixed:null,scrollbar:!0,onHeaderCell:function(){return{className:"".concat(y,"-cell-scrollbar")}}},k=(0,t.useMemo)((function(){return G?[].concat(I(l),[R]):l}),[G,l]),X=(0,t.useMemo)((function(){return G?[].concat(I(a),[R]):a}),[G,a]),J=(0,t.useMemo)((function(){var e=C.right,t=C.left;return $e($e({},C),{},{left:"rtl"===c?[].concat(I(t.map((function(e){return e+G}))),[0]):t,right:"rtl"===c?e:[].concat(I(e.map((function(e){return e+G}))),[0]),isSticky:v})}),[G,C,v]),Y=function(e,n){return(0,t.useMemo)((function(){for(var t=[],g=0;g<n;g+=1){var o=e[g];if(void 0===o)return null;t[g]=o}return t}),[e.join("_"),n])}(r,i);return t.createElement("div",{style:$e({overflow:"hidden"},v?{top:s,bottom:d}:{}),ref:S,className:xe()(g,Ne({},A,!!A))},t.createElement("table",{style:{tableLayout:"fixed",visibility:o||Y?null:"hidden"}},(!o||!b||V)&&t.createElement(NG,{colWidths:Y?[].concat(I(Y),[G]):[],columCount:i+1,columns:X}),p($e($e({},h),{},{stickyOffsets:J,columns:k,flattenColumns:X}))))}));OG.displayName="FixedHolder";var qG=OG,_G=[],$G={},eB="rc-table-internal-hook",tB=t.memo((function(e){return e.children}),(function(e,t){return!!es()(e.props,t.props)&&(e.pingLeft!==t.pingLeft||e.pingRight!==t.pingRight)}));function nB(e){var n,g=e.prefixCls,o=e.className,l=e.rowClassName,a=e.style,r=e.data,i=e.rowKey,C=e.scroll,c=e.tableLayout,u=e.direction,s=e.title,d=e.footer,A=e.summary,b=e.id,p=e.showHeader,h=e.components,f=e.emptyText,y=e.onRow,v=e.onHeaderRow,G=e.internalHooks,B=e.transformColumns,S=e.internalRefs,V=e.sticky,W=r||_G,R=!!W.length;var k=t.useCallback((function(e,t){return jv(h||{},e)||t}),[h]),X=t.useMemo((function(){return"function"===typeof i?i:function(e){return e&&e[i]}}),[i]),J=function(e){var t,n=e.expandable,g=tt(e,BG);return!1===(t="expandable"in e?$e($e({},g),n):g).showExpandColumn&&(t.expandIconColumnIndex=-1),t}(e),Y=J.expandIcon,w=J.expandedRowKeys,H=J.defaultExpandedRowKeys,N=J.defaultExpandAllRows,K=J.expandedRowRender,F=J.columnTitle,x=J.onExpand,E=J.onExpandedRowsChange,M=J.expandRowByClick,z=J.rowExpandable,L=J.expandIconColumnIndex,U=J.expandedRowClassName,Q=J.childrenColumnName,T=J.indentSize,D=Y||UG,j=Q||"children",P=t.useMemo((function(){return K?"row":!!(e.expandable&&G===eB&&e.expandable.__PARENT_RENDER_ICON__||W.some((function(e){return e&&"object"===m(e)&&e[j]})))&&"nest"}),[!!K,W]),O=t.useState((function(){return H||(N?function(e,t,n){var g=[];return function e(o){(o||[]).forEach((function(o,l){g.push(t(o,l)),e(o[n])}))}(e),g}(W,X,j):[])})),q=Z(O,2),_=q[0],$=q[1],ee=t.useMemo((function(){return new Set(w||_||[])}),[w,_]),te=t.useCallback((function(e){var t,n=X(e,W.indexOf(e)),g=ee.has(n);g?(ee.delete(n),t=I(ee)):t=[].concat(I(ee),[n]),$(t),x&&x(!g,e),E&&E(t)}),[X,ee,W,x,E]);var ne,ge,oe,le=Z(t.useState(0),2),ae=le[0],re=le[1],Ie=Z(JG($e($e($e({},e),J),{},{expandable:!!K,columnTitle:F,expandedKeys:ee,getRowKey:X,onTriggerExpand:te,expandIcon:D,expandIconColumnIndex:L,direction:u}),G===eB?B:null),2),ie=Ie[0],Ce=Ie[1],ce=t.useMemo((function(){return{columns:ie,flattenColumns:Ce}}),[ie,Ce]),ue=t.useRef(),se=t.useRef(),de=t.useRef(),Ae=t.useRef(),me=t.useRef(),be=Z(t.useState(!1),2),pe=be[0],he=be[1],fe=Z(t.useState(!1),2),ye=fe[0],Ze=fe[1],ve=Z(YG(new Map),2),Ge=ve[0],Be=ve[1],Se=Pv(Ce).map((function(e){return Ge.get(e)})),Ve=t.useMemo((function(){return Se}),[Se.join("_")]),We=wG(Ve,Ce.length,u),Re=C&&Ov(C.y),ke=C&&Ov(C.x)||Boolean(J.fixed),Xe=ke&&Ce.some((function(e){return e.fixed})),Je=t.useRef(),Ye=function(e,n){var g="object"===m(e)?e:{},o=g.offsetHeader,l=void 0===o?0:o,a=g.offsetSummary,r=void 0===a?0:a,I=g.offsetScroll,i=void 0===I?0:I,C=g.getContainer,c=(void 0===C?function(){return jG}:C)()||jG;return t.useMemo((function(){var t=!!e;return{isSticky:t,stickyClassName:t?"".concat(n,"-sticky-holder"):"",offsetHeader:l,offsetSummary:r,offsetScroll:i,container:c}}),[i,l,r,n,c])}(V,g),we=Ye.isSticky,He=Ye.offsetHeader,Fe=Ye.offsetSummary,Ee=Ye.offsetScroll,Me=Ye.stickyClassName,ze=Ye.container,Le=null===A||void 0===A?void 0:A(W),Ue=(Re||we)&&t.isValidElement(Le)&&Le.type===MG&&Le.props.fixed;Re&&(ge={overflowY:"scroll",maxHeight:C.y}),ke&&(ne={overflowX:"auto"},Re||(ge={overflowY:"hidden"}),oe={width:!0===(null===C||void 0===C?void 0:C.x)?"auto":null===C||void 0===C?void 0:C.x,minWidth:"100%"});var Qe=t.useCallback((function(e,t){jA(ue.current)&&Be((function(n){if(n.get(e)!==t){var g=new Map(n);return g.set(e,t),g}return n}))}),[]),Te=Z(function(e){var n=(0,t.useRef)(e||null),g=(0,t.useRef)();function o(){window.clearTimeout(g.current)}return(0,t.useEffect)((function(){return o}),[]),[function(e){n.current=e,o(),g.current=window.setTimeout((function(){n.current=null,g.current=void 0}),100)},function(){return n.current}]}(null),2),De=Te[0],je=Te[1];function Pe(e,t){t&&("function"===typeof t?t(e):t.scrollLeft!==e&&(t.scrollLeft=e))}var Oe=function(e){var t,n=e.currentTarget,g=e.scrollLeft,o="rtl"===u,l="number"===typeof g?g:n.scrollLeft,a=n||$G;je()&&je()!==a||(De(a),Pe(l,se.current),Pe(l,de.current),Pe(l,me.current),Pe(l,null===(t=Je.current)||void 0===t?void 0:t.setScrollLeft));if(n){var r=n.scrollWidth,I=n.clientWidth;if(r===I)return he(!1),void Ze(!1);o?(he(-l<r-I),Ze(-l>0)):(he(l>0),Ze(l<r-I))}},qe=function(){ke&&de.current?Oe({currentTarget:de.current}):(he(!1),Ze(!1))},_e=t.useRef(!1);t.useEffect((function(){_e.current&&qe()}),[ke,r,ie.length]),t.useEffect((function(){_e.current=!0}),[]);var et=Z(t.useState(0),2),nt=et[0],gt=et[1],ot=Z(t.useState(!0),2),lt=ot[0],at=ot[1];t.useEffect((function(){de.current instanceof Element?gt(Uv(de.current).width):gt(Uv(Ae.current).width),at(Mv("position","sticky"))}),[]),t.useEffect((function(){G===eB&&S&&(S.body.current=de.current)}));var rt,It=k(["table"],"table"),it=t.useMemo((function(){return c||(Xe?"max-content"===(null===C||void 0===C?void 0:C.x)?"auto":"fixed":Re||we||Ce.some((function(e){return e.ellipsis}))?"fixed":"auto")}),[Re,Xe,Ce,c,we]),Ct={colWidths:Ve,columCount:Ce.length,stickyOffsets:We,onHeaderRow:v,fixHeader:Re,scroll:C},ct=t.useMemo((function(){return R?null:"function"===typeof f?f():f}),[R,f]),ut=t.createElement(GG,{data:W,measureColumnWidth:Re||ke||we,expandedKeys:ee,rowExpandable:z,getRowKey:X,onRow:y,emptyNode:ct,childrenColumnName:j}),st=t.createElement(NG,{colWidths:Ce.map((function(e){return e.width})),columns:Ce}),dt=k(["body"]);if(Re||we){var At;"function"===typeof dt?(At=dt(W,{scrollbarSize:nt,ref:de,onScroll:Oe}),Ct.colWidths=Ce.map((function(e,t){var n=e.width,g=t===ie.length-1?n-nt:n;return"number"!==typeof g||Number.isNaN(g)?(Nt(!1,"When use `components.body` with render props. Each column should have a fixed `width` value."),0):g}))):At=t.createElement("div",{style:$e($e({},ne),ge),onScroll:Oe,ref:de,className:xe()("".concat(g,"-body"))},t.createElement(It,{style:$e($e({},oe),{},{tableLayout:it})},st,ut,!Ue&&Le&&t.createElement(zG,{stickyOffsets:We,flattenColumns:Ce},Le)));var mt=$e($e($e({noData:!W.length,maxContentScroll:ke&&"max-content"===C.x},Ct),ce),{},{direction:u,stickyClassName:Me,onScroll:Oe});rt=t.createElement(t.Fragment,null,!1!==p&&t.createElement(qG,Ke({},mt,{stickyTopOffset:He,className:"".concat(g,"-header"),ref:se}),(function(e){return t.createElement(t.Fragment,null,t.createElement(sG,e),"top"===Ue&&t.createElement(zG,e,Le))})),At,Ue&&"top"!==Ue&&t.createElement(qG,Ke({},mt,{stickyBottomOffset:Fe,className:"".concat(g,"-summary"),ref:me}),(function(e){return t.createElement(zG,e,Le)})),we&&t.createElement(DG,{ref:Je,offsetScroll:Ee,scrollBodyRef:de,onScroll:Oe,container:ze}))}else rt=t.createElement("div",{style:$e($e({},ne),ge),className:xe()("".concat(g,"-content")),onScroll:Oe,ref:de},t.createElement(It,{style:$e($e({},oe),{},{tableLayout:it})},st,!1!==p&&t.createElement(sG,Ke({},Ct,ce)),ut,Le&&t.createElement(zG,{stickyOffsets:We,flattenColumns:Ce},Le)));var bt=Fv(e,{aria:!0,data:!0}),pt=t.createElement("div",Ke({className:xe()(g,o,(n={},Ne(n,"".concat(g,"-rtl"),"rtl"===u),Ne(n,"".concat(g,"-ping-left"),pe),Ne(n,"".concat(g,"-ping-right"),ye),Ne(n,"".concat(g,"-layout-fixed"),"fixed"===c),Ne(n,"".concat(g,"-fixed-header"),Re),Ne(n,"".concat(g,"-fixed-column"),Xe),Ne(n,"".concat(g,"-scroll-horizontal"),ke),Ne(n,"".concat(g,"-has-fix-left"),Ce[0]&&Ce[0].fixed),Ne(n,"".concat(g,"-has-fix-right"),Ce[Ce.length-1]&&"right"===Ce[Ce.length-1].fixed),n)),style:a,id:b,ref:ue},bt),t.createElement(tB,{pingLeft:pe,pingRight:ye,props:$e($e({},e),{},{stickyOffsets:We,mergedExpandedKeys:ee})},s&&t.createElement(KG,{className:"".concat(g,"-title")},s(W)),t.createElement("div",{ref:Ae,className:"".concat(g,"-container")},rt),d&&t.createElement(KG,{className:"".concat(g,"-footer")},d(W))));ke&&(pt=t.createElement(Ts,{onResize:function(e){var t=e.width;t!==ae&&(qe(),re(ue.current?ue.current.offsetWidth:t))}},pt));var ht=t.useMemo((function(){return{prefixCls:g,getComponent:k,scrollbarSize:nt,direction:u,fixedInfoList:Ce.map((function(e,t){return CG(t,t,Ce,We,u)})),isSticky:we}}),[g,k,nt,u,Ce,We,we]),ft=t.useMemo((function(){return $e($e({},ce),{},{tableLayout:it,rowClassName:l,expandedRowClassName:U,expandIcon:D,expandableType:P,expandRowByClick:M,expandedRowRender:K,onTriggerExpand:te,expandIconColumnIndex:L,indentSize:T,allColumnsFixedLeft:ce.flattenColumns.every((function(e){return"left"===e.fixed}))})}),[ce,it,l,U,D,P,M,K,te,L,T]),yt=t.useMemo((function(){return{componentWidth:ae,fixHeader:Re,fixColumn:Xe,horizonScroll:ke}}),[ae,Re,Xe,ke]),Zt=t.useMemo((function(){return{onColumnResize:Qe}}),[Qe]);return t.createElement(qv.Provider,{value:lt},t.createElement(iG.Provider,{value:ht},t.createElement(eG.Provider,{value:ft},t.createElement(dG.Provider,{value:yt},t.createElement(mG.Provider,{value:Zt},pt)))))}nB.EXPAND_COLUMN=VG,nB.Column=Tv,nB.ColumnGroup=Qv,nB.Summary=LG,nB.defaultProps={rowKey:"key",prefixCls:"rc-table",emptyText:function(){return"No Data"}};var gB=nB,oB=function(){var e=(0,t.useContext(Ee).getPrefixCls)("empty-img-default");return t.createElement("svg",{className:e,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},t.createElement("g",{fill:"none",fillRule:"evenodd"},t.createElement("g",{transform:"translate(24 31.67)"},t.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),t.createElement("path",{className:"".concat(e,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),t.createElement("path",{className:"".concat(e,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"}),t.createElement("path",{className:"".concat(e,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),t.createElement("path",{className:"".concat(e,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})),t.createElement("path",{className:"".concat(e,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),t.createElement("g",{className:"".concat(e,"-g"),transform:"translate(149.65 15.383)"},t.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),t.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},lB=function(){var e=(0,t.useContext(Ee).getPrefixCls)("empty-img-simple");return t.createElement("svg",{className:e,width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},t.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},t.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"32",cy:"33",rx:"32",ry:"7"}),t.createElement("g",{className:"".concat(e,"-g"),fillRule:"nonzero"},t.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),t.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",className:"".concat(e,"-path")}))))},aB=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},rB=t.createElement(oB,null),IB=t.createElement(lB,null),iB=function(e){var n=e.className,g=e.prefixCls,o=e.image,l=void 0===o?rB:o,a=e.description,r=e.children,I=e.imageStyle,i=aB(e,["className","prefixCls","image","description","children","imageStyle"]),C=t.useContext(Ee),c=C.getPrefixCls,u=C.direction;return t.createElement(cy,{componentName:"Empty"},(function(e){var o,C=c("empty",g),s="undefined"!==typeof a?a:e.description,d="string"===typeof s?s:"empty",A=null;return A="string"===typeof l?t.createElement("img",{alt:d,src:l}):l,t.createElement("div",Ke({className:xe()(C,(o={},Ne(o,"".concat(C,"-normal"),l===IB),Ne(o,"".concat(C,"-rtl"),"rtl"===u),o),n)},i),t.createElement("div",{className:"".concat(C,"-image"),style:I},A),s&&t.createElement("div",{className:"".concat(C,"-description")},s),r&&t.createElement("div",{className:"".concat(C,"-footer")},r))}))};iB.PRESENTED_IMAGE_DEFAULT=rB,iB.PRESENTED_IMAGE_SIMPLE=IB;var CB=iB,cB=function(e){return t.createElement(Me,null,(function(n){var g=(0,n.getPrefixCls)("empty");switch(e){case"Table":case"List":return t.createElement(CB,{image:CB.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return t.createElement(CB,{image:CB.PRESENTED_IMAGE_SIMPLE,className:"".concat(g,"-small")});default:return t.createElement(CB,null)}}))};function uB(){return Z(t.useReducer((function(e){return e+1}),0),2)[1]}var sB={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},dB=new Map,AB=-1,mB={},bB={matchHandlers:{},dispatch:function(e){return mB=e,dB.forEach((function(e){return e(mB)})),dB.size>=1},subscribe:function(e){return dB.size||this.register(),AB+=1,dB.set(AB,e),e(mB),AB},unsubscribe:function(e){dB.delete(e),dB.size||this.unregister()},unregister:function(){var e=this;Object.keys(sB).forEach((function(t){var n=sB[t],g=e.matchHandlers[n];null===g||void 0===g||g.mql.removeListener(null===g||void 0===g?void 0:g.listener)})),dB.clear()},register:function(){var e=this;Object.keys(sB).forEach((function(t){var n=sB[t],g=function(n){var g=n.matches;e.dispatch(Ke(Ke({},mB),Ne({},t,g)))},o=window.matchMedia(n);o.addListener(g),e.matchHandlers[n]={mql:o,listener:g},g(o)}))}};var pB=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=(0,t.useRef)({}),g=uB();return(0,t.useEffect)((function(){var t=bB.subscribe((function(t){n.current=t,e&&g()}));return function(){return bB.unsubscribe(t)}}),[]),n.current},hB=ly,fB={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"},yB=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:fB}))};yB.displayName="DoubleLeftOutlined";var ZB=t.forwardRef(yB),vB={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"},GB=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:vB}))};GB.displayName="DoubleRightOutlined";var BB=t.forwardRef(GB),SB=function(e){var n,g="".concat(e.rootPrefixCls,"-item"),o=xe()(g,"".concat(g,"-").concat(e.page),(Ne(n={},"".concat(g,"-active"),e.active),Ne(n,"".concat(g,"-disabled"),!e.page),Ne(n,e.className,!!e.className),n));return t.createElement("li",{title:e.showTitle?e.page:null,className:o,onClick:function(){e.onClick(e.page)},onKeyPress:function(t){e.onKeyPress(t,e.onClick,e.page)},tabIndex:"0"},e.itemRender(e.page,"page",t.createElement("a",{rel:"nofollow"},e.page)))},VB=13,WB=38,RB=40,kB=function(e){s(g,e);var n=h(g);function g(){var e;i(this,g);for(var t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return(e=n.call.apply(n,[this].concat(o))).state={goInputText:""},e.buildOptionText=function(t){return"".concat(t," ").concat(e.props.locale.items_per_page)},e.changeSize=function(t){e.props.changeSize(Number(t))},e.handleChange=function(t){e.setState({goInputText:t.target.value})},e.handleBlur=function(t){var n=e.props,g=n.goButton,o=n.quickGo,l=n.rootPrefixCls,a=e.state.goInputText;g||""===a||(e.setState({goInputText:""}),t.relatedTarget&&(t.relatedTarget.className.indexOf("".concat(l,"-item-link"))>=0||t.relatedTarget.className.indexOf("".concat(l,"-item"))>=0)||o(e.getValidValue()))},e.go=function(t){""!==e.state.goInputText&&(t.keyCode!==VB&&"click"!==t.type||(e.setState({goInputText:""}),e.props.quickGo(e.getValidValue())))},e}return c(g,[{key:"getValidValue",value:function(){var e=this.state.goInputText;return!e||isNaN(e)?void 0:Number(e)}},{key:"getPageSizeOptions",value:function(){var e=this.props,t=e.pageSize,n=e.pageSizeOptions;return n.some((function(e){return e.toString()===t.toString()}))?n:n.concat([t.toString()]).sort((function(e,t){return(isNaN(Number(e))?0:Number(e))-(isNaN(Number(t))?0:Number(t))}))}},{key:"render",value:function(){var e=this,n=this.props,g=n.pageSize,o=n.locale,l=n.rootPrefixCls,a=n.changeSize,r=n.quickGo,I=n.goButton,i=n.selectComponentClass,C=n.buildOptionText,c=n.selectPrefixCls,u=n.disabled,s=this.state.goInputText,d="".concat(l,"-options"),A=i,m=null,b=null,p=null;if(!a&&!r)return null;var h=this.getPageSizeOptions();if(a&&A){var f=h.map((function(n,g){return t.createElement(A.Option,{key:g,value:n.toString()},(C||e.buildOptionText)(n))}));m=t.createElement(A,{disabled:u,prefixCls:c,showSearch:!1,className:"".concat(d,"-size-changer"),optionLabelProp:"children",dropdownMatchSelectWidth:!1,value:(g||h[0]).toString(),onChange:this.changeSize,getPopupContainer:function(e){return e.parentNode},"aria-label":o.page_size,defaultOpen:!1},f)}return r&&(I&&(p="boolean"===typeof I?t.createElement("button",{type:"button",onClick:this.go,onKeyUp:this.go,disabled:u,className:"".concat(d,"-quick-jumper-button")},o.jump_to_confirm):t.createElement("span",{onClick:this.go,onKeyUp:this.go},I)),b=t.createElement("div",{className:"".concat(d,"-quick-jumper")},o.jump_to,t.createElement("input",{disabled:u,type:"text",value:s,onChange:this.handleChange,onKeyUp:this.go,onBlur:this.handleBlur,"aria-label":o.page}),o.page,p)),t.createElement("li",{className:"".concat(d)},m,b)}}]),g}(t.Component);kB.defaultProps={pageSizeOptions:["10","20","50","100"]};var XB=kB;function JB(){}function YB(e){var t=Number(e);return"number"===typeof t&&!isNaN(t)&&isFinite(t)&&Math.floor(t)===t}function wB(e,t,n){var g="undefined"===typeof e?t.pageSize:e;return Math.floor((n.total-1)/g)+1}var HB=function(e){s(g,e);var n=h(g);function g(e){var o;i(this,g),(o=n.call(this,e)).getJumpPrevPage=function(){return Math.max(1,o.state.current-(o.props.showLessItems?3:5))},o.getJumpNextPage=function(){return Math.min(wB(void 0,o.state,o.props),o.state.current+(o.props.showLessItems?3:5))},o.getItemIcon=function(e,n){var g=o.props.prefixCls,l=e||t.createElement("button",{type:"button","aria-label":n,className:"".concat(g,"-item-link")});return"function"===typeof e&&(l=t.createElement(e,$e({},o.props))),l},o.savePaginationNode=function(e){o.paginationNode=e},o.isValid=function(e){var t=o.props.total;return YB(e)&&e!==o.state.current&&YB(t)&&t>0},o.shouldDisplayQuickJumper=function(){var e=o.props,t=e.showQuickJumper;return!(e.total<=o.state.pageSize)&&t},o.handleKeyDown=function(e){e.keyCode!==WB&&e.keyCode!==RB||e.preventDefault()},o.handleKeyUp=function(e){var t=o.getValidValue(e);t!==o.state.currentInputValue&&o.setState({currentInputValue:t}),e.keyCode===VB?o.handleChange(t):e.keyCode===WB?o.handleChange(t-1):e.keyCode===RB&&o.handleChange(t+1)},o.handleBlur=function(e){var t=o.getValidValue(e);o.handleChange(t)},o.changePageSize=function(e){var t=o.state.current,n=wB(e,o.state,o.props);t=t>n?n:t,0===n&&(t=o.state.current),"number"===typeof e&&("pageSize"in o.props||o.setState({pageSize:e}),"current"in o.props||o.setState({current:t,currentInputValue:t})),o.props.onShowSizeChange(t,e),"onChange"in o.props&&o.props.onChange&&o.props.onChange(t,e)},o.handleChange=function(e){var t=o.props,n=t.disabled,g=t.onChange,l=o.state,a=l.pageSize,r=l.current,I=l.currentInputValue;if(o.isValid(e)&&!n){var i=wB(void 0,o.state,o.props),C=e;return e>i?C=i:e<1&&(C=1),"current"in o.props||o.setState({current:C}),C!==I&&o.setState({currentInputValue:C}),g(C,a),C}return r},o.prev=function(){o.hasPrev()&&o.handleChange(o.state.current-1)},o.next=function(){o.hasNext()&&o.handleChange(o.state.current+1)},o.jumpPrev=function(){o.handleChange(o.getJumpPrevPage())},o.jumpNext=function(){o.handleChange(o.getJumpNextPage())},o.hasPrev=function(){return o.state.current>1},o.hasNext=function(){return o.state.current<wB(void 0,o.state,o.props)},o.runIfEnter=function(e,t){if("Enter"===e.key||13===e.charCode){for(var n=arguments.length,g=new Array(n>2?n-2:0),o=2;o<n;o++)g[o-2]=arguments[o];t.apply(void 0,g)}},o.runIfEnterPrev=function(e){o.runIfEnter(e,o.prev)},o.runIfEnterNext=function(e){o.runIfEnter(e,o.next)},o.runIfEnterJumpPrev=function(e){o.runIfEnter(e,o.jumpPrev)},o.runIfEnterJumpNext=function(e){o.runIfEnter(e,o.jumpNext)},o.handleGoTO=function(e){e.keyCode!==VB&&"click"!==e.type||o.handleChange(o.state.currentInputValue)};var l=e.onChange!==JB;"current"in e&&!l&&console.warn("Warning: You provided a `current` prop to a Pagination component without an `onChange` handler. This will render a read-only component.");var a=e.defaultCurrent;"current"in e&&(a=e.current);var r=e.defaultPageSize;return"pageSize"in e&&(r=e.pageSize),a=Math.min(a,wB(r,void 0,e)),o.state={current:a,currentInputValue:a,pageSize:r},o}return c(g,[{key:"componentDidUpdate",value:function(e,t){var n=this.props.prefixCls;if(t.current!==this.state.current&&this.paginationNode){var g=this.paginationNode.querySelector(".".concat(n,"-item-").concat(t.current));g&&document.activeElement===g&&g.blur()}}},{key:"getValidValue",value:function(e){var t=e.target.value,n=wB(void 0,this.state,this.props),g=this.state.currentInputValue;return""===t?t:isNaN(Number(t))?g:t>=n?n:Number(t)}},{key:"getShowSizeChanger",value:function(){var e=this.props,t=e.showSizeChanger,n=e.total,g=e.totalBoundaryShowSizeChanger;return"undefined"!==typeof t?t:n>g}},{key:"renderPrev",value:function(e){var n=this.props,g=n.prevIcon,o=(0,n.itemRender)(e,"prev",this.getItemIcon(g,"prev page")),l=!this.hasPrev();return(0,t.isValidElement)(o)?(0,t.cloneElement)(o,{disabled:l}):o}},{key:"renderNext",value:function(e){var n=this.props,g=n.nextIcon,o=(0,n.itemRender)(e,"next",this.getItemIcon(g,"next page")),l=!this.hasNext();return(0,t.isValidElement)(o)?(0,t.cloneElement)(o,{disabled:l}):o}},{key:"render",value:function(){var e=this,n=this.props,g=n.prefixCls,o=n.className,l=n.style,a=n.disabled,r=n.hideOnSinglePage,I=n.total,i=n.locale,C=n.showQuickJumper,c=n.showLessItems,u=n.showTitle,s=n.showTotal,d=n.simple,A=n.itemRender,m=n.showPrevNextJumpers,b=n.jumpPrevIcon,p=n.jumpNextIcon,h=n.selectComponentClass,f=n.selectPrefixCls,y=n.pageSizeOptions,Z=this.state,v=Z.current,G=Z.pageSize,B=Z.currentInputValue;if(!0===r&&I<=G)return null;var S=wB(void 0,this.state,this.props),V=[],W=null,R=null,k=null,X=null,J=null,Y=C&&C.goButton,w=c?1:2,H=v-1>0?v-1:0,N=v+1<S?v+1:S,K=Object.keys(this.props).reduce((function(t,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||(t[n]=e.props[n]),t}),{});if(d)return Y&&(J="boolean"===typeof Y?t.createElement("button",{type:"button",onClick:this.handleGoTO,onKeyUp:this.handleGoTO},i.jump_to_confirm):t.createElement("span",{onClick:this.handleGoTO,onKeyUp:this.handleGoTO},Y),J=t.createElement("li",{title:u?"".concat(i.jump_to).concat(v,"/").concat(S):null,className:"".concat(g,"-simple-pager")},J)),t.createElement("ul",Ke({className:xe()(g,"".concat(g,"-simple"),Ne({},"".concat(g,"-disabled"),a),o),style:l,ref:this.savePaginationNode},K),t.createElement("li",{title:u?i.prev_page:null,onClick:this.prev,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterPrev,className:xe()("".concat(g,"-prev"),Ne({},"".concat(g,"-disabled"),!this.hasPrev())),"aria-disabled":!this.hasPrev()},this.renderPrev(H)),t.createElement("li",{title:u?"".concat(v,"/").concat(S):null,className:"".concat(g,"-simple-pager")},t.createElement("input",{type:"text",value:B,disabled:a,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onChange:this.handleKeyUp,onBlur:this.handleBlur,size:"3"}),t.createElement("span",{className:"".concat(g,"-slash")},"/"),S),t.createElement("li",{title:u?i.next_page:null,onClick:this.next,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterNext,className:xe()("".concat(g,"-next"),Ne({},"".concat(g,"-disabled"),!this.hasNext())),"aria-disabled":!this.hasNext()},this.renderNext(N)),J);if(S<=3+2*w){var F={locale:i,rootPrefixCls:g,onClick:this.handleChange,onKeyPress:this.runIfEnter,showTitle:u,itemRender:A};S||V.push(t.createElement(SB,Ke({},F,{key:"noPager",page:1,className:"".concat(g,"-item-disabled")})));for(var x=1;x<=S;x+=1){var E=v===x;V.push(t.createElement(SB,Ke({},F,{key:x,page:x,active:E})))}}else{var M=c?i.prev_3:i.prev_5,z=c?i.next_3:i.next_5;m&&(W=t.createElement("li",{title:u?M:null,key:"prev",onClick:this.jumpPrev,tabIndex:"0",onKeyPress:this.runIfEnterJumpPrev,className:xe()("".concat(g,"-jump-prev"),Ne({},"".concat(g,"-jump-prev-custom-icon"),!!b))},A(this.getJumpPrevPage(),"jump-prev",this.getItemIcon(b,"prev page"))),R=t.createElement("li",{title:u?z:null,key:"next",tabIndex:"0",onClick:this.jumpNext,onKeyPress:this.runIfEnterJumpNext,className:xe()("".concat(g,"-jump-next"),Ne({},"".concat(g,"-jump-next-custom-icon"),!!p))},A(this.getJumpNextPage(),"jump-next",this.getItemIcon(p,"next page")))),X=t.createElement(SB,{locale:i,last:!0,rootPrefixCls:g,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:S,page:S,active:!1,showTitle:u,itemRender:A}),k=t.createElement(SB,{locale:i,rootPrefixCls:g,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:1,page:1,active:!1,showTitle:u,itemRender:A});var L=Math.max(1,v-w),U=Math.min(v+w,S);v-1<=w&&(U=1+2*w),S-v<=w&&(L=S-2*w);for(var Q=L;Q<=U;Q+=1){var T=v===Q;V.push(t.createElement(SB,{locale:i,rootPrefixCls:g,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:Q,page:Q,active:T,showTitle:u,itemRender:A}))}v-1>=2*w&&3!==v&&(V[0]=(0,t.cloneElement)(V[0],{className:"".concat(g,"-item-after-jump-prev")}),V.unshift(W)),S-v>=2*w&&v!==S-2&&(V[V.length-1]=(0,t.cloneElement)(V[V.length-1],{className:"".concat(g,"-item-before-jump-next")}),V.push(R)),1!==L&&V.unshift(k),U!==S&&V.push(X)}var D=null;s&&(D=t.createElement("li",{className:"".concat(g,"-total-text")},s(I,[0===I?0:(v-1)*G+1,v*G>I?I:v*G])));var j=!this.hasPrev()||!S,P=!this.hasNext()||!S;return t.createElement("ul",Ke({className:xe()(g,o,Ne({},"".concat(g,"-disabled"),a)),style:l,unselectable:"unselectable",ref:this.savePaginationNode},K),D,t.createElement("li",{title:u?i.prev_page:null,onClick:this.prev,tabIndex:j?null:0,onKeyPress:this.runIfEnterPrev,className:xe()("".concat(g,"-prev"),Ne({},"".concat(g,"-disabled"),j)),"aria-disabled":j},this.renderPrev(H)),V,t.createElement("li",{title:u?i.next_page:null,onClick:this.next,tabIndex:P?null:0,onKeyPress:this.runIfEnterNext,className:xe()("".concat(g,"-next"),Ne({},"".concat(g,"-disabled"),P)),"aria-disabled":P},this.renderNext(N)),t.createElement(XB,{disabled:a,locale:i,rootPrefixCls:g,selectComponentClass:h,selectPrefixCls:f,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:v,pageSize:G,pageSizeOptions:y,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:Y}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n={};if("current"in e&&(n.current=e.current,e.current!==t.current&&(n.currentInputValue=n.current)),"pageSize"in e&&e.pageSize!==t.pageSize){var g=t.current,o=wB(e.pageSize,t,e);g=g>o?o:g,"current"in e||(n.current=g,n.currentInputValue=g),n.pageSize=e.pageSize}return n}}]),g}(t.Component);HB.defaultProps={defaultCurrent:1,total:0,defaultPageSize:10,onChange:JB,className:"",selectPrefixCls:"rc-select",prefixCls:"rc-pagination",selectComponentClass:null,hideOnSinglePage:!1,showPrevNextJumpers:!0,showQuickJumper:!1,showLessItems:!1,showTitle:!0,onShowSizeChange:JB,locale:{items_per_page:"\u6761/\u9875",jump_to:"\u8df3\u81f3",jump_to_confirm:"\u786e\u5b9a",page:"\u9875",prev_page:"\u4e0a\u4e00\u9875",next_page:"\u4e0b\u4e00\u9875",prev_5:"\u5411\u524d 5 \u9875",next_5:"\u5411\u540e 5 \u9875",prev_3:"\u5411\u524d 3 \u9875",next_3:"\u5411\u540e 3 \u9875",page_size:"\u9875\u7801"},style:{},itemRender:function(e,t,n){return n},totalBoundaryShowSizeChanger:50};var NB=HB;function KB(e,t){var n,g=e.key;return"value"in e&&(n=e.value),null!==g&&void 0!==g?g:void 0!==n?n:"rc-index-key-".concat(t)}function FB(e,t){var n=e||{};return{label:n.label||(t?"children":"label"),value:n.value||"value",options:n.options||"options"}}function xB(e){var t=$e({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return Nt(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t}}),t}var EB=["prefixCls","disabled","visible","children","popupElement","containerWidth","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],MB=function(e,n){var g=e.prefixCls,o=(e.disabled,e.visible),l=e.children,a=e.popupElement,r=e.containerWidth,I=e.animation,i=e.transitionName,C=e.dropdownStyle,c=e.dropdownClassName,u=e.direction,s=void 0===u?"ltr":u,d=e.placement,A=e.dropdownMatchSelectWidth,m=e.dropdownRender,b=e.dropdownAlign,p=e.getPopupContainer,h=e.empty,f=e.getTriggerDOMNode,y=e.onPopupVisibleChange,Z=e.onPopupMouseEnter,v=tt(e,EB),G="".concat(g,"-dropdown"),B=a;m&&(B=m(a));var S=t.useMemo((function(){return function(e){var t=!0===e?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:t,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:t,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:t,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:t,adjustY:1}}}}(A)}),[A]),V=I?"".concat(G,"-").concat(I):i,W=t.useRef(null);t.useImperativeHandle(n,(function(){return{getPopupElement:function(){return W.current}}}));var R=$e({minWidth:r},C);return"number"===typeof A?R.width=A:A&&(R.width=r),t.createElement(Ab,Ke({},v,{showAction:y?["click"]:[],hideAction:y?["click"]:[],popupPlacement:d||("rtl"===s?"bottomRight":"bottomLeft"),builtinPlacements:S,prefixCls:G,popupTransitionName:V,popup:t.createElement("div",{ref:W,onMouseEnter:Z},B),popupAlign:b,popupVisible:o,getPopupContainer:p,popupClassName:xe()(c,Ne({},"".concat(G,"-empty"),h)),popupStyle:R,getTriggerDOMNode:f,onPopupVisibleChange:y}),l)},zB=t.forwardRef(MB);zB.displayName="SelectTrigger";var LB=zB,UB=function(e){var n,g=e.className,o=e.customizeIcon,l=e.customizeIconProps,a=e.onMouseDown,r=e.onClick,I=e.children;return n="function"===typeof o?o(l):o,t.createElement("span",{className:g,onMouseDown:function(e){e.preventDefault(),a&&a(e)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:r,"aria-hidden":!0},void 0!==n?n:t.createElement("span",{className:xe()(g.split(/\s+/).map((function(e){return"".concat(e,"-icon")})))},I))},QB=function(e,n){var g,o,l=e.prefixCls,a=e.id,r=e.inputElement,I=e.disabled,i=e.tabIndex,C=e.autoFocus,c=e.autoComplete,u=e.editable,s=e.activeDescendantId,d=e.value,A=e.maxLength,m=e.onKeyDown,b=e.onMouseDown,p=e.onChange,h=e.onPaste,f=e.onCompositionStart,y=e.onCompositionEnd,Z=e.open,v=e.attrs,G=r||t.createElement("input",null),B=G,S=B.ref,V=B.props,W=V.onKeyDown,R=V.onChange,k=V.onMouseDown,X=V.onCompositionStart,J=V.onCompositionEnd,Y=V.style;return wt(G.props),G=t.cloneElement(G,$e($e($e({type:"search"},V),{},{id:a,ref:us(n,S),disabled:I,tabIndex:i,autoComplete:c||"off",autoFocus:C,className:xe()("".concat(l,"-selection-search-input"),null===(g=G)||void 0===g||null===(o=g.props)||void 0===o?void 0:o.className),role:"combobox","aria-expanded":Z,"aria-haspopup":"listbox","aria-owns":"".concat(a,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(a,"_list"),"aria-activedescendant":s},v),{},{value:u?d:"",maxLength:A,readOnly:!u,unselectable:u?null:"on",style:$e($e({},Y),{},{opacity:u?null:0}),onKeyDown:function(e){m(e),W&&W(e)},onMouseDown:function(e){b(e),k&&k(e)},onChange:function(e){p(e),R&&R(e)},onCompositionStart:function(e){f(e),X&&X(e)},onCompositionEnd:function(e){y(e),J&&J(e)},onPaste:h}))},TB=t.forwardRef(QB);TB.displayName="Input";var DB=TB;function jB(e){return Array.isArray(e)?e:void 0!==e?[e]:[]}var PB="undefined"!==typeof window&&window.document&&window.document.documentElement;function OB(e){return["string","number"].includes(m(e))}function qB(e){var t=void 0;return e&&(OB(e.title)?t=e.title.toString():OB(e.label)&&(t=e.label.toString())),t}function _B(e){var t;return null!==(t=e.key)&&void 0!==t?t:e.value}var $B=function(e){e.preventDefault(),e.stopPropagation()},eS=function(e){var n,g,o=e.id,l=e.prefixCls,a=e.values,r=e.open,I=e.searchValue,i=e.inputRef,C=e.placeholder,c=e.disabled,u=e.mode,s=e.showSearch,d=e.autoFocus,A=e.autoComplete,m=e.activeDescendantId,b=e.tabIndex,p=e.removeIcon,h=e.maxTagCount,f=e.maxTagTextLength,y=e.maxTagPlaceholder,v=void 0===y?function(e){return"+ ".concat(e.length," ...")}:y,G=e.tagRender,B=e.onToggleOpen,S=e.onRemove,V=e.onInputChange,W=e.onInputPaste,R=e.onInputKeyDown,k=e.onInputMouseDown,X=e.onInputCompositionStart,J=e.onInputCompositionEnd,Y=t.useRef(null),w=Z((0,t.useState)(0),2),H=w[0],N=w[1],K=Z((0,t.useState)(!1),2),F=K[0],x=K[1],E="".concat(l,"-selection"),M=r||"tags"===u?I:"",z="tags"===u||s&&(r||F);function L(e,n,g,o,l){return t.createElement("span",{className:xe()("".concat(E,"-item"),Ne({},"".concat(E,"-item-disabled"),g)),title:qB(e)},t.createElement("span",{className:"".concat(E,"-item-content")},n),o&&t.createElement(UB,{className:"".concat(E,"-item-remove"),onMouseDown:$B,onClick:l,customizeIcon:p},"\xd7"))}n=function(){N(Y.current.scrollWidth)},g=[M],PB?t.useLayoutEffect(n,g):t.useEffect(n,g);var U=t.createElement("div",{className:"".concat(E,"-search"),style:{width:H},onFocus:function(){x(!0)},onBlur:function(){x(!1)}},t.createElement(DB,{ref:i,open:r,prefixCls:l,id:o,inputElement:null,disabled:c,autoFocus:d,autoComplete:A,editable:z,activeDescendantId:m,value:M,onKeyDown:R,onMouseDown:k,onChange:V,onPaste:W,onCompositionStart:X,onCompositionEnd:J,tabIndex:b,attrs:Fv(e,!0)}),t.createElement("span",{ref:Y,className:"".concat(E,"-search-mirror"),"aria-hidden":!0},M,"\xa0")),Q=t.createElement(bd,{prefixCls:"".concat(E,"-overflow"),data:a,renderItem:function(e){var n=e.disabled,g=e.label,o=e.value,l=!c&&!n,a=g;if("number"===typeof f&&("string"===typeof g||"number"===typeof g)){var I=String(a);I.length>f&&(a="".concat(I.slice(0,f),"..."))}var i=function(t){t&&t.stopPropagation(),S(e)};return"function"===typeof G?function(e,n,g,o,l){return t.createElement("span",{onMouseDown:function(e){$B(e),B(!r)}},G({label:n,value:e,disabled:g,closable:o,onClose:l}))}(o,a,n,l,i):L(e,a,n,l,i)},renderRest:function(e){var t="function"===typeof v?v(e):v;return L({title:t},t,!1)},suffix:U,itemKey:_B,maxCount:h});return t.createElement(t.Fragment,null,Q,!a.length&&!M&&t.createElement("span",{className:"".concat(E,"-placeholder")},C))},tS=function(e){var n=e.inputElement,g=e.prefixCls,o=e.id,l=e.inputRef,a=e.disabled,r=e.autoFocus,I=e.autoComplete,i=e.activeDescendantId,C=e.mode,c=e.open,u=e.values,s=e.placeholder,d=e.tabIndex,A=e.showSearch,m=e.searchValue,b=e.activeValue,p=e.maxLength,h=e.onInputKeyDown,f=e.onInputMouseDown,y=e.onInputChange,v=e.onInputPaste,G=e.onInputCompositionStart,B=e.onInputCompositionEnd,S=Z(t.useState(!1),2),V=S[0],W=S[1],R="combobox"===C,k=R||A,X=u[0],J=m||"";R&&b&&!V&&(J=b),t.useEffect((function(){R&&W(!1)}),[R,b]);var Y=!("combobox"!==C&&!c&&!A)&&!!J,w=qB(X);return t.createElement(t.Fragment,null,t.createElement("span",{className:"".concat(g,"-selection-search")},t.createElement(DB,{ref:l,prefixCls:g,id:o,open:c,inputElement:n,disabled:a,autoFocus:r,autoComplete:I,editable:k,activeDescendantId:i,value:J,onKeyDown:h,onMouseDown:f,onChange:function(e){W(!0),y(e)},onPaste:v,onCompositionStart:G,onCompositionEnd:B,tabIndex:d,attrs:Fv(e,!0),maxLength:R?p:void 0})),!R&&X&&!Y&&t.createElement("span",{className:"".concat(g,"-selection-item"),title:w},X.label),function(){if(X)return null;var e=Y?{visibility:"hidden"}:void 0;return t.createElement("span",{className:"".concat(g,"-selection-placeholder"),style:e},s)}())};function nS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,n=t.useRef(null),g=t.useRef(null);function o(t){(t||null===n.current)&&(n.current=t),window.clearTimeout(g.current),g.current=window.setTimeout((function(){n.current=null}),e)}return t.useEffect((function(){return function(){window.clearTimeout(g.current)}}),[]),[function(){return n.current},o]}var gS=function(e,n){var g=(0,t.useRef)(null),o=(0,t.useRef)(!1),l=e.prefixCls,a=e.open,r=e.mode,I=e.showSearch,i=e.tokenWithEnter,C=e.onSearch,c=e.onSearchSubmit,u=e.onToggleOpen,s=e.onInputKeyDown,d=e.domRef;t.useImperativeHandle(n,(function(){return{focus:function(){g.current.focus()},blur:function(){g.current.blur()}}}));var A=Z(nS(0),2),m=A[0],b=A[1],p=(0,t.useRef)(null),h=function(e){!1!==C(e,!0,o.current)&&u(!0)},f={inputRef:g,onInputKeyDown:function(e){var t,n=e.which;n!==hd.UP&&n!==hd.DOWN||e.preventDefault(),s&&s(e),n!==hd.ENTER||"tags"!==r||o.current||a||null===c||void 0===c||c(e.target.value),t=n,[hd.ESC,hd.SHIFT,hd.BACKSPACE,hd.TAB,hd.WIN_KEY,hd.ALT,hd.META,hd.WIN_KEY_RIGHT,hd.CTRL,hd.SEMICOLON,hd.EQUALS,hd.CAPS_LOCK,hd.CONTEXT_MENU,hd.F1,hd.F2,hd.F3,hd.F4,hd.F5,hd.F6,hd.F7,hd.F8,hd.F9,hd.F10,hd.F11,hd.F12].includes(t)||u(!0)},onInputMouseDown:function(){b(!0)},onInputChange:function(e){var t=e.target.value;if(i&&p.current&&/[\r\n]/.test(p.current)){var n=p.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");t=t.replace(n,p.current)}p.current=null,h(t)},onInputPaste:function(e){var t=e.clipboardData.getData("text");p.current=t},onInputCompositionStart:function(){o.current=!0},onInputCompositionEnd:function(e){o.current=!1,"combobox"!==r&&h(e.target.value)}},y="multiple"===r||"tags"===r?t.createElement(eS,Ke({},e,f)):t.createElement(tS,Ke({},e,f));return t.createElement("div",{ref:d,className:"".concat(l,"-selector"),onClick:function(e){e.target!==g.current&&(void 0!==document.body.style.msTouchAction?setTimeout((function(){g.current.focus()})):g.current.focus())},onMouseDown:function(e){var t=m();e.target===g.current||t||"combobox"===r||e.preventDefault(),("combobox"===r||I&&t)&&a||(a&&C("",!0,!1),u())}},y)},oS=t.forwardRef(gS);oS.displayName="Selector";var lS=oS;var aS=t.createContext(null);var rS=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","showArrow","inputIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],IS=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"];function iS(e){return"tags"===e||"multiple"===e}var CS=t.forwardRef((function(e,n){var g,o,l=e.id,a=e.prefixCls,r=e.className,i=e.showSearch,C=e.tagRender,c=e.direction,u=e.omitDomProps,s=e.displayValues,d=e.onDisplayValuesChange,A=e.emptyOptions,b=e.notFoundContent,p=void 0===b?"Not Found":b,h=e.onClear,f=e.mode,y=e.disabled,v=e.loading,G=e.getInputElement,B=e.getRawInputElement,S=e.open,V=e.defaultOpen,W=e.onDropdownVisibleChange,R=e.activeValue,k=e.onActiveValueChange,X=e.activeDescendantId,J=e.searchValue,Y=e.onSearch,w=e.onSearchSplit,H=e.tokenSeparators,N=e.allowClear,K=e.showArrow,F=e.inputIcon,x=e.clearIcon,E=e.OptionList,M=e.animation,z=e.transitionName,L=e.dropdownStyle,U=e.dropdownClassName,Q=e.dropdownMatchSelectWidth,T=e.dropdownRender,D=e.dropdownAlign,j=e.placement,P=e.getPopupContainer,O=e.showAction,q=void 0===O?[]:O,_=e.onFocus,$=e.onBlur,ee=e.onKeyUp,te=e.onKeyDown,ne=e.onMouseDown,ge=tt(e,rS),oe=iS(f),le=(void 0!==i?i:oe)||"combobox"===f,ae=$e({},ge);IS.forEach((function(e){delete ae[e]})),null===u||void 0===u||u.forEach((function(e){delete ae[e]}));var re=Z(t.useState(!1),2),Ie=re[0],ie=re[1];t.useEffect((function(){ie(gA())}),[]);var Ce=t.useRef(null),ce=t.useRef(null),ue=t.useRef(null),se=t.useRef(null),de=t.useRef(null),Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=Z(t.useState(!1),2),g=n[0],o=n[1],l=t.useRef(null),a=function(){window.clearTimeout(l.current)};return t.useEffect((function(){return a}),[]),[g,function(t,n){a(),l.current=window.setTimeout((function(){o(t),n&&n()}),e)},a]}(),me=Z(Ae,3),be=me[0],pe=me[1],he=me[2];t.useImperativeHandle(n,(function(){var e,t;return{focus:null===(e=se.current)||void 0===e?void 0:e.focus,blur:null===(t=se.current)||void 0===t?void 0:t.blur,scrollTo:function(e){var t;return null===(t=de.current)||void 0===t?void 0:t.scrollTo(e)}}}));var fe=t.useMemo((function(){var e;if("combobox"!==f)return J;var t=null===(e=s[0])||void 0===e?void 0:e.value;return"string"===typeof t||"number"===typeof t?String(t):""}),[J,f,s]),ye="combobox"===f&&"function"===typeof G&&G()||null,Ze="function"===typeof B&&B(),ve=ss(ce,null===Ze||void 0===Ze||null===(g=Ze.props)||void 0===g?void 0:g.ref),Ge=Z(rs(void 0,{defaultValue:V,value:S}),2),Be=Ge[0],Se=Ge[1],Ve=Be,We=!p&&A;(y||We&&Ve&&"combobox"===f)&&(Ve=!1);var Re=!We&&Ve,ke=t.useCallback((function(e){var t=void 0!==e?e:!Ve;Ve===t||y||(Se(t),null===W||void 0===W||W(t))}),[y,Ve,Se,W]),Xe=t.useMemo((function(){return(H||[]).some((function(e){return["\n","\r\n"].includes(e)}))}),[H]),Je=function(e,t,n){var g=!0,o=e;null===k||void 0===k||k(null);var l=n?null:function(e,t){if(!t||!t.length)return null;var n=!1,g=function e(t,g){var o=If(g),l=o[0],a=o.slice(1);if(!l)return[t];var r=t.split(l);return n=n||r.length>1,r.reduce((function(t,n){return[].concat(I(t),I(e(n,a)))}),[]).filter((function(e){return e}))}(e,t);return n?g:null}(e,H);return"combobox"!==f&&l&&(o="",null===w||void 0===w||w(l),ke(!1),g=!1),Y&&fe!==o&&Y(o,{source:t?"typing":"effect"}),g};t.useEffect((function(){Ve||oe||"combobox"===f||Je("",!1,!1)}),[Ve]),t.useEffect((function(){Be&&y&&Se(!1),y&&pe(!1)}),[y]);var Ye=Z(nS(),2),we=Ye[0],He=Ye[1],Fe=t.useRef(!1),Ee=[];t.useEffect((function(){return function(){Ee.forEach((function(e){return clearTimeout(e)})),Ee.splice(0,Ee.length)}}),[]);var Me,ze=Z(t.useState(null),2),Le=ze[0],Ue=ze[1],Qe=Z(t.useState({}),2)[1];os((function(){if(Re){var e,t=Math.ceil(null===(e=Ce.current)||void 0===e?void 0:e.offsetWidth);Le===t||Number.isNaN(t)||Ue(t)}}),[Re]),Ze&&(Me=function(e){ke(e)}),function(e,n,g,o){var l=t.useRef(null);l.current={open:n,triggerOpen:g,customizedTrigger:o},t.useEffect((function(){function t(t){var n;if(!(null===(n=l.current)||void 0===n?void 0:n.customizedTrigger)){var g=t.target;g.shadowRoot&&t.composed&&(g=t.composedPath()[0]||g),l.current.open&&e().filter((function(e){return e})).every((function(e){return!e.contains(g)&&e!==g}))&&l.current.triggerOpen(!1)}}return window.addEventListener("mousedown",t),function(){return window.removeEventListener("mousedown",t)}}),[])}((function(){var e;return[Ce.current,null===(e=ue.current)||void 0===e?void 0:e.getPopupElement()]}),Re,ke,!!Ze);var Te,De,je=t.useMemo((function(){return $e($e({},e),{},{notFoundContent:p,open:Ve,triggerOpen:Re,id:l,showSearch:le,multiple:oe,toggleOpen:ke})}),[e,p,Re,Ve,l,le,oe,ke]),Pe=void 0!==K?K:v||!oe&&"combobox"!==f;Pe&&(Te=t.createElement(UB,{className:xe()("".concat(a,"-arrow"),Ne({},"".concat(a,"-arrow-loading"),v)),customizeIcon:F,customizeIconProps:{loading:v,searchValue:fe,open:Ve,focused:be,showSearch:le}}));y||!N||!s.length&&!fe||"combobox"===f&&""===fe||(De=t.createElement(UB,{className:"".concat(a,"-clear"),onMouseDown:function(){null===h||void 0===h||h(),d([],{type:"clear",values:s}),Je("",!1,!1)},customizeIcon:x},"\xd7"));var Oe,qe=t.createElement(E,{ref:de}),_e=xe()(a,r,(Ne(o={},"".concat(a,"-focused"),be),Ne(o,"".concat(a,"-multiple"),oe),Ne(o,"".concat(a,"-single"),!oe),Ne(o,"".concat(a,"-allow-clear"),N),Ne(o,"".concat(a,"-show-arrow"),Pe),Ne(o,"".concat(a,"-disabled"),y),Ne(o,"".concat(a,"-loading"),v),Ne(o,"".concat(a,"-open"),Ve),Ne(o,"".concat(a,"-customize-input"),ye),Ne(o,"".concat(a,"-show-search"),le),o)),et=t.createElement(LB,{ref:ue,disabled:y,prefixCls:a,visible:Re,popupElement:qe,containerWidth:Le,animation:M,transitionName:z,dropdownStyle:L,dropdownClassName:U,direction:c,dropdownMatchSelectWidth:Q,dropdownRender:T,dropdownAlign:D,placement:j,getPopupContainer:P,empty:A,getTriggerDOMNode:function(){return ce.current},onPopupVisibleChange:Me,onPopupMouseEnter:function(){Qe({})}},Ze?t.cloneElement(Ze,{ref:ve}):t.createElement(lS,Ke({},e,{domRef:ce,prefixCls:a,inputElement:ye,ref:se,id:l,showSearch:le,mode:f,activeDescendantId:X,tagRender:C,values:s,open:Ve,onToggleOpen:ke,activeValue:R,searchValue:fe,onSearch:Je,onSearchSubmit:function(e){e&&e.trim()&&Y(e,{source:"submit"})},onRemove:function(e){var t=s.filter((function(t){return t!==e}));d(t,{type:"remove",values:[e]})},tokenWithEnter:Xe})));return Oe=Ze?et:t.createElement("div",Ke({className:_e},ae,{ref:Ce,onMouseDown:function(e){var t,n=e.target,g=null===(t=ue.current)||void 0===t?void 0:t.getPopupElement();if(g&&g.contains(n)){var o=setTimeout((function(){var e,t=Ee.indexOf(o);-1!==t&&Ee.splice(t,1),he(),Ie||g.contains(document.activeElement)||null===(e=se.current)||void 0===e||e.focus()}));Ee.push(o)}for(var l=arguments.length,a=new Array(l>1?l-1:0),r=1;r<l;r++)a[r-1]=arguments[r];null===ne||void 0===ne||ne.apply(void 0,[e].concat(a))},onKeyDown:function(e){var t,n=we(),g=e.which;if(g===hd.ENTER&&("combobox"!==f&&e.preventDefault(),Ve||ke(!0)),He(!!fe),g===hd.BACKSPACE&&!n&&oe&&!fe&&s.length){for(var o=I(s),l=null,a=o.length-1;a>=0;a-=1){var r=o[a];if(!r.disabled){o.splice(a,1),l=r;break}}l&&d(o,{type:"remove",values:[l]})}for(var i=arguments.length,C=new Array(i>1?i-1:0),c=1;c<i;c++)C[c-1]=arguments[c];Ve&&de.current&&(t=de.current).onKeyDown.apply(t,[e].concat(C)),null===te||void 0===te||te.apply(void 0,[e].concat(C))},onKeyUp:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),g=1;g<t;g++)n[g-1]=arguments[g];var o;Ve&&de.current&&(o=de.current).onKeyUp.apply(o,[e].concat(n)),null===ee||void 0===ee||ee.apply(void 0,[e].concat(n))},onFocus:function(){pe(!0),y||(_&&!Fe.current&&_.apply(void 0,arguments),q.includes("focus")&&ke(!0)),Fe.current=!0},onBlur:function(){pe(!1,(function(){Fe.current=!1,ke(!1)})),y||(fe&&("tags"===f?Y(fe,{source:"submit"}):"multiple"===f&&Y("",{source:"blur"})),$&&$.apply(void 0,arguments))}}),be&&!Ve&&t.createElement("span",{style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(s.map((function(e){var t=e.label,n=e.value;return["number","string"].includes(m(t))?t:n})).join(", "))),et,Te,De),t.createElement(aS.Provider,{value:je},Oe)}));var cS=CS;function uS(e,t){return jB(e).join("").toUpperCase().includes(t)}var sS=0,dS=Kt();function AS(e){var n=Z(t.useState(),2),g=n[0],o=n[1];return t.useEffect((function(){o("rc_select_".concat(function(){var e;return dS?(e=sS,sS+=1):e="TEST_OR_SSR",e}()))}),[]),e||g}var mS=["children","value"],bS=["children"];function pS(e){var t=e.key,n=e.props,g=n.children,o=n.value;return $e({key:t,value:void 0!==o?o:t,children:g},tt(n,mS))}function hS(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return is(e).map((function(e,g){if(!t.isValidElement(e)||!e.type)return null;var o=e.type.isSelectOptGroup,l=e.key,a=e.props,r=a.children,I=tt(a,bS);return n||!o?pS(e):$e($e({key:"__RC_SELECT_GRP__".concat(null===l?g:l,"__"),label:l},I),{},{options:hS(r)})})).filter((function(e){return e}))}function fS(e,n,g,o,l){return t.useMemo((function(){var t=e;!e&&(t=hS(n));var a=new Map,r=new Map,I=function(e,t,n){n&&"string"===typeof n&&e.set(t[n],t)};return function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=0;i<t.length;i+=1){var C=t[i];!C[g.options]||n?(a.set(C[g.value],C),I(r,C,g.label),I(r,C,o),I(r,C,l)):e(C[g.options],!0)}}(t),{options:t,valueOptions:a,labelOptions:r}}),[e,n,g,o,l])}function yS(e){var n=t.useRef();n.current=e;var g=t.useCallback((function(){return n.current.apply(n,arguments)}),[]);return g}var ZS=function(){return null};ZS.isSelectOptGroup=!0;var vS=ZS,GS=function(){return null};GS.isSelectOption=!0;var BS=GS,SS=t.forwardRef((function(e,n){var g=e.height,o=e.offset,l=e.children,a=e.prefixCls,r=e.onInnerResize,I={},i={display:"flex",flexDirection:"column"};return void 0!==o&&(I={height:g,position:"relative",overflow:"hidden"},i=$e($e({},i),{},{transform:"translateY(".concat(o,"px)"),position:"absolute",left:0,right:0,top:0})),t.createElement("div",{style:I},t.createElement(Ts,{onResize:function(e){e.offsetHeight&&r&&r()}},t.createElement("div",{style:i,className:xe()(Ne({},"".concat(a,"-holder-inner"),a)),ref:n},l)))}));SS.displayName="Filler";var VS=SS;function WS(e){return"touches"in e?e.touches[0].pageY:e.pageY}var RS=function(e){s(g,e);var n=h(g);function g(){var e;i(this,g);for(var o=arguments.length,l=new Array(o),a=0;a<o;a++)l[a]=arguments[a];return(e=n.call.apply(n,[this].concat(l))).moveRaf=null,e.scrollbarRef=t.createRef(),e.thumbRef=t.createRef(),e.visibleTimeout=null,e.state={dragging:!1,pageY:null,startTop:null,visible:!1},e.delayHidden=function(){clearTimeout(e.visibleTimeout),e.setState({visible:!0}),e.visibleTimeout=setTimeout((function(){e.setState({visible:!1})}),2e3)},e.onScrollbarTouchStart=function(e){e.preventDefault()},e.onContainerMouseDown=function(e){e.stopPropagation(),e.preventDefault()},e.patchEvents=function(){window.addEventListener("mousemove",e.onMouseMove),window.addEventListener("mouseup",e.onMouseUp),e.thumbRef.current.addEventListener("touchmove",e.onMouseMove),e.thumbRef.current.addEventListener("touchend",e.onMouseUp)},e.removeEvents=function(){var t;window.removeEventListener("mousemove",e.onMouseMove),window.removeEventListener("mouseup",e.onMouseUp),null===(t=e.scrollbarRef.current)||void 0===t||t.removeEventListener("touchstart",e.onScrollbarTouchStart),e.thumbRef.current&&(e.thumbRef.current.removeEventListener("touchstart",e.onMouseDown),e.thumbRef.current.removeEventListener("touchmove",e.onMouseMove),e.thumbRef.current.removeEventListener("touchend",e.onMouseUp)),gd.cancel(e.moveRaf)},e.onMouseDown=function(t){var n=e.props.onStartMove;e.setState({dragging:!0,pageY:WS(t),startTop:e.getTop()}),n(),e.patchEvents(),t.stopPropagation(),t.preventDefault()},e.onMouseMove=function(t){var n=e.state,g=n.dragging,o=n.pageY,l=n.startTop,a=e.props.onScroll;if(gd.cancel(e.moveRaf),g){var r=l+(WS(t)-o),I=e.getEnableScrollRange(),i=e.getEnableHeightRange(),C=i?r/i:0,c=Math.ceil(C*I);e.moveRaf=gd((function(){a(c)}))}},e.onMouseUp=function(){var t=e.props.onStopMove;e.setState({dragging:!1}),t(),e.removeEvents()},e.getSpinHeight=function(){var t=e.props,n=t.height,g=n/t.count*10;return g=Math.max(g,20),g=Math.min(g,n/2),Math.floor(g)},e.getEnableScrollRange=function(){var t=e.props;return t.scrollHeight-t.height||0},e.getEnableHeightRange=function(){return e.props.height-e.getSpinHeight()||0},e.getTop=function(){var t=e.props.scrollTop,n=e.getEnableScrollRange(),g=e.getEnableHeightRange();return 0===t||0===n?0:t/n*g},e.showScroll=function(){var t=e.props,n=t.height;return t.scrollHeight>n},e}return c(g,[{key:"componentDidMount",value:function(){this.scrollbarRef.current.addEventListener("touchstart",this.onScrollbarTouchStart),this.thumbRef.current.addEventListener("touchstart",this.onMouseDown)}},{key:"componentDidUpdate",value:function(e){e.scrollTop!==this.props.scrollTop&&this.delayHidden()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)}},{key:"render",value:function(){var e=this.state,n=e.dragging,g=e.visible,o=this.props.prefixCls,l=this.getSpinHeight(),a=this.getTop(),r=this.showScroll(),I=r&&g;return t.createElement("div",{ref:this.scrollbarRef,className:xe()("".concat(o,"-scrollbar"),Ne({},"".concat(o,"-scrollbar-show"),r)),style:{width:8,top:0,bottom:0,right:0,position:"absolute",display:I?null:"none"},onMouseDown:this.onContainerMouseDown,onMouseMove:this.delayHidden},t.createElement("div",{ref:this.thumbRef,className:xe()("".concat(o,"-scrollbar-thumb"),Ne({},"".concat(o,"-scrollbar-thumb-moving"),n)),style:{width:"100%",height:l,top:a,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"},onMouseDown:this.onMouseDown}))}}]),g}(t.Component);function kS(e){var n=e.children,g=e.setRef,o=t.useCallback((function(e){g(e)}),[]);return t.cloneElement(n,{ref:o})}var XS=function(){function e(){i(this,e),this.maps=void 0,this.maps=Object.create(null)}return c(e,[{key:"set",value:function(e,t){this.maps[e]=t}},{key:"get",value:function(e){return this.maps[e]}}]),e}(),JS=XS;function YS(e,n,g){var o=Z(t.useState(e),2),l=o[0],a=o[1],r=Z(t.useState(null),2),I=r[0],i=r[1];return t.useEffect((function(){var t=function(e,t,n){var g,o,l=e.length,a=t.length;if(0===l&&0===a)return null;l<a?(g=e,o=t):(g=t,o=e);var r={__EMPTY_ITEM__:!0};function I(e){return void 0!==e?n(e):r}for(var i=null,C=1!==Math.abs(l-a),c=0;c<o.length;c+=1){var u=I(g[c]);if(u!==I(o[c])){i=c,C=C||u!==I(o[c+1]);break}}return null===i?null:{index:i,multiple:C}}(l||[],e||[],n);void 0!==(null===t||void 0===t?void 0:t.index)&&(null===g||void 0===g||g(t.index),i(e[t.index])),a(e)}),[e]),[I]}var wS="object"===("undefined"===typeof navigator?"undefined":m(navigator))&&/Firefox/i.test(navigator.userAgent),HS=function(e,n){var g=(0,t.useRef)(!1),o=(0,t.useRef)(null);function l(){clearTimeout(o.current),g.current=!0,o.current=setTimeout((function(){g.current=!1}),50)}var a=(0,t.useRef)({top:e,bottom:n});return a.current.top=e,a.current.bottom=n,function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e<0&&a.current.top||e>0&&a.current.bottom;return t&&n?(clearTimeout(o.current),g.current=!1):n&&!g.current||l(),!g.current&&n}};var NS=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","component","onScroll","onVisibleChange"],KS=[],FS={overflowY:"auto",overflowAnchor:"none"};function xS(e,n){var g=e.prefixCls,o=void 0===g?"rc-virtual-list":g,l=e.className,a=e.height,r=e.itemHeight,I=e.fullHeight,i=void 0===I||I,C=e.style,c=e.data,u=e.children,s=e.itemKey,d=e.virtual,A=e.component,b=void 0===A?"div":A,p=e.onScroll,h=e.onVisibleChange,f=tt(e,NS),y=!(!1===d||!a||!r),v=y&&c&&r*c.length>a,G=Z((0,t.useState)(0),2),B=G[0],S=G[1],V=Z((0,t.useState)(!1),2),W=V[0],R=V[1],k=xe()(o,l),X=c||KS,J=(0,t.useRef)(),Y=(0,t.useRef)(),w=(0,t.useRef)(),H=t.useCallback((function(e){return"function"===typeof s?s(e):null===e||void 0===e?void 0:e[s]}),[s]),N={getKey:H};function K(e){S((function(t){var n=function(e){var t=e;Number.isNaN($.current)||(t=Math.min(t,$.current));return t=Math.max(t,0)}("function"===typeof e?e(t):e);return J.current.scrollTop=n,n}))}var F=(0,t.useRef)({start:0,end:X.length}),x=(0,t.useRef)(),E=Z(YS(X,H),1)[0];x.current=E;var M=function(e,n,g){var o=Z(t.useState(0),2),l=o[0],a=o[1],r=(0,t.useRef)(new Map),I=(0,t.useRef)(new JS),i=(0,t.useRef)();function C(){gd.cancel(i.current)}function c(){C(),i.current=gd((function(){r.current.forEach((function(e,t){if(e&&e.offsetParent){var n=bs(e),g=n.offsetHeight;I.current.get(t)!==g&&I.current.set(t,n.offsetHeight)}})),a((function(e){return e+1}))}))}return(0,t.useEffect)((function(){return C}),[]),[function(t,o){var l=e(t),a=r.current.get(l);o?(r.current.set(l,o),c()):r.current.delete(l),!a!==!o&&(o?null===n||void 0===n||n(t):null===g||void 0===g||g(t))},c,I.current,l]}(H,null,null),z=Z(M,4),L=z[0],U=z[1],Q=z[2],T=z[3],D=t.useMemo((function(){if(!y)return{scrollHeight:void 0,start:0,end:X.length-1,offset:void 0};var e;if(!v)return{scrollHeight:(null===(e=Y.current)||void 0===e?void 0:e.offsetHeight)||0,start:0,end:X.length-1,offset:void 0};for(var t,n,g,o=0,l=X.length,I=0;I<l;I+=1){var i=X[I],C=H(i),c=Q.get(C),u=o+(void 0===c?r:c);u>=B&&void 0===t&&(t=I,n=o),u>B+a&&void 0===g&&(g=I),o=u}return void 0===t&&(t=0,n=0,g=Math.ceil(a/r)),void 0===g&&(g=X.length-1),{scrollHeight:o,start:t,end:g=Math.min(g+1,X.length),offset:n}}),[v,y,B,X,T,a]),j=D.scrollHeight,P=D.start,O=D.end,q=D.offset;F.current.start=P,F.current.end=O;var _=j-a,$=(0,t.useRef)(_);$.current=_;var ee=B<=0,te=B>=_,ne=HS(ee,te);var ge=function(e,n,g,o){var l=(0,t.useRef)(0),a=(0,t.useRef)(null),r=(0,t.useRef)(null),I=(0,t.useRef)(!1),i=HS(n,g);return[function(t){if(e){gd.cancel(a.current);var n=t.deltaY;l.current+=n,r.current=n,i(n)||(wS||t.preventDefault(),a.current=gd((function(){var e=I.current?10:1;o(l.current*e),l.current=0})))}},function(t){e&&(I.current=t.detail===r.current)}]}(y,ee,te,(function(e){K((function(t){return t+e}))})),oe=Z(ge,2),le=oe[0],ae=oe[1];!function(e,n,g){var o,l=(0,t.useRef)(!1),a=(0,t.useRef)(0),r=(0,t.useRef)(null),I=(0,t.useRef)(null),i=function(e){if(l.current){var t=Math.ceil(e.touches[0].pageY),n=a.current-t;a.current=t,g(n)&&e.preventDefault(),clearInterval(I.current),I.current=setInterval((function(){(!g(n*=.9333333333333333,!0)||Math.abs(n)<=.1)&&clearInterval(I.current)}),16)}},C=function(){l.current=!1,o()},c=function(e){o(),1!==e.touches.length||l.current||(l.current=!0,a.current=Math.ceil(e.touches[0].pageY),r.current=e.target,r.current.addEventListener("touchmove",i),r.current.addEventListener("touchend",C))};o=function(){r.current&&(r.current.removeEventListener("touchmove",i),r.current.removeEventListener("touchend",C))},os((function(){return e&&n.current.addEventListener("touchstart",c),function(){var e;null===(e=n.current)||void 0===e||e.removeEventListener("touchstart",c),o(),clearInterval(I.current)}}),[e])}(y,J,(function(e,t){return!ne(e,t)&&(le({preventDefault:function(){},deltaY:e}),!0)})),os((function(){function e(e){y&&e.preventDefault()}return J.current.addEventListener("wheel",le),J.current.addEventListener("DOMMouseScroll",ae),J.current.addEventListener("MozMousePixelScroll",e),function(){J.current&&(J.current.removeEventListener("wheel",le),J.current.removeEventListener("DOMMouseScroll",ae),J.current.removeEventListener("MozMousePixelScroll",e))}}),[y]);var re=function(e,n,g,o,l,a,r,I){var i=t.useRef();return function(t){if(null!==t&&void 0!==t){if(gd.cancel(i.current),"number"===typeof t)r(t);else if(t&&"object"===m(t)){var C,c=t.align;C="index"in t?t.index:n.findIndex((function(e){return l(e)===t.key}));var u=t.offset,s=void 0===u?0:u;!function t(I,u){if(!(I<0)&&e.current){var d=e.current.clientHeight,A=!1,m=u;if(d){for(var b=u||c,p=0,h=0,f=0,y=Math.min(n.length,C),Z=0;Z<=y;Z+=1){var v=l(n[Z]);h=p;var G=g.get(v);p=f=h+(void 0===G?o:G),Z===C&&void 0===G&&(A=!0)}var B=null;switch(b){case"top":B=h-s;break;case"bottom":B=f-d+s;break;default:var S=e.current.scrollTop;h<S?m="top":f>S+d&&(m="bottom")}null!==B&&B!==e.current.scrollTop&&r(B)}i.current=gd((function(){A&&a(),t(I-1,m)}))}}(3)}}else I()}}(J,X,Q,r,H,U,K,(function(){var e;null===(e=w.current)||void 0===e||e.delayHidden()}));t.useImperativeHandle(n,(function(){return{scrollTo:re}})),os((function(){if(h){var e=X.slice(P,O+1);h(e,X)}}),[P,O,X]);var Ie=function(e,n,g,o,l,a){var r=a.getKey;return e.slice(n,g+1).map((function(e,g){var a=l(e,n+g,{}),I=r(e);return t.createElement(kS,{key:I,setRef:function(t){return o(e,t)}},a)}))}(X,P,O,L,u,N),ie=null;return a&&(ie=$e(Ne({},i?"height":"maxHeight",a),FS),y&&(ie.overflowY="hidden",W&&(ie.pointerEvents="none"))),t.createElement("div",Ke({style:$e($e({},C),{},{position:"relative"}),className:k},f),t.createElement(b,{className:"".concat(o,"-holder"),style:ie,ref:J,onScroll:function(e){var t=e.currentTarget.scrollTop;t!==B&&K(t),null===p||void 0===p||p(e)}},t.createElement(VS,{prefixCls:o,height:j,offset:q,onInnerResize:U,ref:Y},Ie)),y&&t.createElement(RS,{ref:w,prefixCls:o,scrollTop:B,height:a,scrollHeight:j,count:X.length,onScroll:function(e){K(e)},onStartMove:function(){R(!0)},onStopMove:function(){R(!1)}}))}var ES=t.forwardRef(xS);ES.displayName="List";var MS=ES;var zS=t.createContext(null),LS=["disabled","title","children","style","className"];function US(e){return"string"===typeof e||"number"===typeof e}var QS=function(e,n){var g=t.useContext(aS),o=g.prefixCls,l=g.id,a=g.open,r=g.multiple,i=g.mode,C=g.searchValue,c=g.toggleOpen,u=g.notFoundContent,s=g.onPopupScroll,d=t.useContext(zS),A=d.flattenOptions,m=d.onActiveValue,b=d.defaultActiveFirstOption,p=d.onSelect,h=d.menuItemSelectedIcon,f=d.rawValues,y=d.fieldNames,v=d.virtual,G=d.listHeight,B=d.listItemHeight,S="".concat(o,"-item"),V=Cs((function(){return A}),[a,A],(function(e,t){return t[0]&&e[1]!==t[1]})),W=t.useRef(null),R=function(e){e.preventDefault()},k=function(e){W.current&&W.current.scrollTo("number"===typeof e?{index:e}:e)},X=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=V.length,g=0;g<n;g+=1){var o=(e+g*t+n)%n,l=V[o],a=l.group,r=l.data;if(!a&&!r.disabled)return o}return-1},J=Z(t.useState((function(){return X(0)})),2),Y=J[0],w=J[1],H=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];w(e);var n={source:t?"keyboard":"mouse"},g=V[e];g?m(g.value,e,n):m(null,-1,n)};(0,t.useEffect)((function(){H(!1!==b?X(0):-1)}),[V.length,C]);var N=t.useCallback((function(e){return f.has(e)&&"combobox"!==i}),[i,I(f).toString()]);(0,t.useEffect)((function(){var e,t=setTimeout((function(){if(!r&&a&&1===f.size){var e=Array.from(f)[0],t=V.findIndex((function(t){return t.data.value===e}));-1!==t&&(H(t),k(t))}}));a&&(null===(e=W.current)||void 0===e||e.scrollTo(void 0));return function(){return clearTimeout(t)}}),[a,C]);var K=function(e){void 0!==e&&p(e,{selected:!f.has(e)}),r||c(!1)};if(t.useImperativeHandle(n,(function(){return{onKeyDown:function(e){var t=e.which,n=e.ctrlKey;switch(t){case hd.N:case hd.P:case hd.UP:case hd.DOWN:var g=0;if(t===hd.UP?g=-1:t===hd.DOWN?g=1:/(mac\sos|macintosh)/i.test(navigator.appVersion)&&n&&(t===hd.N?g=1:t===hd.P&&(g=-1)),0!==g){var o=X(Y+g,g);k(o),H(o,!0)}break;case hd.ENTER:var l=V[Y];l&&!l.data.disabled?K(l.value):K(void 0),a&&e.preventDefault();break;case hd.ESC:c(!1),a&&e.stopPropagation()}},onKeyUp:function(){},scrollTo:function(e){k(e)}}})),0===V.length)return t.createElement("div",{role:"listbox",id:"".concat(l,"_list"),className:"".concat(S,"-empty"),onMouseDown:R},u);var F=Object.keys(y).map((function(e){return y[e]})),x=function(e){return e.label},E=function(e){var n=V[e];if(!n)return null;var g=n.data||{},o=g.value,a=n.group,r=Fv(g,!0),I=x(n);return n?t.createElement("div",Ke({"aria-label":"string"!==typeof I||a?null:I},r,{key:e,role:a?"presentation":"option",id:"".concat(l,"_list_").concat(e),"aria-selected":N(o)}),o):null};return t.createElement(t.Fragment,null,t.createElement("div",{role:"listbox",id:"".concat(l,"_list"),style:{height:0,width:0,overflow:"hidden"}},E(Y-1),E(Y),E(Y+1)),t.createElement(MS,{itemKey:"key",ref:W,data:V,height:G,itemHeight:B,fullHeight:!1,onMouseDown:R,onScroll:s,virtual:v},(function(e,n){var g,o=e.group,l=e.groupOption,a=e.data,r=e.label,I=e.value,i=a.key;if(o){var C,c=null!==(C=a.title)&&void 0!==C?C:US(r)?r.toString():void 0;return t.createElement("div",{className:xe()(S,"".concat(S,"-group")),title:c},void 0!==r?r:i)}var u=a.disabled,s=a.title,d=(a.children,a.style),A=a.className,m=hn(tt(a,LS),F),b=N(I),p="".concat(S,"-option"),f=xe()(S,p,A,(Ne(g={},"".concat(p,"-grouped"),l),Ne(g,"".concat(p,"-active"),Y===n&&!u),Ne(g,"".concat(p,"-disabled"),u),Ne(g,"".concat(p,"-selected"),b),g)),y=x(e),Z=!h||"function"===typeof h||b,v="number"===typeof y?y:y||I,G=US(v)?v.toString():void 0;return void 0!==s&&(G=s),t.createElement("div",Ke({},Fv(m),{"aria-selected":b,className:f,title:G,onMouseMove:function(){Y===n||u||H(n)},onClick:function(){u||K(I)},style:d}),t.createElement("div",{className:"".concat(p,"-content")},v),t.isValidElement(h)||b,Z&&t.createElement(UB,{className:"".concat(S,"-option-state"),customizeIcon:h,customizeIconProps:{isSelected:b}},b?"\u2713":null))})))},TS=t.forwardRef(QS);TS.displayName="OptionList";var DS=TS;var jS=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","listHeight","listItemHeight","value","defaultValue","labelInValue","onChange"],PS=["inputValue"];var OS=t.forwardRef((function(e,n){var g=e.id,o=e.mode,l=e.prefixCls,a=void 0===l?"rc-select":l,r=e.backfill,i=e.fieldNames,C=e.inputValue,c=e.searchValue,u=e.onSearch,s=e.autoClearSearchValue,d=void 0===s||s,A=e.onSelect,b=e.onDeselect,p=e.dropdownMatchSelectWidth,h=void 0===p||p,f=e.filterOption,y=e.filterSort,v=e.optionFilterProp,G=e.optionLabelProp,B=e.options,S=e.children,V=e.defaultActiveFirstOption,W=e.menuItemSelectedIcon,R=e.virtual,k=e.listHeight,X=void 0===k?200:k,J=e.listItemHeight,Y=void 0===J?20:J,w=e.value,H=e.defaultValue,N=e.labelInValue,K=e.onChange,F=tt(e,jS),x=AS(g),E=iS(o),M=!(B||!S),z=t.useMemo((function(){return(void 0!==f||"combobox"!==o)&&f}),[f,o]),L=t.useMemo((function(){return FB(i,M)}),[JSON.stringify(i),M]),U=Z(rs("",{value:void 0!==c?c:C,postState:function(e){return e||""}}),2),Q=U[0],T=U[1],D=fS(B,S,L,v,G),j=D.valueOptions,P=D.labelOptions,O=D.options,q=t.useCallback((function(e){return jB(e).map((function(e){var t,n,g,o,l,a;(function(e){return!e||"object"!==m(e)})(e)?t=e:(g=e.key,n=e.label,t=null!==(a=e.value)&&void 0!==a?a:g);var r,I=j.get(t);I&&(void 0===n&&(n=null===I||void 0===I?void 0:I[G||L.label]),void 0===g&&(g=null!==(r=null===I||void 0===I?void 0:I.key)&&void 0!==r?r:t),o=null===I||void 0===I?void 0:I.disabled,l=null===I||void 0===I?void 0:I.title);return{label:n,value:t,key:g,disabled:o,title:l}}))}),[L,G,j]),_=Z(rs(H,{value:w}),2),$=_[0],ee=_[1],te=function(e,n){var g=t.useRef({values:new Map,options:new Map});return[t.useMemo((function(){var t=g.current,o=t.values,l=t.options,a=e.map((function(e){var t;return void 0===e.label?$e($e({},e),{},{label:null===(t=o.get(e.value))||void 0===t?void 0:t.label}):e})),r=new Map,I=new Map;return a.forEach((function(e){r.set(e.value,e),I.set(e.value,n.get(e.value)||l.get(e.value))})),g.current.values=r,g.current.options=I,a}),[e,n]),t.useCallback((function(e){return n.get(e)||g.current.options.get(e)}),[n])]}(t.useMemo((function(){var e,t=q($);return"combobox"!==o||(null===(e=t[0])||void 0===e?void 0:e.value)?t:[]}),[$,q,o]),j),ne=Z(te,2),ge=ne[0],oe=ne[1],le=t.useMemo((function(){if(!o&&1===ge.length){var e=ge[0];if(null===e.value&&(null===e.label||void 0===e.label))return[]}return ge.map((function(e){var t;return $e($e({},e),{},{label:null!==(t=e.label)&&void 0!==t?t:e.value})}))}),[o,ge]),ae=t.useMemo((function(){return new Set(ge.map((function(e){return e.value})))}),[ge]);t.useEffect((function(){if("combobox"===o){var e,t=null===(e=ge[0])||void 0===e?void 0:e.value;T(function(e){return void 0!==e&&null!==e}(t)?String(t):"")}}),[ge]);var re=yS((function(e,t){var n,g=null!==t&&void 0!==t?t:e;return Ne(n={},L.value,e),Ne(n,L.label,g),n})),Ie=t.useMemo((function(){if("tags"!==o)return O;var e=I(O);return I(ge).sort((function(e,t){return e.value<t.value?-1:1})).forEach((function(t){var n=t.value;(function(e){return j.has(e)})(n)||e.push(re(n,t.label))})),e}),[re,O,j,ge,o]),ie=function(e,n,g,o,l){return t.useMemo((function(){if(!g||!1===o)return e;var t=n.options,a=n.label,r=n.value,I=[],i="function"===typeof o,C=g.toUpperCase(),c=i?o:function(e,n){return l?uS(n[l],C):n[t]?uS(n["children"!==a?a:"label"],C):uS(n[r],C)},u=i?function(e){return xB(e)}:function(e){return e};return e.forEach((function(e){if(e[t])if(c(g,u(e)))I.push(e);else{var n=e[t].filter((function(e){return c(g,u(e))}));n.length&&I.push($e($e({},e),{},Ne({},t,n)))}else c(g,u(e))&&I.push(e)})),I}),[e,o,l,g,n])}(Ie,L,Q,z,v),Ce=t.useMemo((function(){return"tags"!==o||!Q||ie.some((function(e){return e[v||"value"]===Q}))?ie:[re(Q)].concat(I(ie))}),[re,v,o,ie,Q]),ce=t.useMemo((function(){return y?I(Ce).sort((function(e,t){return y(e,t)})):Ce}),[Ce,y]),ue=t.useMemo((function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.fieldNames,g=t.childrenAsData,o=[],l=FB(n,!1),a=l.label,r=l.value,I=l.options;function i(e,t){e.forEach((function(e){var n=e[a];if(t||!(I in e)){var l=e[r];o.push({key:KB(e,o.length),groupOption:t,data:e,label:n,value:l})}else{var C=n;void 0===C&&g&&(C=e.label),o.push({key:KB(e,o.length),group:!0,data:e,label:C}),i(e[I],!0)}}))}return i(e,!1),o}(ce,{fieldNames:L,childrenAsData:M})}),[ce,L,M]),se=function(e){var t=q(e);if(ee(t),K&&(t.length!==ge.length||t.some((function(e,t){var n;return(null===(n=ge[t])||void 0===n?void 0:n.value)!==(null===e||void 0===e?void 0:e.value)})))){var n=N?t:t.map((function(e){return e.value})),g=t.map((function(e){return xB(oe(e.value))}));K(E?n:n[0],E?g:g[0])}},de=Z(t.useState(null),2),Ae=de[0],me=de[1],be=Z(t.useState(0),2),pe=be[0],he=be[1],fe=void 0!==V?V:"combobox"!==o,ye=t.useCallback((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},g=n.source,l=void 0===g?"keyboard":g;he(t),r&&"combobox"===o&&null!==e&&"keyboard"===l&&me(String(e))}),[r,o]),Ze=function(e,t){var n=function(){var t,n=oe(e);return[N?{label:null===n||void 0===n?void 0:n[L.label],value:e,key:null!==(t=null===n||void 0===n?void 0:n.key)&&void 0!==t?t:e}:e,xB(n)]};if(t&&A){var g=Z(n(),2),o=g[0],l=g[1];A(o,l)}else if(!t&&b){var a=Z(n(),2),r=a[0],I=a[1];b(r,I)}},ve=yS((function(e,t){var n,g=!E||t.selected;n=g?E?[].concat(I(ge),[e]):[e]:ge.filter((function(t){return t.value!==e})),se(n),Ze(e,g),"combobox"===o?me(""):iS&&!d||(T(""),me(""))})),Ge=t.useMemo((function(){var e=!1!==R&&!1!==h;return $e($e({},D),{},{flattenOptions:ue,onActiveValue:ye,defaultActiveFirstOption:fe,onSelect:ve,menuItemSelectedIcon:W,rawValues:ae,fieldNames:L,virtual:e,listHeight:X,listItemHeight:Y,childrenAsData:M})}),[D,ue,ye,fe,ve,W,ae,L,R,h,X,Y,M]);return t.createElement(zS.Provider,{value:Ge},t.createElement(cS,Ke({},F,{id:x,prefixCls:a,ref:n,omitDomProps:PS,mode:o,displayValues:le,onDisplayValuesChange:function(e,t){se(e),"remove"!==t.type&&"clear"!==t.type||t.values.forEach((function(e){Ze(e.value,!1)}))},searchValue:Q,onSearch:function(e,t){if(T(e),me(null),"submit"!==t.source)"blur"!==t.source&&("combobox"===o&&se(e),null===u||void 0===u||u(e));else{var n=(e||"").trim();if(n){var g=Array.from(new Set([].concat(I(ae),[n])));se(g),Ze(n,!0),T("")}}},onSearchSplit:function(e){var t=e;"tags"!==o&&(t=e.map((function(e){var t=P.get(e);return null===t||void 0===t?void 0:t.value})).filter((function(e){return void 0!==e})));var n=Array.from(new Set([].concat(I(ae),I(t))));se(n),n.forEach((function(e){Ze(e,!0)}))},dropdownMatchSelectWidth:h,OptionList:DS,emptyOptions:!ue.length,activeValue:Ae,activeDescendantId:"".concat(x,"_list_").concat(pe)})))}));var qS=OS;qS.Option=BS,qS.OptGroup=vS;var _S=qS,$S=t.createContext({}),eV=function(e){var n=e.children,g=e.status,o=e.override,l=(0,t.useContext)($S),a=(0,t.useMemo)((function(){var e=Ke({},l);return o&&delete e.isFormItemInput,g&&(delete e.status,delete e.hasFeedback,delete e.feedbackIcon),e}),[g,o,l]);return t.createElement($S.Provider,{value:a},n)};gp("warning","error","");function tV(e,t,n){var g;return xe()((Ne(g={},"".concat(e,"-status-success"),"success"===t),Ne(g,"".concat(e,"-status-warning"),"warning"===t),Ne(g,"".concat(e,"-status-error"),"error"===t),Ne(g,"".concat(e,"-status-validating"),"validating"===t),Ne(g,"".concat(e,"-has-feedback"),n),g))}var nV=function(e,t){return t||e},gV={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},oV=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:gV}))};oV.displayName="CheckOutlined";var lV=t.forwardRef(oV),aV={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},rV=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:aV}))};rV.displayName="DownOutlined";var IV=t.forwardRef(rV),iV={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},CV=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:iV}))};CV.displayName="SearchOutlined";var cV=t.forwardRef(CV);var uV=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},sV="SECRET_COMBOBOX_MODE_DO_NOT_USE",dV=function(e,n){var g,o,l=e.prefixCls,a=e.bordered,r=void 0===a||a,I=e.className,i=e.getPopupContainer,C=e.dropdownClassName,c=e.popupClassName,u=e.listHeight,s=void 0===u?256:u,d=e.placement,A=e.listItemHeight,m=void 0===A?24:A,b=e.size,p=e.disabled,h=e.notFoundContent,f=e.status,y=e.showArrow,Z=uV(e,["prefixCls","bordered","className","getPopupContainer","dropdownClassName","popupClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","showArrow"]),v=t.useContext(Ee),G=v.getPopupContainer,B=v.getPrefixCls,S=v.renderEmpty,V=v.direction,W=v.virtual,R=v.dropdownMatchSelectWidth,k=t.useContext(Py),X=B("select",l),J=B(),Y=$Z(X,V),w=Y.compactSize,H=Y.compactItemClassnames,N=t.useMemo((function(){var e=Z.mode;if("combobox"!==e)return e===sV?"combobox":e}),[Z.mode]),K="multiple"===N||"tags"===N,F=void 0!==y?y:Z.loading||!(K||"combobox"===N),x=(0,t.useContext)($S),E=x.status,M=x.hasFeedback,z=x.isFormItemInput,L=x.feedbackIcon,U=nV(E,f);o=void 0!==h?h:"combobox"===N?null:(S||cB)("Select");var Q=function(e){var n=e.suffixIcon,g=e.clearIcon,o=e.menuItemSelectedIcon,l=e.removeIcon,a=e.loading,r=e.multiple,I=e.hasFeedback,i=e.prefixCls,C=e.showArrow,c=e.feedbackIcon,u=null!==g&&void 0!==g?g:t.createElement($p,null),s=function(e){return t.createElement(t.Fragment,null,!1!==C&&e,I&&c)},d=null;if(void 0!==n)d=s(n);else if(a)d=s(t.createElement(ih,{spin:!0}));else{var A="".concat(i,"-suffix");d=function(e){var n=e.open,g=e.showSearch;return s(n&&g?t.createElement(cV,{className:A}):t.createElement(IV,{className:A}))}}return{clearIcon:u,suffixIcon:d,itemIcon:void 0!==o?o:r?t.createElement(lV,null):null,removeIcon:void 0!==l?l:t.createElement(Tu,null)}}(Ke(Ke({},Z),{multiple:K,hasFeedback:M,feedbackIcon:L,showArrow:F,prefixCls:X})),T=Q.suffixIcon,D=Q.itemIcon,j=Q.removeIcon,P=Q.clearIcon,O=hn(Z,["suffixIcon","itemIcon"]),q=xe()(c||C,Ne({},"".concat(X,"-dropdown-").concat(V),"rtl"===V)),_=w||b||k,$=t.useContext(Ty),ee=null!==p&&void 0!==p?p:$,te=xe()((Ne(g={},"".concat(X,"-lg"),"large"===_),Ne(g,"".concat(X,"-sm"),"small"===_),Ne(g,"".concat(X,"-rtl"),"rtl"===V),Ne(g,"".concat(X,"-borderless"),!r),Ne(g,"".concat(X,"-in-form-item"),z),g),tV(X,U,M),H,I);return t.createElement(_S,Ke({ref:n,virtual:W,dropdownMatchSelectWidth:R},O,{transitionName:ip(J,Ip(d),Z.transitionName),listHeight:s,listItemHeight:m,mode:N,prefixCls:X,placement:void 0!==d?d:"rtl"===V?"bottomRight":"bottomLeft",direction:V,inputIcon:T,menuItemSelectedIcon:D,removeIcon:j,clearIcon:P,notFoundContent:o,className:te,getPopupContainer:i||G,dropdownClassName:q,showArrow:M||y,disabled:ee}))},AV=t.forwardRef(dV);AV.SECRET_COMBOBOX_MODE_DO_NOT_USE=sV,AV.Option=BS,AV.OptGroup=vS;var mV=AV,bV=function(e){return t.createElement(mV,Ke({},e,{size:"small"}))},pV=function(e){return t.createElement(mV,Ke({},e,{size:"middle"}))};bV.Option=mV.Option,pV.Option=mV.Option;var hV=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},fV=function(e){var n=e.prefixCls,g=e.selectPrefixCls,o=e.className,l=e.size,a=e.locale,r=e.selectComponentClass,I=e.responsive,i=e.showSizeChanger,C=hV(e,["prefixCls","selectPrefixCls","className","size","locale","selectComponentClass","responsive","showSizeChanger"]),c=pB(I).xs,u=t.useContext(Ee),s=u.getPrefixCls,d=u.direction,A=u.pagination,m=void 0===A?{}:A,b=s("pagination",n),p=null!==i&&void 0!==i?i:m.showSizeChanger;return t.createElement(cy,{componentName:"Pagination",defaultLocale:ty},(function(e){var n,i=Ke(Ke({},e),a),u="small"===l||!(!c||l||!I),A=s("select",g),m=xe()((Ne(n={},"".concat(b,"-mini"),u),Ne(n,"".concat(b,"-rtl"),"rtl"===d),n),o);return t.createElement(NB,Ke({},function(){var e=t.createElement("span",{className:"".concat(b,"-item-ellipsis")},"\u2022\u2022\u2022"),n=t.createElement("button",{className:"".concat(b,"-item-link"),type:"button",tabIndex:-1},t.createElement(An,null)),g=t.createElement("button",{className:"".concat(b,"-item-link"),type:"button",tabIndex:-1},t.createElement(pn,null)),o=t.createElement("a",{className:"".concat(b,"-item-link")},t.createElement("div",{className:"".concat(b,"-item-container")},t.createElement(ZB,{className:"".concat(b,"-item-link-icon")}),e)),l=t.createElement("a",{className:"".concat(b,"-item-link")},t.createElement("div",{className:"".concat(b,"-item-container")},t.createElement(BB,{className:"".concat(b,"-item-link-icon")}),e));if("rtl"===d){var a=[g,n];n=a[0],g=a[1];var r=[l,o];o=r[0],l=r[1]}return{prevIcon:n,nextIcon:g,jumpPrevIcon:o,jumpNextIcon:l}}(),C,{prefixCls:b,selectPrefixCls:A,className:m,selectComponentClass:r||(u?bV:pV),locale:i,showSizeChanger:p}))}))},yV=fV,ZV=n(8573),vV=n.n(ZV),GV=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},BV=(gp("small","default","large"),null);var SV=function(e){var n=e.spinPrefixCls,g=e.spinning,o=void 0===g||g,l=e.delay,a=e.className,r=e.size,I=void 0===r?"default":r,i=e.tip,C=e.wrapperClassName,c=e.style,u=e.children,s=GV(e,["spinPrefixCls","spinning","delay","className","size","tip","wrapperClassName","style","children"]),d=t.useState((function(){return o&&!function(e,t){return!!e&&!!t&&!isNaN(Number(t))}(o,l)})),A=Z(d,2),m=A[0],b=A[1];t.useEffect((function(){var e=vV()((function(){b(o)}),l);return e(),function(){var t;null===(t=null===e||void 0===e?void 0:e.cancel)||void 0===t||t.call(e)}}),[l,o]);var p=function(g){var o,l=g.direction,r=xe()(n,(Ne(o={},"".concat(n,"-sm"),"small"===I),Ne(o,"".concat(n,"-lg"),"large"===I),Ne(o,"".concat(n,"-spinning"),m),Ne(o,"".concat(n,"-show-text"),!!i),Ne(o,"".concat(n,"-rtl"),"rtl"===l),o),a),d=hn(s,["indicator","prefixCls"]),A=t.createElement("div",Ke({},d,{style:c,className:r,"aria-live":"polite","aria-busy":m}),function(e,n){var g=n.indicator,o="".concat(e,"-dot");return null===g?null:cp(g)?sp(g,{className:xe()(g.props.className,o)}):cp(BV)?sp(BV,{className:xe()(BV.props.className,o)}):t.createElement("span",{className:xe()(o,"".concat(e,"-dot-spin"))},t.createElement("i",{className:"".concat(e,"-dot-item")}),t.createElement("i",{className:"".concat(e,"-dot-item")}),t.createElement("i",{className:"".concat(e,"-dot-item")}),t.createElement("i",{className:"".concat(e,"-dot-item")}))}(n,e),i?t.createElement("div",{className:"".concat(n,"-text")},i):null);if("undefined"!==typeof u){var b=xe()("".concat(n,"-container"),Ne({},"".concat(n,"-blur"),m));return t.createElement("div",Ke({},d,{className:xe()("".concat(n,"-nested-loading"),C)}),m&&t.createElement("div",{key:"loading"},A),t.createElement("div",{className:b,key:"container"},u))}return A};return t.createElement(Me,null,p)},VV=function(e){var n=e.prefixCls,g=(0,t.useContext(Ee).getPrefixCls)("spin",n),o=Ke(Ke({},e),{spinPrefixCls:g});return t.createElement(SV,Ke({},o))};VV.setDefaultIndicator=function(e){BV=e};var WV=VV;function RV(e,t,n,g){var o=n-t;return(e/=g/2)<1?o/2*e*e*e+t:o/2*((e-=2)*e*e+2)+t}function kV(e){return null!==e&&void 0!==e&&e===e.window}function XV(e,t){var n,g;if("undefined"===typeof window)return 0;var o=t?"scrollTop":"scrollLeft",l=0;return kV(e)?l=e[t?"pageYOffset":"pageXOffset"]:e instanceof Document?l=e.documentElement[o]:(e instanceof HTMLElement||e)&&(l=e[o]),e&&!kV(e)&&"number"!==typeof l&&(l=null===(g=(null!==(n=e.ownerDocument)&&void 0!==n?n:e).documentElement)||void 0===g?void 0:g[o]),l}function JV(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getContainer,g=void 0===n?function(){return window}:n,o=t.callback,l=t.duration,a=void 0===l?450:l,r=g(),I=XV(r,!0),i=Date.now(),C=function t(){var n=Date.now()-i,g=RV(n>a?a:n,I,e,a);kV(r)?r.scrollTo(window.pageXOffset,g):r instanceof Document||"HTMLDocument"===r.constructor.name?r.documentElement.scrollTop=g:r.scrollTop=g,n<a?gd(t):"function"===typeof o&&o()};gd(C)}var YV=function(e){return null};var wV=function(e){return null};var HV=function(e){return function(n){var g,o=n.prefixCls,l=n.onExpand,a=n.record,r=n.expanded,I=n.expandable,i="".concat(o,"-row-expand-icon");return t.createElement("button",{type:"button",onClick:function(e){l(a,e),e.stopPropagation()},className:xe()(i,(g={},Ne(g,"".concat(i,"-spaced"),!I),Ne(g,"".concat(i,"-expanded"),I&&r),Ne(g,"".concat(i,"-collapsed"),I&&!r),g)),"aria-label":r?e.collapse:e.expand,"aria-expanded":r})}};function NV(e,t){return"key"in e&&void 0!==e.key&&null!==e.key?e.key:e.dataIndex?Array.isArray(e.dataIndex)?e.dataIndex.join("."):e.dataIndex:t}function KV(e,t){return t?"".concat(t,"-").concat(e):"".concat(e)}function FV(e,t){return"function"===typeof e?e(t):e}var xV={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z"}}]},name:"filter",theme:"filled"},EV=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:xV}))};EV.displayName="FilterFilled";var MV=t.forwardRef(EV),zV=function(e){s(g,e);var n=h(g);function g(e){var t;i(this,g),(t=n.call(this,e)).handleChange=function(e){var n=t.props,g=n.disabled,o=n.onChange;g||("checked"in t.props||t.setState({checked:e.target.checked}),o&&o({target:$e($e({},t.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},t.saveInput=function(e){t.input=e};var o="checked"in e?e.checked:e.defaultChecked;return t.state={checked:o},t}return c(g,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,n=this.props,g=n.prefixCls,o=n.className,l=n.style,a=n.name,r=n.id,I=n.type,i=n.disabled,C=n.readOnly,c=n.tabIndex,u=n.onClick,s=n.onFocus,d=n.onBlur,A=n.onKeyDown,m=n.onKeyPress,b=n.onKeyUp,p=n.autoFocus,h=n.value,f=n.required,y=tt(n,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),Z=Object.keys(y).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=y[t]),e}),{}),v=this.state.checked,G=xe()(g,o,(Ne(e={},"".concat(g,"-checked"),v),Ne(e,"".concat(g,"-disabled"),i),e));return t.createElement("span",{className:G,style:l},t.createElement("input",Ke({name:a,id:r,type:I,required:f,readOnly:C,disabled:i,tabIndex:c,className:"".concat(g,"-input"),checked:!!v,onClick:u,onFocus:s,onBlur:d,onKeyUp:b,onKeyDown:A,onKeyPress:m,onChange:this.handleChange,autoFocus:p,ref:this.saveInput,value:h},Z)),t.createElement("span",{className:"".concat(g,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"checked"in e?$e($e({},t),{},{checked:e.checked}):null}}]),g}(t.Component);zV.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}};var LV=zV,UV=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},QV=t.createContext(null),TV=function(e,n){var g=e.defaultValue,o=e.children,l=e.options,a=void 0===l?[]:l,r=e.prefixCls,i=e.className,C=e.style,c=e.onChange,u=UV(e,["defaultValue","children","options","prefixCls","className","style","onChange"]),s=t.useContext(Ee),d=s.getPrefixCls,A=s.direction,m=Z(t.useState(u.value||g||[]),2),b=m[0],p=m[1],h=Z(t.useState([]),2),f=h[0],y=h[1];t.useEffect((function(){"value"in u&&p(u.value||[])}),[u.value]);var v=function(){return a.map((function(e){return"string"===typeof e||"number"===typeof e?{label:e,value:e}:e}))},G=d("checkbox",r),B="".concat(G,"-group"),S=hn(u,["value","disabled"]);a&&a.length>0&&(o=v().map((function(e){return t.createElement(qV,{prefixCls:G,key:e.value.toString(),disabled:"disabled"in e?e.disabled:u.disabled,value:e.value,checked:b.includes(e.value),onChange:e.onChange,className:"".concat(B,"-item"),style:e.style},e.label)})));var V={toggleOption:function(e){var t=b.indexOf(e.value),n=I(b);-1===t?n.push(e.value):n.splice(t,1),"value"in u||p(n);var g=v();null===c||void 0===c||c(n.filter((function(e){return f.includes(e)})).sort((function(e,t){return g.findIndex((function(t){return t.value===e}))-g.findIndex((function(e){return e.value===t}))})))},value:b,disabled:u.disabled,name:u.name,registerValue:function(e){y((function(t){return[].concat(I(t),[e])}))},cancelValue:function(e){y((function(t){return t.filter((function(t){return t!==e}))}))}},W=xe()(B,Ne({},"".concat(B,"-rtl"),"rtl"===A),i);return t.createElement("div",Ke({className:W,style:C},S,{ref:n}),t.createElement(QV.Provider,{value:V},o))},DV=t.forwardRef(TV),jV=t.memo(DV),PV=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},OV=function(e,n){var g,o,l=e.prefixCls,a=e.className,r=e.children,I=e.indeterminate,i=void 0!==I&&I,C=e.style,c=e.onMouseEnter,u=e.onMouseLeave,s=e.skipGroup,d=void 0!==s&&s,A=e.disabled,m=PV(e,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),b=t.useContext(Ee),p=b.getPrefixCls,h=b.direction,f=t.useContext(QV),y=(0,t.useContext)($S).isFormItemInput,Z=(0,t.useContext)(Ty),v=null!==(o=(null===f||void 0===f?void 0:f.disabled)||A)&&void 0!==o?o:Z,G=t.useRef(m.value);t.useEffect((function(){null===f||void 0===f||f.registerValue(m.value)}),[]),t.useEffect((function(){if(!d)return m.value!==G.current&&(null===f||void 0===f||f.cancelValue(G.current),null===f||void 0===f||f.registerValue(m.value),G.current=m.value),function(){return null===f||void 0===f?void 0:f.cancelValue(m.value)}}),[m.value]);var B=p("checkbox",l),S=Ke({},m);f&&!d&&(S.onChange=function(){m.onChange&&m.onChange.apply(m,arguments),f.toggleOption&&f.toggleOption({label:r,value:m.value})},S.name=f.name,S.checked=f.value.includes(m.value));var V=xe()((Ne(g={},"".concat(B,"-wrapper"),!0),Ne(g,"".concat(B,"-rtl"),"rtl"===h),Ne(g,"".concat(B,"-wrapper-checked"),S.checked),Ne(g,"".concat(B,"-wrapper-disabled"),v),Ne(g,"".concat(B,"-wrapper-in-form-item"),y),g),a),W=xe()(Ne({},"".concat(B,"-indeterminate"),i)),R=i?"mixed":void 0;return t.createElement("label",{className:V,style:C,onMouseEnter:c,onMouseLeave:u},t.createElement(LV,Ke({"aria-checked":R},S,{prefixCls:B,className:W,disabled:v,ref:n})),void 0!==r&&t.createElement("span",null,r))};var qV=t.forwardRef(OV),_V=qV;_V.Group=jV,_V.__ANT_CHECKBOX=!0;var $V=_V,eW={adjustX:1,adjustY:1},tW=[0,0],nW={topLeft:{points:["bl","tl"],overflow:eW,offset:[0,-4],targetOffset:tW},topCenter:{points:["bc","tc"],overflow:eW,offset:[0,-4],targetOffset:tW},topRight:{points:["br","tr"],overflow:eW,offset:[0,-4],targetOffset:tW},bottomLeft:{points:["tl","bl"],overflow:eW,offset:[0,4],targetOffset:tW},bottomCenter:{points:["tc","bc"],overflow:eW,offset:[0,4],targetOffset:tW},bottomRight:{points:["tr","br"],overflow:eW,offset:[0,4],targetOffset:tW}},gW=hd.ESC,oW=hd.TAB;var lW=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function aW(e,n){var g=e.arrow,o=void 0!==g&&g,l=e.prefixCls,a=void 0===l?"rc-dropdown":l,r=e.transitionName,I=e.animation,i=e.align,C=e.placement,c=void 0===C?"bottomLeft":C,u=e.placements,s=void 0===u?nW:u,d=e.getPopupContainer,A=e.showAction,m=e.hideAction,b=e.overlayClassName,p=e.overlayStyle,h=e.visible,f=e.trigger,y=void 0===f?["hover"]:f,v=e.autoFocus,G=tt(e,lW),B=Z(t.useState(),2),S=B[0],V=B[1],W="visible"in e?h:S,R=t.useRef(null);t.useImperativeHandle(n,(function(){return R.current})),function(e){var n=e.visible,g=e.setTriggerVisible,o=e.triggerRef,l=e.onVisibleChange,a=e.autoFocus,r=t.useRef(!1),I=function(){var e,t,a,r;n&&o.current&&(null===(e=o.current)||void 0===e||null===(t=e.triggerRef)||void 0===t||null===(a=t.current)||void 0===a||null===(r=a.focus)||void 0===r||r.call(a),g(!1),"function"===typeof l&&l(!1))},i=function(){var e,t,n,g,l=Wb(null===(e=o.current)||void 0===e||null===(t=e.popupRef)||void 0===t||null===(n=t.current)||void 0===n||null===(g=n.getElement)||void 0===g?void 0:g.call(n))[0];return!!(null===l||void 0===l?void 0:l.focus)&&(l.focus(),r.current=!0,!0)},C=function(e){switch(e.keyCode){case gW:I();break;case oW:var t=!1;r.current||(t=i()),t?e.preventDefault():I()}};t.useEffect((function(){return n?(window.addEventListener("keydown",C),a&&gd(i,3),function(){window.removeEventListener("keydown",C),r.current=!1}):function(){r.current=!1}}),[n])}({visible:W,setTriggerVisible:V,triggerRef:R,onVisibleChange:e.onVisibleChange,autoFocus:v});var k=function(){var n=function(){var t=e.overlay;return"function"===typeof t?t():t}();return t.createElement(t.Fragment,null,o&&t.createElement("div",{className:"".concat(a,"-arrow")}),n)},X=m;return X||-1===y.indexOf("contextMenu")||(X=["click"]),t.createElement(Ab,$e($e({builtinPlacements:s},G),{},{prefixCls:a,ref:R,popupClassName:xe()(b,Ne({},"".concat(a,"-show-arrow"),o)),popupStyle:p,action:y,showAction:A,hideAction:X||[],popupPlacement:c,popupAlign:i,popupTransitionName:r,popupAnimation:I,popupVisible:W,stretch:function(){var t=e.minOverlayWidthMatchTrigger,n=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?t:!n}()?"minWidth":"",popup:"function"===typeof e.overlay?k:k(),onPopupVisibleChange:function(t){var n=e.onVisibleChange;V(t),"function"===typeof n&&n(t)},onPopupClick:function(t){var n=e.onOverlayClick;V(!1),n&&n(t)},getPopupContainer:d}),function(){var n=e.children,g=n.props?n.props:{},o=xe()(g.className,function(){var t=e.openClassName;return void 0!==t?t:"".concat(a,"-open")}());return W&&n?t.cloneElement(n,{className:o}):n}())}var rW=t.forwardRef(aW),IW=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},iW=function(e){var n=t.useContext(Ee),g=n.getPopupContainer,o=n.getPrefixCls,l=n.direction,a=e.prefixCls,r=e.type,I=void 0===r?"default":r,i=e.danger,C=e.disabled,c=e.loading,u=e.onClick,s=e.htmlType,d=e.children,A=e.className,m=e.menu,b=e.arrow,p=e.autoFocus,h=e.overlay,f=e.trigger,y=e.align,v=e.visible,G=e.open,B=e.onVisibleChange,S=e.onOpenChange,V=e.placement,W=e.getPopupContainer,R=e.href,k=e.icon,X=void 0===k?t.createElement(_u,null):k,J=e.title,Y=e.buttonsRender,w=void 0===Y?function(e){return e}:Y,H=e.mouseEnterDelay,N=e.mouseLeaveDelay,K=e.overlayClassName,F=e.overlayStyle,x=e.destroyPopupOnHide,E=IW(e,["prefixCls","type","danger","disabled","loading","onClick","htmlType","children","className","menu","arrow","autoFocus","overlay","trigger","align","visible","open","onVisibleChange","onOpenChange","placement","getPopupContainer","href","icon","title","buttonsRender","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyPopupOnHide"]),M=o("dropdown-button",a),z={menu:m,arrow:b,autoFocus:p,align:y,overlay:h,disabled:C,trigger:C?[]:f,onOpenChange:S||B,getPopupContainer:W||g,mouseEnterDelay:H,mouseLeaveDelay:N,overlayClassName:K,overlayStyle:F,destroyPopupOnHide:x},L=$Z(M,l),U=L.compactSize,Q=L.compactItemClassnames,T=xe()(M,Q,A);"open"in e?z.open=G:"visible"in e&&(z.open=v),z.placement="placement"in e?V:"rtl"===l?"bottomLeft":"bottomRight";var D=Z(w([t.createElement(kv,{type:I,danger:i,disabled:C,loading:c,onClick:u,htmlType:s,href:R,title:J},d),t.createElement(kv,{type:I,danger:i,icon:X})]),2),j=D[0],P=D[1];return t.createElement(Iv.Compact,Ke({className:T,size:U,block:!0},E),j,t.createElement(uW,Ke({},z),P))};iW.__ANT_BUTTON=!0;var CW=iW,cW=(gp("topLeft","topCenter","topRight","bottomLeft","bottomCenter","bottomRight","top","bottom"),function(e){var n=t.useContext(Ee),g=n.getPopupContainer,o=n.getPrefixCls,l=n.direction;var a,r=e.menu,I=e.arrow,i=e.prefixCls,C=e.children,c=e.trigger,u=e.disabled,s=e.dropdownRender,d=e.getPopupContainer,A=e.overlayClassName,b=e.visible,p=e.open,h=e.onVisibleChange,f=e.onOpenChange,y=e.mouseEnterDelay,v=void 0===y?.15:y,G=e.mouseLeaveDelay,B=void 0===G?.1:G,S=o("dropdown",i),V=t.Children.only(C),W=sp(V,{className:xe()("".concat(S,"-trigger"),Ne({},"".concat(S,"-rtl"),"rtl"===l),V.props.className),disabled:u}),R=u?[]:c;R&&R.includes("contextMenu")&&(a=!0);var k=Z(rs(!1,{value:void 0!==p?p:b}),2),X=k[0],J=k[1],Y=ts((function(e){null===h||void 0===h||h(e),null===f||void 0===f||f(e),J(e)})),w=xe()(A,Ne({},"".concat(S,"-rtl"),"rtl"===l)),H=Vp({arrowPointAtCenter:"object"===m(I)&&I.pointAtCenter,autoAdjustOverflow:!0}),N=t.useCallback((function(){J(!1)}),[]);return t.createElement(rW,Ke({alignPoint:a},e,{mouseEnterDelay:v,mouseLeaveDelay:B,visible:X,builtinPlacements:H,arrow:!!I,overlayClassName:w,prefixCls:S,getPopupContainer:d||g,transitionName:function(){var t=o(),n=e.placement,g=void 0===n?"":n,l=e.transitionName;return void 0!==l?l:g.includes("top")?"".concat(t,"-slide-down"):"".concat(t,"-slide-up")}(),trigger:R,overlay:function(){var n,g=e.overlay;return n=(null===r||void 0===r?void 0:r.items)?t.createElement(Dp,Ke({},r)):"function"===typeof g?g():g,s&&(n=s(n)),n=t.Children.only("string"===typeof n?t.createElement("span",null,n):n),t.createElement(zp,{prefixCls:"".concat(S,"-menu"),expandIcon:t.createElement("span",{className:"".concat(S,"-menu-submenu-arrow")},t.createElement(pn,{className:"".concat(S,"-menu-submenu-arrow-icon")})),mode:"vertical",selectable:!1,onClick:N,validator:function(e){e.mode}},n)},placement:function(){var t=e.placement;return t?t.includes("Center")?t.slice(0,t.indexOf("Center")):t:"rtl"===l?"bottomRight":"bottomLeft"}(),onVisibleChange:Y}),W)});cW.Button=CW;var uW=cW,sW=uW;var dW=t.createContext(null),AW=dW.Provider,mW=dW,bW=t.createContext(null),pW=bW.Provider,hW=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},fW=function(e,n){var g,o=t.useContext(mW),l=t.useContext(bW),a=t.useContext(Ee),r=a.getPrefixCls,I=a.direction,i=us(n,t.useRef()),C=(0,t.useContext)($S).isFormItemInput,c=e.prefixCls,u=e.className,s=e.children,d=e.style,A=e.disabled,m=hW(e,["prefixCls","className","children","style","disabled"]),b=r("radio",c),p="button"===((null===o||void 0===o?void 0:o.optionType)||l)?"".concat(b,"-button"):b,h=Ke({},m),f=t.useContext(Ty);h.disabled=A||f,o&&(h.name=o.name,h.onChange=function(t){var n,g;null===(n=e.onChange)||void 0===n||n.call(e,t),null===(g=null===o||void 0===o?void 0:o.onChange)||void 0===g||g.call(o,t)},h.checked=e.value===o.value,h.disabled=h.disabled||o.disabled);var y=xe()("".concat(p,"-wrapper"),(Ne(g={},"".concat(p,"-wrapper-checked"),h.checked),Ne(g,"".concat(p,"-wrapper-disabled"),h.disabled),Ne(g,"".concat(p,"-wrapper-rtl"),"rtl"===I),Ne(g,"".concat(p,"-wrapper-in-form-item"),C),g),u);return t.createElement("label",{className:y,style:d,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},t.createElement(LV,Ke({},h,{type:"radio",prefixCls:p,ref:i})),void 0!==s?t.createElement("span",null,s):null)};var yW=t.forwardRef(fW),ZW=t.forwardRef((function(e,n){var g,o=t.useContext(Ee),l=o.getPrefixCls,a=o.direction,r=t.useContext(Py),I=Z(rs(e.defaultValue,{value:e.value}),2),i=I[0],C=I[1],c=e.prefixCls,u=e.className,s=void 0===u?"":u,d=e.options,A=e.buttonStyle,m=void 0===A?"outline":A,b=e.disabled,p=e.children,h=e.size,f=e.style,y=e.id,v=e.onMouseEnter,G=e.onMouseLeave,B=e.onFocus,S=e.onBlur,V=l("radio",c),W="".concat(V,"-group"),R=p;d&&d.length>0&&(R=d.map((function(e){return"string"===typeof e||"number"===typeof e?t.createElement(yW,{key:e.toString(),prefixCls:V,disabled:b,value:e,checked:i===e},e):t.createElement(yW,{key:"radio-group-value-options-".concat(e.value),prefixCls:V,disabled:e.disabled||b,value:e.value,checked:i===e.value,style:e.style},e.label)})));var k=h||r,X=xe()(W,"".concat(W,"-").concat(m),(Ne(g={},"".concat(W,"-").concat(k),k),Ne(g,"".concat(W,"-rtl"),"rtl"===a),g),s);return t.createElement("div",Ke({},function(e){return Object.keys(e).reduce((function(t,n){return!n.startsWith("data-")&&!n.startsWith("aria-")&&"role"!==n||n.startsWith("data-__")||(t[n]=e[n]),t}),{})}(e),{className:X,style:f,onMouseEnter:v,onMouseLeave:G,onFocus:B,onBlur:S,id:y,ref:n}),t.createElement(AW,{value:{onChange:function(t){var n=i,g=t.target.value;"value"in e||C(g);var o=e.onChange;o&&g!==n&&o(t)},value:i,disabled:e.disabled,name:e.name,optionType:e.optionType}},R))})),vW=t.memo(ZW),GW=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},BW=function(e,n){var g=t.useContext(Ee).getPrefixCls,o=e.prefixCls,l=GW(e,["prefixCls"]),a=g("radio",o);return t.createElement(pW,{value:"button"},t.createElement(yW,Ke({prefixCls:a},l,{type:"radio",ref:n})))},SW=t.forwardRef(BW),VW=yW;VW.Button=SW,VW.Group=vW,VW.__ANT_RADIO=!0;var WW=VW,RW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"},kW=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:RW}))};kW.displayName="HolderOutlined";var XW=t.forwardRef(kW),JW=t.createContext(null),YW=function(e){for(var n=e.prefixCls,g=e.level,o=e.isStart,l=e.isEnd,a="".concat(n,"-indent-unit"),r=[],I=0;I<g;I+=1){var i;r.push(t.createElement("span",{key:I,className:xe()(a,(i={},Ne(i,"".concat(a,"-start"),o[I]),Ne(i,"".concat(a,"-end"),l[I]),i))}))}return t.createElement("span",{"aria-hidden":"true",className:"".concat(n,"-indent")},r)},wW=t.memo(YW),HW=["children"];function NW(e,t){return null!==e&&void 0!==e?e:t}function KW(e){var t=e||{},n=t.title||"title";return{title:n,_title:t._title||[n],key:t.key||"key",children:t.children||"children"}}function FW(e){return function e(t){return is(t).map((function(t){if(!function(e){return e&&e.type&&e.type.isTreeNode}(t))return Nt(!t,"Tree/TreeNode can only accept TreeNode as children."),null;var n=t.key,g=t.props,o=g.children,l=$e({key:n},tt(g,HW)),a=e(o);return a.length&&(l.children=a),l})).filter((function(e){return e}))}(e)}function xW(e,t,n){var g=KW(n),o=g._title,l=g.key,a=g.children,r=new Set(!0===t?[]:t),i=[];return function e(n){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n.map((function(C,c){for(var u,s=$W(g?g.pos:"0",c),d=NW(C[l],s),A=0;A<o.length;A+=1){var m=o[A];if(void 0!==C[m]){u=C[m];break}}var b=$e($e({},hn(C,[].concat(I(o),[l,a]))),{},{title:u,key:d,parent:g,pos:s,children:null,data:C,isStart:[].concat(I(g?g.isStart:[]),[0===c]),isEnd:[].concat(I(g?g.isEnd:[]),[c===n.length-1])});return i.push(b),!0===t||r.has(d)?b.children=e(C[a]||[],b):b.children=[],b}))}(e),i}function EW(e,t,n){var g,o=("object"===m(n)?n:{externalGetKey:n})||{},l=o.childrenPropName,a=o.externalGetKey,r=KW(o.fieldNames),i=r.key,C=r.children,c=l||C;a?"string"===typeof a?g=function(e){return e[a]}:"function"===typeof a&&(g=function(e){return a(e)}):g=function(e,t){return NW(e[i],t)},function n(o,l,a,r){var i=o?o[c]:e,C=o?$W(a.pos,l):"0",u=o?[].concat(I(r),[o]):[];if(o){var s=g(o,C),d={node:o,index:l,pos:C,key:s,parentPos:a.node?a.pos:null,level:a.level+1,nodes:u};t(d)}i&&i.forEach((function(e,t){n(e,t,{node:o,pos:C,level:a?a.level+1:-1},u)}))}(null)}function MW(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.initWrapper,g=t.processEntity,o=t.onProcessFinished,l=t.externalGetKey,a=t.childrenPropName,r=t.fieldNames,I=arguments.length>2?arguments[2]:void 0,i=l||I,C={},c={},u={posEntities:C,keyEntities:c};return n&&(u=n(u)||u),EW(e,(function(e){var t=e.node,n=e.index,o=e.pos,l=e.key,a=e.parentPos,r=e.level,I={node:t,nodes:e.nodes,index:n,key:l,pos:o,level:r},i=NW(l,o);C[o]=I,c[i]=I,I.parent=C[a],I.parent&&(I.parent.children=I.parent.children||[],I.parent.children.push(I)),g&&g(I,u)}),{externalGetKey:i,childrenPropName:a,fieldNames:r}),o&&o(u),u}function zW(e,t){var n=t.expandedKeys,g=t.selectedKeys,o=t.loadedKeys,l=t.loadingKeys,a=t.checkedKeys,r=t.halfCheckedKeys,I=t.dragOverNodeKey,i=t.dropPosition,C=t.keyEntities[e];return{eventKey:e,expanded:-1!==n.indexOf(e),selected:-1!==g.indexOf(e),loaded:-1!==o.indexOf(e),loading:-1!==l.indexOf(e),checked:-1!==a.indexOf(e),halfChecked:-1!==r.indexOf(e),pos:String(C?C.pos:""),dragOver:I===e&&0===i,dragOverGapTop:I===e&&-1===i,dragOverGapBottom:I===e&&1===i}}function LW(e){var t=e.data,n=e.expanded,g=e.selected,o=e.checked,l=e.loaded,a=e.loading,r=e.halfChecked,I=e.dragOver,i=e.dragOverGapTop,C=e.dragOverGapBottom,c=e.pos,u=e.active,s=e.eventKey,d=$e($e({},t),{},{expanded:n,selected:g,checked:o,loaded:l,loading:a,halfChecked:r,dragOver:I,dragOverGapTop:i,dragOverGapBottom:C,pos:c,active:u,key:s});return"props"in d||Object.defineProperty(d,"props",{get:function(){return Nt(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),e}}),d}var UW=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],QW="open",TW="close",DW=function(e){s(g,e);var n=h(g);function g(){var e;i(this,g);for(var o=arguments.length,l=new Array(o),a=0;a<o;a++)l[a]=arguments[a];return(e=n.call.apply(n,[this].concat(l))).state={dragNodeHighlight:!1},e.selectHandle=void 0,e.onSelectorClick=function(t){(0,e.props.context.onNodeClick)(t,LW(e.props)),e.isSelectable()?e.onSelect(t):e.onCheck(t)},e.onSelectorDoubleClick=function(t){(0,e.props.context.onNodeDoubleClick)(t,LW(e.props))},e.onSelect=function(t){if(!e.isDisabled()){var n=e.props.context.onNodeSelect;t.preventDefault(),n(t,LW(e.props))}},e.onCheck=function(t){if(!e.isDisabled()){var n=e.props,g=n.disableCheckbox,o=n.checked,l=e.props.context.onNodeCheck;if(e.isCheckable()&&!g){t.preventDefault();var a=!o;l(t,LW(e.props),a)}}},e.onMouseEnter=function(t){(0,e.props.context.onNodeMouseEnter)(t,LW(e.props))},e.onMouseLeave=function(t){(0,e.props.context.onNodeMouseLeave)(t,LW(e.props))},e.onContextMenu=function(t){(0,e.props.context.onNodeContextMenu)(t,LW(e.props))},e.onDragStart=function(t){var n=e.props.context.onNodeDragStart;t.stopPropagation(),e.setState({dragNodeHighlight:!0}),n(t,b(e));try{t.dataTransfer.setData("text/plain","")}catch(g){}},e.onDragEnter=function(t){var n=e.props.context.onNodeDragEnter;t.preventDefault(),t.stopPropagation(),n(t,b(e))},e.onDragOver=function(t){var n=e.props.context.onNodeDragOver;t.preventDefault(),t.stopPropagation(),n(t,b(e))},e.onDragLeave=function(t){var n=e.props.context.onNodeDragLeave;t.stopPropagation(),n(t,b(e))},e.onDragEnd=function(t){var n=e.props.context.onNodeDragEnd;t.stopPropagation(),e.setState({dragNodeHighlight:!1}),n(t,b(e))},e.onDrop=function(t){var n=e.props.context.onNodeDrop;t.preventDefault(),t.stopPropagation(),e.setState({dragNodeHighlight:!1}),n(t,b(e))},e.onExpand=function(t){var n=e.props,g=n.loading,o=n.context.onNodeExpand;g||o(t,LW(e.props))},e.setSelectHandle=function(t){e.selectHandle=t},e.getNodeState=function(){var t=e.props.expanded;return e.isLeaf()?null:t?QW:TW},e.hasChildren=function(){var t=e.props.eventKey;return!!((e.props.context.keyEntities[t]||{}).children||[]).length},e.isLeaf=function(){var t=e.props,n=t.isLeaf,g=t.loaded,o=e.props.context.loadData,l=e.hasChildren();return!1!==n&&(n||!o&&!l||o&&g&&!l)},e.isDisabled=function(){var t=e.props.disabled;return!(!e.props.context.disabled&&!t)},e.isCheckable=function(){var t=e.props.checkable,n=e.props.context.checkable;return!(!n||!1===t)&&n},e.syncLoadData=function(t){var n=t.expanded,g=t.loading,o=t.loaded,l=e.props.context,a=l.loadData,r=l.onNodeLoad;g||a&&n&&!e.isLeaf()&&(e.hasChildren()||o||r(LW(e.props)))},e.isDraggable=function(){var t=e.props,n=t.data,g=t.context.draggable;return!(!g||g.nodeDraggable&&!g.nodeDraggable(n))},e.renderDragHandler=function(){var n=e.props.context,g=n.draggable,o=n.prefixCls;return(null===g||void 0===g?void 0:g.icon)?t.createElement("span",{className:"".concat(o,"-draggable-icon")},g.icon):null},e.renderSwitcherIconDom=function(t){var n=e.props.switcherIcon,g=e.props.context.switcherIcon,o=n||g;return"function"===typeof o?o($e($e({},e.props),{},{isLeaf:t})):o},e.renderSwitcher=function(){var n=e.props.expanded,g=e.props.context.prefixCls;if(e.isLeaf()){var o=e.renderSwitcherIconDom(!0);return!1!==o?t.createElement("span",{className:xe()("".concat(g,"-switcher"),"".concat(g,"-switcher-noop"))},o):null}var l=xe()("".concat(g,"-switcher"),"".concat(g,"-switcher_").concat(n?QW:TW)),a=e.renderSwitcherIconDom(!1);return!1!==a?t.createElement("span",{onClick:e.onExpand,className:l},a):null},e.renderCheckbox=function(){var n=e.props,g=n.checked,o=n.halfChecked,l=n.disableCheckbox,a=e.props.context.prefixCls,r=e.isDisabled(),I=e.isCheckable();if(!I)return null;var i="boolean"!==typeof I?I:null;return t.createElement("span",{className:xe()("".concat(a,"-checkbox"),g&&"".concat(a,"-checkbox-checked"),!g&&o&&"".concat(a,"-checkbox-indeterminate"),(r||l)&&"".concat(a,"-checkbox-disabled")),onClick:e.onCheck},i)},e.renderIcon=function(){var n=e.props.loading,g=e.props.context.prefixCls;return t.createElement("span",{className:xe()("".concat(g,"-iconEle"),"".concat(g,"-icon__").concat(e.getNodeState()||"docu"),n&&"".concat(g,"-icon_loading"))})},e.renderSelector=function(){var n,g,o=e.state.dragNodeHighlight,l=e.props,a=l.title,r=l.selected,I=l.icon,i=l.loading,C=l.data,c=e.props.context,u=c.prefixCls,s=c.showIcon,d=c.icon,A=c.loadData,m=c.titleRender,b=e.isDisabled(),p="".concat(u,"-node-content-wrapper");if(s){var h=I||d;n=h?t.createElement("span",{className:xe()("".concat(u,"-iconEle"),"".concat(u,"-icon__customize"))},"function"===typeof h?h(e.props):h):e.renderIcon()}else A&&i&&(n=e.renderIcon());g="function"===typeof a?a(C):m?m(C):a;var f=t.createElement("span",{className:"".concat(u,"-title")},g);return t.createElement("span",{ref:e.setSelectHandle,title:"string"===typeof a?a:"",className:xe()("".concat(p),"".concat(p,"-").concat(e.getNodeState()||"normal"),!b&&(r||o)&&"".concat(u,"-node-selected")),onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onContextMenu:e.onContextMenu,onClick:e.onSelectorClick,onDoubleClick:e.onSelectorDoubleClick},n,f,e.renderDropIndicator())},e.renderDropIndicator=function(){var t=e.props,n=t.disabled,g=t.eventKey,o=e.props.context,l=o.draggable,a=o.dropLevelOffset,r=o.dropPosition,I=o.prefixCls,i=o.indent,C=o.dropIndicatorRender,c=o.dragOverNodeKey,u=o.direction;return!n&&!1!==l&&c===g?C({dropPosition:r,dropLevelOffset:a,indent:i,prefixCls:I,direction:u}):null},e}return c(g,[{key:"componentDidMount",value:function(){this.syncLoadData(this.props)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"isSelectable",value:function(){var e=this.props.selectable,t=this.props.context.selectable;return"boolean"===typeof e?e:t}},{key:"render",value:function(){var e,n=this.props,g=n.eventKey,o=n.className,l=n.style,a=n.dragOver,r=n.dragOverGapTop,I=n.dragOverGapBottom,i=n.isLeaf,C=n.isStart,c=n.isEnd,u=n.expanded,s=n.selected,d=n.checked,A=n.halfChecked,m=n.loading,b=n.domRef,p=n.active,h=(n.data,n.onMouseMove),f=n.selectable,y=tt(n,UW),Z=this.props.context,v=Z.prefixCls,G=Z.filterTreeNode,B=Z.keyEntities,S=Z.dropContainerKey,V=Z.dropTargetKey,W=Z.draggingNodeKey,R=this.isDisabled(),k=Fv(y,{aria:!0,data:!0}),X=(B[g]||{}).level,J=c[c.length-1],Y=this.isDraggable(),w=!R&&Y,H=W===g,N=void 0!==f?{"aria-selected":!!f}:void 0;return t.createElement("div",Ke({ref:b,className:xe()(o,"".concat(v,"-treenode"),(e={},Ne(e,"".concat(v,"-treenode-disabled"),R),Ne(e,"".concat(v,"-treenode-switcher-").concat(u?"open":"close"),!i),Ne(e,"".concat(v,"-treenode-checkbox-checked"),d),Ne(e,"".concat(v,"-treenode-checkbox-indeterminate"),A),Ne(e,"".concat(v,"-treenode-selected"),s),Ne(e,"".concat(v,"-treenode-loading"),m),Ne(e,"".concat(v,"-treenode-active"),p),Ne(e,"".concat(v,"-treenode-leaf-last"),J),Ne(e,"".concat(v,"-treenode-draggable"),Y),Ne(e,"dragging",H),Ne(e,"drop-target",V===g),Ne(e,"drop-container",S===g),Ne(e,"drag-over",!R&&a),Ne(e,"drag-over-gap-top",!R&&r),Ne(e,"drag-over-gap-bottom",!R&&I),Ne(e,"filter-node",G&&G(LW(this.props))),e)),style:l,draggable:w,"aria-grabbed":H,onDragStart:w?this.onDragStart:void 0,onDragEnter:Y?this.onDragEnter:void 0,onDragOver:Y?this.onDragOver:void 0,onDragLeave:Y?this.onDragLeave:void 0,onDrop:Y?this.onDrop:void 0,onDragEnd:Y?this.onDragEnd:void 0,onMouseMove:h},N,k),t.createElement(wW,{prefixCls:v,level:X,isStart:C,isEnd:c}),this.renderDragHandler(),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector())}}]),g}(t.Component),jW=function(e){return t.createElement(JW.Consumer,null,(function(n){return t.createElement(DW,Ke({},e,{context:n}))}))};jW.displayName="TreeNode",jW.defaultProps={title:"---"},jW.isTreeNode=1;var PW=jW;function OW(e,t){if(!e)return[];var n=e.slice(),g=n.indexOf(t);return g>=0&&n.splice(g,1),n}function qW(e,t){var n=(e||[]).slice();return-1===n.indexOf(t)&&n.push(t),n}function _W(e){return e.split("-")}function $W(e,t){return"".concat(e,"-").concat(t)}function eR(e,t){var n=[];return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach((function(t){var g=t.key,o=t.children;n.push(g),e(o)}))}(t[e].children),n}function tR(e){if(e.parent){var t=_W(e.pos);return Number(t[t.length-1])===e.parent.children.length-1}return!1}function nR(e,t,n,g,o,l,a,r,I,i){var C,c=e.clientX,u=e.clientY,s=e.target.getBoundingClientRect(),d=s.top,A=s.height,m=(("rtl"===i?-1:1)*(((null===o||void 0===o?void 0:o.x)||0)-c)-12)/g,b=r[n.props.eventKey];if(u<d+A/2){var p=a.findIndex((function(e){return e.key===b.key})),h=a[p<=0?0:p-1].key;b=r[h]}var f=b.key,y=b,Z=b.key,v=0,G=0;if(!I.includes(f))for(var B=0;B<m&&tR(b);B+=1)b=b.parent,G+=1;var S=t.props.data,V=b.node,W=!0;return function(e){var t=_W(e.pos);return 0===Number(t[t.length-1])}(b)&&0===b.level&&u<d+A/2&&l({dragNode:S,dropNode:V,dropPosition:-1})&&b.key===n.props.eventKey?v=-1:(y.children||[]).length&&I.includes(Z)?l({dragNode:S,dropNode:V,dropPosition:0})?v=0:W=!1:0===G?m>-1.5?l({dragNode:S,dropNode:V,dropPosition:1})?v=1:W=!1:l({dragNode:S,dropNode:V,dropPosition:0})?v=0:l({dragNode:S,dropNode:V,dropPosition:1})?v=1:W=!1:l({dragNode:S,dropNode:V,dropPosition:1})?v=1:W=!1,{dropPosition:v,dropLevelOffset:G,dropTargetKey:b.key,dropTargetPos:b.pos,dragOverNodeKey:Z,dropContainerKey:0===v?null:(null===(C=b.parent)||void 0===C?void 0:C.key)||null,dropAllowed:W}}function gR(e,t){if(e)return t.multiple?e.slice():e.length?[e[0]]:e}function oR(e){if(!e)return null;var t;if(Array.isArray(e))t={checkedKeys:e,halfCheckedKeys:void 0};else{if("object"!==m(e))return Nt(!1,"`checkedKeys` is not an array or an object"),null;t={checkedKeys:e.checked||void 0,halfCheckedKeys:e.halfChecked||void 0}}return t}function lR(e,t){var n=new Set;function g(e){if(!n.has(e)){var o=t[e];if(o){n.add(e);var l=o.parent;o.node.disabled||l&&g(l.key)}}}return(e||[]).forEach((function(e){g(e)})),I(n)}var aR=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],rR=function(e,n){var g=e.className,o=e.style,l=e.motion,a=e.motionNodes,r=e.motionType,I=e.onMotionStart,i=e.onMotionEnd,C=e.active,c=e.treeNodeRequiredProps,u=tt(e,aR),s=Z(t.useState(!0),2),d=s[0],A=s[1],m=t.useContext(JW).prefixCls,b=t.useRef(!1),p=function(){b.current||i(),b.current=!0};return(0,t.useEffect)((function(){a&&"hide"===r&&d&&A(!1)}),[a]),(0,t.useEffect)((function(){return a&&I(),function(){a&&p()}}),[]),a?t.createElement(UA,Ke({ref:n,visible:d},l,{motionAppear:"show"===r,onAppearEnd:p,onLeaveEnd:p}),(function(e,n){var g=e.className,o=e.style;return t.createElement("div",{ref:n,className:xe()("".concat(m,"-treenode-motion"),g),style:o},a.map((function(e){var n=Ke({},e.data),g=e.title,o=e.key,l=e.isStart,a=e.isEnd;delete n.children;var r=zW(o,c);return t.createElement(PW,Ke({},n,r,{title:g,active:C,data:e.data,key:o,isStart:l,isEnd:a}))})))})):t.createElement(PW,Ke({domRef:n,className:g,style:o},u,{active:C}))};rR.displayName="MotionTreeNode";var IR=t.forwardRef(rR);function iR(e,t,n){var g=e.findIndex((function(e){return e.key===n})),o=e[g+1],l=t.findIndex((function(e){return e.key===n}));if(o){var a=t.findIndex((function(e){return e.key===o.key}));return t.slice(l+1,a)}return t.slice(l+1)}var CR=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],cR={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},uR=function(){},sR="RC_TREE_MOTION_".concat(Math.random()),dR={key:sR},AR={key:sR,level:0,index:0,pos:"0",node:dR,nodes:[dR]},mR={parent:null,children:[],pos:AR.pos,data:dR,title:null,key:sR,isStart:[],isEnd:[]};function bR(e,t,n,g){return!1!==t&&n?e.slice(0,Math.ceil(n/g)+1):e}function pR(e){return NW(e.key,e.pos)}var hR=t.forwardRef((function(e,n){var g=e.prefixCls,o=e.data,l=(e.selectable,e.checkable,e.expandedKeys),a=e.selectedKeys,r=e.checkedKeys,I=e.loadedKeys,i=e.loadingKeys,C=e.halfCheckedKeys,c=e.keyEntities,u=e.disabled,s=e.dragging,d=e.dragOverNodeKey,A=e.dropPosition,m=e.motion,b=e.height,p=e.itemHeight,h=e.virtual,f=e.focusable,y=e.activeItem,v=e.focused,G=e.tabIndex,B=e.onKeyDown,S=e.onFocus,V=e.onBlur,W=e.onActiveChange,R=e.onListChangeStart,k=e.onListChangeEnd,X=tt(e,CR),J=t.useRef(null),Y=t.useRef(null);t.useImperativeHandle(n,(function(){return{scrollTo:function(e){J.current.scrollTo(e)},getIndentWidth:function(){return Y.current.offsetWidth}}}));var w=Z(t.useState(l),2),H=w[0],N=w[1],K=Z(t.useState(o),2),F=K[0],x=K[1],E=Z(t.useState(o),2),M=E[0],z=E[1],L=Z(t.useState([]),2),U=L[0],Q=L[1],T=Z(t.useState(null),2),D=T[0],j=T[1],P=t.useRef(o);function O(){var e=P.current;x(e),z(e),Q([]),j(null),k()}P.current=o,t.useEffect((function(){N(l);var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.length,g=t.length;if(1!==Math.abs(n-g))return{add:!1,key:null};function o(e,t){var n=new Map;e.forEach((function(e){n.set(e,!0)}));var g=t.filter((function(e){return!n.has(e)}));return 1===g.length?g[0]:null}return n<g?{add:!0,key:o(e,t)}:{add:!1,key:o(t,e)}}(H,l);if(null!==e.key)if(e.add){var t=F.findIndex((function(t){return t.key===e.key})),n=bR(iR(F,o,e.key),h,b,p),g=F.slice();g.splice(t+1,0,mR),z(g),Q(n),j("show")}else{var a=o.findIndex((function(t){return t.key===e.key})),r=bR(iR(o,F,e.key),h,b,p),I=o.slice();I.splice(a+1,0,mR),z(I),Q(r),j("hide")}else F!==o&&(x(o),z(o))}),[l,o]),t.useEffect((function(){s||O()}),[s]);var q=m?M:o,_={expandedKeys:l,selectedKeys:a,loadedKeys:I,loadingKeys:i,checkedKeys:r,halfCheckedKeys:C,dragOverNodeKey:d,dropPosition:A,keyEntities:c};return t.createElement(t.Fragment,null,v&&y&&t.createElement("span",{style:cR,"aria-live":"assertive"},function(e){for(var t=String(e.data.key),n=e;n.parent;)n=n.parent,t="".concat(n.data.key," > ").concat(t);return t}(y)),t.createElement("div",null,t.createElement("input",{style:cR,disabled:!1===f||u,tabIndex:!1!==f?G:null,onKeyDown:B,onFocus:S,onBlur:V,value:"",onChange:uR,"aria-label":"for screen reader"})),t.createElement("div",{className:"".concat(g,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"}},t.createElement("div",{className:"".concat(g,"-indent")},t.createElement("div",{ref:Y,className:"".concat(g,"-indent-unit")}))),t.createElement(MS,Ke({},X,{data:q,itemKey:pR,height:b,fullHeight:!1,virtual:h,itemHeight:p,prefixCls:"".concat(g,"-list"),ref:J,onVisibleChange:function(e,t){var n=new Set(e);t.filter((function(e){return!n.has(e)})).some((function(e){return pR(e)===sR}))&&O()}}),(function(e){var n=e.pos,g=Ke({},e.data),o=e.title,l=e.key,a=e.isStart,r=e.isEnd,I=NW(l,n);delete g.key,delete g.children;var i=zW(I,_);return t.createElement(IR,Ke({},g,i,{title:o,active:!!y&&l===y.key,pos:n,data:e.data,isStart:a,isEnd:r,motion:m,motionNodes:l===sR?U:null,motionType:D,onMotionStart:R,onMotionEnd:O,treeNodeRequiredProps:_,onMouseMove:function(){W(null)}}))})))}));hR.displayName="NodeList";var fR=hR;function yR(e,t){var n=new Set;return e.forEach((function(e){t.has(e)||n.add(e)})),n}function ZR(e){var t=e||{},n=t.disabled,g=t.disableCheckbox,o=t.checkable;return!(!n&&!g)||!1===o}function vR(e,t,n,g){var o,l=[];o=g||ZR;var a,r=new Set(e.filter((function(e){var t=!!n[e];return t||l.push(e),t}))),I=new Map,i=0;return Object.keys(n).forEach((function(e){var t=n[e],g=t.level,o=I.get(g);o||(o=new Set,I.set(g,o)),o.add(t),i=Math.max(i,g)})),Nt(!l.length,"Tree missing follow keys: ".concat(l.slice(0,100).map((function(e){return"'".concat(e,"'")})).join(", "))),a=!0===t?function(e,t,n,g){for(var o=new Set(e),l=new Set,a=0;a<=n;a+=1)(t.get(a)||new Set).forEach((function(e){var t=e.key,n=e.node,l=e.children,a=void 0===l?[]:l;o.has(t)&&!g(n)&&a.filter((function(e){return!g(e.node)})).forEach((function(e){o.add(e.key)}))}));for(var r=new Set,I=n;I>=0;I-=1)(t.get(I)||new Set).forEach((function(e){var t=e.parent,n=e.node;if(!g(n)&&e.parent&&!r.has(e.parent.key))if(g(e.parent.node))r.add(t.key);else{var a=!0,I=!1;(t.children||[]).filter((function(e){return!g(e.node)})).forEach((function(e){var t=e.key,n=o.has(t);a&&!n&&(a=!1),I||!n&&!l.has(t)||(I=!0)})),a&&o.add(t.key),I&&l.add(t.key),r.add(t.key)}}));return{checkedKeys:Array.from(o),halfCheckedKeys:Array.from(yR(l,o))}}(r,I,i,o):function(e,t,n,g,o){for(var l=new Set(e),a=new Set(t),r=0;r<=g;r+=1)(n.get(r)||new Set).forEach((function(e){var t=e.key,n=e.node,g=e.children,r=void 0===g?[]:g;l.has(t)||a.has(t)||o(n)||r.filter((function(e){return!o(e.node)})).forEach((function(e){l.delete(e.key)}))}));a=new Set;for(var I=new Set,i=g;i>=0;i-=1)(n.get(i)||new Set).forEach((function(e){var t=e.parent,n=e.node;if(!o(n)&&e.parent&&!I.has(e.parent.key))if(o(e.parent.node))I.add(t.key);else{var g=!0,r=!1;(t.children||[]).filter((function(e){return!o(e.node)})).forEach((function(e){var t=e.key,n=l.has(t);g&&!n&&(g=!1),r||!n&&!a.has(t)||(r=!0)})),g||l.delete(t.key),r&&a.add(t.key),I.add(t.key)}}));return{checkedKeys:Array.from(l),halfCheckedKeys:Array.from(yR(a,l))}}(r,t.halfCheckedKeys,I,i,o),a}var GR=function(e){s(g,e);var n=h(g);function g(){var e;i(this,g);for(var o=arguments.length,l=new Array(o),a=0;a<o;a++)l[a]=arguments[a];return(e=n.call.apply(n,[this].concat(l))).destroyed=!1,e.delayedDragEnterLogic=void 0,e.loadingRetryTimes={},e.state={keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:KW()},e.dragStartMousePosition=null,e.dragNode=void 0,e.currentMouseOverDroppableNodeKey=null,e.listRef=t.createRef(),e.onNodeDragStart=function(t,n){var g=e.state,o=g.expandedKeys,l=g.keyEntities,a=e.props.onDragStart,r=n.props.eventKey;e.dragNode=n,e.dragStartMousePosition={x:t.clientX,y:t.clientY};var I=OW(o,r);e.setState({draggingNodeKey:r,dragChildrenKeys:eR(r,l),indent:e.listRef.current.getIndentWidth()}),e.setExpandedKeys(I),window.addEventListener("dragend",e.onWindowDragEnd),null===a||void 0===a||a({event:t,node:LW(n.props)})},e.onNodeDragEnter=function(t,n){var g=e.state,o=g.expandedKeys,l=g.keyEntities,a=g.dragChildrenKeys,r=g.flattenNodes,i=g.indent,C=e.props,c=C.onDragEnter,u=C.onExpand,s=C.allowDrop,d=C.direction,A=n.props,m=A.pos,p=A.eventKey,h=b(e).dragNode;if(e.currentMouseOverDroppableNodeKey!==p&&(e.currentMouseOverDroppableNodeKey=p),h){var f=nR(t,h,n,i,e.dragStartMousePosition,s,r,l,o,d),y=f.dropPosition,Z=f.dropLevelOffset,v=f.dropTargetKey,G=f.dropContainerKey,B=f.dropTargetPos,S=f.dropAllowed,V=f.dragOverNodeKey;-1===a.indexOf(v)&&S?(e.delayedDragEnterLogic||(e.delayedDragEnterLogic={}),Object.keys(e.delayedDragEnterLogic).forEach((function(t){clearTimeout(e.delayedDragEnterLogic[t])})),h.props.eventKey!==n.props.eventKey&&(t.persist(),e.delayedDragEnterLogic[m]=window.setTimeout((function(){if(null!==e.state.draggingNodeKey){var g=I(o),a=l[n.props.eventKey];a&&(a.children||[]).length&&(g=qW(o,n.props.eventKey)),"expandedKeys"in e.props||e.setExpandedKeys(g),null===u||void 0===u||u(g,{node:LW(n.props),expanded:!0,nativeEvent:t.nativeEvent})}}),800)),h.props.eventKey!==v||0!==Z?(e.setState({dragOverNodeKey:V,dropPosition:y,dropLevelOffset:Z,dropTargetKey:v,dropContainerKey:G,dropTargetPos:B,dropAllowed:S}),null===c||void 0===c||c({event:t,node:LW(n.props),expandedKeys:o})):e.resetDragState()):e.resetDragState()}else e.resetDragState()},e.onNodeDragOver=function(t,n){var g=e.state,o=g.dragChildrenKeys,l=g.flattenNodes,a=g.keyEntities,r=g.expandedKeys,I=g.indent,i=e.props,C=i.onDragOver,c=i.allowDrop,u=i.direction,s=b(e).dragNode;if(s){var d=nR(t,s,n,I,e.dragStartMousePosition,c,l,a,r,u),A=d.dropPosition,m=d.dropLevelOffset,p=d.dropTargetKey,h=d.dropContainerKey,f=d.dropAllowed,y=d.dropTargetPos,Z=d.dragOverNodeKey;-1===o.indexOf(p)&&f&&(s.props.eventKey===p&&0===m?null===e.state.dropPosition&&null===e.state.dropLevelOffset&&null===e.state.dropTargetKey&&null===e.state.dropContainerKey&&null===e.state.dropTargetPos&&!1===e.state.dropAllowed&&null===e.state.dragOverNodeKey||e.resetDragState():A===e.state.dropPosition&&m===e.state.dropLevelOffset&&p===e.state.dropTargetKey&&h===e.state.dropContainerKey&&y===e.state.dropTargetPos&&f===e.state.dropAllowed&&Z===e.state.dragOverNodeKey||e.setState({dropPosition:A,dropLevelOffset:m,dropTargetKey:p,dropContainerKey:h,dropTargetPos:y,dropAllowed:f,dragOverNodeKey:Z}),null===C||void 0===C||C({event:t,node:LW(n.props)}))}},e.onNodeDragLeave=function(t,n){e.currentMouseOverDroppableNodeKey!==n.props.eventKey||t.currentTarget.contains(t.relatedTarget)||(e.resetDragState(),e.currentMouseOverDroppableNodeKey=null);var g=e.props.onDragLeave;null===g||void 0===g||g({event:t,node:LW(n.props)})},e.onWindowDragEnd=function(t){e.onNodeDragEnd(t,null,!0),window.removeEventListener("dragend",e.onWindowDragEnd)},e.onNodeDragEnd=function(t,n){var g=e.props.onDragEnd;e.setState({dragOverNodeKey:null}),e.cleanDragState(),null===g||void 0===g||g({event:t,node:LW(n.props)}),e.dragNode=null,window.removeEventListener("dragend",e.onWindowDragEnd)},e.onNodeDrop=function(t,n){var g,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=e.state,a=l.dragChildrenKeys,r=l.dropPosition,I=l.dropTargetKey,i=l.dropTargetPos,C=l.dropAllowed;if(C){var c=e.props.onDrop;if(e.setState({dragOverNodeKey:null}),e.cleanDragState(),null!==I){var u=$e($e({},zW(I,e.getTreeNodeRequiredProps())),{},{active:(null===(g=e.getActiveItem())||void 0===g?void 0:g.key)===I,data:e.state.keyEntities[I].node}),s=-1!==a.indexOf(I);Nt(!s,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var d=_W(i),A={event:t,node:LW(u),dragNode:e.dragNode?LW(e.dragNode.props):null,dragNodesKeys:[e.dragNode.props.eventKey].concat(a),dropToGap:0!==r,dropPosition:r+Number(d[d.length-1])};o||null===c||void 0===c||c(A),e.dragNode=null}}},e.cleanDragState=function(){null!==e.state.draggingNodeKey&&e.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),e.dragStartMousePosition=null,e.currentMouseOverDroppableNodeKey=null},e.triggerExpandActionExpand=function(t,n){var g=e.state,o=g.expandedKeys,l=g.flattenNodes,a=n.expanded,r=n.key;if(!(n.isLeaf||t.shiftKey||t.metaKey||t.ctrlKey)){var I=l.filter((function(e){return e.key===r}))[0],i=LW($e($e({},zW(r,e.getTreeNodeRequiredProps())),{},{data:I.data}));e.setExpandedKeys(a?OW(o,r):qW(o,r)),e.onNodeExpand(t,i)}},e.onNodeClick=function(t,n){var g=e.props,o=g.onClick;"click"===g.expandAction&&e.triggerExpandActionExpand(t,n),null===o||void 0===o||o(t,n)},e.onNodeDoubleClick=function(t,n){var g=e.props,o=g.onDoubleClick;"doubleClick"===g.expandAction&&e.triggerExpandActionExpand(t,n),null===o||void 0===o||o(t,n)},e.onNodeSelect=function(t,n){var g=e.state.selectedKeys,o=e.state,l=o.keyEntities,a=o.fieldNames,r=e.props,I=r.onSelect,i=r.multiple,C=n.selected,c=n[a.key],u=!C,s=(g=u?i?qW(g,c):[c]:OW(g,c)).map((function(e){var t=l[e];return t?t.node:null})).filter((function(e){return e}));e.setUncontrolledState({selectedKeys:g}),null===I||void 0===I||I(g,{event:"select",selected:u,node:n,selectedNodes:s,nativeEvent:t.nativeEvent})},e.onNodeCheck=function(t,n,g){var o,l=e.state,a=l.keyEntities,r=l.checkedKeys,i=l.halfCheckedKeys,C=e.props,c=C.checkStrictly,u=C.onCheck,s=n.key,d={event:"check",node:n,checked:g,nativeEvent:t.nativeEvent};if(c){var A=g?qW(r,s):OW(r,s);o={checked:A,halfChecked:OW(i,s)},d.checkedNodes=A.map((function(e){return a[e]})).filter((function(e){return e})).map((function(e){return e.node})),e.setUncontrolledState({checkedKeys:A})}else{var m=vR([].concat(I(r),[s]),!0,a),b=m.checkedKeys,p=m.halfCheckedKeys;if(!g){var h=new Set(b);h.delete(s);var f=vR(Array.from(h),{checked:!1,halfCheckedKeys:p},a);b=f.checkedKeys,p=f.halfCheckedKeys}o=b,d.checkedNodes=[],d.checkedNodesPositions=[],d.halfCheckedKeys=p,b.forEach((function(e){var t=a[e];if(t){var n=t.node,g=t.pos;d.checkedNodes.push(n),d.checkedNodesPositions.push({node:n,pos:g})}})),e.setUncontrolledState({checkedKeys:b},!1,{halfCheckedKeys:p})}null===u||void 0===u||u(o,d)},e.onNodeLoad=function(t){var n=t.key,g=new Promise((function(g,o){e.setState((function(l){var a=l.loadedKeys,r=void 0===a?[]:a,I=l.loadingKeys,i=void 0===I?[]:I,C=e.props,c=C.loadData,u=C.onLoad;return c&&-1===r.indexOf(n)&&-1===i.indexOf(n)?(c(t).then((function(){var o=qW(e.state.loadedKeys,n);null===u||void 0===u||u(o,{event:"load",node:t}),e.setUncontrolledState({loadedKeys:o}),e.setState((function(e){return{loadingKeys:OW(e.loadingKeys,n)}})),g()})).catch((function(t){if(e.setState((function(e){return{loadingKeys:OW(e.loadingKeys,n)}})),e.loadingRetryTimes[n]=(e.loadingRetryTimes[n]||0)+1,e.loadingRetryTimes[n]>=10){var l=e.state.loadedKeys;Nt(!1,"Retry for `loadData` many times but still failed. No more retry."),e.setUncontrolledState({loadedKeys:qW(l,n)}),g()}o(t)})),{loadingKeys:qW(i,n)}):null}))}));return g.catch((function(){})),g},e.onNodeMouseEnter=function(t,n){var g=e.props.onMouseEnter;null===g||void 0===g||g({event:t,node:n})},e.onNodeMouseLeave=function(t,n){var g=e.props.onMouseLeave;null===g||void 0===g||g({event:t,node:n})},e.onNodeContextMenu=function(t,n){var g=e.props.onRightClick;g&&(t.preventDefault(),g({event:t,node:n}))},e.onFocus=function(){var t=e.props.onFocus;e.setState({focused:!0});for(var n=arguments.length,g=new Array(n),o=0;o<n;o++)g[o]=arguments[o];null===t||void 0===t||t.apply(void 0,g)},e.onBlur=function(){var t=e.props.onBlur;e.setState({focused:!1}),e.onActiveChange(null);for(var n=arguments.length,g=new Array(n),o=0;o<n;o++)g[o]=arguments[o];null===t||void 0===t||t.apply(void 0,g)},e.getTreeNodeRequiredProps=function(){var t=e.state;return{expandedKeys:t.expandedKeys||[],selectedKeys:t.selectedKeys||[],loadedKeys:t.loadedKeys||[],loadingKeys:t.loadingKeys||[],checkedKeys:t.checkedKeys||[],halfCheckedKeys:t.halfCheckedKeys||[],dragOverNodeKey:t.dragOverNodeKey,dropPosition:t.dropPosition,keyEntities:t.keyEntities}},e.setExpandedKeys=function(t){var n=e.state,g=xW(n.treeData,t,n.fieldNames);e.setUncontrolledState({expandedKeys:t,flattenNodes:g},!0)},e.onNodeExpand=function(t,n){var g=e.state.expandedKeys,o=e.state,l=o.listChanging,a=o.fieldNames,r=e.props,I=r.onExpand,i=r.loadData,C=n.expanded,c=n[a.key];if(!l){var u=g.indexOf(c),s=!C;if(Nt(C&&-1!==u||!C&&-1===u,"Expand state not sync with index check"),g=s?qW(g,c):OW(g,c),e.setExpandedKeys(g),null===I||void 0===I||I(g,{node:n,expanded:s,nativeEvent:t.nativeEvent}),s&&i){var d=e.onNodeLoad(n);d&&d.then((function(){var t=xW(e.state.treeData,g,a);e.setUncontrolledState({flattenNodes:t})})).catch((function(){var t=OW(e.state.expandedKeys,c);e.setExpandedKeys(t)}))}}},e.onListChangeStart=function(){e.setUncontrolledState({listChanging:!0})},e.onListChangeEnd=function(){setTimeout((function(){e.setUncontrolledState({listChanging:!1})}))},e.onActiveChange=function(t){var n=e.state.activeKey,g=e.props.onActiveChange;n!==t&&(e.setState({activeKey:t}),null!==t&&e.scrollTo({key:t}),null===g||void 0===g||g(t))},e.getActiveItem=function(){var t=e.state,n=t.activeKey,g=t.flattenNodes;return null===n?null:g.find((function(e){return e.key===n}))||null},e.offsetActiveKey=function(t){var n=e.state,g=n.flattenNodes,o=n.activeKey,l=g.findIndex((function(e){return e.key===o}));-1===l&&t<0&&(l=g.length);var a=g[l=(l+t+g.length)%g.length];if(a){var r=a.key;e.onActiveChange(r)}else e.onActiveChange(null)},e.onKeyDown=function(t){var n=e.state,g=n.activeKey,o=n.expandedKeys,l=n.checkedKeys,a=n.fieldNames,r=e.props,I=r.onKeyDown,i=r.checkable,C=r.selectable;switch(t.which){case hd.UP:e.offsetActiveKey(-1),t.preventDefault();break;case hd.DOWN:e.offsetActiveKey(1),t.preventDefault()}var c=e.getActiveItem();if(c&&c.data){var u=e.getTreeNodeRequiredProps(),s=!1===c.data.isLeaf||!!(c.data[a.children]||[]).length,d=LW($e($e({},zW(g,u)),{},{data:c.data,active:!0}));switch(t.which){case hd.LEFT:s&&o.includes(g)?e.onNodeExpand({},d):c.parent&&e.onActiveChange(c.parent.key),t.preventDefault();break;case hd.RIGHT:s&&!o.includes(g)?e.onNodeExpand({},d):c.children&&c.children.length&&e.onActiveChange(c.children[0].key),t.preventDefault();break;case hd.ENTER:case hd.SPACE:!i||d.disabled||!1===d.checkable||d.disableCheckbox?i||!C||d.disabled||!1===d.selectable||e.onNodeSelect({},d):e.onNodeCheck({},d,!l.includes(g))}}null===I||void 0===I||I(t)},e.setUncontrolledState=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e.destroyed){var o=!1,l=!0,a={};Object.keys(t).forEach((function(n){n in e.props?l=!1:(o=!0,a[n]=t[n])})),!o||n&&!l||e.setState($e($e({},a),g))}},e.scrollTo=function(t){e.listRef.current.scrollTo(t)},e}return c(g,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var e=this.props.activeKey;void 0!==e&&e!==this.state.activeKey&&(this.setState({activeKey:e}),null!==e&&this.scrollTo({key:e}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var e,n,g=this.state,o=g.focused,l=g.flattenNodes,a=g.keyEntities,r=g.draggingNodeKey,I=g.activeKey,i=g.dropLevelOffset,C=g.dropContainerKey,c=g.dropTargetKey,u=g.dropPosition,s=g.dragOverNodeKey,d=g.indent,A=this.props,b=A.prefixCls,p=A.className,h=A.style,f=A.showLine,y=A.focusable,Z=A.tabIndex,v=void 0===Z?0:Z,G=A.selectable,B=A.showIcon,S=A.icon,V=A.switcherIcon,W=A.draggable,R=A.checkable,k=A.checkStrictly,X=A.disabled,J=A.motion,Y=A.loadData,w=A.filterTreeNode,H=A.height,N=A.itemHeight,K=A.virtual,F=A.titleRender,x=A.dropIndicatorRender,E=A.onContextMenu,M=A.onScroll,z=A.direction,L=A.rootClassName,U=A.rootStyle,Q=Fv(this.props,{aria:!0,data:!0});return W&&(n="object"===m(W)?W:"function"===typeof W?{nodeDraggable:W}:{}),t.createElement(JW.Provider,{value:{prefixCls:b,selectable:G,showIcon:B,icon:S,switcherIcon:V,draggable:n,draggingNodeKey:r,checkable:R,checkStrictly:k,disabled:X,keyEntities:a,dropLevelOffset:i,dropContainerKey:C,dropTargetKey:c,dropPosition:u,dragOverNodeKey:s,indent:d,direction:z,dropIndicatorRender:x,loadData:Y,filterTreeNode:w,titleRender:F,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},t.createElement("div",{role:"tree",className:xe()(b,p,L,(e={},Ne(e,"".concat(b,"-show-line"),f),Ne(e,"".concat(b,"-focused"),o),Ne(e,"".concat(b,"-active-focused"),null!==I),e)),style:U},t.createElement(fR,Ke({ref:this.listRef,prefixCls:b,style:h,data:l,disabled:X,selectable:G,checkable:!!R,motion:J,dragging:null!==r,height:H,itemHeight:N,virtual:K,focusable:y,focused:o,tabIndex:v,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:E,onScroll:M},this.getTreeNodeRequiredProps(),Q))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,g=t.prevProps,o={prevProps:e};function l(t){return!g&&t in e||g&&g[t]!==e[t]}var a=t.fieldNames;if(l("fieldNames")&&(a=KW(e.fieldNames),o.fieldNames=a),l("treeData")?n=e.treeData:l("children")&&(Nt(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),n=FW(e.children)),n){o.treeData=n;var r=MW(n,{fieldNames:a});o.keyEntities=$e(Ne({},sR,AR),r.keyEntities)}var I,i=o.keyEntities||t.keyEntities;if(l("expandedKeys")||g&&l("autoExpandParent"))o.expandedKeys=e.autoExpandParent||!g&&e.defaultExpandParent?lR(e.expandedKeys,i):e.expandedKeys;else if(!g&&e.defaultExpandAll){var C=$e({},i);delete C[sR],o.expandedKeys=Object.keys(C).map((function(e){return C[e].key}))}else!g&&e.defaultExpandedKeys&&(o.expandedKeys=e.autoExpandParent||e.defaultExpandParent?lR(e.defaultExpandedKeys,i):e.defaultExpandedKeys);if(o.expandedKeys||delete o.expandedKeys,n||o.expandedKeys){var c=xW(n||t.treeData,o.expandedKeys||t.expandedKeys,a);o.flattenNodes=c}if((e.selectable&&(l("selectedKeys")?o.selectedKeys=gR(e.selectedKeys,e):!g&&e.defaultSelectedKeys&&(o.selectedKeys=gR(e.defaultSelectedKeys,e))),e.checkable)&&(l("checkedKeys")?I=oR(e.checkedKeys)||{}:!g&&e.defaultCheckedKeys?I=oR(e.defaultCheckedKeys)||{}:n&&(I=oR(e.checkedKeys)||{checkedKeys:t.checkedKeys,halfCheckedKeys:t.halfCheckedKeys}),I)){var u=I,s=u.checkedKeys,d=void 0===s?[]:s,A=u.halfCheckedKeys,m=void 0===A?[]:A;if(!e.checkStrictly){var b=vR(d,!0,i);d=b.checkedKeys,m=b.halfCheckedKeys}o.checkedKeys=d,o.halfCheckedKeys=m}return l("loadedKeys")&&(o.loadedKeys=e.loadedKeys),o}}]),g}(t.Component);GR.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:function(e){var n=e.dropPosition,g=e.dropLevelOffset,o=e.indent,l={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(n){case-1:l.top=0,l.left=-g*o;break;case 1:l.bottom=0,l.left=-g*o;break;case 0:l.bottom=0,l.left=o}return t.createElement("div",{style:l})},allowDrop:function(){return!0},expandAction:!1},GR.TreeNode=PW;var BR=GR,SR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},VR=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:SR}))};VR.displayName="FileOutlined";var WR=t.forwardRef(VR),RR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},kR=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:RR}))};kR.displayName="FolderOpenOutlined";var XR=t.forwardRef(kR),JR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},YR=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:JR}))};YR.displayName="FolderOutlined";var wR,HR=t.forwardRef(YR);function NR(e,t){e.forEach((function(e){var n=e.key,g=e.children;!1!==t(n,e)&&NR(g||[],t)}))}function KR(e){var t=e.treeData,n=e.expandedKeys,g=e.startKey,o=e.endKey,l=[],a=wR.None;if(g&&g===o)return[g];if(!g||!o)return[];return NR(t,(function(e){if(a===wR.End)return!1;if(function(e){return e===g||e===o}(e)){if(l.push(e),a===wR.None)a=wR.Start;else if(a===wR.Start)return a=wR.End,!1}else a===wR.Start&&l.push(e);return n.includes(e)})),l}function FR(e,t){var n=I(t),g=[];return NR(e,(function(e,t){var o=n.indexOf(e);return-1!==o&&(g.push(t),n.splice(o,1)),!!n.length})),g}!function(e){e[e.None=0]="None",e[e.Start=1]="Start",e[e.End=2]="End"}(wR||(wR={}));var xR=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n};function ER(e){var n=e.isLeaf,g=e.expanded;return n?t.createElement(WR,null):g?t.createElement(XR,null):t.createElement(HR,null)}function MR(e){var t=e.treeData,n=e.children;return t||FW(n)}var zR=function(e,n){var g=e.defaultExpandAll,o=e.defaultExpandParent,l=e.defaultExpandedKeys,a=xR(e,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]),r=t.useRef(),i=t.useRef(),C=Z(t.useState(a.selectedKeys||a.defaultSelectedKeys||[]),2),c=C[0],u=C[1],s=Z(t.useState((function(){return function(){var e=MW(MR(a)).keyEntities;return g?Object.keys(e):o?lR(a.expandedKeys||l||[],e):a.expandedKeys||l}()})),2),d=s[0],A=s[1];t.useEffect((function(){"selectedKeys"in a&&u(a.selectedKeys)}),[a.selectedKeys]),t.useEffect((function(){"expandedKeys"in a&&A(a.expandedKeys)}),[a.expandedKeys]);var m=t.useContext(Ee),b=m.getPrefixCls,p=m.direction,h=a.prefixCls,f=a.className,y=a.showIcon,v=void 0===y||y,G=a.expandAction,B=void 0===G?"click":G,S=xR(a,["prefixCls","className","showIcon","expandAction"]),V=b("tree",h),W=xe()("".concat(V,"-directory"),Ne({},"".concat(V,"-directory-rtl"),"rtl"===p),f);return t.createElement(tk,Ke({icon:ER,ref:n,blockNode:!0},S,{showIcon:v,expandAction:B,prefixCls:V,className:W,expandedKeys:d,selectedKeys:c,onSelect:function(e,t){var n,g,o=a.multiple,l=t.node,C=t.nativeEvent,c=l.key,s=void 0===c?"":c,A=MR(a),m=Ke(Ke({},t),{selected:!0}),b=(null===C||void 0===C?void 0:C.ctrlKey)||(null===C||void 0===C?void 0:C.metaKey),p=null===C||void 0===C?void 0:C.shiftKey;o&&b?(g=e,r.current=s,i.current=g,m.selectedNodes=FR(A,g)):o&&p?(g=Array.from(new Set([].concat(I(i.current||[]),I(KR({treeData:A,expandedKeys:d,startKey:s,endKey:r.current}))))),m.selectedNodes=FR(A,g)):(g=[s],r.current=s,i.current=g,m.selectedNodes=FR(A,g)),null===(n=a.onSelect)||void 0===n||n.call(a,g,m),"selectedKeys"in a||u(g)},onExpand:function(e,t){var n;return"expandedKeys"in a||A(e),null===(n=a.onExpand)||void 0===n?void 0:n.call(a,e,t)}}))};var LR=t.forwardRef(zR);function UR(e){var n,g=e.dropPosition,o=e.dropLevelOffset,l=e.prefixCls,a=e.indent,r=e.direction,I=void 0===r?"ltr":r,i="ltr"===I?"left":"right",C="ltr"===I?"right":"left",c=(Ne(n={},i,-o*a+4),Ne(n,C,0),n);switch(g){case-1:c.top=-3;break;case 1:c.bottom=-3;break;default:c.bottom=-3,c[i]=a+4}return t.createElement("div",{style:c,className:"".concat(l,"-drop-indicator")})}var QR={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},TR=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:QR}))};TR.displayName="CaretDownFilled";var DR=t.forwardRef(TR),jR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},PR=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:jR}))};PR.displayName="MinusSquareOutlined";var OR=t.forwardRef(PR),qR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},_R=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:qR}))};_R.displayName="PlusSquareOutlined";var $R=t.forwardRef(_R);var ek=t.forwardRef((function(e,n){var g,o=t.useContext(Ee),l=o.getPrefixCls,a=o.direction,r=o.virtual,I=e.prefixCls,i=e.className,C=e.showIcon,c=void 0!==C&&C,u=e.showLine,s=e.switcherIcon,d=e.blockNode,A=void 0!==d&&d,b=e.children,p=e.checkable,h=void 0!==p&&p,f=e.selectable,y=void 0===f||f,Z=e.draggable,v=e.motion,G=void 0===v?Ke(Ke({},Cp),{motionAppear:!1}):v,B=l("tree",I),S=Ke(Ke({},e),{checkable:h,selectable:y,showIcon:c,motion:G,blockNode:A,showLine:Boolean(u),dropIndicatorRender:UR}),V=t.useMemo((function(){if(!Z)return!1;var e={};switch(m(Z)){case"function":e.nodeDraggable=Z;break;case"object":e=Ke({},Z)}return!1!==e.icon&&(e.icon=e.icon||t.createElement(XW,null)),e}),[Z]);return t.createElement(BR,Ke({itemHeight:20,ref:n,virtual:r},S,{prefixCls:B,className:xe()((g={},Ne(g,"".concat(B,"-icon-hide"),!c),Ne(g,"".concat(B,"-block-node"),A),Ne(g,"".concat(B,"-unselectable"),!y),Ne(g,"".concat(B,"-rtl"),"rtl"===a),g),i),direction:a,checkable:h?t.createElement("span",{className:"".concat(B,"-checkbox-inner")}):h,selectable:y,switcherIcon:function(e){return function(e,n,g,o){var l,a=o.isLeaf,r=o.expanded;if(o.loading)return t.createElement(ih,{className:"".concat(e,"-switcher-loading-icon")});if(g&&"object"===m(g)&&(l=g.showLeafIcon),a){if(!g)return null;if("boolean"!==typeof l&&l){var I="function"===typeof l?l(o):l,i="".concat(e,"-switcher-line-custom-icon");return cp(I)?sp(I,{className:xe()(I.props.className||"",i)}):I}return l?t.createElement(WR,{className:"".concat(e,"-switcher-line-icon")}):t.createElement("span",{className:"".concat(e,"-switcher-leaf-line")})}var C="".concat(e,"-switcher-icon"),c="function"===typeof n?n(o):n;return cp(c)?sp(c,{className:xe()(c.props.className||"",C)}):c||(g?r?t.createElement(OR,{className:"".concat(e,"-switcher-line-icon")}):t.createElement($R,{className:"".concat(e,"-switcher-line-icon")}):t.createElement(DR,{className:C}))}(B,s,u,e)},draggable:V}),b)}));ek.TreeNode=PW,ek.DirectoryTree=LR;var tk=ek,nk=tk;var gk=function(e){var n,g=(0,t.useContext)(Ee),o=g.getPrefixCls,l=g.direction,a=e.prefixCls,r=e.className,I=void 0===r?"":r,i=o("input-group",a),C=xe()(i,(Ne(n={},"".concat(i,"-lg"),"large"===e.size),Ne(n,"".concat(i,"-sm"),"small"===e.size),Ne(n,"".concat(i,"-compact"),e.compact),Ne(n,"".concat(i,"-rtl"),"rtl"===l),n),I),c=(0,t.useContext)($S),u=(0,t.useMemo)((function(){return Ke(Ke({},c),{isFormItemInput:!1})}),[c]);return t.createElement("span",{className:C,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},t.createElement($S.Provider,{value:u},e.children))};function ok(e){return!(!e.addonBefore&&!e.addonAfter)}function lk(e){return!!(e.prefix||e.suffix||e.allowClear)}function ak(e,t,n,g){if(n){var o=t;if("click"===t.type){var l=e.cloneNode(!0);return o=Object.create(t,{target:{value:l},currentTarget:{value:l}}),l.value="",void n(o)}if(void 0!==g)return o=Object.create(t,{target:{value:e},currentTarget:{value:e}}),e.value=g,void n(o);n(o)}}function rk(e){return"undefined"===typeof e||null===e?"":String(e)}var Ik=function(e){var n=e.inputElement,g=e.prefixCls,o=e.prefix,l=e.suffix,a=e.addonBefore,r=e.addonAfter,I=e.className,i=e.style,C=e.affixWrapperClassName,c=e.groupClassName,u=e.wrapperClassName,s=e.disabled,d=e.readOnly,A=e.focused,b=e.triggerFocus,p=e.allowClear,h=e.value,f=e.handleReset,y=e.hidden,Z=(0,t.useRef)(null),v=(0,t.cloneElement)(n,{value:h,hidden:y});if(lk(e)){var G,B="".concat(g,"-affix-wrapper"),S=xe()(B,(Ne(G={},"".concat(B,"-disabled"),s),Ne(G,"".concat(B,"-focused"),A),Ne(G,"".concat(B,"-readonly"),d),Ne(G,"".concat(B,"-input-with-clear-btn"),l&&p&&h),G),!ok(e)&&I,C),V=(l||p)&&t.createElement("span",{className:"".concat(g,"-suffix")},function(){var e;if(!p)return null;var n=!s&&!d&&h,o="".concat(g,"-clear-icon"),a="object"===m(p)&&null!==p&&void 0!==p&&p.clearIcon?p.clearIcon:"\u2716";return t.createElement("span",{onClick:f,onMouseDown:function(e){return e.preventDefault()},className:xe()(o,(e={},Ne(e,"".concat(o,"-hidden"),!n),Ne(e,"".concat(o,"-has-suffix"),!!l),e)),role:"button",tabIndex:-1},a)}(),l);v=t.createElement("span",{className:S,style:i,hidden:!ok(e)&&y,onClick:function(e){var t;null!==(t=Z.current)&&void 0!==t&&t.contains(e.target)&&(null===b||void 0===b||b())},ref:Z},o&&t.createElement("span",{className:"".concat(g,"-prefix")},o),(0,t.cloneElement)(n,{style:null,value:h,hidden:null}),V)}if(ok(e)){var W="".concat(g,"-group"),R="".concat(W,"-addon"),k=xe()("".concat(g,"-wrapper"),W,u),X=xe()("".concat(g,"-group-wrapper"),I,c);return t.createElement("span",{className:X,style:i,hidden:y},t.createElement("span",{className:k},a&&t.createElement("span",{className:R},a),(0,t.cloneElement)(v,{style:null,hidden:null}),r&&t.createElement("span",{className:R},r)))}return v},ik=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","type","inputClassName"],Ck=(0,t.forwardRef)((function(e,n){var g=e.autoComplete,o=e.onChange,l=e.onFocus,a=e.onBlur,r=e.onPressEnter,i=e.onKeyDown,C=e.prefixCls,c=void 0===C?"rc-input":C,u=e.disabled,s=e.htmlSize,d=e.className,A=e.maxLength,b=e.suffix,p=e.showCount,h=e.type,f=void 0===h?"text":h,y=e.inputClassName,v=tt(e,ik),G=Z(rs(e.defaultValue,{value:e.value}),2),B=G[0],S=G[1],V=Z((0,t.useState)(!1),2),W=V[0],R=V[1],k=(0,t.useRef)(null),X=function(e){k.current&&function(e,t){if(e){e.focus(t);var n=(t||{}).cursor;if(n){var g=e.value.length;switch(n){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(g,g);break;default:e.setSelectionRange(0,g)}}}}(k.current,e)};(0,t.useImperativeHandle)(n,(function(){return{focus:X,blur:function(){var e;null===(e=k.current)||void 0===e||e.blur()},setSelectionRange:function(e,t,n){var g;null===(g=k.current)||void 0===g||g.setSelectionRange(e,t,n)},select:function(){var e;null===(e=k.current)||void 0===e||e.select()},input:k.current}})),(0,t.useEffect)((function(){R((function(e){return(!e||!u)&&e}))}),[u]);var J=function(t){void 0===e.value&&S(t.target.value),k.current&&ak(k.current,t,o)},Y=function(e){r&&"Enter"===e.key&&r(e),null===i||void 0===i||i(e)},w=function(e){R(!0),null===l||void 0===l||l(e)},H=function(e){R(!1),null===a||void 0===a||a(e)};return t.createElement(Ik,Ke({},v,{prefixCls:c,className:d,inputElement:function(){var n=hn(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","affixWrapperClassName","groupClassName","inputClassName","wrapperClassName","htmlSize"]);return t.createElement("input",Ke({autoComplete:g},n,{onChange:J,onFocus:w,onBlur:H,onKeyDown:Y,className:xe()(c,Ne({},"".concat(c,"-disabled"),u),y,!ok(e)&&!lk(e)&&d),ref:k,size:s,type:f}))}(),handleReset:function(e){S(""),X(),k.current&&ak(k.current,e,o)},value:rk(B),focused:W,triggerFocus:X,suffix:function(){var e=Number(A)>0;if(b||p){var n=rk(B),g=I(n).length,o="object"===m(p)?p.formatter({value:n,count:g,maxLength:A}):"".concat(g).concat(e?" / ".concat(A):"");return t.createElement(t.Fragment,null,!!p&&t.createElement("span",{className:xe()("".concat(c,"-show-count-suffix"),Ne({},"".concat(c,"-show-count-has-suffix"),!!b))},o),b)}return null}(),disabled:u}))})),ck=Ck;function uk(e,n){var g=(0,t.useRef)([]),o=function(){g.current.push(window.setTimeout((function(){var t,n,g,o;(null===(t=e.current)||void 0===t?void 0:t.input)&&"password"===(null===(n=e.current)||void 0===n?void 0:n.input.getAttribute("type"))&&(null===(g=e.current)||void 0===g?void 0:g.input.hasAttribute("value"))&&(null===(o=e.current)||void 0===o||o.input.removeAttribute("value"))})))};return(0,t.useEffect)((function(){return n&&o(),function(){return g.current.forEach((function(e){return window.clearTimeout(e)}))}}),[]),o}var sk=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n};function dk(e,t,n,g){if(n){var o=t;if("click"===t.type){var l=e.cloneNode(!0);return o=Object.create(t,{target:{value:l},currentTarget:{value:l}}),l.value="",void n(o)}if(void 0!==g)return o=Object.create(t,{target:{value:e},currentTarget:{value:e}}),e.value=g,void n(o);n(o)}}var Ak=(0,t.forwardRef)((function(e,n){var g,o,l,a=e.prefixCls,r=e.bordered,I=void 0===r||r,i=e.status,C=e.size,c=e.disabled,u=e.onBlur,s=e.onFocus,d=e.suffix,A=e.allowClear,b=e.addonAfter,p=e.addonBefore,h=e.className,f=e.onChange,y=sk(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","onChange"]),Z=t.useContext(Ee),v=Z.getPrefixCls,G=Z.direction,B=Z.input,S=v("input",a),V=(0,t.useRef)(null),W=$Z(S,G),R=W.compactSize,k=W.compactItemClassnames,X=t.useContext(Py),J=R||C||X,Y=t.useContext(Ty),w=null!==c&&void 0!==c?c:Y,H=(0,t.useContext)($S),N=H.status,K=H.hasFeedback,F=H.feedbackIcon,x=nV(N,i),E=function(e){return!!(e.prefix||e.suffix||e.allowClear)}(e)||!!K,M=(0,t.useRef)(E);(0,t.useEffect)((function(){E&&M.current,M.current=E}),[E]);var z,L=uk(V,!0),U=(K||d)&&t.createElement(t.Fragment,null,d,K&&F);return"object"===m(A)&&(null===A||void 0===A?void 0:A.clearIcon)?z=A:A&&(z={clearIcon:t.createElement($p,null)}),t.createElement(ck,Ke({ref:us(n,V),prefixCls:S,autoComplete:null===B||void 0===B?void 0:B.autoComplete},y,{disabled:w||void 0,onBlur:function(e){L(),null===u||void 0===u||u(e)},onFocus:function(e){L(),null===s||void 0===s||s(e)},suffix:U,allowClear:z,className:xe()(h,k),onChange:function(e){L(),null===f||void 0===f||f(e)},addonAfter:b&&t.createElement(ev,null,t.createElement(eV,{override:!0,status:!0},b)),addonBefore:p&&t.createElement(ev,null,t.createElement(eV,{override:!0,status:!0},p)),inputClassName:xe()((g={},Ne(g,"".concat(S,"-sm"),"small"===J),Ne(g,"".concat(S,"-lg"),"large"===J),Ne(g,"".concat(S,"-rtl"),"rtl"===G),Ne(g,"".concat(S,"-borderless"),!I),g),!E&&tV(S,x)),affixWrapperClassName:xe()((o={},Ne(o,"".concat(S,"-affix-wrapper-sm"),"small"===J),Ne(o,"".concat(S,"-affix-wrapper-lg"),"large"===J),Ne(o,"".concat(S,"-affix-wrapper-rtl"),"rtl"===G),Ne(o,"".concat(S,"-affix-wrapper-borderless"),!I),o),tV("".concat(S,"-affix-wrapper"),x,K)),wrapperClassName:xe()(Ne({},"".concat(S,"-group-rtl"),"rtl"===G)),groupClassName:xe()((l={},Ne(l,"".concat(S,"-group-wrapper-sm"),"small"===J),Ne(l,"".concat(S,"-group-wrapper-lg"),"large"===J),Ne(l,"".concat(S,"-group-wrapper-rtl"),"rtl"===G),l),tV("".concat(S,"-group-wrapper"),x,K))}))})),mk=Ak,bk={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},pk=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:bk}))};pk.displayName="EyeInvisibleOutlined";var hk=t.forwardRef(pk),fk={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},yk=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:fk}))};yk.displayName="EyeOutlined";var Zk=t.forwardRef(yk),vk=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},Gk=function(e){return e?t.createElement(Zk,null):t.createElement(hk,null)},Bk={click:"onClick",hover:"onMouseOver"};var Sk=t.forwardRef((function(e,n){var g=e.visibilityToggle,o=void 0===g||g,l="object"===m(o)&&void 0!==o.visible,a=Z((0,t.useState)((function(){return!!l&&o.visible})),2),r=a[0],I=a[1],i=(0,t.useRef)(null);t.useEffect((function(){l&&I(o.visible)}),[l,o]);var C=uk(i),c=function(){e.disabled||(r&&C(),I((function(e){var t,n=!e;return"object"===m(o)&&(null===(t=o.onVisibleChange)||void 0===t||t.call(o,n)),n})))},u=function(g){var l=g.getPrefixCls,a=e.className,I=e.prefixCls,C=e.inputPrefixCls,u=e.size,s=vk(e,["className","prefixCls","inputPrefixCls","size"]),d=l("input",C),A=l("input-password",I),m=o&&function(n){var g,o=e.action,l=void 0===o?"click":o,a=e.iconRender,I=Bk[l]||"",i=(void 0===a?Gk:a)(r),C=(Ne(g={},I,c),Ne(g,"className","".concat(n,"-icon")),Ne(g,"key","passwordIcon"),Ne(g,"onMouseDown",(function(e){e.preventDefault()})),Ne(g,"onMouseUp",(function(e){e.preventDefault()})),g);return t.cloneElement(t.isValidElement(i)?i:t.createElement("span",null,i),C)}(A),b=xe()(A,a,Ne({},"".concat(A,"-").concat(u),!!u)),p=Ke(Ke({},hn(s,["suffix","iconRender","visibilityToggle"])),{type:r?"text":"password",className:b,prefixCls:d,suffix:m});return u&&(p.size=u),t.createElement(mk,Ke({ref:us(n,i)},p))};return t.createElement(Me,null,u)})),Vk=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n};var Wk,Rk=t.forwardRef((function(e,n){var g,o,l=e.prefixCls,a=e.inputPrefixCls,r=e.className,I=e.size,i=e.suffix,C=e.enterButton,c=void 0!==C&&C,u=e.addonAfter,s=e.loading,d=e.disabled,A=e.onSearch,m=e.onChange,b=e.onCompositionStart,p=e.onCompositionEnd,h=Vk(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),f=t.useContext(Ee),y=f.getPrefixCls,Z=f.direction,v=t.useContext(Py),G=t.useRef(!1),B=y("input-search",l),S=y("input",a),V=$Z(B,Z).compactSize||I||v,W=t.useRef(null),R=function(e){var t;document.activeElement===(null===(t=W.current)||void 0===t?void 0:t.input)&&e.preventDefault()},k=function(e){var t,n;A&&A(null===(n=null===(t=W.current)||void 0===t?void 0:t.input)||void 0===n?void 0:n.value,e)},X="boolean"===typeof c?t.createElement(cV,null):null,J="".concat(B,"-button"),Y=c||{},w=Y.type&&!0===Y.type.__ANT_BUTTON;o=w||"button"===Y.type?sp(Y,Ke({onMouseDown:R,onClick:function(e){var t,n;null===(n=null===(t=null===Y||void 0===Y?void 0:Y.props)||void 0===t?void 0:t.onClick)||void 0===n||n.call(t,e),k(e)},key:"enterButton"},w?{className:J,size:V}:{})):t.createElement(kv,{className:J,type:c?"primary":void 0,size:V,disabled:d,key:"enterButton",onMouseDown:R,onClick:k,loading:s,icon:X},c),u&&(o=[o,sp(u,{key:"addonAfter"})]);var H=xe()(B,(Ne(g={},"".concat(B,"-rtl"),"rtl"===Z),Ne(g,"".concat(B,"-").concat(V),!!V),Ne(g,"".concat(B,"-with-button"),!!c),g),r);return t.createElement(mk,Ke({ref:us(W,n),onPressEnter:function(e){G.current||k(e)}},h,{size:V,onCompositionStart:function(e){G.current=!0,null===b||void 0===b||b(e)},onCompositionEnd:function(e){G.current=!1,null===p||void 0===p||p(e)},prefixCls:S,addonAfter:o,suffix:i,onChange:function(e){e&&e.target&&"click"===e.type&&A&&A(e.target.value,e),m&&m(e)},className:H,disabled:d}))})),kk="\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n  pointer-events: none !important;\n",Xk=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],Jk={};function Yk(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&Jk[n])return Jk[n];var g=window.getComputedStyle(e),o=g.getPropertyValue("box-sizing")||g.getPropertyValue("-moz-box-sizing")||g.getPropertyValue("-webkit-box-sizing"),l=parseFloat(g.getPropertyValue("padding-bottom"))+parseFloat(g.getPropertyValue("padding-top")),a=parseFloat(g.getPropertyValue("border-bottom-width"))+parseFloat(g.getPropertyValue("border-top-width")),r=Xk.map((function(e){return"".concat(e,":").concat(g.getPropertyValue(e))})).join(";"),I={sizingStyle:r,paddingSize:l,borderSize:a,boxSizing:o};return t&&n&&(Jk[n]=I),I}var wk=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],Hk=t.forwardRef((function(e,n){var g=e.prefixCls,o=void 0===g?"rc-textarea":g,l=(e.onPressEnter,e.defaultValue),a=e.value,r=e.autoSize,I=e.onResize,i=e.className,C=e.style,c=e.disabled,u=e.onChange,s=(e.onInternalAutoSize,tt(e,wk)),d=Z(rs(l,{value:a,postState:function(e){return null!==e&&void 0!==e?e:""}}),2),A=d[0],b=d[1],p=t.useRef();t.useImperativeHandle(n,(function(){return{textArea:p.current}}));var h=Z(t.useMemo((function(){return r&&"object"===m(r)?[r.minRows,r.maxRows]:[]}),[r]),2),f=h[0],y=h[1],v=!!r,G=Z(t.useState(2),2),B=G[0],S=G[1],V=Z(t.useState(),2),W=V[0],R=V[1],k=function(){S(0)};os((function(){v&&k()}),[a,f,y,v]),os((function(){if(0===B)S(1);else if(1===B){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Wk||((Wk=document.createElement("textarea")).setAttribute("tab-index","-1"),Wk.setAttribute("aria-hidden","true"),document.body.appendChild(Wk)),e.getAttribute("wrap")?Wk.setAttribute("wrap",e.getAttribute("wrap")):Wk.removeAttribute("wrap");var o=Yk(e,t),l=o.paddingSize,a=o.borderSize,r=o.boxSizing,I=o.sizingStyle;Wk.setAttribute("style","".concat(I,";").concat(kk)),Wk.value=e.value||e.placeholder||"";var i,C=void 0,c=void 0,u=Wk.scrollHeight;if("border-box"===r?u+=a:"content-box"===r&&(u-=l),null!==n||null!==g){Wk.value=" ";var s=Wk.scrollHeight-l;null!==n&&(C=s*n,"border-box"===r&&(C=C+l+a),u=Math.max(C,u)),null!==g&&(c=s*g,"border-box"===r&&(c=c+l+a),i=u>c?"":"hidden",u=Math.min(c,u))}var d={height:u,overflowY:i,resize:"none"};return C&&(d.minHeight=C),c&&(d.maxHeight=c),d}(p.current,!1,f,y);S(2),R(e)}else!function(){try{if(document.activeElement===p.current){var e=p.current,t=e.selectionStart,n=e.selectionEnd,g=e.scrollTop;p.current.setSelectionRange(t,n),p.current.scrollTop=g}}catch(HY){}}()}),[B]);var X=t.useRef(),J=function(){gd.cancel(X.current)};t.useEffect((function(){return J}),[]);var Y=v?W:null,w=$e($e({},C),Y);return 0!==B&&1!==B||(w.overflowY="hidden",w.overflowX="hidden"),t.createElement(Ts,{onResize:function(e){2===B&&(null===I||void 0===I||I(e),r&&(J(),X.current=gd((function(){k()}))))},disabled:!(r||I)},t.createElement("textarea",Ke({},s,{ref:p,style:w,className:xe()(o,i,Ne({},"".concat(o,"-disabled"),c)),disabled:c,value:A,onChange:function(e){b(e.target.value),null===u||void 0===u||u(e)}})))})),Nk=Hk,Kk=function(e){s(g,e);var n=h(g);function g(e){var t;i(this,g),(t=n.call(this,e)).resizableTextArea=void 0,t.focus=function(){t.resizableTextArea.textArea.focus()},t.saveTextArea=function(e){t.resizableTextArea=e},t.handleChange=function(e){var n=t.props.onChange;t.setValue(e.target.value),n&&n(e)},t.handleKeyDown=function(e){var n=t.props,g=n.onPressEnter,o=n.onKeyDown;13===e.keyCode&&g&&g(e),o&&o(e)};var o="undefined"===typeof e.value||null===e.value?e.defaultValue:e.value;return t.state={value:o},t}return c(g,[{key:"setValue",value:function(e,t){"value"in this.props||this.setState({value:e},t)}},{key:"blur",value:function(){this.resizableTextArea.textArea.blur()}},{key:"render",value:function(){return t.createElement(Nk,Ke({},this.props,{value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,ref:this.saveTextArea}))}}],[{key:"getDerivedStateFromProps",value:function(e){return"value"in e?{value:e.value}:null}}]),g}(t.Component),Fk=gp("text","input");var xk=function(e){s(g,e);var n=h(g);function g(){return i(this,g),n.apply(this,arguments)}return c(g,[{key:"renderClearIcon",value:function(e){var n,g=this.props,o=g.value,l=g.disabled,a=g.readOnly,r=g.handleReset,I=g.suffix,i=!l&&!a&&o,C="".concat(e,"-clear-icon");return t.createElement($p,{onClick:r,onMouseDown:function(e){return e.preventDefault()},className:xe()((n={},Ne(n,"".concat(C,"-hidden"),!i),Ne(n,"".concat(C,"-has-suffix"),!!I),n),C),role:"button"})}},{key:"renderTextAreaWithClearIcon",value:function(e,n,g){var o,l=this.props,a=l.value,r=l.allowClear,I=l.className,i=l.style,C=l.direction,c=l.bordered,u=l.hidden,s=l.status,d=g.status,A=g.hasFeedback;if(!r)return sp(n,{value:a});var m,b=xe()("".concat(e,"-affix-wrapper"),"".concat(e,"-affix-wrapper-textarea-with-clear-btn"),tV("".concat(e,"-affix-wrapper"),nV(d,s),A),(Ne(o={},"".concat(e,"-affix-wrapper-rtl"),"rtl"===C),Ne(o,"".concat(e,"-affix-wrapper-borderless"),!c),Ne(o,"".concat(I),!((m=this.props).addonBefore||m.addonAfter)&&I),o));return t.createElement("span",{className:b,style:i,hidden:u},sp(n,{style:null,value:a}),this.renderClearIcon(e))}},{key:"render",value:function(){var e=this;return t.createElement($S.Consumer,null,(function(t){var n=e.props,g=n.prefixCls,o=n.inputType,l=n.element;if(o===Fk[0])return e.renderTextAreaWithClearIcon(g,l,t)}))}}]),g}(t.Component),Ek=xk,Mk=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n};function zk(e,t){return I(e||"").slice(0,t).join("")}function Lk(e,t,n,g){var o=n;return e?o=zk(n,g):I(t||"").length<n.length&&I(n||"").length>g&&(o=t),o}var Uk=t.forwardRef((function(e,n){var g,o=e.prefixCls,l=e.bordered,a=void 0===l||l,r=e.showCount,i=void 0!==r&&r,C=e.maxLength,c=e.className,u=e.style,s=e.size,d=e.disabled,A=e.onCompositionStart,b=e.onCompositionEnd,p=e.onChange,h=e.status,f=Mk(e,["prefixCls","bordered","showCount","maxLength","className","style","size","disabled","onCompositionStart","onCompositionEnd","onChange","status"]),y=t.useContext(Ee),v=y.getPrefixCls,G=y.direction,B=t.useContext(Py),S=t.useContext(Ty),V=null!==d&&void 0!==d?d:S,W=t.useContext($S),R=W.status,k=W.hasFeedback,X=W.isFormItemInput,J=W.feedbackIcon,Y=nV(R,h),w=t.useRef(null),H=t.useRef(null),N=Z(t.useState(!1),2),K=N[0],F=N[1],x=t.useRef(),E=t.useRef(0),M=Z(rs(f.defaultValue,{value:f.value}),2),z=M[0],L=M[1],U=f.hidden,Q=function(e,t){void 0===f.value&&(L(e),null===t||void 0===t||t())},T=Number(C)>0,D=v("input",o);t.useImperativeHandle(n,(function(){var e;return{resizableTextArea:null===(e=w.current)||void 0===e?void 0:e.resizableTextArea,focus:function(e){var t,n;!function(e,t){if(e){e.focus(t);var n=(t||{}).cursor;if(n){var g=e.value.length;switch(n){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(g,g);break;default:e.setSelectionRange(0,g)}}}}(null===(n=null===(t=w.current)||void 0===t?void 0:t.resizableTextArea)||void 0===n?void 0:n.textArea,e)},blur:function(){var e;return null===(e=w.current)||void 0===e?void 0:e.blur()}}}));var j=t.createElement(Kk,Ke({},hn(f,["allowClear"]),{disabled:V,className:xe()((g={},Ne(g,"".concat(D,"-borderless"),!a),Ne(g,c,c&&!i),Ne(g,"".concat(D,"-sm"),"small"===B||"small"===s),Ne(g,"".concat(D,"-lg"),"large"===B||"large"===s),g),tV(D,Y)),style:i?{resize:null===u||void 0===u?void 0:u.resize}:u,prefixCls:D,onCompositionStart:function(e){F(!0),x.current=z,E.current=e.currentTarget.selectionStart,null===A||void 0===A||A(e)},onChange:function(e){var t=e.target.value;!K&&T&&(t=Lk(e.target.selectionStart>=C+1||e.target.selectionStart===t.length||!e.target.selectionStart,z,t,C));Q(t),dk(e.currentTarget,e,p,t)},onCompositionEnd:function(e){var t;F(!1);var n=e.currentTarget.value;T&&(n=Lk(E.current>=C+1||E.current===(null===(t=x.current)||void 0===t?void 0:t.length),x.current,n,C));n!==z&&(Q(n),dk(e.currentTarget,e,p,n)),null===b||void 0===b||b(e)},ref:w})),P=function(e){return"undefined"===typeof e||null===e?"":String(e)}(z);K||!T||null!==f.value&&void 0!==f.value||(P=zk(P,C));var O=t.createElement(Ek,Ke({disabled:V},f,{prefixCls:D,direction:G,inputType:"text",value:P,element:j,handleReset:function(e){var t,n,g;Q(""),null===(t=w.current)||void 0===t||t.focus(),dk(null===(g=null===(n=w.current)||void 0===n?void 0:n.resizableTextArea)||void 0===g?void 0:g.textArea,e,p)},ref:H,bordered:a,status:h,style:i?void 0:u}));if(i||k){var q,_=I(P).length,$="";return $="object"===m(i)?i.formatter({value:P,count:_,maxLength:C}):"".concat(_).concat(T?" / ".concat(C):""),t.createElement("div",{hidden:U,className:xe()("".concat(D,"-textarea"),(q={},Ne(q,"".concat(D,"-textarea-rtl"),"rtl"===G),Ne(q,"".concat(D,"-textarea-show-count"),i),Ne(q,"".concat(D,"-textarea-in-form-item"),X),q),tV("".concat(D,"-textarea"),Y,k),c),style:u,"data-count":$},O,k&&t.createElement("span",{className:"".concat(D,"-textarea-suffix")},J))}return O})),Qk=Uk,Tk=mk;Tk.Group=gk,Tk.Search=Rk,Tk.TextArea=Qk,Tk.Password=Sk;var Dk=Tk;var jk=function(e){var n=e.value,g=e.onChange,o=e.filterSearch,l=e.tablePrefixCls,a=e.locale;return o?t.createElement("div",{className:"".concat(l,"-filter-dropdown-search")},t.createElement(Dk,{prefix:t.createElement(cV,null),placeholder:a.filterSearchPlaceholder,onChange:g,value:n,htmlSize:1,className:"".concat(l,"-filter-dropdown-search-input")})):null},Pk=function(e){return t.createElement("div",{className:e.className,onClick:function(e){return e.stopPropagation()}},e.children)};function Ok(e,t){return("string"===typeof t||"number"===typeof t)&&(null===t||void 0===t?void 0:t.toString().toLowerCase().includes(e.trim().toLowerCase()))}function qk(e){var n=e.filters,g=e.prefixCls,o=e.filteredKeys,l=e.filterMultiple,a=e.searchValue,r=e.filterSearch;return n.map((function(e,n){var I=String(e.value);if(e.children)return{key:I||n,label:e.text,popupClassName:"".concat(g,"-dropdown-submenu"),children:qk({filters:e.children,prefixCls:g,filteredKeys:o,filterMultiple:l,searchValue:a,filterSearch:r})};var i=l?$V:WW,C={key:void 0!==e.value?I:n,label:t.createElement(t.Fragment,null,t.createElement(i,{checked:o.includes(I)}),t.createElement("span",null,e.text))};return a.trim()?"function"===typeof r?r(a,e)?C:null:Ok(a,e.text)?C:null:C}))}var _k=function(e){var n,g,o=e.tablePrefixCls,l=e.prefixCls,a=e.column,r=e.dropdownPrefixCls,I=e.columnKey,i=e.filterMultiple,C=e.filterMode,c=void 0===C?"menu":C,u=e.filterSearch,s=void 0!==u&&u,d=e.filterState,A=e.triggerFilter,m=e.locale,b=e.children,p=e.getPopupContainer,h=a.filterDropdownOpen,f=a.onFilterDropdownOpenChange,y=a.filterDropdownVisible,v=a.onFilterDropdownVisibleChange,G=a.filterResetToDefaultFilteredValue,B=a.defaultFilteredValue,S=Z(t.useState(!1),2),V=S[0],W=S[1],R=!(!d||!(null===(n=d.filteredKeys)||void 0===n?void 0:n.length)&&!d.forceFiltered),k=function(e){W(e),null===f||void 0===f||f(e),null===v||void 0===v||v(e)};g="boolean"===typeof h?h:"boolean"===typeof y?y:V;var X=null===d||void 0===d?void 0:d.filteredKeys,J=Z(function(e){var n=t.useRef(e),g=uB();return[function(){return n.current},function(e){n.current=e,g()}]}(X||[]),2),Y=J[0],w=J[1],H=function(e){var t=e.selectedKeys;w(t)},N=function(e,t){var n=t.node,g=t.checked;H(i?{selectedKeys:e}:{selectedKeys:g&&n.key?[n.key]:[]})};t.useEffect((function(){V&&H({selectedKeys:X||[]})}),[X]);var K=Z(t.useState([]),2),F=K[0],x=K[1],E=function(e){x(e)},M=Z(t.useState(""),2),z=M[0],L=M[1],U=function(e){var t=e.target.value;L(t)};t.useEffect((function(){V||L("")}),[V]);var Q,T,D=function(e){var t=e&&e.length?e:null;return null!==t||d&&d.filteredKeys?Pm()(t,null===d||void 0===d?void 0:d.filteredKeys)?null:void A({column:a,key:I,filteredKeys:t}):null},j=function(){k(!1),D(Y())},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{confirm:!1,closeDropdown:!1},t=e.confirm,n=e.closeDropdown;t&&D([]),n&&k(!1),L(""),w(G?(B||[]).map((function(e){return String(e)})):[])},O=xe()(Ne({},"".concat(r,"-menu-without-submenu"),!(a.filters||[]).some((function(e){return e.children})))),q=function(e){if(e.target.checked){var t=tX(null===a||void 0===a?void 0:a.filters).map((function(e){return String(e)}));w(t)}else w([])},_=function e(t){return(t.filters||[]).map((function(t,n){var g=String(t.value),o={title:t.text,key:void 0!==t.value?g:n};return t.children&&(o.children=e({filters:t.children})),o}))},$=function e(t){var n;return Ke(Ke({},t),{text:t.title,value:t.key,children:(null===(n=t.children)||void 0===n?void 0:n.map((function(t){return e(t)})))||[]})};if("function"===typeof a.filterDropdown)Q=a.filterDropdown({prefixCls:"".concat(r,"-custom"),setSelectedKeys:function(e){return H({selectedKeys:e})},selectedKeys:Y(),confirm:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{closeDropdown:!0}).closeDropdown&&k(!1),D(Y())},clearFilters:P,filters:a.filters,visible:g,close:function(){k(!1)}});else if(a.filterDropdown)Q=a.filterDropdown;else{var ee=Y()||[];Q=t.createElement(t.Fragment,null,0===(a.filters||[]).length?t.createElement(CB,{image:CB.PRESENTED_IMAGE_SIMPLE,description:m.filterEmptyText,imageStyle:{height:24},style:{margin:0,padding:"16px 0"}}):"tree"===c?t.createElement(t.Fragment,null,t.createElement(jk,{filterSearch:s,value:z,onChange:U,tablePrefixCls:o,locale:m}),t.createElement("div",{className:"".concat(o,"-filter-dropdown-tree")},i?t.createElement($V,{checked:ee.length===tX(a.filters).length,indeterminate:ee.length>0&&ee.length<tX(a.filters).length,className:"".concat(o,"-filter-dropdown-checkall"),onChange:q},m.filterCheckall):null,t.createElement(nk,{checkable:!0,selectable:!1,blockNode:!0,multiple:i,checkStrictly:!i,className:"".concat(r,"-menu"),onCheck:N,checkedKeys:ee,selectedKeys:ee,showIcon:!1,treeData:_({filters:a.filters}),autoExpandParent:!0,defaultExpandAll:!0,filterTreeNode:z.trim()?function(e){return"function"===typeof s?s(z,$(e)):Ok(z,e.title)}:void 0}))):t.createElement(t.Fragment,null,t.createElement(jk,{filterSearch:s,value:z,onChange:U,tablePrefixCls:o,locale:m}),t.createElement(Dp,{selectable:!0,multiple:i,prefixCls:"".concat(r,"-menu"),className:O,onSelect:H,onDeselect:H,selectedKeys:ee,getPopupContainer:p,openKeys:F,onOpenChange:E,items:qk({filters:a.filters||[],filterSearch:s,prefixCls:l,filteredKeys:Y(),filterMultiple:i,searchValue:z})})),t.createElement("div",{className:"".concat(l,"-dropdown-btns")},t.createElement(kv,{type:"link",size:"small",disabled:G?Pm()((B||[]).map((function(e){return String(e)})),ee):0===ee.length,onClick:function(){return P()}},m.filterReset),t.createElement(kv,{type:"primary",size:"small",onClick:j},m.filterConfirm)))}a.filterDropdown&&(Q=t.createElement(zp,{selectable:void 0},Q)),T="function"===typeof a.filterIcon?a.filterIcon(R):a.filterIcon?a.filterIcon:t.createElement(MV,null);var te=t.useContext(Ee).direction;return t.createElement("div",{className:"".concat(l,"-column")},t.createElement("span",{className:"".concat(o,"-column-title")},b),t.createElement(sW,{dropdownRender:function(){return t.createElement(Pk,{className:"".concat(l,"-dropdown")},Q)},trigger:["click"],open:g,onOpenChange:function(e){e&&void 0!==X&&w(X||[]),k(e),e||a.filterDropdown||j()},getPopupContainer:p,placement:"rtl"===te?"bottomLeft":"bottomRight"},t.createElement("span",{role:"button",tabIndex:-1,className:xe()("".concat(l,"-trigger"),{active:R}),onClick:function(e){e.stopPropagation()}},T)))};function $k(e,t,n){var g=[];return(e||[]).forEach((function(e,o){var l,a=KV(o,n);if(e.filters||"filterDropdown"in e||"onFilter"in e)if("filteredValue"in e){var r=e.filteredValue;"filterDropdown"in e||(r=null!==(l=null===r||void 0===r?void 0:r.map(String))&&void 0!==l?l:r),g.push({column:e,key:NV(e,a),filteredKeys:r,forceFiltered:e.filtered})}else g.push({column:e,key:NV(e,a),filteredKeys:t&&e.defaultFilteredValue?e.defaultFilteredValue:void 0,forceFiltered:e.filtered});"children"in e&&(g=[].concat(I(g),I($k(e.children,t,a))))})),g}function eX(e,n,g,o,l,a,r,I){return g.map((function(g,i){var C=KV(i,I),c=g.filterMultiple,u=void 0===c||c,s=g.filterMode,d=g.filterSearch,A=g;if(A.filters||A.filterDropdown){var m=NV(A,C),b=o.find((function(e){var t=e.key;return m===t}));A=Ke(Ke({},A),{title:function(o){return t.createElement(_k,{tablePrefixCls:e,prefixCls:"".concat(e,"-filter"),dropdownPrefixCls:n,column:A,columnKey:m,filterState:b,filterMultiple:u,filterMode:s,filterSearch:d,triggerFilter:l,locale:r,getPopupContainer:a},FV(g.title,o))}})}return"children"in A&&(A=Ke(Ke({},A),{children:eX(e,n,A.children,o,l,a,r,C)})),A}))}function tX(e){var t=[];return(e||[]).forEach((function(e){var n=e.value,g=e.children;t.push(n),g&&(t=[].concat(I(t),I(tX(g))))})),t}function nX(e){var t={};return e.forEach((function(e){var n=e.key,g=e.filteredKeys,o=e.column,l=o.filters;if(o.filterDropdown)t[n]=g||null;else if(Array.isArray(g)){var a=tX(l);t[n]=a.filter((function(e){return g.includes(String(e))}))}else t[n]=null})),t}function gX(e,t){return t.reduce((function(e,t){var n=t.column,g=n.onFilter,o=n.filters,l=t.filteredKeys;return g&&l&&l.length?e.filter((function(e){return l.some((function(t){var n=tX(o),l=n.findIndex((function(e){return String(e)===String(t)})),a=-1!==l?n[l]:t;return g(a,e)}))})):e}),e)}var oX=function(e){var n=e.prefixCls,g=e.dropdownPrefixCls,o=e.mergedColumns,l=e.onFilterChange,a=e.getPopupContainer,r=e.locale,I=Z(t.useState((function(){return $k(o,!0)})),2),i=I[0],C=I[1],c=t.useMemo((function(){var e=$k(o,!1),t=!0;return e.forEach((function(e){void 0!==e.filteredKeys?t=!1:!1})),t?i:e}),[o,i]),u=t.useMemo((function(){return nX(c)}),[c]),s=function(e){var t=c.filter((function(t){return t.key!==e.key}));t.push(e),C(t),l(nX(t),t)};return[function(e){return eX(n,g,e,c,s,a,r)},c,u]};var lX=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n};function aX(e,n,g){var o=n&&"object"===m(n)?n:{},l=o.total,a=void 0===l?0:l,r=lX(o,["total"]),I=Z((0,t.useState)((function(){return{current:"defaultCurrent"in r?r.defaultCurrent:1,pageSize:"defaultPageSize"in r?r.defaultPageSize:10}})),2),i=I[0],C=I[1],c=function(){for(var e={},t=arguments.length,n=new Array(t),g=0;g<t;g++)n[g]=arguments[g];return n.forEach((function(t){t&&Object.keys(t).forEach((function(n){var g=t[n];void 0!==g&&(e[n]=g)}))})),e}(i,r,{total:a>0?a:e}),u=Math.ceil((a||e)/c.pageSize);c.current>u&&(c.current=u||1);var s=function(e,t){C({current:null!==e&&void 0!==e?e:1,pageSize:t||c.pageSize})};return!1===n?[{},function(){}]:[Ke(Ke({},c),{onChange:function(e,t){var o;n&&(null===(o=n.onChange)||void 0===o||o.call(n,e,t)),s(e,t),g(e,t||(null===c||void 0===c?void 0:c.pageSize))}}),s]}var rX={},IX="SELECT_ALL",iX="SELECT_INVERT",CX="SELECT_NONE",cX=[];function uX(e,t){var n=[];return(e||[]).forEach((function(e){n.push(e),e&&"object"===m(e)&&t in e&&(n=[].concat(I(n),I(uX(e[t],t))))})),n}function sX(e,n){var g=e||{},o=g.preserveSelectedRowKeys,l=g.selectedRowKeys,a=g.defaultSelectedRowKeys,r=g.getCheckboxProps,i=g.onChange,C=g.onSelect,c=g.onSelectAll,u=g.onSelectInvert,s=g.onSelectNone,d=g.onSelectMultiple,A=g.columnWidth,m=g.type,b=g.selections,p=g.fixed,h=g.renderCell,f=g.hideSelectAll,y=g.checkStrictly,v=void 0===y||y,G=n.prefixCls,B=n.data,S=n.pageData,V=n.getRecordByKey,W=n.getRowKey,R=n.expandType,k=n.childrenColumnName,X=n.locale,J=n.getPopupContainer,Y=Z(rs(l||a||cX,{value:l}),2),w=Y[0],H=Y[1],N=t.useRef(new Map),K=(0,t.useCallback)((function(e){if(o){var t=new Map;e.forEach((function(e){var n=V(e);!n&&N.current.has(e)&&(n=N.current.get(e)),t.set(e,n)})),N.current=t}}),[V,o]);t.useEffect((function(){K(w)}),[w]);var F=(0,t.useMemo)((function(){return v?{keyEntities:null}:MW(B,{externalGetKey:W,childrenPropName:k})}),[B,W,v,k]).keyEntities,x=(0,t.useMemo)((function(){return uX(S,k)}),[S,k]),E=(0,t.useMemo)((function(){var e=new Map;return x.forEach((function(t,n){var g=W(t,n),o=(r?r(t):null)||{};e.set(g,o)})),e}),[x,W,r]),M=(0,t.useCallback)((function(e){var t;return!!(null===(t=E.get(W(e)))||void 0===t?void 0:t.disabled)}),[E,W]),z=Z((0,t.useMemo)((function(){if(v)return[w||[],[]];var e=vR(w,!0,F,M);return[e.checkedKeys||[],e.halfCheckedKeys]}),[w,v,F,M]),2),L=z[0],U=z[1],Q=(0,t.useMemo)((function(){var e="radio"===m?L.slice(0,1):L;return new Set(e)}),[L,m]),T=(0,t.useMemo)((function(){return"radio"===m?new Set:new Set(U)}),[U,m]),D=Z((0,t.useState)(null),2),j=D[0],P=D[1];t.useEffect((function(){e||H(cX)}),[!!e]);var O=(0,t.useCallback)((function(e,t){var n,g;K(e),o?(n=e,g=e.map((function(e){return N.current.get(e)}))):(n=[],g=[],e.forEach((function(e){var t=V(e);void 0!==t&&(n.push(e),g.push(t))}))),H(n),null===i||void 0===i||i(n,g,{type:t})}),[H,V,i,o]),q=(0,t.useCallback)((function(e,t,n,g){if(C){var o=n.map((function(e){return V(e)}));C(V(e),t,o,g)}O(n,"single")}),[C,V,O]),_=(0,t.useMemo)((function(){return!b||f?null:(!0===b?[IX,iX,CX]:b).map((function(e){return e===IX?{key:"all",text:X.selectionAll,onSelect:function(){O(B.map((function(e,t){return W(e,t)})).filter((function(e){var t=E.get(e);return!(null===t||void 0===t?void 0:t.disabled)||Q.has(e)})),"all")}}:e===iX?{key:"invert",text:X.selectInvert,onSelect:function(){var e=new Set(Q);S.forEach((function(t,n){var g=W(t,n),o=E.get(g);(null===o||void 0===o?void 0:o.disabled)||(e.has(g)?e.delete(g):e.add(g))}));var t=Array.from(e);u&&u(t),O(t,"invert")}}:e===CX?{key:"none",text:X.selectNone,onSelect:function(){null===s||void 0===s||s(),O(Array.from(Q).filter((function(e){var t=E.get(e);return null===t||void 0===t?void 0:t.disabled})),"none")}}:e})).map((function(e){return Ke(Ke({},e),{onSelect:function(){for(var t,n,g=arguments.length,o=new Array(g),l=0;l<g;l++)o[l]=arguments[l];null===(n=e.onSelect)||void 0===n||(t=n).call.apply(t,[e].concat(o)),P(null)}})}))}),[b,Q,S,W,u,O]),$=(0,t.useCallback)((function(n){var g;if(!e)return n.filter((function(e){return e!==rX}));var o,l,a=I(n),r=new Set(Q),i=x.map(W).filter((function(e){return!E.get(e).disabled})),C=i.every((function(e){return r.has(e)})),u=i.some((function(e){return r.has(e)}));if("radio"!==m){var s;if(_){var b={getPopupContainer:J,items:_.map((function(e,t){var n=e.key,g=e.text,o=e.onSelect;return{key:n||t,onClick:function(){null===o||void 0===o||o(i)},label:g}}))};s=t.createElement("div",{className:"".concat(G,"-selection-extra")},t.createElement(sW,{menu:b,getPopupContainer:J},t.createElement("span",null,t.createElement(IV,null))))}var y=x.map((function(e,t){var n=W(e,t),g=E.get(n)||{};return Ke({checked:r.has(n)},g)})).filter((function(e){return e.disabled})),Z=!!y.length&&y.length===x.length,B=Z&&y.every((function(e){return e.checked})),S=Z&&y.some((function(e){return e.checked}));o=!f&&t.createElement("div",{className:"".concat(G,"-selection")},t.createElement($V,{checked:Z?B:!!x.length&&C,indeterminate:Z?!B&&S:!C&&u,onChange:function(){var e=[];C?i.forEach((function(t){r.delete(t),e.push(t)})):i.forEach((function(t){r.has(t)||(r.add(t),e.push(t))}));var t=Array.from(r);null===c||void 0===c||c(!C,t.map((function(e){return V(e)})),e.map((function(e){return V(e)}))),O(t,"all"),P(null)},disabled:0===x.length||Z,"aria-label":s?"Custom selection":"Select all",skipGroup:!0}),s)}l="radio"===m?function(e,n,g){var o=W(n,g),l=r.has(o);return{node:t.createElement(WW,Ke({},E.get(o),{checked:l,onClick:function(e){return e.stopPropagation()},onChange:function(e){r.has(o)||q(o,!0,[o],e.nativeEvent)}})),checked:l}}:function(e,n,g){var o,l,a=W(n,g),C=r.has(a),c=T.has(a),u=E.get(a);return l="nest"===R?c:null!==(o=null===u||void 0===u?void 0:u.indeterminate)&&void 0!==o?o:c,{node:t.createElement($V,Ke({},u,{indeterminate:l,checked:C,skipGroup:!0,onClick:function(e){return e.stopPropagation()},onChange:function(e){var t=e.nativeEvent,n=t.shiftKey,g=-1,o=-1;if(n&&v){var l=new Set([j,a]);i.some((function(e,t){if(l.has(e)){if(-1!==g)return o=t,!0;g=t}return!1}))}if(-1!==o&&g!==o&&v){var c=i.slice(g,o+1),u=[];C?c.forEach((function(e){r.has(e)&&(u.push(e),r.delete(e))})):c.forEach((function(e){r.has(e)||(u.push(e),r.add(e))}));var s=Array.from(r);null===d||void 0===d||d(!C,s.map((function(e){return V(e)})),u.map((function(e){return V(e)}))),O(s,"multiple")}else{var A=L;if(v){var m=C?OW(A,a):qW(A,a);q(a,!C,m,t)}else{var b=vR([].concat(I(A),[a]),!0,F,M),p=b.checkedKeys,h=b.halfCheckedKeys,f=p;if(C){var y=new Set(p);y.delete(a),f=vR(Array.from(y),{checked:!1,halfCheckedKeys:h},F,M).checkedKeys}q(a,!C,f,t)}}P(C?null:a)}})),checked:C}};if(!a.includes(rX))if(0===a.findIndex((function(e){var t;return"EXPAND_COLUMN"===(null===(t=e[SG])||void 0===t?void 0:t.columnType)}))){var k=If(a),X=k[0],Y=k.slice(1);a=[X,rX].concat(I(Y))}else a=[rX].concat(I(a));var w=a.indexOf(rX);a=a.filter((function(e,t){return e!==rX||t===w}));var H=a[w-1],N=a[w+1],K=p;void 0===K&&(void 0!==(null===N||void 0===N?void 0:N.fixed)?K=N.fixed:void 0!==(null===H||void 0===H?void 0:H.fixed)&&(K=H.fixed)),K&&H&&"EXPAND_COLUMN"===(null===(g=H[SG])||void 0===g?void 0:g.columnType)&&void 0===H.fixed&&(H.fixed=K);var z=Ne({fixed:K,width:A,className:"".concat(G,"-selection-column"),title:e.columnTitle||o,render:function(e,t,n){var g=l(e,t,n),o=g.node,a=g.checked;return h?h(a,t,n,o):o}},SG,{className:"".concat(G,"-selection-col")});return a.map((function(e){return e===rX?z:e}))}),[W,x,e,L,Q,T,A,_,R,j,E,d,q,M]);return[$,Q]}var dX={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"},AX=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:dX}))};AX.displayName="CaretDownOutlined";var mX=t.forwardRef(AX),bX={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"}}]},name:"caret-up",theme:"outlined"},pX=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:bX}))};pX.displayName="CaretUpOutlined";var hX=t.forwardRef(pX),fX="ascend",yX="descend";function ZX(e){return"object"===m(e.sorter)&&"number"===typeof e.sorter.multiple&&e.sorter.multiple}function vX(e){return"function"===typeof e?e:!(!e||"object"!==m(e)||!e.compare)&&e.compare}function GX(e,t,n){var g=[];function o(e,t){g.push({column:e,key:NV(e,t),multiplePriority:ZX(e),sortOrder:e.sortOrder})}return(e||[]).forEach((function(e,l){var a=KV(l,n);e.children?("sortOrder"in e&&o(e,a),g=[].concat(I(g),I(GX(e.children,t,a)))):e.sorter&&("sortOrder"in e?o(e,a):t&&e.defaultSortOrder&&g.push({column:e,key:NV(e,a),multiplePriority:ZX(e),sortOrder:e.defaultSortOrder}))})),g}function BX(e,n,g,o,l,a,r,I){return(n||[]).map((function(n,i){var C=KV(i,I),c=n;if(c.sorter){var u=c.sortDirections||l,s=void 0===c.showSorterTooltip?r:c.showSorterTooltip,d=NV(c,C),A=g.find((function(e){return e.key===d})),b=A?A.sortOrder:null,p=function(e,t){return t?e[e.indexOf(t)+1]:e[0]}(u,b),h=u.includes(fX)&&t.createElement(hX,{className:xe()("".concat(e,"-column-sorter-up"),{active:b===fX}),role:"presentation"}),f=u.includes(yX)&&t.createElement(mX,{className:xe()("".concat(e,"-column-sorter-down"),{active:b===yX}),role:"presentation"}),y=a||{},Z=y.cancelSort,v=y.triggerAsc,G=y.triggerDesc,B=Z;p===yX?B=G:p===fX&&(B=v);var S="object"===m(s)?s:{title:B};c=Ke(Ke({},c),{className:xe()(c.className,Ne({},"".concat(e,"-column-sort"),b)),title:function(g){var o=t.createElement("div",{className:"".concat(e,"-column-sorters")},t.createElement("span",{className:"".concat(e,"-column-title")},FV(n.title,g)),t.createElement("span",{className:xe()("".concat(e,"-column-sorter"),Ne({},"".concat(e,"-column-sorter-full"),!(!h||!f)))},t.createElement("span",{className:"".concat(e,"-column-sorter-inner")},h,f)));return s?t.createElement(Jp,Ke({},S),o):o},onHeaderCell:function(t){var g,l=n.onHeaderCell&&n.onHeaderCell(t)||{},a=l.onClick,r=l.onKeyDown;return l.onClick=function(e){o({column:n,key:d,sortOrder:p,multiplePriority:ZX(n)}),null===a||void 0===a||a(e)},l.onKeyDown=function(e){e.keyCode===hd.ENTER&&(o({column:n,key:d,sortOrder:p,multiplePriority:ZX(n)}),null===r||void 0===r||r(e))},b?l["aria-sort"]="ascend"===b?"ascending":"descending":l["aria-label"]="".concat(FV(n.title,{})," sortable"),l.className=xe()(l.className,"".concat(e,"-column-has-sorters")),l.tabIndex=0,n.ellipsis&&(l.title=(null!==(g=FV(n.title,{}))&&void 0!==g?g:"").toString()),l}})}return"children"in c&&(c=Ke(Ke({},c),{children:BX(e,c.children,g,o,l,a,r,C)})),c}))}function SX(e){var t=e.column;return{column:t,order:e.sortOrder,field:t.dataIndex,columnKey:t.key}}function VX(e){var t=e.filter((function(e){return e.sortOrder})).map(SX);return 0===t.length&&e.length?Ke(Ke({},SX(e[e.length-1])),{column:void 0}):t.length<=1?t[0]||{}:t}function WX(e,t,n){var g=t.slice().sort((function(e,t){return t.multiplePriority-e.multiplePriority})),o=e.slice(),l=g.filter((function(e){var t=e.column.sorter,n=e.sortOrder;return vX(t)&&n}));return l.length?o.sort((function(e,t){for(var n=0;n<l.length;n+=1){var g=l[n],o=g.column.sorter,a=g.sortOrder,r=vX(o);if(r&&a){var I=r(e,t,a);if(0!==I)return a===fX?I:-I}}return 0})).map((function(e){var g=e[n];return g?Ke(Ke({},e),Ne({},n,WX(g,t,n))):e})):o}function RX(e){var n=e.prefixCls,g=e.mergedColumns,o=e.onSorterChange,l=e.sortDirections,a=e.tableLocale,r=e.showSorterTooltip,i=Z(t.useState(GX(g,!0)),2),C=i[0],c=i[1],u=t.useMemo((function(){var e=!0,t=GX(g,!1);if(!t.length)return C;var n=[];function o(t){e?n.push(t):n.push(Ke(Ke({},t),{sortOrder:null}))}var l=null;return t.forEach((function(t){null===l?(o(t),t.sortOrder&&(!1===t.multiplePriority?e=!1:l=!0)):(l&&!1!==t.multiplePriority||(e=!1),o(t))})),n}),[g,C]),s=t.useMemo((function(){var e=u.map((function(e){return{column:e.column,order:e.sortOrder}}));return{sortColumns:e,sortColumn:e[0]&&e[0].column,sortOrder:e[0]&&e[0].order}}),[u]);function d(e){var t;t=!1!==e.multiplePriority&&u.length&&!1!==u[0].multiplePriority?[].concat(I(u.filter((function(t){return t.key!==e.key}))),[e]):[e],c(t),o(VX(t),t)}return[function(e){return BX(n,e,u,d,l,a,r)},u,s,function(){return VX(u)}]}function kX(e,t){return e.map((function(e){var n=Ke({},e);return n.title=FV(e.title,t),"children"in n&&(n.children=kX(n.children,t)),n}))}function XX(e){var n=t.useCallback((function(t){return kX(t,e)}),[e]);return[n]}var JX=[];function YX(e,n){var g,o=e.prefixCls,l=e.className,a=e.style,r=e.size,I=e.bordered,i=e.dropdownPrefixCls,C=e.dataSource,c=e.pagination,u=e.rowSelection,s=e.rowKey,d=void 0===s?"key":s,A=e.rowClassName,b=e.columns,p=e.children,h=e.childrenColumnName,f=e.onChange,y=e.getPopupContainer,v=e.loading,G=e.expandIcon,B=e.expandable,S=e.expandedRowRender,V=e.expandIconColumnIndex,W=e.indentSize,R=e.scroll,k=e.sortDirections,X=e.locale,J=e.showSorterTooltip,Y=void 0===J||J;[["filterDropdownVisible","filterDropdownOpen"],["onFilterDropdownVisibleChange","onFilterDropdownOpenChange"]].forEach((function(e){var t=Z(e,2);t[0],t[1]}));var w=t.useMemo((function(){return b||kG(p)}),[b,p]),H=t.useMemo((function(){return w.some((function(e){return e.responsive}))}),[w]),N=pB(H),K=t.useMemo((function(){var e=new Set(Object.keys(N).filter((function(e){return N[e]})));return w.filter((function(t){return!t.responsive||t.responsive.some((function(t){return e.has(t)}))}))}),[w,N]),F=hn(e,["className","style","columns"]),x=t.useContext(Py),E=t.useContext(Ee),M=E.locale,z=void 0===M?hB:M,L=E.renderEmpty,U=E.direction,Q=r||x,T=Ke(Ke({},z.Table),X),D=C||JX,j=t.useContext(Ee).getPrefixCls,P=j("table",o),O=j("dropdown",i),q=Ke({childrenColumnName:h,expandIconColumnIndex:V},B),_=q.childrenColumnName,$=void 0===_?"children":_,ee=t.useMemo((function(){return D.some((function(e){return null===e||void 0===e?void 0:e[$]}))?"nest":S||B&&B.expandedRowRender?"row":null}),[D]),te={body:t.useRef()},ne=t.useMemo((function(){return"function"===typeof d?d:function(e){return null===e||void 0===e?void 0:e[d]}}),[d]),ge=function(e,n,g){var o=t.useRef({});return[function(t){if(!o.current||o.current.data!==e||o.current.childrenColumnName!==n||o.current.getRowKey!==g){var l=new Map;!function e(t){t.forEach((function(t,o){var a=g(t,o);l.set(a,t),t&&"object"===m(t)&&n in t&&e(t[n]||[])}))}(e),o.current={data:e,childrenColumnName:n,kvMap:l,getRowKey:g}}return o.current.kvMap.get(t)}]}(D,$,ne),oe=Z(ge,1)[0],le={},ae=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],g=Ke(Ke({},le),e);n&&(le.resetPagination(),g.pagination.current&&(g.pagination.current=1),c&&c.onChange&&c.onChange(1,g.pagination.pageSize)),R&&!1!==R.scrollToFirstRowOnChange&&te.body.current&&JV(0,{getContainer:function(){return te.body.current}}),null===f||void 0===f||f(g.pagination,g.filters,g.sorter,{currentDataSource:gX(WX(D,g.sorterStates,$),g.filterStates),action:t})},re=Z(RX({prefixCls:P,mergedColumns:K,onSorterChange:function(e,t){ae({sorter:e,sorterStates:t},"sort",!1)},sortDirections:k||["ascend","descend"],tableLocale:T,showSorterTooltip:Y}),4),Ie=re[0],ie=re[1],Ce=re[2],ce=re[3],ue=t.useMemo((function(){return WX(D,ie,$)}),[D,ie]);le.sorter=ce(),le.sorterStates=ie;var se=oX({prefixCls:P,locale:T,dropdownPrefixCls:O,mergedColumns:K,onFilterChange:function(e,t){ae({filters:e,filterStates:t},"filter",!0)},getPopupContainer:y}),de=Z(se,3),Ae=de[0],me=de[1],be=de[2],pe=gX(ue,me);le.filters=be,le.filterStates=me;var he=Z(XX(t.useMemo((function(){var e={};return Object.keys(be).forEach((function(t){null!==be[t]&&(e[t]=be[t])})),Ke(Ke({},Ce),{filters:e})}),[Ce,be])),1)[0],fe=Z(aX(pe.length,c,(function(e,t){ae({pagination:Ke(Ke({},le.pagination),{current:e,pageSize:t})},"paginate")})),2),ye=fe[0],Ze=fe[1];le.pagination=!1===c?{}:function(e,t){var n={current:t.current,pageSize:t.pageSize},g=e&&"object"===m(e)?e:{};return Object.keys(g).forEach((function(e){var g=t[e];"function"!==typeof g&&(n[e]=g)})),n}(c,ye),le.resetPagination=Ze;var ve=t.useMemo((function(){if(!1===c||!ye.pageSize)return pe;var e=ye.current,t=void 0===e?1:e,n=ye.total,g=ye.pageSize,o=void 0===g?10:g;return pe.length<n?pe.length>o?pe.slice((t-1)*o,t*o):pe:pe.slice((t-1)*o,t*o)}),[!!c,pe,ye&&ye.current,ye&&ye.pageSize,ye&&ye.total]),Ge=Z(sX(u,{prefixCls:P,data:pe,pageData:ve,getRowKey:ne,getRecordByKey:oe,expandType:ee,childrenColumnName:$,locale:T,getPopupContainer:y}),2),Be=Ge[0],Se=Ge[1];q.__PARENT_RENDER_ICON__=q.expandIcon,q.expandIcon=q.expandIcon||G||HV(T),"nest"===ee&&void 0===q.expandIconColumnIndex?q.expandIconColumnIndex=u?1:0:q.expandIconColumnIndex>0&&u&&(q.expandIconColumnIndex-=1),"number"!==typeof q.indentSize&&(q.indentSize="number"===typeof W?W:15);var Ve,We,Re,ke=t.useCallback((function(e){return he(Be(Ae(Ie(e))))}),[Ie,Ae,Be]);if(!1!==c&&(null===ye||void 0===ye?void 0:ye.total)){var Xe;Xe=ye.size?ye.size:"small"===Q||"middle"===Q?"small":void 0;var Je=function(e){return t.createElement(yV,Ke({},ye,{className:xe()("".concat(P,"-pagination ").concat(P,"-pagination-").concat(e),ye.className),size:Xe}))},Ye="rtl"===U?"left":"right",we=ye.position;if(null!==we&&Array.isArray(we)){var He=we.find((function(e){return e.includes("top")})),Fe=we.find((function(e){return e.includes("bottom")})),Me=we.every((function(e){return"none"==="".concat(e)}));He||Fe||Me||(We=Je(Ye)),He&&(Ve=Je(He.toLowerCase().replace("top",""))),Fe&&(We=Je(Fe.toLowerCase().replace("bottom","")))}else We=Je(Ye)}"boolean"===typeof v?Re={spinning:v}:"object"===m(v)&&(Re=Ke({spinning:!0},v));var ze=xe()("".concat(P,"-wrapper"),Ne({},"".concat(P,"-wrapper-rtl"),"rtl"===U),l);return t.createElement("div",{ref:n,className:ze,style:a},t.createElement(WV,Ke({spinning:!1},Re),Ve,t.createElement(gB,Ke({},F,{columns:K,direction:U,expandable:q,prefixCls:P,className:xe()((g={},Ne(g,"".concat(P,"-middle"),"middle"===Q),Ne(g,"".concat(P,"-small"),"small"===Q),Ne(g,"".concat(P,"-bordered"),I),Ne(g,"".concat(P,"-empty"),0===D.length),g)),data:ve,rowKey:ne,rowClassName:function(e,t,n){var g;return g="function"===typeof A?xe()(A(e,t,n)):xe()(A),xe()(Ne({},"".concat(P,"-row-selected"),Se.has(ne(e,t))),g)},emptyText:X&&X.emptyText||(L||cB)("Table"),internalHooks:eB,internalRefs:te,transformColumns:ke})),We))}var wX=t.forwardRef(YX);wX.SELECTION_COLUMN=rX,wX.EXPAND_COLUMN=gB.EXPAND_COLUMN,wX.SELECTION_ALL=IX,wX.SELECTION_INVERT=iX,wX.SELECTION_NONE=CX,wX.Column=YV,wX.ColumnGroup=wV,wX.Summary=LG;var HX=wX,NX=n(4805),KX="WeekMenu_table__hTFuS";function FX(e){var t=e.menu,n=e.mobile,g=e.highlight,o=e.loading;return n?t.map((function(e){return(0,mC.jsx)(HX,{loading:o,className:KX,columns:[{title:e.day&&e.day.charAt(0).toUpperCase()+e.day.substring(1),dataIndex:"Type",key:"Type",colSpan:2,width:50,render:function(e){return{props:{style:{background:"#FAFAFA"}},children:(0,mC.jsx)("span",{style:{fontWeight:500,textTransform:"capitalize"},children:e})}}},{title:"",dataIndex:"Meal",key:"Meal",colSpan:0,width:300,render:function(e,t){return{props:g?{style:{background:t.selected?"#ceface":"unset",color:t.selected?"unset":"lightgrey"}}:{},children:(0,mC.jsx)("span",{children:e})}}}],dataSource:[{key:"1",Type:"Breakfast",Meal:g?e.breakfast.text:e.breakfast,selected:e.breakfast.selected},{key:"2",Type:"Lunch",Meal:g?e.lunch.text:e.lunch,selected:e.lunch.selected},{key:"3",Type:"Dinner",Meal:g?e.dinner.text:e.dinner,selected:e.dinner.selected}],pagination:!1,bordered:!0})})):(0,mC.jsx)(HX,{loading:o,className:KX,columns:[{title:"Day",dataIndex:"day",key:"day",render:function(e){return{props:{style:{background:"#FAFAFA"}},children:(0,mC.jsx)("span",{style:{fontWeight:500,textTransform:"capitalize"},children:e})}}},{title:"Breakfast",dataIndex:"breakfast",key:"breakfast",render:function(e,t){return{props:g?{style:{background:t.selected.breakfast?"#ceface":"unset",color:t.selected.breakfast?"unset":"lightgrey"}}:{},children:(0,mC.jsx)("span",{children:e})}}},{title:"Lunch",dataIndex:"lunch",key:"lunch",render:function(e,t){return{props:g?{style:{background:t.selected.lunch?"#ceface":"unset",color:t.selected.lunch?"unset":"lightgrey"}}:{},children:(0,mC.jsx)("span",{children:e})}}},{title:"Dinner",dataIndex:"dinner",key:"dinner",render:function(e,t){return{props:g?{style:{background:t.selected.dinner?"#ceface":"unset",color:t.selected.dinner?"unset":"lightgrey"}}:{},children:(0,mC.jsx)("span",{children:e})}}}],dataSource:t.map((function(e,t){return{key:t,day:e.day,breakfast:g?e.breakfast.text:e.breakfast,lunch:g?e.lunch.text:e.lunch,dinner:g?e.dinner.text:e.dinner,selected:{breakfast:e.breakfast.selected,lunch:e.lunch.selected,dinner:e.dinner.selected}}})),pagination:!1,bordered:!0})}var xX=[{title:"Meal",dataIndex:"meal",key:"meal",render:function(e){return{props:{style:{background:"#FAFAFA"}},children:(0,mC.jsx)("span",{style:{fontWeight:500},children:e})}}},{title:"Time",dataIndex:"time",key:"time"}];function EX(){var e=(0,NX.useMediaQuery)({query:"(max-width: 750px)"}),n=Z((0,t.useState)([]),2),g=n[0],o=n[1],l=Z((0,t.useState)([]),2),a=l[0],r=l[1];return(0,t.useEffect)((function(){var e=function(){var e=GC(ZC().mark((function e(){var t;return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bu.get(window.APIROOT+"api/data/time");case 3:t=e.sent,o(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),fZ.error("Failed to fetch timing from server");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,t.useEffect)((function(){var e=function(){var e=GC(ZC().mark((function e(){var t;return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bu.get(window.APIROOT+"api/data/menu");case 3:t=e.sent,r(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),fZ.error("Failed to fetch menu from server");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,mC.jsxs)("div",{className:Jv,children:[(0,mC.jsx)("h1",{children:"TIMING"}),(0,mC.jsx)(HX,{loading:!g.length,className:Yv,columns:xX,dataSource:g,pagination:!1,bordered:!0}),(0,mC.jsx)("h1",{children:"MENU"}),(0,mC.jsx)(AC.div,{layout:!0,children:(0,mC.jsx)(FX,{loading:!a.length,menu:a,mobile:e})})]})}var MX="PurchaseHistory_menuBody__qpV5T",zX="PurchaseHistory_buttons__521dW";function LX(){var e=(0,NX.useMediaQuery)({query:"(max-width: 750px)"}),n=Z((0,t.useState)(!0),2),g=n[0],o=n[1],l=Z((0,t.useState)([]),2),a=l[0],r=l[1],I=Z((0,t.useState)(!1),2),i=I[0],C=I[1];return(0,t.useEffect)((function(){var e=function(){var e=GC(ZC().mark((function e(){var t,n,o,l,a,I;return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.prev=1,e.next=4,Bu.get(window.APIROOT+"api/data/menu");case 4:return t=e.sent,e.next=7,Bu.get(window.APIROOT+"api/user/data");case 7:n=e.sent,o=[],l=ig(t.data);try{for(l.s();!(a=l.n()).done;)I=a.value,o.push({day:I.day,breakfast:{text:I.breakfast,selected:n.data[g?"this":"next"][I.day].breakfast},lunch:{text:I.lunch,selected:n.data[g?"this":"next"][I.day].lunch},dinner:{text:I.dinner,selected:n.data[g?"this":"next"][I.day].dinner}})}catch(i){l.e(i)}finally{l.f()}r(o),C(!1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),fZ.error("Failed to fetch purchase history from server");case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}();e()}),[g]),(0,mC.jsxs)("div",{className:MX,children:[(0,mC.jsx)("div",{className:zX,children:(0,mC.jsxs)(Iv,{children:[(0,mC.jsx)(kv,{disabled:g,type:"primary",size:"large",onClick:function(){return o(!0)},children:"This Week"}),(0,mC.jsx)(kv,{disabled:!g,type:"primary",size:"large",onClick:function(){return o(!1)},children:"Next Week"})]})}),(0,mC.jsx)("h1",{children:g?"Your Coupons This Week":"Your Coupons Next Week"}),(0,mC.jsx)(FX,{loading:i,menu:a,mobile:e,highlight:!0})]})}var UX="Buy_table__W+WhP",QX="Buy_buyBody__7u9-x",TX="Buy_buy__mjmYN",DX="Buy_bought__nWOJX",jX=function(e){var n,g,o=e.prefixCls,l=e.className,a=e.style,r=e.size,I=e.shape,i=xe()((Ne(n={},"".concat(o,"-lg"),"large"===r),Ne(n,"".concat(o,"-sm"),"small"===r),n)),C=xe()((Ne(g={},"".concat(o,"-circle"),"circle"===I),Ne(g,"".concat(o,"-square"),"square"===I),Ne(g,"".concat(o,"-round"),"round"===I),g)),c=t.useMemo((function(){return"number"===typeof r?{width:r,height:r,lineHeight:"".concat(r,"px")}:{}}),[r]);return t.createElement("span",{className:xe()(o,i,C,l),style:Ke(Ke({},c),a)})},PX=function(e){var n=e.prefixCls,g=e.className,o=e.active,l=e.shape,a=void 0===l?"circle":l,r=e.size,I=void 0===r?"default":r,i=(0,t.useContext(Ee).getPrefixCls)("skeleton",n),C=hn(e,["prefixCls","className"]),c=xe()(i,"".concat(i,"-element"),Ne({},"".concat(i,"-active"),o),g);return t.createElement("div",{className:c},t.createElement(jX,Ke({prefixCls:"".concat(i,"-avatar"),shape:a,size:I},C)))},OX=function(e){var n,g=e.prefixCls,o=e.className,l=e.active,a=e.block,r=void 0!==a&&a,I=e.size,i=void 0===I?"default":I,C=(0,t.useContext(Ee).getPrefixCls)("skeleton",g),c=hn(e,["prefixCls"]),u=xe()(C,"".concat(C,"-element"),(Ne(n={},"".concat(C,"-active"),l),Ne(n,"".concat(C,"-block"),r),n),o);return t.createElement("div",{className:u},t.createElement(jX,Ke({prefixCls:"".concat(C,"-button"),size:i},c)))},qX={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM288 604a64 64 0 10128 0 64 64 0 10-128 0zm118-224a48 48 0 1096 0 48 48 0 10-96 0zm158 228a96 96 0 10192 0 96 96 0 10-192 0zm148-314a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"dot-chart",theme:"outlined"},_X=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:qX}))};_X.displayName="DotChartOutlined";var $X=t.forwardRef(_X),eJ=function(e){var n=e.prefixCls,g=e.className,o=e.style,l=e.active,a=e.children,r=(0,t.useContext(Ee).getPrefixCls)("skeleton",n),I=xe()(r,"".concat(r,"-element"),Ne({},"".concat(r,"-active"),l),g),i=null!==a&&void 0!==a?a:t.createElement($X,null);return t.createElement("div",{className:I},t.createElement("div",{className:xe()("".concat(r,"-image"),g),style:o},i))},tJ=function(e){var n=e.prefixCls,g=e.className,o=e.style,l=e.active,a=(0,t.useContext(Ee).getPrefixCls)("skeleton",n),r=xe()(a,"".concat(a,"-element"),Ne({},"".concat(a,"-active"),l),g);return t.createElement("div",{className:r},t.createElement("div",{className:xe()("".concat(a,"-image"),g),style:o},t.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:"".concat(a,"-image-svg")},t.createElement("path",{d:"M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",className:"".concat(a,"-image-path")}))))},nJ=function(e){var n,g=e.prefixCls,o=e.className,l=e.active,a=e.block,r=e.size,I=void 0===r?"default":r,i=(0,t.useContext(Ee).getPrefixCls)("skeleton",g),C=hn(e,["prefixCls"]),c=xe()(i,"".concat(i,"-element"),(Ne(n={},"".concat(i,"-active"),l),Ne(n,"".concat(i,"-block"),a),n),o);return t.createElement("div",{className:c},t.createElement(jX,Ke({prefixCls:"".concat(i,"-input"),size:I},C)))},gJ=function(e){var n=function(t){var n=e.width,g=e.rows,o=void 0===g?2:g;return Array.isArray(n)?n[t]:o-1===t?n:void 0},g=e.prefixCls,o=e.className,l=e.style,a=e.rows,r=I(Array(a)).map((function(e,g){return t.createElement("li",{key:g,style:{width:n(g)}})}));return t.createElement("ul",{className:xe()(g,o),style:l},r)},oJ=function(e){var n=e.prefixCls,g=e.className,o=e.width,l=e.style;return t.createElement("h3",{className:xe()(n,g),style:Ke({width:o},l)})};function lJ(e){return e&&"object"===m(e)?e:{}}var aJ=function(e){var n=e.prefixCls,g=e.loading,o=e.className,l=e.style,a=e.children,r=e.avatar,I=void 0!==r&&r,i=e.title,C=void 0===i||i,c=e.paragraph,u=void 0===c||c,s=e.active,d=e.round,A=t.useContext(Ee),m=A.getPrefixCls,b=A.direction,p=m("skeleton",n);if(g||!("loading"in e)){var h,f,y,Z=!!I,v=!!C,G=!!u;if(Z){var B=Ke(Ke({prefixCls:"".concat(p,"-avatar")},function(e,t){return e&&!t?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}(v,G)),lJ(I));f=t.createElement("div",{className:"".concat(p,"-header")},t.createElement(jX,Ke({},B)))}if(v||G){var S,V;if(v){var W=Ke(Ke({prefixCls:"".concat(p,"-title")},function(e,t){return!e&&t?{width:"38%"}:e&&t?{width:"50%"}:{}}(Z,G)),lJ(C));S=t.createElement(oJ,Ke({},W))}if(G){var R=Ke(Ke({prefixCls:"".concat(p,"-paragraph")},function(e,t){var n={};return e&&t||(n.width="61%"),n.rows=!e&&t?3:2,n}(Z,v)),lJ(u));V=t.createElement(gJ,Ke({},R))}y=t.createElement("div",{className:"".concat(p,"-content")},S,V)}var k=xe()(p,(Ne(h={},"".concat(p,"-with-avatar"),Z),Ne(h,"".concat(p,"-active"),s),Ne(h,"".concat(p,"-rtl"),"rtl"===b),Ne(h,"".concat(p,"-round"),d),h),o);return t.createElement("div",{className:k,style:l},f,y)}return"undefined"!==typeof a?a:null};aJ.Button=OX,aJ.Avatar=PX,aJ.Input=nJ,aJ.Image=tJ,aJ.Node=eJ;var rJ=aJ,IJ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},iJ=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:IJ}))};iJ.displayName="PlusOutlined";var CJ=t.forwardRef(iJ),cJ=(0,t.createContext)(null),uJ=t.forwardRef((function(e,n){var g=e.prefixCls,o=e.className,l=e.style,a=e.id,r=e.active,I=e.tabKey,i=e.children;return t.createElement("div",{id:a&&"".concat(a,"-panel-").concat(I),role:"tabpanel",tabIndex:r?0:-1,"aria-labelledby":a&&"".concat(a,"-tab-").concat(I),"aria-hidden":!r,style:l,className:xe()(g,r&&"".concat(g,"-active"),o),ref:n},i)}));var sJ=uJ,dJ=["key","forceRender","style","className"];function AJ(e){var n=e.id,g=e.activeKey,o=e.animated,l=e.tabPosition,a=e.destroyInactiveTabPane,r=t.useContext(cJ),I=r.prefixCls,i=r.tabs,C=o.tabPane,c="".concat(I,"-tabpane");return t.createElement("div",{className:xe()("".concat(I,"-content-holder"))},t.createElement("div",{className:xe()("".concat(I,"-content"),"".concat(I,"-content-").concat(l),Ne({},"".concat(I,"-content-animated"),C))},i.map((function(e){var l=e.key,r=e.forceRender,I=e.style,i=e.className,u=tt(e,dJ),s=l===g;return t.createElement(UA,Ke({key:l,visible:s,forceRender:r,removeOnLeave:!!a,leavedClassName:"".concat(c,"-hidden")},o.tabPaneMotion),(function(e,g){var o=e.style,a=e.className;return t.createElement(sJ,Ke({},u,{prefixCls:c,id:n,tabKey:l,animated:C,active:s,style:$e($e({},I),o),className:xe()(i,a),ref:g}))}))}))))}function mJ(e){var n=(0,t.useRef)(),g=(0,t.useRef)(!1);return(0,t.useEffect)((function(){return g.current=!1,function(){g.current=!0,gd.cancel(n.current)}}),[]),function(){for(var t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];g.current||(gd.cancel(n.current),n.current=gd((function(){e.apply(void 0,o)})))}}function bJ(e,n){var g,o=e.prefixCls,l=e.id,a=e.active,r=e.tab,I=r.key,i=r.label,C=r.disabled,c=r.closeIcon,u=e.closable,s=e.renderWrapper,d=e.removeAriaLabel,A=e.editable,m=e.onClick,b=e.onRemove,p=e.onFocus,h=e.style,f="".concat(o,"-tab");t.useEffect((function(){return b}),[]);var y=A&&!1!==u&&!C;function Z(e){C||m(e)}var v=t.createElement("div",{key:I,ref:n,className:xe()(f,(g={},Ne(g,"".concat(f,"-with-remove"),y),Ne(g,"".concat(f,"-active"),a),Ne(g,"".concat(f,"-disabled"),C),g)),style:h,onClick:Z},t.createElement("div",{role:"tab","aria-selected":a,id:l&&"".concat(l,"-tab-").concat(I),className:"".concat(f,"-btn"),"aria-controls":l&&"".concat(l,"-panel-").concat(I),"aria-disabled":C,tabIndex:C?null:0,onClick:function(e){e.stopPropagation(),Z(e)},onKeyDown:function(e){[hd.SPACE,hd.ENTER].includes(e.which)&&(e.preventDefault(),Z(e))},onFocus:p},i),y&&t.createElement("button",{type:"button","aria-label":d||"remove",tabIndex:0,className:"".concat(f,"-remove"),onClick:function(e){var t;e.stopPropagation(),(t=e).preventDefault(),t.stopPropagation(),A.onEdit("remove",{key:I,event:t})}},c||A.removeIcon||"\xd7"));return s?s(v):v}var pJ=t.forwardRef(bJ),hJ={width:0,height:0,left:0,top:0};var fJ={width:0,height:0,left:0,top:0,right:0};function yJ(e,n){var g=e.prefixCls,o=e.editable,l=e.locale,a=e.style;return o&&!1!==o.showAdd?t.createElement("button",{ref:n,type:"button",className:"".concat(g,"-nav-add"),style:a,"aria-label":(null===l||void 0===l?void 0:l.addAriaLabel)||"Add tab",onClick:function(e){o.onEdit("add",{event:e})}},o.addIcon||"+"):null}var ZJ=t.forwardRef(yJ);function vJ(e,n){var g=e.prefixCls,o=e.id,l=e.tabs,a=e.locale,r=e.mobile,I=e.moreIcon,i=void 0===I?"More":I,C=e.moreTransitionName,c=e.style,u=e.className,s=e.editable,d=e.tabBarGutter,A=e.rtl,m=e.removeAriaLabel,b=e.onTabClick,p=e.getPopupContainer,h=e.popupClassName,f=Z((0,t.useState)(!1),2),y=f[0],v=f[1],G=Z((0,t.useState)(null),2),B=G[0],S=G[1],V="".concat(o,"-more-popup"),W="".concat(g,"-dropdown"),R=null!==B?"".concat(V,"-").concat(B):null,k=null===a||void 0===a?void 0:a.dropdownAriaLabel;var X=t.createElement(np,{onClick:function(e){var t=e.key,n=e.domEvent;b(t,n),v(!1)},prefixCls:"".concat(W,"-menu"),id:V,tabIndex:-1,role:"listbox","aria-activedescendant":R,selectedKeys:[B],"aria-label":void 0!==k?k:"expanded dropdown"},l.map((function(e){var n=s&&!1!==e.closable&&!e.disabled;return t.createElement(Ld,{key:e.key,id:"".concat(V,"-").concat(e.key),role:"option","aria-controls":o&&"".concat(o,"-panel-").concat(e.key),disabled:e.disabled},t.createElement("span",null,e.label),n&&t.createElement("button",{type:"button","aria-label":m||"remove",tabIndex:0,className:"".concat(W,"-menu-item-remove"),onClick:function(t){t.stopPropagation(),function(e,t){e.preventDefault(),e.stopPropagation(),s.onEdit("remove",{key:t,event:e})}(t,e.key)}},e.closeIcon||s.removeIcon||"\xd7"))})));function J(e){for(var t=l.filter((function(e){return!e.disabled})),n=t.findIndex((function(e){return e.key===B}))||0,g=t.length,o=0;o<g;o+=1){var a=t[n=(n+e+g)%g];if(!a.disabled)return void S(a.key)}}(0,t.useEffect)((function(){var e=document.getElementById(R);e&&e.scrollIntoView&&e.scrollIntoView(!1)}),[B]),(0,t.useEffect)((function(){y||S(null)}),[y]);var Y=Ne({},A?"marginRight":"marginLeft",d);l.length||(Y.visibility="hidden",Y.order=1);var w=xe()(Ne({},"".concat(W,"-rtl"),A)),H=r?null:t.createElement(rW,{prefixCls:W,overlay:X,trigger:["hover"],visible:!!l.length&&y,transitionName:C,onVisibleChange:v,overlayClassName:xe()(w,h),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:p},t.createElement("button",{type:"button",className:"".concat(g,"-nav-more"),style:Y,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":V,id:"".concat(o,"-more"),"aria-expanded":y,onKeyDown:function(e){var t=e.which;if(y)switch(t){case hd.UP:J(-1),e.preventDefault();break;case hd.DOWN:J(1),e.preventDefault();break;case hd.ESC:v(!1);break;case hd.SPACE:case hd.ENTER:null!==B&&b(B,e)}else[hd.DOWN,hd.SPACE,hd.ENTER].includes(t)&&(v(!0),e.preventDefault())}},i));return t.createElement("div",{className:xe()("".concat(g,"-nav-operations"),u),style:c,ref:n},H,t.createElement(ZJ,{prefixCls:g,locale:a,editable:s}))}var GJ=t.memo(t.forwardRef(vJ),(function(e,t){return t.tabMoving})),BJ=Math.pow(.995,20);function SJ(e,n){var g=t.useRef(e),o=Z(t.useState({}),2)[1];return[g.current,function(e){var t="function"===typeof e?e(g.current):e;t!==g.current&&n(t,g.current),g.current=t,o({})}]}function VJ(e){var t;return e instanceof Map?(t={},e.forEach((function(e,n){t[n]=e}))):t=e,JSON.stringify(t)}var WJ=t.forwardRef((function(e,n){var g,o=e.position,l=e.prefixCls,a=e.extra;if(!a)return null;var r={};return"object"!==m(a)||t.isValidElement(a)?r.right=a:r=a,"right"===o&&(g=r.right),"left"===o&&(g=r.left),g?t.createElement("div",{className:"".concat(l,"-extra-content"),ref:n},g):null})),RJ=function(e){var t=e.current||{},n=t.offsetWidth,g=void 0===n?0:n,o=t.offsetHeight;return[g,void 0===o?0:o]},kJ=function(e,t){return e[t?0:1]};function XJ(e,n){var g,o=t.useContext(cJ),l=o.prefixCls,a=o.tabs,r=e.className,i=e.style,C=e.id,c=e.animated,u=e.activeKey,s=e.rtl,d=e.extra,A=e.editable,m=e.locale,b=e.tabPosition,p=e.tabBarGutter,h=e.children,f=e.onTabClick,y=e.onTabScroll,v=(0,t.useRef)(),G=(0,t.useRef)(),B=(0,t.useRef)(),S=(0,t.useRef)(),V=(0,t.useRef)(),W=(0,t.useRef)(),R=(0,t.useRef)(),k=function(){var e=(0,t.useRef)(new Map);return[function(n){return e.current.has(n)||e.current.set(n,t.createRef()),e.current.get(n)},function(t){e.current.delete(t)}]}(),X=Z(k,2),J=X[0],Y=X[1],w="top"===b||"bottom"===b,H=Z(SJ(0,(function(e,t){w&&y&&y({direction:e>t?"left":"right"})})),2),N=H[0],K=H[1],F=Z(SJ(0,(function(e,t){!w&&y&&y({direction:e>t?"top":"bottom"})})),2),x=F[0],E=F[1],M=Z((0,t.useState)([0,0]),2),z=M[0],L=M[1],U=Z((0,t.useState)([0,0]),2),Q=U[0],T=U[1],D=Z((0,t.useState)([0,0]),2),j=D[0],P=D[1],O=Z((0,t.useState)([0,0]),2),q=O[0],_=O[1],$=function(e){var n=(0,t.useRef)([]),g=Z((0,t.useState)({}),2)[1],o=(0,t.useRef)("function"===typeof e?e():e),l=mJ((function(){var e=o.current;n.current.forEach((function(t){e=t(e)})),n.current=[],o.current=e,g({})}));return[o.current,function(e){n.current.push(e),l()}]}(new Map),ee=Z($,2),te=ee[0],ne=ee[1],ge=function(e,n,g){return(0,t.useMemo)((function(){for(var t,g=new Map,o=n.get(null===(t=e[0])||void 0===t?void 0:t.key)||hJ,l=o.left+o.width,a=0;a<e.length;a+=1){var r,I=e[a].key,i=n.get(I);i||(i=n.get(null===(r=e[a-1])||void 0===r?void 0:r.key)||hJ);var C=g.get(I)||$e({},i);C.right=l-C.left-C.width,g.set(I,C)}return g}),[e.map((function(e){return e.key})).join("_"),n,g])}(a,te,Q[0]),oe=kJ(z,w),le=kJ(Q,w),ae=kJ(j,w),re=kJ(q,w),Ie=oe<le+ae?oe-re:oe-ae,ie="".concat(l,"-nav-operations-hidden"),Ce=0,ce=0;function ue(e){return e<Ce?Ce:e>ce?ce:e}w&&s?(Ce=0,ce=Math.max(0,le-Ie)):(Ce=Math.min(0,Ie-le),ce=0);var se=(0,t.useRef)(),de=Z((0,t.useState)(),2),Ae=de[0],me=de[1];function be(){me(Date.now())}function pe(){window.clearTimeout(se.current)}!function(e,n){var g=Z((0,t.useState)(),2),o=g[0],l=g[1],a=Z((0,t.useState)(0),2),r=a[0],I=a[1],i=Z((0,t.useState)(0),2),C=i[0],c=i[1],u=Z((0,t.useState)(),2),s=u[0],d=u[1],A=(0,t.useRef)(),m=(0,t.useRef)(),b=(0,t.useRef)(null);b.current={onTouchStart:function(e){var t=e.touches[0],n=t.screenX,g=t.screenY;l({x:n,y:g}),window.clearInterval(A.current)},onTouchMove:function(e){if(o){e.preventDefault();var t=e.touches[0],g=t.screenX,a=t.screenY;l({x:g,y:a});var i=g-o.x,C=a-o.y;n(i,C);var u=Date.now();I(u),c(u-r),d({x:i,y:C})}},onTouchEnd:function(){if(o&&(l(null),d(null),s)){var e=s.x/C,t=s.y/C,g=Math.abs(e),a=Math.abs(t);if(Math.max(g,a)<.1)return;var r=e,I=t;A.current=window.setInterval((function(){Math.abs(r)<.01&&Math.abs(I)<.01?window.clearInterval(A.current):n(20*(r*=BJ),20*(I*=BJ))}),20)}},onWheel:function(e){var t=e.deltaX,g=e.deltaY,o=0,l=Math.abs(t),a=Math.abs(g);l===a?o="x"===m.current?t:g:l>a?(o=t,m.current="x"):(o=g,m.current="y"),n(-o,-o)&&e.preventDefault()}},t.useEffect((function(){function t(e){b.current.onTouchMove(e)}function n(e){b.current.onTouchEnd(e)}return document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",n,{passive:!1}),e.current.addEventListener("touchstart",(function(e){b.current.onTouchStart(e)}),{passive:!1}),e.current.addEventListener("wheel",(function(e){b.current.onWheel(e)})),function(){document.removeEventListener("touchmove",t),document.removeEventListener("touchend",n)}}),[])}(S,(function(e,t){function n(e,t){e((function(e){return ue(e+t)}))}return!(oe>=le)&&(w?n(K,e):n(E,t),pe(),be(),!0)})),(0,t.useEffect)((function(){return pe(),Ae&&(se.current=window.setTimeout((function(){me(0)}),100)),pe}),[Ae]);var he=function(e,n,g,o,l,a,r){var I,i,C,c=r.tabs,u=r.tabPosition,s=r.rtl;return["top","bottom"].includes(u)?(I="width",i=s?"right":"left",C=Math.abs(g)):(I="height",i="top",C=-g),(0,t.useMemo)((function(){if(!c.length)return[0,0];for(var t=c.length,g=t,o=0;o<t;o+=1){var l=e.get(c[o].key)||fJ;if(l[i]+l[I]>C+n){g=o-1;break}}for(var a=0,r=t-1;r>=0;r-=1)if((e.get(c[r].key)||fJ)[i]<C){a=r+1;break}return[a,g]}),[e,n,o,l,a,C,u,c.map((function(e){return e.key})).join("_"),s])}(ge,Ie,w?N:x,le,ae,re,$e($e({},e),{},{tabs:a})),fe=Z(he,2),ye=fe[0],Ze=fe[1],ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=ge.get(e)||{width:0,height:0,left:0,right:0,top:0};if(w){var n=N;s?t.right<N?n=t.right:t.right+t.width>N+Ie&&(n=t.right+t.width-Ie):t.left<-N?n=-t.left:t.left+t.width>-N+Ie&&(n=-(t.left+t.width-Ie)),E(0),K(ue(n))}else{var g=x;t.top<-x?g=-t.top:t.top+t.height>-x+Ie&&(g=-(t.top+t.height-Ie)),K(0),E(ue(g))}},Ge={};"top"===b||"bottom"===b?Ge[s?"marginRight":"marginLeft"]=p:Ge.marginTop=p;var Be=a.map((function(e,n){var g=e.key;return t.createElement(pJ,{id:C,prefixCls:l,key:g,tab:e,style:0===n?void 0:Ge,closable:e.closable,editable:A,active:g===u,renderWrapper:h,removeAriaLabel:null===m||void 0===m?void 0:m.removeAriaLabel,ref:J(g),onClick:function(e){f(g,e)},onRemove:function(){Y(g)},onFocus:function(){ve(g),be(),S.current&&(s||(S.current.scrollLeft=0),S.current.scrollTop=0)}})})),Se=mJ((function(){var e=RJ(v),t=RJ(G),n=RJ(B);L([e[0]-t[0]-n[0],e[1]-t[1]-n[1]]);var g=RJ(R);P(g);var o=RJ(W);_(o);var l=RJ(V);T([l[0]-g[0],l[1]-g[1]]),ne((function(){var e=new Map;return a.forEach((function(t){var n=t.key,g=J(n).current;g&&e.set(n,{width:g.offsetWidth,height:g.offsetHeight,left:g.offsetLeft,top:g.offsetTop})})),e}))})),Ve=a.slice(0,ye),We=a.slice(Ze+1),Re=[].concat(I(Ve),I(We)),ke=Z((0,t.useState)(),2),Xe=ke[0],Je=ke[1],Ye=ge.get(u),we=(0,t.useRef)();function He(){gd.cancel(we.current)}(0,t.useEffect)((function(){var e={};return Ye&&(w?(s?e.right=Ye.right:e.left=Ye.left,e.width=Ye.width):(e.top=Ye.top,e.height=Ye.height)),He(),we.current=gd((function(){Je(e)})),He}),[Ye,w,s]),(0,t.useEffect)((function(){ve()}),[u,VJ(Ye),VJ(ge),w]),(0,t.useEffect)((function(){Se()}),[s]);var Fe,Ee,Me,ze,Le=!!Re.length,Ue="".concat(l,"-nav-wrap");return w?s?(Ee=N>0,Fe=N+oe<le):(Fe=N<0,Ee=-N+oe<le):(Me=x<0,ze=-x+oe<le),t.createElement(Ts,{onResize:Se},t.createElement("div",{ref:ss(n,v),role:"tablist",className:xe()("".concat(l,"-nav"),r),style:i,onKeyDown:function(){be()}},t.createElement(WJ,{ref:G,position:"left",extra:d,prefixCls:l}),t.createElement("div",{className:xe()(Ue,(g={},Ne(g,"".concat(Ue,"-ping-left"),Fe),Ne(g,"".concat(Ue,"-ping-right"),Ee),Ne(g,"".concat(Ue,"-ping-top"),Me),Ne(g,"".concat(Ue,"-ping-bottom"),ze),g)),ref:S},t.createElement(Ts,{onResize:Se},t.createElement("div",{ref:V,className:"".concat(l,"-nav-list"),style:{transform:"translate(".concat(N,"px, ").concat(x,"px)"),transition:Ae?"none":void 0}},Be,t.createElement(ZJ,{ref:R,prefixCls:l,locale:m,editable:A,style:$e($e({},0===Be.length?void 0:Ge),{},{visibility:Le?"hidden":null})}),t.createElement("div",{className:xe()("".concat(l,"-ink-bar"),Ne({},"".concat(l,"-ink-bar-animated"),c.inkBar)),style:Xe})))),t.createElement(GJ,Ke({},e,{removeAriaLabel:null===m||void 0===m?void 0:m.removeAriaLabel,ref:W,prefixCls:l,tabs:Re,className:!Le&&ie,tabMoving:!!Ae})),t.createElement(WJ,{ref:B,position:"right",extra:d,prefixCls:l})))}var JJ=t.forwardRef(XJ),YJ=["renderTabBar"],wJ=["label","key"];function HJ(e){var n=e.renderTabBar,g=tt(e,YJ),o=(0,t.useContext)(cJ).tabs;if(n){var l=$e($e({},g),{},{panes:o.map((function(e){var n=e.label,g=e.key,o=tt(e,wJ);return t.createElement(sJ,Ke({tab:n,key:g,tabKey:g},o))}))});return n(l,JJ)}return t.createElement(JJ,g)}var NJ=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName"],KJ=0;function FJ(e,n){var g,o=e.id,l=e.prefixCls,a=void 0===l?"rc-tabs":l,r=e.className,I=e.items,i=e.direction,C=e.activeKey,c=e.defaultActiveKey,u=e.editable,s=e.animated,d=e.tabPosition,A=void 0===d?"top":d,b=e.tabBarGutter,p=e.tabBarStyle,h=e.tabBarExtraContent,f=e.locale,y=e.moreIcon,v=e.moreTransitionName,G=e.destroyInactiveTabPane,B=e.renderTabBar,S=e.onChange,V=e.onTabClick,W=e.onTabScroll,R=e.getPopupContainer,k=e.popupClassName,X=tt(e,NJ),J=t.useMemo((function(){return(I||[]).filter((function(e){return e&&"object"===m(e)&&"key"in e}))}),[I]),Y="rtl"===i,w=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{inkBar:!0,tabPane:!1};return(e=!1===t?{inkBar:!1,tabPane:!1}:!0===t?{inkBar:!0,tabPane:!1}:$e({inkBar:!0},"object"===m(t)?t:{})).tabPaneMotion&&void 0===e.tabPane&&(e.tabPane=!0),!e.tabPaneMotion&&e.tabPane&&(e.tabPane=!1),e}(s),H=Z((0,t.useState)(!1),2),N=H[0],K=H[1];(0,t.useEffect)((function(){K(gA())}),[]);var F=Z(rs((function(){var e;return null===(e=J[0])||void 0===e?void 0:e.key}),{value:C,defaultValue:c}),2),x=F[0],E=F[1],M=Z((0,t.useState)((function(){return J.findIndex((function(e){return e.key===x}))})),2),z=M[0],L=M[1];(0,t.useEffect)((function(){var e,t=J.findIndex((function(e){return e.key===x}));-1===t&&(t=Math.max(0,Math.min(z,J.length-1)),E(null===(e=J[t])||void 0===e?void 0:e.key));L(t)}),[J.map((function(e){return e.key})).join("_"),x,z]);var U=Z(rs(null,{value:o}),2),Q=U[0],T=U[1];(0,t.useEffect)((function(){o||(T("rc-tabs-".concat(KJ)),KJ+=1)}),[]);var D={id:Q,activeKey:x,animated:w,tabPosition:A,rtl:Y,mobile:N},j=$e($e({},D),{},{editable:u,locale:f,moreIcon:y,moreTransitionName:v,tabBarGutter:b,onTabClick:function(e,t){null===V||void 0===V||V(e,t);var n=e!==x;E(e),n&&(null===S||void 0===S||S(e))},onTabScroll:W,extra:h,style:p,panes:null,getPopupContainer:R,popupClassName:k});return t.createElement(cJ.Provider,{value:{tabs:J,prefixCls:a}},t.createElement("div",Ke({ref:n,id:o,className:xe()(a,"".concat(a,"-").concat(A),(g={},Ne(g,"".concat(a,"-mobile"),N),Ne(g,"".concat(a,"-editable"),u),Ne(g,"".concat(a,"-rtl"),Y),g),r)},X),undefined,t.createElement(HJ,Ke({},j,{renderTabBar:B})),t.createElement(AJ,Ke({destroyInactiveTabPane:G},D,{animated:w}))))}var xJ=t.forwardRef(FJ),EJ={motionAppear:!1,motionEnter:!0,motionLeave:!0};var MJ=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n};var zJ=function(){return null},LJ=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n};function UJ(e){var n,g=e.type,o=e.className,l=e.size,a=e.onEdit,r=e.hideAdd,I=e.centered,i=e.addIcon,C=e.children,c=e.items,u=e.animated,s=LJ(e,["type","className","size","onEdit","hideAdd","centered","addIcon","children","items","animated"]),d=s.prefixCls,A=s.moreIcon,b=void 0===A?t.createElement(_u,null):A,p=t.useContext(Ee),h=p.getPrefixCls,f=p.direction,y=p.getPopupContainer,Z=h("tabs",d);"editable-card"===g&&(n={onEdit:function(e,t){var n=t.key,g=t.event;null===a||void 0===a||a("add"===e?g:n,e)},removeIcon:t.createElement(Tu,null),addIcon:i||t.createElement(CJ,null),showAdd:!0!==r});var v=h(),G=function(e,n){if(e)return e;var g=is(n).map((function(e){if(t.isValidElement(e)){var n=e.key,g=e.props||{},o=g.tab,l=MJ(g,["tab"]);return Ke(Ke({key:String(n)},l),{label:o})}return null}));return function(e){return e.filter((function(e){return e}))}(g)}(c,C),B=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{inkBar:!0,tabPane:!1};return(t=!1===n?{inkBar:!1,tabPane:!1}:!0===n?{inkBar:!0,tabPane:!0}:Ke({inkBar:!0},"object"===m(n)?n:{})).tabPane&&(t.tabPaneMotion=Ke(Ke({},EJ),{motionName:ip(e,"switch")})),t}(Z,u);return t.createElement(Py.Consumer,null,(function(e){var a,r=void 0!==l?l:e;return t.createElement(xJ,Ke({direction:f,getPopupContainer:y,moreTransitionName:"".concat(v,"-slide-up")},s,{items:G,className:xe()((a={},Ne(a,"".concat(Z,"-").concat(r),r),Ne(a,"".concat(Z,"-card"),["card","editable-card"].includes(g)),Ne(a,"".concat(Z,"-editable-card"),"editable-card"===g),Ne(a,"".concat(Z,"-centered"),I),a),o),editable:n,moreIcon:b,prefixCls:Z,animated:B}))}))}UJ.TabPane=zJ;var QJ=UJ,TJ=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},DJ=function(e){var n=e.prefixCls,g=e.className,o=e.hoverable,l=void 0===o||o,a=TJ(e,["prefixCls","className","hoverable"]);return t.createElement(Me,null,(function(e){var o=(0,e.getPrefixCls)("card",n),r=xe()("".concat(o,"-grid"),g,Ne({},"".concat(o,"-grid-hoverable"),l));return t.createElement("div",Ke({},a,{className:r}))}))},jJ=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n};var PJ=t.forwardRef((function(e,n){var g,o,l,a=t.useContext(Ee),r=a.getPrefixCls,I=a.direction,i=t.useContext(Py),C=e.prefixCls,c=e.className,u=e.extra,s=e.headStyle,d=void 0===s?{}:s,A=e.bodyStyle,m=void 0===A?{}:A,b=e.title,p=e.loading,h=e.bordered,f=void 0===h||h,y=e.size,Z=e.type,v=e.cover,G=e.actions,B=e.tabList,S=e.children,V=e.activeTabKey,W=e.defaultActiveTabKey,R=e.tabBarExtraContent,k=e.hoverable,X=e.tabProps,J=void 0===X?{}:X,Y=jJ(e,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),w=r("card",C),H=t.createElement(rJ,{loading:!0,active:!0,paragraph:{rows:4},title:!1},S),N=void 0!==V,K=Ke(Ke({},J),(Ne(g={},N?"activeKey":"defaultActiveKey",N?V:W),Ne(g,"tabBarExtraContent",R),g)),F=B&&B.length?t.createElement(QJ,Ke({size:"large"},K,{className:"".concat(w,"-head-tabs"),onChange:function(t){var n;null===(n=e.onTabChange)||void 0===n||n.call(e,t)},items:B.map((function(e){var t;return{label:e.tab,key:e.key,disabled:null!==(t=e.disabled)&&void 0!==t&&t}}))})):null;(b||u||F)&&(l=t.createElement("div",{className:"".concat(w,"-head"),style:d},t.createElement("div",{className:"".concat(w,"-head-wrapper")},b&&t.createElement("div",{className:"".concat(w,"-head-title")},b),u&&t.createElement("div",{className:"".concat(w,"-extra")},u)),F));var x=v?t.createElement("div",{className:"".concat(w,"-cover")},v):null,E=t.createElement("div",{className:"".concat(w,"-body"),style:m},p?H:S),M=G&&G.length?t.createElement("ul",{className:"".concat(w,"-actions")},function(e){var n=e.map((function(n,g){return t.createElement("li",{style:{width:"".concat(100/e.length,"%")},key:"action-".concat(g)},t.createElement("span",null,n))}));return n}(G)):null,z=hn(Y,["onTabChange"]),L=y||i,U=xe()(w,(Ne(o={},"".concat(w,"-loading"),p),Ne(o,"".concat(w,"-bordered"),f),Ne(o,"".concat(w,"-hoverable"),k),Ne(o,"".concat(w,"-contain-grid"),function(){var n;return t.Children.forEach(e.children,(function(e){e&&e.type&&e.type===DJ&&(n=!0)})),n}()),Ne(o,"".concat(w,"-contain-tabs"),B&&B.length),Ne(o,"".concat(w,"-").concat(L),L),Ne(o,"".concat(w,"-type-").concat(Z),!!Z),Ne(o,"".concat(w,"-rtl"),"rtl"===I),o),c);return t.createElement("div",Ke({ref:n},z,{className:U}),l,x,E,M)})),OJ=function(e,t){var n={};for(var g in e)Object.prototype.hasOwnProperty.call(e,g)&&t.indexOf(g)<0&&(n[g]=e[g]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(g=Object.getOwnPropertySymbols(e);o<g.length;o++)t.indexOf(g[o])<0&&Object.prototype.propertyIsEnumerable.call(e,g[o])&&(n[g[o]]=e[g[o]])}return n},qJ=function(e){return t.createElement(Me,null,(function(n){var g=n.getPrefixCls,o=e.prefixCls,l=e.className,a=e.avatar,r=e.title,I=e.description,i=OJ(e,["prefixCls","className","avatar","title","description"]),C=g("card",o),c=xe()("".concat(C,"-meta"),l),u=a?t.createElement("div",{className:"".concat(C,"-meta-avatar")},a):null,s=r?t.createElement("div",{className:"".concat(C,"-meta-title")},r):null,d=I?t.createElement("div",{className:"".concat(C,"-meta-description")},I):null,A=s||d?t.createElement("div",{className:"".concat(C,"-meta-detail")},s,d):null;return t.createElement("div",Ke({},i,{className:c}),u,A)}))},_J=PJ;_J.Grid=DJ,_J.Meta=qJ;var $J=_J,eY=n(3261),tY=n.n(eY),nY={monday:0,tuesday:1,wednesday:2,thursday:3,friday:4,saturday:5,sunday:6},gY=[{title:"Meal",dataIndex:"meal",width:90},{title:"Rs",dataIndex:"cost",width:50},{title:"Menu",dataIndex:"menu"}];function oY(e){return lY.apply(this,arguments)}function lY(){return(lY=GC(ZC().mark((function e(t){var n;return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("selected items",t),e.next=3,Bu.post(window.APIROOT+"api/user/createOrder",{selected:t});case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aY(e,t){return rY.apply(this,arguments)}function rY(){return(rY=GC(ZC().mark((function e(t,n){return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bu.post(window.APIROOT+"api/user/checkOrder",t);case 2:e.sent.data?(fZ.success("Coupons bought!"),n(!0)):fZ.error("Failed to buy coupons!");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function IY(e){var n=tY()(),g=(0,t.useCallback)(GC(ZC().mark((function t(){var g,o;return ZC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oY(e.selected);case 2:g=t.sent,o={key:"rzp_test_RJ9Ub55f5Yl8ER",amount:g.amount.toString(),currency:"INR",name:"Mess Portal",order_id:g.id,handler:function(){var t=GC(ZC().mark((function t(n){return ZC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,aY(n,e.setBought);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},new n(o).open();case 6:case"end":return t.stop()}}),t)}))),[n,e]);return(0,mC.jsx)(kv,{disabled:e.disabled||!e.cost,onClick:g,className:TX,type:"primary",size:"large",icon:(0,mC.jsx)(wu,{}),children:"Continue with Payment"})}function iY(){var e=Z((0,t.useState)(0),2),n=e[0],g=e[1],o=Z((0,t.useState)(!0),2),l=o[0],a=o[1],r=Z((0,t.useState)(!1),2),I=r[0],i=r[1],C=Z((0,t.useState)([{day:"monday",breakfast:{text:"",cost:""},lunch:{text:"",cost:""},dinner:{text:"",cost:""}},{day:"tuesday",breakfast:{text:"",cost:""},lunch:{text:"",cost:""},dinner:{text:"",cost:""}},{day:"wednesday",breakfast:{text:"",cost:""},lunch:{text:"",cost:""},dinner:{text:"",cost:""}},{day:"thursday",breakfast:{text:"",cost:""},lunch:{text:"",cost:""},dinner:{text:"",cost:""}},{day:"friday",breakfast:{text:"",cost:""},lunch:{text:"",cost:""},dinner:{text:"",cost:""}},{day:"saturday",breakfast:{text:"",cost:""},lunch:{text:"",cost:""},dinner:{text:"",cost:""}},{day:"sunday",breakfast:{text:"",cost:""},lunch:{text:"",cost:""},dinner:{text:"",cost:""}}]),2),c=C[0],u=C[1],s=Z((0,t.useState)({monday:{breakfast:!1,lunch:!1,dinner:!1},tuesday:{breakfast:!1,lunch:!1,dinner:!1},wednesday:{breakfast:!1,lunch:!1,dinner:!1},thursday:{breakfast:!1,lunch:!1,dinner:!1},friday:{breakfast:!1,lunch:!1,dinner:!1},saturday:{breakfast:!1,lunch:!1,dinner:!1},sunday:{breakfast:!1,lunch:!1,dinner:!1}}),2),d=s[0],A=s[1];return(0,t.useEffect)((function(){for(var e=0,t=0,n=Object.entries(d);t<n.length;t++)for(var o=Z(n[t],2),l=o[0],a=o[1],r=0,I=Object.entries(a);r<I.length;r++){var i=Z(I[r],2),C=i[0];if(i[1])e+=Number(c[nY[l]][C].cost||0)}g(e)}),[c,d]),(0,t.useEffect)((function(){var e=function(){var e=GC(ZC().mark((function e(){var t,n,g,o,l,r,I;return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bu.get(window.APIROOT+"api/data/menu");case 3:return t=e.sent,e.next=6,Bu.get(window.APIROOT+"api/data/time");case 6:n=e.sent,g={},o=ig(n.data);try{for(o.s();!(l=o.n()).done;)r=l.value,g[r.meal]=Number(r.cost)}catch(i){o.e(i)}finally{o.f()}for(I=0;I<t.data.length;I++)t.data[I].breakfast={text:t.data[I].breakfast,cost:g.breakfast},t.data[I].lunch={text:t.data[I].lunch,cost:g.lunch},t.data[I].dinner={text:t.data[I].dinner,cost:g.dinner};u(t.data),a(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0),fZ.error("Failed to fetch menu from server");case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,t.useEffect)((function(){var e=function(){var e=GC(ZC().mark((function e(){var t;return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bu.get(window.APIROOT+"api/user/boughtNextWeek");case 3:t=e.sent,i(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),fZ.error("Failed to fetch data from server");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,mC.jsx)(mC.Fragment,{children:I?(0,mC.jsx)("div",{className:DX,children:(0,mC.jsx)($J,{title:"Coupons Bought",bordered:!1,style:{width:300},children:"You can buy coupons for a week, the week before. You have already bought coupons for the next week."})}):(0,mC.jsxs)("div",{className:QX,children:[c.map((function(e){return(0,mC.jsxs)(mC.Fragment,{children:[(0,mC.jsx)("h1",{children:e.day}),(0,mC.jsx)(HX,{loading:l,className:UX,pagination:!1,rowSelection:{type:"checkbox",onChange:function(t,n){A($e($e({},d),{},Ne({},e.day,{breakfast:t.includes("breakfast"),lunch:t.includes("lunch"),dinner:t.includes("dinner")})))}},columns:gY,dataSource:[{key:"breakfast",meal:"Breakfast",menu:e.breakfast.text,cost:e.breakfast.cost},{key:"lunch",meal:"Lunch",menu:e.lunch.text,cost:e.lunch.cost},{key:"dinner",meal:"Dinner",menu:e.dinner.text,cost:e.dinner.cost}]})]})})),(0,mC.jsxs)("h1",{children:["Total Cost: \u20b9",n]}),(0,mC.jsx)(IY,{selected:d,disabled:l,cost:n,setBought:i})]})})}var CY={card:"AdminPanel_card__oGw6J",adminBody:"AdminPanel_adminBody__uCLKq",table:"AdminPanel_table__KlxI0",buttons:"AdminPanel_buttons__GrvA3",userList:"AdminPanel_userList__H7q-j",userListIndex:"AdminPanel_userListIndex__acsf0"},cY={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},uY=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:cY}))};uY.displayName="SaveOutlined";var sY=t.forwardRef(uY);function dY(e,t){return e.map((function(n){return(0,mC.jsx)(HX,{className:CY.table,columns:[{title:n.day&&n.day.charAt(0).toUpperCase()+n.day.substring(1),dataIndex:"Type",key:"Type",colSpan:2,width:50,render:function(e){return{props:{style:{background:"#FAFAFA"}},children:(0,mC.jsx)("span",{style:{fontWeight:500,textTransform:"capitalize"},children:e})}}},{title:"",dataIndex:"Meal",key:"Meal",colSpan:0,width:300,render:function(g,o){return{props:{style:{padding:0}},children:(0,mC.jsx)(Dk,{bordered:!1,style:{height:"3rem"},defaultValue:g,onChange:function(g){for(var l=0;l<e.length;l++){var a=e;if(e[l].day===n.day){a[l][o.Type.toLowerCase()]=g.target.value,t(a),console.log(a);break}}}})}}}],dataSource:[{key:"1",Type:"Breakfast",Meal:n.breakfast},{key:"2",Type:"Lunch",Meal:n.lunch},{key:"3",Type:"Dinner",Meal:n.dinner}],pagination:!1,bordered:!0})}))}function AY(){console.log("YHA TAK AAGYE PENCHO");var e=Z((0,t.useState)([]),2),n=e[0],g=e[1],o=Z((0,t.useState)(!1),2),l=o[0],a=o[1],r=[{title:"Meal",dataIndex:"meal",key:"meal",render:function(e){return{props:{style:{background:"#FAFAFA"}},children:(0,mC.jsx)("span",{style:{fontWeight:500},children:e})}}},{title:"Rs",dataIndex:"cost",key:"cost",render:function(e,t){return{props:{style:{padding:0}},children:(0,mC.jsx)(Dk,{bordered:!1,style:{height:"3rem"},defaultValue:e,onChange:function(e){for(var o=0;o<n.length;o++){var l=n;if(n[o].meal===t.meal){l[o].cost=parseInt(e.target.value,10),g(l);break}}}})}},width:100},{title:"Time",dataIndex:"time",key:"time",render:function(e,t){return{props:{style:{padding:0}},children:(0,mC.jsx)(Dk,{bordered:!1,style:{height:"3rem"},defaultValue:e,onChange:function(e){for(var o=0;o<n.length;o++){var l=n;if(n[o].meal===t.meal){l[o].time=e.target.value,g(l);break}}}})}}}],I=function(){var e=GC(ZC().mark((function e(){var t;return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bu.get(window.APIROOT+"api/data/time");case 3:t=e.sent,g(t.data),console.log(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),fZ.error("Failed to fetch timing from server");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=GC(ZC().mark((function e(){return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,Bu.post(window.APIROOT+"api/admin/setTime",{times:n});case 4:fZ.success("Changes saved successfully"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),fZ.error("Failed to save changes");case 10:a(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){console.log("YHA TAK AAGYE PENCHO useeffect time wala"),I()}),[]);var C=Z((0,t.useState)([]),2),c=C[0],u=C[1],s=Z((0,t.useState)(!1),2),d=s[0],A=s[1],m=function(){var e=GC(ZC().mark((function e(){var t;return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bu.get(window.APIROOT+"api/data/menu");case 3:t=e.sent,u(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),fZ.error("Failed to fetch menu from server");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=GC(ZC().mark((function e(){return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),e.prev=1,e.next=4,Bu.post(window.APIROOT+"api/admin/setMenu",{menus:c});case 4:fZ.success("Changes saved successfully"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),fZ.error("Failed to save changes");case 10:A(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return(0,t.useEffect)((function(){console.log("YHA TAK AAGYE PENCHO menu wala"),m()}),[]),(0,mC.jsxs)(mC.Fragment,{children:[(0,mC.jsx)("div",{className:CY.adminBody,children:(0,mC.jsxs)($J,{size:"small",className:CY.card,children:[(0,mC.jsx)("h1",{children:"TIME & COST"}),(0,mC.jsx)(HX,{loading:!n.length,className:CY.table,columns:r,dataSource:n,pagination:!1,bordered:!0}),(0,mC.jsx)("div",{className:CY.buttons,children:(0,mC.jsx)(kv,{loading:l,className:CY.buy,type:"primary",size:"large",icon:(0,mC.jsx)(sY,{}),onClick:function(){return i()},children:"Save Changes"})})]})}),(0,mC.jsx)(AC.div,{layout:!0,className:CY.adminBody,children:c.length?(0,mC.jsxs)($J,{size:"small",className:CY.card,children:[(0,mC.jsx)("h1",{children:"MENU"}),dY(c,u),(0,mC.jsx)("div",{className:CY.buttons,children:(0,mC.jsx)(kv,{loading:d,className:CY.buy,type:"primary",size:"large",icon:(0,mC.jsx)(sY,{}),onClick:function(){return b()},children:"Save Changes"})})]}):null})]})}var mY="TotalMeals_menuBody__cYJNc",bY="TotalMeals_buttons__SkplM";function pY(){var e=Z((0,t.useState)(!0),2),n=e[0],g=e[1],o=Z((0,t.useState)([]),2),l=o[0],a=o[1],r=Z((0,t.useState)(!0),2),I=r[0],i=r[1];return(0,t.useEffect)((function(){var e=function(){var e=GC(ZC().mark((function e(){var t;return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.prev=1,e.next=4,Bu.post(window.APIROOT+"api/admin/meals",{week:n?"this":"next"});case 4:t=e.sent,a(t.data),console.log(t.data),i(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),fZ.error("Failed to fetch menu from server");case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[n]),(0,mC.jsxs)("div",{className:mY,children:[(0,mC.jsx)("div",{className:bY,children:(0,mC.jsxs)(Iv,{children:[(0,mC.jsx)(kv,{disabled:n,type:"primary",size:"large",onClick:function(){return g(!0)},children:"This Week"}),(0,mC.jsx)(kv,{disabled:!n,type:"primary",size:"large",onClick:function(){return g(!1)},children:"Next Week"})]})}),(0,mC.jsx)("h1",{children:n?"Total Meals This Week":"Total Meals Next Week"}),(0,mC.jsx)(FX,{loading:I,menu:l,mobile:!1})]})}var hY="ScanQR_qrreader__TuEsL",fY="ScanQR_card__tBU9I",yY="ScanQR_body__X-XEK",ZY="ScanQR_icon__IXjnN",vY="ScanQR_radio__lPe14",GY="ScanQR_buttons__zx8bj",BY=n(9008),SY={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M354 671h58.9c4.7 0 9.2-2.1 12.3-5.7L512 561.8l86.8 103.5c3 3.6 7.5 5.7 12.3 5.7H670c6.8 0 10.5-7.9 6.1-13.1L553.8 512l122.4-145.9c4.4-5.2.7-13.1-6.1-13.1h-58.9c-4.7 0-9.2 2.1-12.3 5.7L512 462.2l-86.8-103.5c-3-3.6-7.5-5.7-12.3-5.7H354c-6.8 0-10.5 7.9-6.1 13.1L470.2 512 347.9 657.9A7.95 7.95 0 00354 671z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"close-square",theme:"outlined"},VY=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:SY}))};VY.displayName="CloseSquareOutlined";var WY=t.forwardRef(VY),RY={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M433.1 657.7a31.8 31.8 0 0051.7 0l210.6-292c3.8-5.3 0-12.7-6.5-12.7H642c-10.2 0-19.9 4.9-25.9 13.3L459 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H315c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"check-square",theme:"outlined"},kY=function(e,n){return t.createElement(Cn,$e($e({},e),{},{ref:n,icon:RY}))};kY.displayName="CheckSquareOutlined";var XY=t.forwardRef(kY);function JY(){var e=Z((0,t.useState)(),2),n=e[0],g=e[1],o=Z((0,t.useState)(null),2),l=o[0],a=o[1],r=Z((0,t.useState)(null),2),I=r[0],i=r[1],C=function(){var e=GC(ZC().mark((function e(t){var n;return ZC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bu.post(window.APIROOT+"api/user/checkCoupon",t);case 3:n=e.sent,i(n.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),fZ.error("Failed to reach server to verify coupon"),g(null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,t.useEffect)((function(){if(n){var e=null===n||void 0===n?void 0:n.substring(0,4),t=null===n||void 0===n?void 0:n.substring(4,n.length),g=new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(new Date).toLowerCase();C({secret:e,email:t,day:g,type:l})}}),[n,l]),(0,mC.jsxs)(mC.Fragment,{children:[(0,mC.jsx)(BY.QrReader,{className:hY,onResult:function(e){e&&g(null===e||void 0===e?void 0:e.text)}}),(0,mC.jsx)("div",{className:yY,children:(0,mC.jsxs)($J,{className:fY,children:[(0,mC.jsx)("div",{className:vY,children:(0,mC.jsxs)(WW.Group,{buttonStyle:"solid",onChange:function(e){return a(e.target.value)},children:[(0,mC.jsx)(WW.Button,{value:"breakfast",children:"Breakfast"}),(0,mC.jsx)(WW.Button,{value:"lunch",children:"Lunch"}),(0,mC.jsx)(WW.Button,{value:"dinner",children:"Dinner"})]})}),l?(0,mC.jsxs)("h1",{children:["Scan QR Code for ",l]}):(0,mC.jsx)("h1",{children:"Select the meal"}),(0,mC.jsx)(AC.div,{layout:!0,children:l?(0,mC.jsx)(zC,{one2Two:null===I,one:(0,mC.jsx)(ih,{className:ZY}),two:(0,mC.jsx)(zC,{one2Two:!I,one:(0,mC.jsx)(WY,{className:ZY}),two:(0,mC.jsx)(XY,{className:ZY})})}):null}),(0,mC.jsx)("div",{className:GY,children:(0,mC.jsx)(kv,{disabled:!l,type:"primary",size:"large",icon:(0,mC.jsx)(UZ,{}),onClick:function(){g(null),i(null)},children:"Scan New"})})]})})]})}function YY(){return(0,t.useEffect)(yC,[]),(0,mC.jsx)("div",{className:"App",children:(0,mC.jsxs)(Wn,{style:{minHeight:"100vh"},children:[(0,mC.jsx)(vZ,{}),(0,mC.jsx)(Ye,{children:(0,mC.jsxs)(Xe,{element:(0,mC.jsx)(fC,{}),children:[(0,mC.jsx)(Xe,{path:"/",element:(0,mC.jsx)(EX,{})}),(0,mC.jsx)(Xe,{path:"/qr-code",element:(0,mC.jsx)(Xv,{})}),(0,mC.jsx)(Xe,{path:"/purchase-history",element:(0,mC.jsx)(LX,{})}),(0,mC.jsx)(Xe,{path:"/buy-coupons",element:(0,mC.jsx)(iY,{})}),(0,mC.jsx)(Xe,{path:"/admin",element:(0,mC.jsx)(AY,{})}),(0,mC.jsx)(Xe,{path:"/total-meals",element:(0,mC.jsx)(pY,{})}),(0,mC.jsx)(Xe,{path:"/scan-qr",element:(0,mC.jsx)(JY,{})})]})})]})})}window.APIROOT="http://localhost:4000/",o.createRoot(document.getElementById("root")).render((0,mC.jsx)(RC,{children:(0,mC.jsx)(t.StrictMode,{children:(0,mC.jsx)(YY,{})})}))}()}();
//# sourceMappingURL=main.50369ac6.js.map